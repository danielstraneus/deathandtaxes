function wd(u,A){const c=Object.create(null),g=u.split(",");for(let L=0;L<g.length;L++)c[g[L]]=!0;return A?L=>!!c[L.toLowerCase()]:L=>!!c[L]}const $x="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",eM=wd($x);function jm(u){return!!u||u===""}function xd(u){if(Mr(u)){const A={};for(let c=0;c<u.length;c++){const g=u[c],L=$n(g)?nM(g):xd(g);if(L)for(const l in L)A[l]=L[l]}return A}else{if($n(u))return u;if(Yn(u))return u}}const tM=/;(?![^(]*\))/g,rM=/:(.+)/;function nM(u){const A={};return u.split(tM).forEach(c=>{if(c){const g=c.split(rM);g.length>1&&(A[g[0].trim()]=g[1].trim())}}),A}function Md(u){let A="";if($n(u))A=u;else if(Mr(u))for(let c=0;c<u.length;c++){const g=Md(u[c]);g&&(A+=g+" ")}else if(Yn(u))for(const c in u)u[c]&&(A+=c+" ");return A.trim()}const ZS=u=>u==null?"":Mr(u)||Yn(u)&&(u.toString===qm||!Nr(u.toString))?JSON.stringify(u,Xm,2):String(u),Xm=(u,A)=>A&&A.__v_isRef?Xm(u,A.value):pl(A)?{[`Map(${A.size})`]:[...A.entries()].reduce((c,[g,L])=>(c[`${g} =>`]=L,c),{})}:Ym(A)?{[`Set(${A.size})`]:[...A.values()]}:Yn(A)&&!Mr(A)&&!Km(A)?String(A):A,En={},dl=[],Aa=()=>{},iM=()=>!1,aM=/^on[^a-z]/,gh=u=>aM.test(u),Td=u=>u.startsWith("onUpdate:"),oi=Object.assign,Sd=(u,A)=>{const c=u.indexOf(A);c>-1&&u.splice(c,1)},oM=Object.prototype.hasOwnProperty,an=(u,A)=>oM.call(u,A),Mr=Array.isArray,pl=u=>yh(u)==="[object Map]",Ym=u=>yh(u)==="[object Set]",Nr=u=>typeof u=="function",$n=u=>typeof u=="string",_d=u=>typeof u=="symbol",Yn=u=>u!==null&&typeof u=="object",Qm=u=>Yn(u)&&Nr(u.then)&&Nr(u.catch),qm=Object.prototype.toString,yh=u=>qm.call(u),sM=u=>yh(u).slice(8,-1),Km=u=>yh(u)==="[object Object]",Cd=u=>$n(u)&&u!=="NaN"&&u[0]!=="-"&&""+parseInt(u,10)===u,Ah=wd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bh=u=>{const A=Object.create(null);return c=>A[c]||(A[c]=u(c))},lM=/-(\w)/g,Ba=bh(u=>u.replace(lM,(A,c)=>c?c.toUpperCase():"")),uM=/\B([A-Z])/g,vl=bh(u=>u.replace(uM,"-$1").toLowerCase()),Eh=bh(u=>u.charAt(0).toUpperCase()+u.slice(1)),Ld=bh(u=>u?`on${Eh(u)}`:""),Lu=(u,A)=>!Object.is(u,A),wh=(u,A)=>{for(let c=0;c<u.length;c++)u[c](A)},xh=(u,A,c)=>{Object.defineProperty(u,A,{configurable:!0,enumerable:!1,value:c})},Mh=u=>{const A=parseFloat(u);return isNaN(A)?u:A};let Jm;const cM=()=>Jm||(Jm=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let gs;const Th=[];class hM{constructor(A=!1){this.active=!0,this.effects=[],this.cleanups=[],!A&&gs&&(this.parent=gs,this.index=(gs.scopes||(gs.scopes=[])).push(this)-1)}run(A){if(this.active)try{return this.on(),A()}finally{this.off()}}on(){this.active&&(Th.push(this),gs=this)}off(){this.active&&(Th.pop(),gs=Th[Th.length-1])}stop(A){if(this.active){if(this.effects.forEach(c=>c.stop()),this.cleanups.forEach(c=>c()),this.scopes&&this.scopes.forEach(c=>c.stop(!0)),this.parent&&!A){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.active=!1}}}function fM(u,A){A=A||gs,A&&A.active&&A.effects.push(u)}const Rd=u=>{const A=new Set(u);return A.w=0,A.n=0,A},Zm=u=>(u.w&Io)>0,$m=u=>(u.n&Io)>0,dM=({deps:u})=>{if(u.length)for(let A=0;A<u.length;A++)u[A].w|=Io},pM=u=>{const{deps:A}=u;if(A.length){let c=0;for(let g=0;g<A.length;g++){const L=A[g];Zm(L)&&!$m(L)?L.delete(u):A[c++]=L,L.w&=~Io,L.n&=~Io}A.length=c}},Pd=new WeakMap;let Ru=0,Io=1;const Dd=30,Pu=[];let ys;const As=Symbol(""),Od=Symbol("");class Id{constructor(A,c=null,g){this.fn=A,this.scheduler=c,this.active=!0,this.deps=[],fM(this,g)}run(){if(!this.active)return this.fn();if(!Pu.includes(this))try{return Pu.push(ys=this),vM(),Io=1<<++Ru,Ru<=Dd?dM(this):eg(this),this.fn()}finally{Ru<=Dd&&pM(this),Io=1<<--Ru,bs(),Pu.pop();const A=Pu.length;ys=A>0?Pu[A-1]:void 0}}stop(){this.active&&(eg(this),this.onStop&&this.onStop(),this.active=!1)}}function eg(u){const{deps:A}=u;if(A.length){for(let c=0;c<A.length;c++)A[c].delete(u);A.length=0}}let ml=!0;const Bd=[];function gl(){Bd.push(ml),ml=!1}function vM(){Bd.push(ml),ml=!0}function bs(){const u=Bd.pop();ml=u===void 0?!0:u}function Wi(u,A,c){if(!tg())return;let g=Pd.get(u);g||Pd.set(u,g=new Map);let L=g.get(c);L||g.set(c,L=Rd()),rg(L)}function tg(){return ml&&ys!==void 0}function rg(u,A){let c=!1;Ru<=Dd?$m(u)||(u.n|=Io,c=!Zm(u)):c=!u.has(ys),c&&(u.add(ys),ys.deps.push(u))}function io(u,A,c,g,L,l){const h=Pd.get(u);if(!h)return;let m=[];if(A==="clear")m=[...h.values()];else if(c==="length"&&Mr(u))h.forEach((y,d)=>{(d==="length"||d>=g)&&m.push(y)});else switch(c!==void 0&&m.push(h.get(c)),A){case"add":Mr(u)?Cd(c)&&m.push(h.get("length")):(m.push(h.get(As)),pl(u)&&m.push(h.get(Od)));break;case"delete":Mr(u)||(m.push(h.get(As)),pl(u)&&m.push(h.get(Od)));break;case"set":pl(u)&&m.push(h.get(As));break}if(m.length===1)m[0]&&Fd(m[0]);else{const y=[];for(const d of m)d&&y.push(...d);Fd(Rd(y))}}function Fd(u,A){for(const c of Mr(u)?u:[...u])(c!==ys||c.allowRecurse)&&(c.scheduler?c.scheduler():c.run())}const mM=wd("__proto__,__v_isRef,__isVue"),ng=new Set(Object.getOwnPropertyNames(Symbol).map(u=>Symbol[u]).filter(_d)),gM=Nd(),yM=Nd(!1,!0),AM=Nd(!0),ig=bM();function bM(){const u={};return["includes","indexOf","lastIndexOf"].forEach(A=>{u[A]=function(...c){const g=ln(this);for(let l=0,h=this.length;l<h;l++)Wi(g,"get",l+"");const L=g[A](...c);return L===-1||L===!1?g[A](...c.map(ln)):L}}),["push","pop","shift","unshift","splice"].forEach(A=>{u[A]=function(...c){gl();const g=ln(this)[A].apply(this,c);return bs(),g}}),u}function Nd(u=!1,A=!1){return function(g,L,l){if(L==="__v_isReactive")return!u;if(L==="__v_isReadonly")return u;if(L==="__v_raw"&&l===(u?A?FM:dg:A?fg:hg).get(g))return g;const h=Mr(g);if(!u&&h&&an(ig,L))return Reflect.get(ig,L,l);const m=Reflect.get(g,L,l);return(_d(L)?ng.has(L):mM(L))||(u||Wi(g,"get",L),A)?m:Ti(m)?!h||!Cd(L)?m.value:m:Yn(m)?u?pg(m):yl(m):m}}const EM=ag(),wM=ag(!0);function ag(u=!1){return function(c,g,L,l){let h=c[g];if(!u&&!Gd(L)&&(L=ln(L),h=ln(h),!Mr(c)&&Ti(h)&&!Ti(L)))return h.value=L,!0;const m=Mr(c)&&Cd(g)?Number(g)<c.length:an(c,g),y=Reflect.set(c,g,L,l);return c===ln(l)&&(m?Lu(L,h)&&io(c,"set",g,L):io(c,"add",g,L)),y}}function xM(u,A){const c=an(u,A);u[A];const g=Reflect.deleteProperty(u,A);return g&&c&&io(u,"delete",A,void 0),g}function MM(u,A){const c=Reflect.has(u,A);return(!_d(A)||!ng.has(A))&&Wi(u,"has",A),c}function TM(u){return Wi(u,"iterate",Mr(u)?"length":As),Reflect.ownKeys(u)}const og={get:gM,set:EM,deleteProperty:xM,has:MM,ownKeys:TM},SM={get:AM,set(u,A){return!0},deleteProperty(u,A){return!0}},_M=oi({},og,{get:yM,set:wM}),kd=u=>u,Sh=u=>Reflect.getPrototypeOf(u);function _h(u,A,c=!1,g=!1){u=u.__v_raw;const L=ln(u),l=ln(A);A!==l&&!c&&Wi(L,"get",A),!c&&Wi(L,"get",l);const{has:h}=Sh(L),m=g?kd:c?Vd:Du;if(h.call(L,A))return m(u.get(A));if(h.call(L,l))return m(u.get(l));u!==L&&u.get(A)}function Ch(u,A=!1){const c=this.__v_raw,g=ln(c),L=ln(u);return u!==L&&!A&&Wi(g,"has",u),!A&&Wi(g,"has",L),u===L?c.has(u):c.has(u)||c.has(L)}function Lh(u,A=!1){return u=u.__v_raw,!A&&Wi(ln(u),"iterate",As),Reflect.get(u,"size",u)}function sg(u){u=ln(u);const A=ln(this);return Sh(A).has.call(A,u)||(A.add(u),io(A,"add",u,u)),this}function lg(u,A){A=ln(A);const c=ln(this),{has:g,get:L}=Sh(c);let l=g.call(c,u);l||(u=ln(u),l=g.call(c,u));const h=L.call(c,u);return c.set(u,A),l?Lu(A,h)&&io(c,"set",u,A):io(c,"add",u,A),this}function ug(u){const A=ln(this),{has:c,get:g}=Sh(A);let L=c.call(A,u);L||(u=ln(u),L=c.call(A,u)),g&&g.call(A,u);const l=A.delete(u);return L&&io(A,"delete",u,void 0),l}function cg(){const u=ln(this),A=u.size!==0,c=u.clear();return A&&io(u,"clear",void 0,void 0),c}function Rh(u,A){return function(g,L){const l=this,h=l.__v_raw,m=ln(h),y=A?kd:u?Vd:Du;return!u&&Wi(m,"iterate",As),h.forEach((d,p)=>g.call(L,y(d),y(p),l))}}function Ph(u,A,c){return function(...g){const L=this.__v_raw,l=ln(L),h=pl(l),m=u==="entries"||u===Symbol.iterator&&h,y=u==="keys"&&h,d=L[u](...g),p=c?kd:A?Vd:Du;return!A&&Wi(l,"iterate",y?Od:As),{next(){const{value:v,done:b}=d.next();return b?{value:v,done:b}:{value:m?[p(v[0]),p(v[1])]:p(v),done:b}},[Symbol.iterator](){return this}}}}function Bo(u){return function(...A){return u==="delete"?!1:this}}function CM(){const u={get(l){return _h(this,l)},get size(){return Lh(this)},has:Ch,add:sg,set:lg,delete:ug,clear:cg,forEach:Rh(!1,!1)},A={get(l){return _h(this,l,!1,!0)},get size(){return Lh(this)},has:Ch,add:sg,set:lg,delete:ug,clear:cg,forEach:Rh(!1,!0)},c={get(l){return _h(this,l,!0)},get size(){return Lh(this,!0)},has(l){return Ch.call(this,l,!0)},add:Bo("add"),set:Bo("set"),delete:Bo("delete"),clear:Bo("clear"),forEach:Rh(!0,!1)},g={get(l){return _h(this,l,!0,!0)},get size(){return Lh(this,!0)},has(l){return Ch.call(this,l,!0)},add:Bo("add"),set:Bo("set"),delete:Bo("delete"),clear:Bo("clear"),forEach:Rh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{u[l]=Ph(l,!1,!1),c[l]=Ph(l,!0,!1),A[l]=Ph(l,!1,!0),g[l]=Ph(l,!0,!0)}),[u,c,A,g]}const[LM,RM,PM,DM]=CM();function Ud(u,A){const c=A?u?DM:PM:u?RM:LM;return(g,L,l)=>L==="__v_isReactive"?!u:L==="__v_isReadonly"?u:L==="__v_raw"?g:Reflect.get(an(c,L)&&L in g?c:g,L,l)}const OM={get:Ud(!1,!1)},IM={get:Ud(!1,!0)},BM={get:Ud(!0,!1)},hg=new WeakMap,fg=new WeakMap,dg=new WeakMap,FM=new WeakMap;function NM(u){switch(u){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kM(u){return u.__v_skip||!Object.isExtensible(u)?0:NM(sM(u))}function yl(u){return u&&u.__v_isReadonly?u:Hd(u,!1,og,OM,hg)}function UM(u){return Hd(u,!1,_M,IM,fg)}function pg(u){return Hd(u,!0,SM,BM,dg)}function Hd(u,A,c,g,L){if(!Yn(u)||u.__v_raw&&!(A&&u.__v_isReactive))return u;const l=L.get(u);if(l)return l;const h=kM(u);if(h===0)return u;const m=new Proxy(u,h===2?g:c);return L.set(u,m),m}function Al(u){return Gd(u)?Al(u.__v_raw):!!(u&&u.__v_isReactive)}function Gd(u){return!!(u&&u.__v_isReadonly)}function vg(u){return Al(u)||Gd(u)}function ln(u){const A=u&&u.__v_raw;return A?ln(A):u}function mg(u){return xh(u,"__v_skip",!0),u}const Du=u=>Yn(u)?yl(u):u,Vd=u=>Yn(u)?pg(u):u;function gg(u){tg()&&(u=ln(u),u.dep||(u.dep=Rd()),rg(u.dep))}function yg(u,A){u=ln(u),u.dep&&Fd(u.dep)}function Ti(u){return Boolean(u&&u.__v_isRef===!0)}function HM(u){return Ag(u,!1)}function GM(u){return Ag(u,!0)}function Ag(u,A){return Ti(u)?u:new VM(u,A)}class VM{constructor(A,c){this._shallow=c,this.dep=void 0,this.__v_isRef=!0,this._rawValue=c?A:ln(A),this._value=c?A:Du(A)}get value(){return gg(this),this._value}set value(A){A=this._shallow?A:ln(A),Lu(A,this._rawValue)&&(this._rawValue=A,this._value=this._shallow?A:Du(A),yg(this))}}function Ou(u){return Ti(u)?u.value:u}const zM={get:(u,A,c)=>Ou(Reflect.get(u,A,c)),set:(u,A,c,g)=>{const L=u[A];return Ti(L)&&!Ti(c)?(L.value=c,!0):Reflect.set(u,A,c,g)}};function bg(u){return Al(u)?u:new Proxy(u,zM)}class WM{constructor(A,c,g){this._setter=c,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new Id(A,()=>{this._dirty||(this._dirty=!0,yg(this))}),this.__v_isReadonly=g}get value(){const A=ln(this);return gg(A),A._dirty&&(A._dirty=!1,A._value=A.effect.run()),A._value}set value(A){this._setter(A)}}function Fa(u,A){let c,g;const L=Nr(u);return L?(c=u,g=Aa):(c=u.get,g=u.set),new WM(c,g,L||!g)}Promise.resolve();function jM(u,A,...c){const g=u.vnode.props||En;let L=c;const l=A.startsWith("update:"),h=l&&A.slice(7);if(h&&h in g){const p=`${h==="modelValue"?"model":h}Modifiers`,{number:v,trim:b}=g[p]||En;b?L=c.map(E=>E.trim()):v&&(L=c.map(Mh))}let m,y=g[m=Ld(A)]||g[m=Ld(Ba(A))];!y&&l&&(y=g[m=Ld(vl(A))]),y&&ta(y,u,6,L);const d=g[m+"Once"];if(d){if(!u.emitted)u.emitted={};else if(u.emitted[m])return;u.emitted[m]=!0,ta(d,u,6,L)}}function Eg(u,A,c=!1){const g=A.emitsCache,L=g.get(u);if(L!==void 0)return L;const l=u.emits;let h={},m=!1;if(!Nr(u)){const y=d=>{const p=Eg(d,A,!0);p&&(m=!0,oi(h,p))};!c&&A.mixins.length&&A.mixins.forEach(y),u.extends&&y(u.extends),u.mixins&&u.mixins.forEach(y)}return!l&&!m?(g.set(u,null),null):(Mr(l)?l.forEach(y=>h[y]=null):oi(h,l),g.set(u,h),h)}function zd(u,A){return!u||!gh(A)?!1:(A=A.slice(2).replace(/Once$/,""),an(u,A[0].toLowerCase()+A.slice(1))||an(u,vl(A))||an(u,A))}let $i=null,Dh=null;function Oh(u){const A=$i;return $i=u,Dh=u&&u.type.__scopeId||null,A}function $S(u){Dh=u}function e_(){Dh=null}function XM(u,A=$i,c){if(!A||u._n)return u;const g=(...L)=>{g._d&&Kg(-1);const l=Oh(A),h=u(...L);return Oh(l),g._d&&Kg(1),h};return g._n=!0,g._c=!0,g._d=!0,g}function Wd(u){const{type:A,vnode:c,proxy:g,withProxy:L,props:l,propsOptions:[h],slots:m,attrs:y,emit:d,render:p,renderCache:v,data:b,setupState:E,ctx:S,inheritAttrs:x}=u;let T,_;const D=Oh(u);try{if(c.shapeFlag&4){const I=L||g;T=Ua(p.call(I,I,v,l,E,b,S)),_=y}else{const I=A;T=Ua(I.length>1?I(l,{attrs:y,slots:m,emit:d}):I(l,null)),_=A.props?y:YM(y)}}catch(I){Iu.length=0,zh(I,u,1),T=ji(ka)}let C=T;if(_&&x!==!1){const I=Object.keys(_),{shapeFlag:B}=C;I.length&&B&(1|6)&&(h&&I.some(Td)&&(_=QM(_,h)),C=bl(C,_))}return c.dirs&&(C.dirs=C.dirs?C.dirs.concat(c.dirs):c.dirs),c.transition&&(C.transition=c.transition),T=C,Oh(D),T}const YM=u=>{let A;for(const c in u)(c==="class"||c==="style"||gh(c))&&((A||(A={}))[c]=u[c]);return A},QM=(u,A)=>{const c={};for(const g in u)(!Td(g)||!(g.slice(9)in A))&&(c[g]=u[g]);return c};function qM(u,A,c){const{props:g,children:L,component:l}=u,{props:h,children:m,patchFlag:y}=A,d=l.emitsOptions;if(A.dirs||A.transition)return!0;if(c&&y>=0){if(y&1024)return!0;if(y&16)return g?wg(g,h,d):!!h;if(y&8){const p=A.dynamicProps;for(let v=0;v<p.length;v++){const b=p[v];if(h[b]!==g[b]&&!zd(d,b))return!0}}}else return(L||m)&&(!m||!m.$stable)?!0:g===h?!1:g?h?wg(g,h,d):!0:!!h;return!1}function wg(u,A,c){const g=Object.keys(A);if(g.length!==Object.keys(u).length)return!0;for(let L=0;L<g.length;L++){const l=g[L];if(A[l]!==u[l]&&!zd(c,l))return!0}return!1}function KM({vnode:u,parent:A},c){for(;A&&A.subTree===u;)(u=A.vnode).el=c,A=A.parent}const JM=u=>u.__isSuspense;function ZM(u,A){A&&A.pendingBranch?Mr(u)?A.effects.push(...u):A.effects.push(u):q2(u)}function Ih(u,A){if(ei){let c=ei.provides;const g=ei.parent&&ei.parent.provides;g===c&&(c=ei.provides=Object.create(g)),c[u]=A}}function Fo(u,A,c=!1){const g=ei||$i;if(g){const L=g.parent==null?g.vnode.appContext&&g.vnode.appContext.provides:g.parent.provides;if(L&&u in L)return L[u];if(arguments.length>1)return c&&Nr(A)?A.call(g.proxy):A}}function $M(){const u={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Lg(()=>{u.isMounted=!0}),Rg(()=>{u.isUnmounting=!0}),u}const ea=[Function,Array],e2={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ea,onEnter:ea,onAfterEnter:ea,onEnterCancelled:ea,onBeforeLeave:ea,onLeave:ea,onAfterLeave:ea,onLeaveCancelled:ea,onBeforeAppear:ea,onAppear:ea,onAfterAppear:ea,onAppearCancelled:ea},setup(u,{slots:A}){const c=k2(),g=$M();let L;return()=>{const l=A.default&&Sg(A.default(),!0);if(!l||!l.length)return;const h=ln(u),{mode:m}=h,y=l[0];if(g.isLeaving)return Xd(y);const d=Tg(y);if(!d)return Xd(y);const p=jd(d,h,g,c);Yd(d,p);const v=c.subTree,b=v&&Tg(v);let E=!1;const{getTransitionKey:S}=d.type;if(S){const x=S();L===void 0?L=x:x!==L&&(L=x,E=!0)}if(b&&b.type!==ka&&(!Ts(d,b)||E)){const x=jd(b,h,g,c);if(Yd(b,x),m==="out-in")return g.isLeaving=!0,x.afterLeave=()=>{g.isLeaving=!1,c.update()},Xd(y);m==="in-out"&&d.type!==ka&&(x.delayLeave=(T,_,D)=>{const C=Mg(g,b);C[String(b.key)]=b,T._leaveCb=()=>{_(),T._leaveCb=void 0,delete p.delayedLeave},p.delayedLeave=D})}return y}}},xg=e2;function Mg(u,A){const{leavingVNodes:c}=u;let g=c.get(A.type);return g||(g=Object.create(null),c.set(A.type,g)),g}function jd(u,A,c,g){const{appear:L,mode:l,persisted:h=!1,onBeforeEnter:m,onEnter:y,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:v,onLeave:b,onAfterLeave:E,onLeaveCancelled:S,onBeforeAppear:x,onAppear:T,onAfterAppear:_,onAppearCancelled:D}=A,C=String(u.key),I=Mg(c,u),B=(W,oe)=>{W&&ta(W,g,9,oe)},U={mode:l,persisted:h,beforeEnter(W){let oe=m;if(!c.isMounted)if(L)oe=x||m;else return;W._leaveCb&&W._leaveCb(!0);const J=I[C];J&&Ts(u,J)&&J.el._leaveCb&&J.el._leaveCb(),B(oe,[W])},enter(W){let oe=y,J=d,le=p;if(!c.isMounted)if(L)oe=T||y,J=_||d,le=D||p;else return;let te=!1;const ue=W._enterCb=Y=>{te||(te=!0,Y?B(le,[W]):B(J,[W]),U.delayedLeave&&U.delayedLeave(),W._enterCb=void 0)};oe?(oe(W,ue),oe.length<=1&&ue()):ue()},leave(W,oe){const J=String(u.key);if(W._enterCb&&W._enterCb(!0),c.isUnmounting)return oe();B(v,[W]);let le=!1;const te=W._leaveCb=ue=>{le||(le=!0,oe(),ue?B(S,[W]):B(E,[W]),W._leaveCb=void 0,I[J]===u&&delete I[J])};I[J]=u,b?(b(W,te),b.length<=1&&te()):te()},clone(W){return jd(W,A,c,g)}};return U}function Xd(u){if(Bh(u))return u=bl(u),u.children=null,u}function Tg(u){return Bh(u)?u.children?u.children[0]:void 0:u}function Yd(u,A){u.shapeFlag&6&&u.component?Yd(u.component.subTree,A):u.shapeFlag&128?(u.ssContent.transition=A.clone(u.ssContent),u.ssFallback.transition=A.clone(u.ssFallback)):u.transition=A}function Sg(u,A=!1){let c=[],g=0;for(let L=0;L<u.length;L++){const l=u[L];l.type===Na?(l.patchFlag&128&&g++,c=c.concat(Sg(l.children,A))):(A||l.type!==ka)&&c.push(l)}if(g>1)for(let L=0;L<c.length;L++)c[L].patchFlag=-2;return c}function _g(u){return Nr(u)?{setup:u,name:u.name}:u}const Qd=u=>!!u.type.__asyncLoader,Bh=u=>u.type.__isKeepAlive;function t2(u,A){Cg(u,"a",A)}function r2(u,A){Cg(u,"da",A)}function Cg(u,A,c=ei){const g=u.__wdc||(u.__wdc=()=>{let L=c;for(;L;){if(L.isDeactivated)return;L=L.parent}return u()});if(Fh(A,g,c),c){let L=c.parent;for(;L&&L.parent;)Bh(L.parent.vnode)&&n2(g,A,c,L),L=L.parent}}function n2(u,A,c,g){const L=Fh(A,u,g,!0);Pg(()=>{Sd(g[A],L)},c)}function Fh(u,A,c=ei,g=!1){if(c){const L=c[u]||(c[u]=[]),l=A.__weh||(A.__weh=(...h)=>{if(c.isUnmounted)return;gl(),El(c);const m=ta(A,c,u,h);return Ss(),bs(),m});return g?L.unshift(l):L.push(l),l}}const ao=u=>(A,c=ei)=>(!Vh||u==="sp")&&Fh(u,A,c),i2=ao("bm"),Lg=ao("m"),a2=ao("bu"),o2=ao("u"),Rg=ao("bum"),Pg=ao("um"),s2=ao("sp"),l2=ao("rtg"),u2=ao("rtc");function c2(u,A=ei){Fh("ec",u,A)}let qd=!0;function h2(u){const A=Ig(u),c=u.proxy,g=u.ctx;qd=!1,A.beforeCreate&&Dg(A.beforeCreate,u,"bc");const{data:L,computed:l,methods:h,watch:m,provide:y,inject:d,created:p,beforeMount:v,mounted:b,beforeUpdate:E,updated:S,activated:x,deactivated:T,beforeDestroy:_,beforeUnmount:D,destroyed:C,unmounted:I,render:B,renderTracked:U,renderTriggered:W,errorCaptured:oe,serverPrefetch:J,expose:le,inheritAttrs:te,components:ue,directives:Y,filters:de}=A;if(d&&f2(d,g,null,u.appContext.config.unwrapInjectedRef),h)for(const Be in h){const je=h[Be];Nr(je)&&(g[Be]=je.bind(c))}if(L){const Be=L.call(c,c);Yn(Be)&&(u.data=yl(Be))}if(qd=!0,l)for(const Be in l){const je=l[Be],Ge=Nr(je)?je.bind(c,c):Nr(je.get)?je.get.bind(c,c):Aa,ct=!Nr(je)&&Nr(je.set)?je.set.bind(c):Aa,lt=Fa({get:Ge,set:ct});Object.defineProperty(g,Be,{enumerable:!0,configurable:!0,get:()=>lt.value,set:Et=>lt.value=Et})}if(m)for(const Be in m)Og(m[Be],g,c,Be);if(y){const Be=Nr(y)?y.call(c):y;Reflect.ownKeys(Be).forEach(je=>{Ih(je,Be[je])})}p&&Dg(p,u,"c");function xe(Be,je){Mr(je)?je.forEach(Ge=>Be(Ge.bind(c))):je&&Be(je.bind(c))}if(xe(i2,v),xe(Lg,b),xe(a2,E),xe(o2,S),xe(t2,x),xe(r2,T),xe(c2,oe),xe(u2,U),xe(l2,W),xe(Rg,D),xe(Pg,I),xe(s2,J),Mr(le))if(le.length){const Be=u.exposed||(u.exposed={});le.forEach(je=>{Object.defineProperty(Be,je,{get:()=>c[je],set:Ge=>c[je]=Ge})})}else u.exposed||(u.exposed={});B&&u.render===Aa&&(u.render=B),te!=null&&(u.inheritAttrs=te),ue&&(u.components=ue),Y&&(u.directives=Y)}function f2(u,A,c=Aa,g=!1){Mr(u)&&(u=Kd(u));for(const L in u){const l=u[L];let h;Yn(l)?"default"in l?h=Fo(l.from||L,l.default,!0):h=Fo(l.from||L):h=Fo(l),Ti(h)&&g?Object.defineProperty(A,L,{enumerable:!0,configurable:!0,get:()=>h.value,set:m=>h.value=m}):A[L]=h}}function Dg(u,A,c){ta(Mr(u)?u.map(g=>g.bind(A.proxy)):u.bind(A.proxy),A,c)}function Og(u,A,c,g){const L=g.includes(".")?d0(c,g):()=>c[g];if($n(u)){const l=A[u];Nr(l)&&Ml(L,l)}else if(Nr(u))Ml(L,u.bind(c));else if(Yn(u))if(Mr(u))u.forEach(l=>Og(l,A,c,g));else{const l=Nr(u.handler)?u.handler.bind(c):A[u.handler];Nr(l)&&Ml(L,l,u)}}function Ig(u){const A=u.type,{mixins:c,extends:g}=A,{mixins:L,optionsCache:l,config:{optionMergeStrategies:h}}=u.appContext,m=l.get(A);let y;return m?y=m:!L.length&&!c&&!g?y=A:(y={},L.length&&L.forEach(d=>Nh(y,d,h,!0)),Nh(y,A,h)),l.set(A,y),y}function Nh(u,A,c,g=!1){const{mixins:L,extends:l}=A;l&&Nh(u,l,c,!0),L&&L.forEach(h=>Nh(u,h,c,!0));for(const h in A)if(!(g&&h==="expose")){const m=d2[h]||c&&c[h];u[h]=m?m(u[h],A[h]):A[h]}return u}const d2={data:Bg,props:Es,emits:Es,methods:Es,computed:Es,beforeCreate:Si,created:Si,beforeMount:Si,mounted:Si,beforeUpdate:Si,updated:Si,beforeDestroy:Si,beforeUnmount:Si,destroyed:Si,unmounted:Si,activated:Si,deactivated:Si,errorCaptured:Si,serverPrefetch:Si,components:Es,directives:Es,watch:v2,provide:Bg,inject:p2};function Bg(u,A){return A?u?function(){return oi(Nr(u)?u.call(this,this):u,Nr(A)?A.call(this,this):A)}:A:u}function p2(u,A){return Es(Kd(u),Kd(A))}function Kd(u){if(Mr(u)){const A={};for(let c=0;c<u.length;c++)A[u[c]]=u[c];return A}return u}function Si(u,A){return u?[...new Set([].concat(u,A))]:A}function Es(u,A){return u?oi(oi(Object.create(null),u),A):A}function v2(u,A){if(!u)return A;if(!A)return u;const c=oi(Object.create(null),u);for(const g in A)c[g]=Si(u[g],A[g]);return c}function m2(u,A,c,g=!1){const L={},l={};xh(l,Uh,1),u.propsDefaults=Object.create(null),Fg(u,A,L,l);for(const h in u.propsOptions[0])h in L||(L[h]=void 0);c?u.props=g?L:UM(L):u.type.props?u.props=L:u.props=l,u.attrs=l}function g2(u,A,c,g){const{props:L,attrs:l,vnode:{patchFlag:h}}=u,m=ln(L),[y]=u.propsOptions;let d=!1;if((g||h>0)&&!(h&16)){if(h&8){const p=u.vnode.dynamicProps;for(let v=0;v<p.length;v++){let b=p[v];const E=A[b];if(y)if(an(l,b))E!==l[b]&&(l[b]=E,d=!0);else{const S=Ba(b);L[S]=Jd(y,m,S,E,u,!1)}else E!==l[b]&&(l[b]=E,d=!0)}}}else{Fg(u,A,L,l)&&(d=!0);let p;for(const v in m)(!A||!an(A,v)&&((p=vl(v))===v||!an(A,p)))&&(y?c&&(c[v]!==void 0||c[p]!==void 0)&&(L[v]=Jd(y,m,v,void 0,u,!0)):delete L[v]);if(l!==m)for(const v in l)(!A||!an(A,v))&&(delete l[v],d=!0)}d&&io(u,"set","$attrs")}function Fg(u,A,c,g){const[L,l]=u.propsOptions;let h=!1,m;if(A)for(let y in A){if(Ah(y))continue;const d=A[y];let p;L&&an(L,p=Ba(y))?!l||!l.includes(p)?c[p]=d:(m||(m={}))[p]=d:zd(u.emitsOptions,y)||(!(y in g)||d!==g[y])&&(g[y]=d,h=!0)}if(l){const y=ln(c),d=m||En;for(let p=0;p<l.length;p++){const v=l[p];c[v]=Jd(L,y,v,d[v],u,!an(d,v))}}return h}function Jd(u,A,c,g,L,l){const h=u[c];if(h!=null){const m=an(h,"default");if(m&&g===void 0){const y=h.default;if(h.type!==Function&&Nr(y)){const{propsDefaults:d}=L;c in d?g=d[c]:(El(L),g=d[c]=y.call(null,A),Ss())}else g=y}h[0]&&(l&&!m?g=!1:h[1]&&(g===""||g===vl(c))&&(g=!0))}return g}function Ng(u,A,c=!1){const g=A.propsCache,L=g.get(u);if(L)return L;const l=u.props,h={},m=[];let y=!1;if(!Nr(u)){const p=v=>{y=!0;const[b,E]=Ng(v,A,!0);oi(h,b),E&&m.push(...E)};!c&&A.mixins.length&&A.mixins.forEach(p),u.extends&&p(u.extends),u.mixins&&u.mixins.forEach(p)}if(!l&&!y)return g.set(u,dl),dl;if(Mr(l))for(let p=0;p<l.length;p++){const v=Ba(l[p]);kg(v)&&(h[v]=En)}else if(l)for(const p in l){const v=Ba(p);if(kg(v)){const b=l[p],E=h[v]=Mr(b)||Nr(b)?{type:b}:b;if(E){const S=Gg(Boolean,E.type),x=Gg(String,E.type);E[0]=S>-1,E[1]=x<0||S<x,(S>-1||an(E,"default"))&&m.push(v)}}}const d=[h,m];return g.set(u,d),d}function kg(u){return u[0]!=="$"}function Ug(u){const A=u&&u.toString().match(/^\s*function (\w+)/);return A?A[1]:u===null?"null":""}function Hg(u,A){return Ug(u)===Ug(A)}function Gg(u,A){return Mr(A)?A.findIndex(c=>Hg(c,u)):Nr(A)&&Hg(A,u)?0:-1}const Vg=u=>u[0]==="_"||u==="$stable",Zd=u=>Mr(u)?u.map(Ua):[Ua(u)],y2=(u,A,c)=>{const g=XM((...L)=>Zd(A(...L)),c);return g._c=!1,g},zg=(u,A,c)=>{const g=u._ctx;for(const L in u){if(Vg(L))continue;const l=u[L];if(Nr(l))A[L]=y2(L,l,g);else if(l!=null){const h=Zd(l);A[L]=()=>h}}},Wg=(u,A)=>{const c=Zd(A);u.slots.default=()=>c},A2=(u,A)=>{if(u.vnode.shapeFlag&32){const c=A._;c?(u.slots=ln(A),xh(A,"_",c)):zg(A,u.slots={})}else u.slots={},A&&Wg(u,A);xh(u.slots,Uh,1)},b2=(u,A,c)=>{const{vnode:g,slots:L}=u;let l=!0,h=En;if(g.shapeFlag&32){const m=A._;m?c&&m===1?l=!1:(oi(L,A),!c&&m===1&&delete L._):(l=!A.$stable,zg(A,L)),h=A}else A&&(Wg(u,A),h={default:1});if(l)for(const m in L)!Vg(m)&&!(m in h)&&delete L[m]};function t_(u,A){const c=$i;if(c===null)return u;const g=c.proxy,L=u.dirs||(u.dirs=[]);for(let l=0;l<A.length;l++){let[h,m,y,d=En]=A[l];Nr(h)&&(h={mounted:h,updated:h}),h.deep&&_s(m),L.push({dir:h,instance:g,value:m,oldValue:void 0,arg:y,modifiers:d})}return u}function ws(u,A,c,g){const L=u.dirs,l=A&&A.dirs;for(let h=0;h<L.length;h++){const m=L[h];l&&(m.oldValue=l[h].value);let y=m.dir[g];y&&(gl(),ta(y,c,8,[u.el,m,u,A]),bs())}}function jg(){return{app:null,config:{isNativeTag:iM,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let E2=0;function w2(u,A){return function(g,L=null){L!=null&&!Yn(L)&&(L=null);const l=jg(),h=new Set;let m=!1;const y=l.app={_uid:E2++,_component:g,_props:L,_container:null,_context:l,_instance:null,version:J2,get config(){return l.config},set config(d){},use(d,...p){return h.has(d)||(d&&Nr(d.install)?(h.add(d),d.install(y,...p)):Nr(d)&&(h.add(d),d(y,...p))),y},mixin(d){return l.mixins.includes(d)||l.mixins.push(d),y},component(d,p){return p?(l.components[d]=p,y):l.components[d]},directive(d,p){return p?(l.directives[d]=p,y):l.directives[d]},mount(d,p,v){if(!m){const b=ji(g,L);return b.appContext=l,p&&A?A(b,d):u(b,d,v),m=!0,y._container=d,d.__vue_app__=y,op(b.component)||b.component.proxy}},unmount(){m&&(u(null,y._container),delete y._container.__vue_app__)},provide(d,p){return l.provides[d]=p,y}};return y}}function $d(u,A,c,g,L=!1){if(Mr(u)){u.forEach((b,E)=>$d(b,A&&(Mr(A)?A[E]:A),c,g,L));return}if(Qd(g)&&!L)return;const l=g.shapeFlag&4?op(g.component)||g.component.proxy:g.el,h=L?null:l,{i:m,r:y}=u,d=A&&A.r,p=m.refs===En?m.refs={}:m.refs,v=m.setupState;if(d!=null&&d!==y&&($n(d)?(p[d]=null,an(v,d)&&(v[d]=null)):Ti(d)&&(d.value=null)),Nr(y))ko(y,m,12,[h,p]);else{const b=$n(y),E=Ti(y);if(b||E){const S=()=>{if(u.f){const x=b?p[y]:y.value;L?Mr(x)&&Sd(x,l):Mr(x)?x.includes(l)||x.push(l):b?p[y]=[l]:(y.value=[l],u.k&&(p[u.k]=y.value))}else b?(p[y]=h,an(v,y)&&(v[y]=h)):Ti(y)&&(y.value=h,u.k&&(p[u.k]=h))};h?(S.id=-1,Ci(S,c)):S()}}}const Ci=ZM;function x2(u){return M2(u)}function M2(u,A){const c=cM();c.__VUE__=!0;const{insert:g,remove:L,patchProp:l,createElement:h,createText:m,createComment:y,setText:d,setElementText:p,parentNode:v,nextSibling:b,setScopeId:E=Aa,cloneNode:S,insertStaticContent:x}=u,T=(Q,K,ae,ge=null,me=null,Ee=null,Pe=!1,ke=null,Ve=!!K.dynamicChildren)=>{if(Q===K)return;Q&&!Ts(Q,K)&&(ge=Tt(Q),Ct(Q,me,Ee,!0),Q=null),K.patchFlag===-2&&(Ve=!1,K.dynamicChildren=null);const{type:ze,ref:$,shapeFlag:V}=K;switch(ze){case tp:_(Q,K,ae,ge);break;case ka:D(Q,K,ae,ge);break;case rp:Q==null&&C(K,ae,ge,Pe);break;case Na:Y(Q,K,ae,ge,me,Ee,Pe,ke,Ve);break;default:V&1?U(Q,K,ae,ge,me,Ee,Pe,ke,Ve):V&6?de(Q,K,ae,ge,me,Ee,Pe,ke,Ve):(V&64||V&128)&&ze.process(Q,K,ae,ge,me,Ee,Pe,ke,Ve,_t)}$!=null&&me&&$d($,Q&&Q.ref,Ee,K||Q,!K)},_=(Q,K,ae,ge)=>{if(Q==null)g(K.el=m(K.children),ae,ge);else{const me=K.el=Q.el;K.children!==Q.children&&d(me,K.children)}},D=(Q,K,ae,ge)=>{Q==null?g(K.el=y(K.children||""),ae,ge):K.el=Q.el},C=(Q,K,ae,ge)=>{[Q.el,Q.anchor]=x(Q.children,K,ae,ge)},I=({el:Q,anchor:K},ae,ge)=>{let me;for(;Q&&Q!==K;)me=b(Q),g(Q,ae,ge),Q=me;g(K,ae,ge)},B=({el:Q,anchor:K})=>{let ae;for(;Q&&Q!==K;)ae=b(Q),L(Q),Q=ae;L(K)},U=(Q,K,ae,ge,me,Ee,Pe,ke,Ve)=>{Pe=Pe||K.type==="svg",Q==null?W(K,ae,ge,me,Ee,Pe,ke,Ve):le(Q,K,me,Ee,Pe,ke,Ve)},W=(Q,K,ae,ge,me,Ee,Pe,ke)=>{let Ve,ze;const{type:$,props:V,shapeFlag:z,transition:fe,patchFlag:Te,dirs:Qe}=Q;if(Q.el&&S!==void 0&&Te===-1)Ve=Q.el=S(Q.el);else{if(Ve=Q.el=h(Q.type,Ee,V&&V.is,V),z&8?p(Ve,Q.children):z&16&&J(Q.children,Ve,null,ge,me,Ee&&$!=="foreignObject",Pe,ke),Qe&&ws(Q,null,ge,"created"),V){for(const Mt in V)Mt!=="value"&&!Ah(Mt)&&l(Ve,Mt,null,V[Mt],Ee,Q.children,ge,me,$e);"value"in V&&l(Ve,"value",null,V.value),(ze=V.onVnodeBeforeMount)&&Ha(ze,ge,Q)}oe(Ve,Q,Q.scopeId,Pe,ge)}Qe&&ws(Q,null,ge,"beforeMount");const Je=(!me||me&&!me.pendingBranch)&&fe&&!fe.persisted;Je&&fe.beforeEnter(Ve),g(Ve,K,ae),((ze=V&&V.onVnodeMounted)||Je||Qe)&&Ci(()=>{ze&&Ha(ze,ge,Q),Je&&fe.enter(Ve),Qe&&ws(Q,null,ge,"mounted")},me)},oe=(Q,K,ae,ge,me)=>{if(ae&&E(Q,ae),ge)for(let Ee=0;Ee<ge.length;Ee++)E(Q,ge[Ee]);if(me){let Ee=me.subTree;if(K===Ee){const Pe=me.vnode;oe(Q,Pe,Pe.scopeId,Pe.slotScopeIds,me.parent)}}},J=(Q,K,ae,ge,me,Ee,Pe,ke,Ve=0)=>{for(let ze=Ve;ze<Q.length;ze++){const $=Q[ze]=ke?No(Q[ze]):Ua(Q[ze]);T(null,$,K,ae,ge,me,Ee,Pe,ke)}},le=(Q,K,ae,ge,me,Ee,Pe)=>{const ke=K.el=Q.el;let{patchFlag:Ve,dynamicChildren:ze,dirs:$}=K;Ve|=Q.patchFlag&16;const V=Q.props||En,z=K.props||En;let fe;ae&&xs(ae,!1),(fe=z.onVnodeBeforeUpdate)&&Ha(fe,ae,K,Q),$&&ws(K,Q,ae,"beforeUpdate"),ae&&xs(ae,!0);const Te=me&&K.type!=="foreignObject";if(ze?te(Q.dynamicChildren,ze,ke,ae,ge,Te,Ee):Pe||Ge(Q,K,ke,null,ae,ge,Te,Ee,!1),Ve>0){if(Ve&16)ue(ke,K,V,z,ae,ge,me);else if(Ve&2&&V.class!==z.class&&l(ke,"class",null,z.class,me),Ve&4&&l(ke,"style",V.style,z.style,me),Ve&8){const Qe=K.dynamicProps;for(let Je=0;Je<Qe.length;Je++){const Mt=Qe[Je],Vt=V[Mt],or=z[Mt];(or!==Vt||Mt==="value")&&l(ke,Mt,Vt,or,me,Q.children,ae,ge,$e)}}Ve&1&&Q.children!==K.children&&p(ke,K.children)}else!Pe&&ze==null&&ue(ke,K,V,z,ae,ge,me);((fe=z.onVnodeUpdated)||$)&&Ci(()=>{fe&&Ha(fe,ae,K,Q),$&&ws(K,Q,ae,"updated")},ge)},te=(Q,K,ae,ge,me,Ee,Pe)=>{for(let ke=0;ke<K.length;ke++){const Ve=Q[ke],ze=K[ke],$=Ve.el&&(Ve.type===Na||!Ts(Ve,ze)||Ve.shapeFlag&(6|64))?v(Ve.el):ae;T(Ve,ze,$,null,ge,me,Ee,Pe,!0)}},ue=(Q,K,ae,ge,me,Ee,Pe)=>{if(ae!==ge){for(const ke in ge){if(Ah(ke))continue;const Ve=ge[ke],ze=ae[ke];Ve!==ze&&ke!=="value"&&l(Q,ke,ze,Ve,Pe,K.children,me,Ee,$e)}if(ae!==En)for(const ke in ae)!Ah(ke)&&!(ke in ge)&&l(Q,ke,ae[ke],null,Pe,K.children,me,Ee,$e);"value"in ge&&l(Q,"value",ae.value,ge.value)}},Y=(Q,K,ae,ge,me,Ee,Pe,ke,Ve)=>{const ze=K.el=Q?Q.el:m(""),$=K.anchor=Q?Q.anchor:m("");let{patchFlag:V,dynamicChildren:z,slotScopeIds:fe}=K;fe&&(ke=ke?ke.concat(fe):fe),Q==null?(g(ze,ae,ge),g($,ae,ge),J(K.children,ae,$,me,Ee,Pe,ke,Ve)):V>0&&V&64&&z&&Q.dynamicChildren?(te(Q.dynamicChildren,z,ae,me,Ee,Pe,ke),(K.key!=null||me&&K===me.subTree)&&Xg(Q,K,!0)):Ge(Q,K,ae,$,me,Ee,Pe,ke,Ve)},de=(Q,K,ae,ge,me,Ee,Pe,ke,Ve)=>{K.slotScopeIds=ke,Q==null?K.shapeFlag&512?me.ctx.activate(K,ae,ge,Pe,Ve):ne(K,ae,ge,me,Ee,Pe,Ve):xe(Q,K,Ve)},ne=(Q,K,ae,ge,me,Ee,Pe)=>{const ke=Q.component=N2(Q,ge,me);if(Bh(Q)&&(ke.ctx.renderer=_t),U2(ke),ke.asyncDep){if(me&&me.registerDep(ke,Be),!Q.el){const Ve=ke.subTree=ji(ka);D(null,Ve,K,ae)}return}Be(ke,Q,K,ae,me,Ee,Pe)},xe=(Q,K,ae)=>{const ge=K.component=Q.component;if(qM(Q,K,ae))if(ge.asyncDep&&!ge.asyncResolved){je(ge,K,ae);return}else ge.next=K,Y2(ge.update),ge.update();else K.component=Q.component,K.el=Q.el,ge.vnode=K},Be=(Q,K,ae,ge,me,Ee,Pe)=>{const ke=()=>{if(Q.isMounted){let{next:$,bu:V,u:z,parent:fe,vnode:Te}=Q,Qe=$,Je;xs(Q,!1),$?($.el=Te.el,je(Q,$,Pe)):$=Te,V&&wh(V),(Je=$.props&&$.props.onVnodeBeforeUpdate)&&Ha(Je,fe,$,Te),xs(Q,!0);const Mt=Wd(Q),Vt=Q.subTree;Q.subTree=Mt,T(Vt,Mt,v(Vt.el),Tt(Vt),Q,me,Ee),$.el=Mt.el,Qe===null&&KM(Q,Mt.el),z&&Ci(z,me),(Je=$.props&&$.props.onVnodeUpdated)&&Ci(()=>Ha(Je,fe,$,Te),me)}else{let $;const{el:V,props:z}=K,{bm:fe,m:Te,parent:Qe}=Q,Je=Qd(K);if(xs(Q,!1),fe&&wh(fe),!Je&&($=z&&z.onVnodeBeforeMount)&&Ha($,Qe,K),xs(Q,!0),V&&ce){const Mt=()=>{Q.subTree=Wd(Q),ce(V,Q.subTree,Q,me,null)};Je?K.type.__asyncLoader().then(()=>!Q.isUnmounted&&Mt()):Mt()}else{const Mt=Q.subTree=Wd(Q);T(null,Mt,ae,ge,Q,me,Ee),K.el=Mt.el}if(Te&&Ci(Te,me),!Je&&($=z&&z.onVnodeMounted)){const Mt=K;Ci(()=>Ha($,Qe,Mt),me)}K.shapeFlag&256&&Q.a&&Ci(Q.a,me),Q.isMounted=!0,K=ae=ge=null}},Ve=Q.effect=new Id(ke,()=>o0(Q.update),Q.scope),ze=Q.update=Ve.run.bind(Ve);ze.id=Q.uid,xs(Q,!0),ze()},je=(Q,K,ae)=>{K.component=Q;const ge=Q.vnode.props;Q.vnode=K,Q.next=null,g2(Q,K.props,ge,ae),b2(Q,K.children,ae),gl(),cp(void 0,Q.update),bs()},Ge=(Q,K,ae,ge,me,Ee,Pe,ke,Ve=!1)=>{const ze=Q&&Q.children,$=Q?Q.shapeFlag:0,V=K.children,{patchFlag:z,shapeFlag:fe}=K;if(z>0){if(z&128){lt(ze,V,ae,ge,me,Ee,Pe,ke,Ve);return}else if(z&256){ct(ze,V,ae,ge,me,Ee,Pe,ke,Ve);return}}fe&8?($&16&&$e(ze,me,Ee),V!==ze&&p(ae,V)):$&16?fe&16?lt(ze,V,ae,ge,me,Ee,Pe,ke,Ve):$e(ze,me,Ee,!0):($&8&&p(ae,""),fe&16&&J(V,ae,ge,me,Ee,Pe,ke,Ve))},ct=(Q,K,ae,ge,me,Ee,Pe,ke,Ve)=>{Q=Q||dl,K=K||dl;const ze=Q.length,$=K.length,V=Math.min(ze,$);let z;for(z=0;z<V;z++){const fe=K[z]=Ve?No(K[z]):Ua(K[z]);T(Q[z],fe,ae,null,me,Ee,Pe,ke,Ve)}ze>$?$e(Q,me,Ee,!0,!1,V):J(K,ae,ge,me,Ee,Pe,ke,Ve,V)},lt=(Q,K,ae,ge,me,Ee,Pe,ke,Ve)=>{let ze=0;const $=K.length;let V=Q.length-1,z=$-1;for(;ze<=V&&ze<=z;){const fe=Q[ze],Te=K[ze]=Ve?No(K[ze]):Ua(K[ze]);if(Ts(fe,Te))T(fe,Te,ae,null,me,Ee,Pe,ke,Ve);else break;ze++}for(;ze<=V&&ze<=z;){const fe=Q[V],Te=K[z]=Ve?No(K[z]):Ua(K[z]);if(Ts(fe,Te))T(fe,Te,ae,null,me,Ee,Pe,ke,Ve);else break;V--,z--}if(ze>V){if(ze<=z){const fe=z+1,Te=fe<$?K[fe].el:ge;for(;ze<=z;)T(null,K[ze]=Ve?No(K[ze]):Ua(K[ze]),ae,Te,me,Ee,Pe,ke,Ve),ze++}}else if(ze>z)for(;ze<=V;)Ct(Q[ze],me,Ee,!0),ze++;else{const fe=ze,Te=ze,Qe=new Map;for(ze=Te;ze<=z;ze++){const Qt=K[ze]=Ve?No(K[ze]):Ua(K[ze]);Qt.key!=null&&Qe.set(Qt.key,ze)}let Je,Mt=0;const Vt=z-Te+1;let or=!1,Lr=0;const Ht=new Array(Vt);for(ze=0;ze<Vt;ze++)Ht[ze]=0;for(ze=fe;ze<=V;ze++){const Qt=Q[ze];if(Mt>=Vt){Ct(Qt,me,Ee,!0);continue}let Vr;if(Qt.key!=null)Vr=Qe.get(Qt.key);else for(Je=Te;Je<=z;Je++)if(Ht[Je-Te]===0&&Ts(Qt,K[Je])){Vr=Je;break}Vr===void 0?Ct(Qt,me,Ee,!0):(Ht[Vr-Te]=ze+1,Vr>=Lr?Lr=Vr:or=!0,T(Qt,K[Vr],ae,null,me,Ee,Pe,ke,Ve),Mt++)}const Xr=or?T2(Ht):dl;for(Je=Xr.length-1,ze=Vt-1;ze>=0;ze--){const Qt=Te+ze,Vr=K[Qt],Rn=Qt+1<$?K[Qt+1].el:ge;Ht[ze]===0?T(null,Vr,ae,Rn,me,Ee,Pe,ke,Ve):or&&(Je<0||ze!==Xr[Je]?Et(Vr,ae,Rn,2):Je--)}}},Et=(Q,K,ae,ge,me=null)=>{const{el:Ee,type:Pe,transition:ke,children:Ve,shapeFlag:ze}=Q;if(ze&6){Et(Q.component.subTree,K,ae,ge);return}if(ze&128){Q.suspense.move(K,ae,ge);return}if(ze&64){Pe.move(Q,K,ae,_t);return}if(Pe===Na){g(Ee,K,ae);for(let V=0;V<Ve.length;V++)Et(Ve[V],K,ae,ge);g(Q.anchor,K,ae);return}if(Pe===rp){I(Q,K,ae);return}if(ge!==2&&ze&1&&ke)if(ge===0)ke.beforeEnter(Ee),g(Ee,K,ae),Ci(()=>ke.enter(Ee),me);else{const{leave:V,delayLeave:z,afterLeave:fe}=ke,Te=()=>g(Ee,K,ae),Qe=()=>{V(Ee,()=>{Te(),fe&&fe()})};z?z(Ee,Te,Qe):Qe()}else g(Ee,K,ae)},Ct=(Q,K,ae,ge=!1,me=!1)=>{const{type:Ee,props:Pe,ref:ke,children:Ve,dynamicChildren:ze,shapeFlag:$,patchFlag:V,dirs:z}=Q;if(ke!=null&&$d(ke,null,ae,Q,!0),$&256){K.ctx.deactivate(Q);return}const fe=$&1&&z,Te=!Qd(Q);let Qe;if(Te&&(Qe=Pe&&Pe.onVnodeBeforeUnmount)&&Ha(Qe,K,Q),$&6)pt(Q.component,ae,ge);else{if($&128){Q.suspense.unmount(ae,ge);return}fe&&ws(Q,null,K,"beforeUnmount"),$&64?Q.type.remove(Q,K,ae,me,_t,ge):ze&&(Ee!==Na||V>0&&V&64)?$e(ze,K,ae,!1,!0):(Ee===Na&&V&(128|256)||!me&&$&16)&&$e(Ve,K,ae),ge&&jt(Q)}(Te&&(Qe=Pe&&Pe.onVnodeUnmounted)||fe)&&Ci(()=>{Qe&&Ha(Qe,K,Q),fe&&ws(Q,null,K,"unmounted")},ae)},jt=Q=>{const{type:K,el:ae,anchor:ge,transition:me}=Q;if(K===Na){tt(ae,ge);return}if(K===rp){B(Q);return}const Ee=()=>{L(ae),me&&!me.persisted&&me.afterLeave&&me.afterLeave()};if(Q.shapeFlag&1&&me&&!me.persisted){const{leave:Pe,delayLeave:ke}=me,Ve=()=>Pe(ae,Ee);ke?ke(Q.el,Ee,Ve):Ve()}else Ee()},tt=(Q,K)=>{let ae;for(;Q!==K;)ae=b(Q),L(Q),Q=ae;L(K)},pt=(Q,K,ae)=>{const{bum:ge,scope:me,update:Ee,subTree:Pe,um:ke}=Q;ge&&wh(ge),me.stop(),Ee&&(Ee.active=!1,Ct(Pe,Q,K,ae)),ke&&Ci(ke,K),Ci(()=>{Q.isUnmounted=!0},K),K&&K.pendingBranch&&!K.isUnmounted&&Q.asyncDep&&!Q.asyncResolved&&Q.suspenseId===K.pendingId&&(K.deps--,K.deps===0&&K.resolve())},$e=(Q,K,ae,ge=!1,me=!1,Ee=0)=>{for(let Pe=Ee;Pe<Q.length;Pe++)Ct(Q[Pe],K,ae,ge,me)},Tt=Q=>Q.shapeFlag&6?Tt(Q.component.subTree):Q.shapeFlag&128?Q.suspense.next():b(Q.anchor||Q.el),Kt=(Q,K,ae)=>{Q==null?K._vnode&&Ct(K._vnode,null,null,!0):T(K._vnode||null,Q,K,null,null,null,ae),u0(),K._vnode=Q},_t={p:T,um:Ct,m:Et,r:jt,mt:ne,mc:J,pc:Ge,pbc:te,n:Tt,o:u};let se,ce;return A&&([se,ce]=A(_t)),{render:Kt,hydrate:se,createApp:w2(Kt,se)}}function xs({effect:u,update:A},c){u.allowRecurse=A.allowRecurse=c}function Xg(u,A,c=!1){const g=u.children,L=A.children;if(Mr(g)&&Mr(L))for(let l=0;l<g.length;l++){const h=g[l];let m=L[l];m.shapeFlag&1&&!m.dynamicChildren&&((m.patchFlag<=0||m.patchFlag===32)&&(m=L[l]=No(L[l]),m.el=h.el),c||Xg(h,m))}}function T2(u){const A=u.slice(),c=[0];let g,L,l,h,m;const y=u.length;for(g=0;g<y;g++){const d=u[g];if(d!==0){if(L=c[c.length-1],u[L]<d){A[g]=L,c.push(g);continue}for(l=0,h=c.length-1;l<h;)m=l+h>>1,u[c[m]]<d?l=m+1:h=m;d<u[c[l]]&&(l>0&&(A[g]=c[l-1]),c[l]=g)}}for(l=c.length,h=c[l-1];l-- >0;)c[l]=h,h=A[h];return c}const S2=u=>u.__isTeleport,ep="components";function r_(u,A){return Qg(ep,u,!0,A)||u}const Yg=Symbol();function n_(u){return $n(u)?Qg(ep,u,!1)||u:u||Yg}function Qg(u,A,c=!0,g=!1){const L=$i||ei;if(L){const l=L.type;if(u===ep){const m=z2(l);if(m&&(m===A||m===Ba(A)||m===Eh(Ba(A))))return l}const h=qg(L[u]||l[u],A)||qg(L.appContext[u],A);return!h&&g?l:h}}function qg(u,A){return u&&(u[A]||u[Ba(A)]||u[Eh(Ba(A))])}const Na=Symbol(void 0),tp=Symbol(void 0),ka=Symbol(void 0),rp=Symbol(void 0),Iu=[];let Ms=null;function _2(u=!1){Iu.push(Ms=u?null:[])}function C2(){Iu.pop(),Ms=Iu[Iu.length-1]||null}let kh=1;function Kg(u){kh+=u}function Jg(u){return u.dynamicChildren=kh>0?Ms||dl:null,C2(),kh>0&&Ms&&Ms.push(u),u}function i_(u,A,c,g,L,l){return Jg($g(u,A,c,g,L,l,!0))}function L2(u,A,c,g,L){return Jg(ji(u,A,c,g,L,!0))}function np(u){return u?u.__v_isVNode===!0:!1}function Ts(u,A){return u.type===A.type&&u.key===A.key}const Uh="__vInternal",Zg=({key:u})=>u!=null?u:null,Hh=({ref:u,ref_key:A,ref_for:c})=>u!=null?$n(u)||Ti(u)||Nr(u)?{i:$i,r:u,k:A,f:!!c}:u:null;function $g(u,A=null,c=null,g=0,L=null,l=u===Na?0:1,h=!1,m=!1){const y={__v_isVNode:!0,__v_skip:!0,type:u,props:A,key:A&&Zg(A),ref:A&&Hh(A),scopeId:Dh,slotScopeIds:null,children:c,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:g,dynamicProps:L,dynamicChildren:null,appContext:null};return m?(ip(y,c),l&128&&u.normalize(y)):c&&(y.shapeFlag|=$n(c)?8:16),kh>0&&!h&&Ms&&(y.patchFlag>0||l&6)&&y.patchFlag!==32&&Ms.push(y),y}const ji=R2;function R2(u,A=null,c=null,g=0,L=null,l=!1){if((!u||u===Yg)&&(u=ka),np(u)){const m=bl(u,A,!0);return c&&ip(m,c),m}if(W2(u)&&(u=u.__vccOpts),A){A=P2(A);let{class:m,style:y}=A;m&&!$n(m)&&(A.class=Md(m)),Yn(y)&&(vg(y)&&!Mr(y)&&(y=oi({},y)),A.style=xd(y))}const h=$n(u)?1:JM(u)?128:S2(u)?64:Yn(u)?4:Nr(u)?2:0;return $g(u,A,c,g,L,h,l,!0)}function P2(u){return u?vg(u)||Uh in u?oi({},u):u:null}function bl(u,A,c=!1){const{props:g,ref:L,patchFlag:l,children:h}=u,m=A?O2(g||{},A):g;return{__v_isVNode:!0,__v_skip:!0,type:u.type,props:m,key:m&&Zg(m),ref:A&&A.ref?c&&L?Mr(L)?L.concat(Hh(A)):[L,Hh(A)]:Hh(A):L,scopeId:u.scopeId,slotScopeIds:u.slotScopeIds,children:h,target:u.target,targetAnchor:u.targetAnchor,staticCount:u.staticCount,shapeFlag:u.shapeFlag,patchFlag:A&&u.type!==Na?l===-1?16:l|16:l,dynamicProps:u.dynamicProps,dynamicChildren:u.dynamicChildren,appContext:u.appContext,dirs:u.dirs,transition:u.transition,component:u.component,suspense:u.suspense,ssContent:u.ssContent&&bl(u.ssContent),ssFallback:u.ssFallback&&bl(u.ssFallback),el:u.el,anchor:u.anchor}}function D2(u=" ",A=0){return ji(tp,null,u,A)}function a_(u="",A=!1){return A?(_2(),L2(ka,null,u)):ji(ka,null,u)}function Ua(u){return u==null||typeof u=="boolean"?ji(ka):Mr(u)?ji(Na,null,u.slice()):typeof u=="object"?No(u):ji(tp,null,String(u))}function No(u){return u.el===null||u.memo?u:bl(u)}function ip(u,A){let c=0;const{shapeFlag:g}=u;if(A==null)A=null;else if(Mr(A))c=16;else if(typeof A=="object")if(g&(1|64)){const L=A.default;L&&(L._c&&(L._d=!1),ip(u,L()),L._c&&(L._d=!0));return}else{c=32;const L=A._;!L&&!(Uh in A)?A._ctx=$i:L===3&&$i&&($i.slots._===1?A._=1:(A._=2,u.patchFlag|=1024))}else Nr(A)?(A={default:A,_ctx:$i},c=32):(A=String(A),g&64?(c=16,A=[D2(A)]):c=8);u.children=A,u.shapeFlag|=c}function O2(...u){const A={};for(let c=0;c<u.length;c++){const g=u[c];for(const L in g)if(L==="class")A.class!==g.class&&(A.class=Md([A.class,g.class]));else if(L==="style")A.style=xd([A.style,g.style]);else if(gh(L)){const l=A[L],h=g[L];l!==h&&!(Mr(l)&&l.includes(h))&&(A[L]=l?[].concat(l,h):h)}else L!==""&&(A[L]=g[L])}return A}function Ha(u,A,c,g=null){ta(u,A,7,[c,g])}function o_(u,A,c,g){let L;const l=c&&c[g];if(Mr(u)||$n(u)){L=new Array(u.length);for(let h=0,m=u.length;h<m;h++)L[h]=A(u[h],h,void 0,l&&l[h])}else if(typeof u=="number"){L=new Array(u);for(let h=0;h<u;h++)L[h]=A(h+1,h,void 0,l&&l[h])}else if(Yn(u))if(u[Symbol.iterator])L=Array.from(u,(h,m)=>A(h,m,void 0,l&&l[m]));else{const h=Object.keys(u);L=new Array(h.length);for(let m=0,y=h.length;m<y;m++){const d=h[m];L[m]=A(u[d],d,m,l&&l[m])}}else L=[];return c&&(c[g]=L),L}const ap=u=>u?e0(u)?op(u)||u.proxy:ap(u.parent):null,Gh=oi(Object.create(null),{$:u=>u,$el:u=>u.vnode.el,$data:u=>u.data,$props:u=>u.props,$attrs:u=>u.attrs,$slots:u=>u.slots,$refs:u=>u.refs,$parent:u=>ap(u.parent),$root:u=>ap(u.root),$emit:u=>u.emit,$options:u=>Ig(u),$forceUpdate:u=>()=>o0(u.update),$nextTick:u=>a0.bind(u.proxy),$watch:u=>K2.bind(u)}),I2={get({_:u},A){const{ctx:c,setupState:g,data:L,props:l,accessCache:h,type:m,appContext:y}=u;let d;if(A[0]!=="$"){const E=h[A];if(E!==void 0)switch(E){case 1:return g[A];case 2:return L[A];case 4:return c[A];case 3:return l[A]}else{if(g!==En&&an(g,A))return h[A]=1,g[A];if(L!==En&&an(L,A))return h[A]=2,L[A];if((d=u.propsOptions[0])&&an(d,A))return h[A]=3,l[A];if(c!==En&&an(c,A))return h[A]=4,c[A];qd&&(h[A]=0)}}const p=Gh[A];let v,b;if(p)return A==="$attrs"&&Wi(u,"get",A),p(u);if((v=m.__cssModules)&&(v=v[A]))return v;if(c!==En&&an(c,A))return h[A]=4,c[A];if(b=y.config.globalProperties,an(b,A))return b[A]},set({_:u},A,c){const{data:g,setupState:L,ctx:l}=u;if(L!==En&&an(L,A))L[A]=c;else if(g!==En&&an(g,A))g[A]=c;else if(an(u.props,A))return!1;return A[0]==="$"&&A.slice(1)in u?!1:(l[A]=c,!0)},has({_:{data:u,setupState:A,accessCache:c,ctx:g,appContext:L,propsOptions:l}},h){let m;return!!c[h]||u!==En&&an(u,h)||A!==En&&an(A,h)||(m=l[0])&&an(m,h)||an(g,h)||an(Gh,h)||an(L.config.globalProperties,h)}},B2=jg();let F2=0;function N2(u,A,c){const g=u.type,L=(A?A.appContext:u.appContext)||B2,l={uid:F2++,vnode:u,type:g,parent:A,appContext:L,root:null,next:null,subTree:null,effect:null,update:null,scope:new hM(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:A?A.provides:Object.create(L.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ng(g,L),emitsOptions:Eg(g,L),emit:null,emitted:null,propsDefaults:En,inheritAttrs:g.inheritAttrs,ctx:En,data:En,props:En,attrs:En,slots:En,refs:En,setupState:En,setupContext:null,suspense:c,suspenseId:c?c.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=A?A.root:l,l.emit=jM.bind(null,l),u.ce&&u.ce(l),l}let ei=null;const k2=()=>ei||$i,El=u=>{ei=u,u.scope.on()},Ss=()=>{ei&&ei.scope.off(),ei=null};function e0(u){return u.vnode.shapeFlag&4}let Vh=!1;function U2(u,A=!1){Vh=A;const{props:c,children:g}=u.vnode,L=e0(u);m2(u,c,L,A),A2(u,g);const l=L?H2(u,A):void 0;return Vh=!1,l}function H2(u,A){const c=u.type;u.accessCache=Object.create(null),u.proxy=mg(new Proxy(u.ctx,I2));const{setup:g}=c;if(g){const L=u.setupContext=g.length>1?V2(u):null;El(u),gl();const l=ko(g,u,0,[u.props,L]);if(bs(),Ss(),Qm(l)){if(l.then(Ss,Ss),A)return l.then(h=>{t0(u,h,A)}).catch(h=>{zh(h,u,0)});u.asyncDep=l}else t0(u,l,A)}else n0(u,A)}function t0(u,A,c){Nr(A)?u.type.__ssrInlineRender?u.ssrRender=A:u.render=A:Yn(A)&&(u.setupState=bg(A)),n0(u,c)}let r0;function n0(u,A,c){const g=u.type;if(!u.render){if(!A&&r0&&!g.render){const L=g.template;if(L){const{isCustomElement:l,compilerOptions:h}=u.appContext.config,{delimiters:m,compilerOptions:y}=g,d=oi(oi({isCustomElement:l,delimiters:m},h),y);g.render=r0(L,d)}}u.render=g.render||Aa}El(u),gl(),h2(u),bs(),Ss()}function G2(u){return new Proxy(u.attrs,{get(A,c){return Wi(u,"get","$attrs"),A[c]}})}function V2(u){const A=g=>{u.exposed=g||{}};let c;return{get attrs(){return c||(c=G2(u))},slots:u.slots,emit:u.emit,expose:A}}function op(u){if(u.exposed)return u.exposeProxy||(u.exposeProxy=new Proxy(bg(mg(u.exposed)),{get(A,c){if(c in A)return A[c];if(c in Gh)return Gh[c](u)}}))}function z2(u){return Nr(u)&&u.displayName||u.name}function W2(u){return Nr(u)&&"__vccOpts"in u}function ko(u,A,c,g){let L;try{L=g?u(...g):u()}catch(l){zh(l,A,c)}return L}function ta(u,A,c,g){if(Nr(u)){const l=ko(u,A,c,g);return l&&Qm(l)&&l.catch(h=>{zh(h,A,c)}),l}const L=[];for(let l=0;l<u.length;l++)L.push(ta(u[l],A,c,g));return L}function zh(u,A,c,g=!0){const L=A?A.vnode:null;if(A){let l=A.parent;const h=A.proxy,m=c;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](u,h,m)===!1)return}l=l.parent}const y=A.appContext.config.errorHandler;if(y){ko(y,null,10,[u,h,m]);return}}j2(u,c,L,g)}function j2(u,A,c,g=!0){console.error(u)}let Wh=!1,sp=!1;const Xi=[];let oo=0;const Bu=[];let Fu=null,wl=0;const Nu=[];let Uo=null,xl=0;const i0=Promise.resolve();let lp=null,up=null;function a0(u){const A=lp||i0;return u?A.then(this?u.bind(this):u):A}function X2(u){let A=oo+1,c=Xi.length;for(;A<c;){const g=A+c>>>1;ku(Xi[g])<u?A=g+1:c=g}return A}function o0(u){(!Xi.length||!Xi.includes(u,Wh&&u.allowRecurse?oo+1:oo))&&u!==up&&(u.id==null?Xi.push(u):Xi.splice(X2(u.id),0,u),s0())}function s0(){!Wh&&!sp&&(sp=!0,lp=i0.then(c0))}function Y2(u){const A=Xi.indexOf(u);A>oo&&Xi.splice(A,1)}function l0(u,A,c,g){Mr(u)?c.push(...u):(!A||!A.includes(u,u.allowRecurse?g+1:g))&&c.push(u),s0()}function Q2(u){l0(u,Fu,Bu,wl)}function q2(u){l0(u,Uo,Nu,xl)}function cp(u,A=null){if(Bu.length){for(up=A,Fu=[...new Set(Bu)],Bu.length=0,wl=0;wl<Fu.length;wl++)Fu[wl]();Fu=null,wl=0,up=null,cp(u,A)}}function u0(u){if(Nu.length){const A=[...new Set(Nu)];if(Nu.length=0,Uo){Uo.push(...A);return}for(Uo=A,Uo.sort((c,g)=>ku(c)-ku(g)),xl=0;xl<Uo.length;xl++)Uo[xl]();Uo=null,xl=0}}const ku=u=>u.id==null?1/0:u.id;function c0(u){sp=!1,Wh=!0,cp(u),Xi.sort((c,g)=>ku(c)-ku(g));const A=Aa;try{for(oo=0;oo<Xi.length;oo++){const c=Xi[oo];c&&c.active!==!1&&ko(c,null,14)}}finally{oo=0,Xi.length=0,u0(),Wh=!1,lp=null,(Xi.length||Bu.length||Nu.length)&&c0(u)}}const h0={};function Ml(u,A,c){return f0(u,A,c)}function f0(u,A,{immediate:c,deep:g,flush:L,onTrack:l,onTrigger:h}=En){const m=ei;let y,d=!1,p=!1;if(Ti(u)?(y=()=>u.value,d=!!u._shallow):Al(u)?(y=()=>u,g=!0):Mr(u)?(p=!0,d=u.some(Al),y=()=>u.map(_=>{if(Ti(_))return _.value;if(Al(_))return _s(_);if(Nr(_))return ko(_,m,2)})):Nr(u)?A?y=()=>ko(u,m,2):y=()=>{if(!(m&&m.isUnmounted))return v&&v(),ta(u,m,3,[b])}:y=Aa,A&&g){const _=y;y=()=>_s(_())}let v,b=_=>{v=T.onStop=()=>{ko(_,m,4)}};if(Vh)return b=Aa,A?c&&ta(A,m,3,[y(),p?[]:void 0,b]):y(),Aa;let E=p?[]:h0;const S=()=>{if(!!T.active)if(A){const _=T.run();(g||d||(p?_.some((D,C)=>Lu(D,E[C])):Lu(_,E)))&&(v&&v(),ta(A,m,3,[_,E===h0?void 0:E,b]),E=_)}else T.run()};S.allowRecurse=!!A;let x;L==="sync"?x=S:L==="post"?x=()=>Ci(S,m&&m.suspense):x=()=>{!m||m.isMounted?Q2(S):S()};const T=new Id(y,x);return A?c?S():E=T.run():L==="post"?Ci(T.run.bind(T),m&&m.suspense):T.run(),()=>{T.stop(),m&&m.scope&&Sd(m.scope.effects,T)}}function K2(u,A,c){const g=this.proxy,L=$n(u)?u.includes(".")?d0(g,u):()=>g[u]:u.bind(g,g);let l;Nr(A)?l=A:(l=A.handler,c=A);const h=ei;El(this);const m=f0(L,l.bind(g),c);return h?El(h):Ss(),m}function d0(u,A){const c=A.split(".");return()=>{let g=u;for(let L=0;L<c.length&&g;L++)g=g[c[L]];return g}}function _s(u,A){if(!Yn(u)||u.__v_skip||(A=A||new Set,A.has(u)))return u;if(A.add(u),Ti(u))_s(u.value,A);else if(Mr(u))for(let c=0;c<u.length;c++)_s(u[c],A);else if(Ym(u)||pl(u))u.forEach(c=>{_s(c,A)});else if(Km(u))for(const c in u)_s(u[c],A);return u}function hp(u,A,c){const g=arguments.length;return g===2?Yn(A)&&!Mr(A)?np(A)?ji(u,null,[A]):ji(u,A):ji(u,null,A):(g>3?c=Array.prototype.slice.call(arguments,2):g===3&&np(c)&&(c=[c]),ji(u,A,c))}const J2="3.2.26",Z2="http://www.w3.org/2000/svg",Tl=typeof document!="undefined"?document:null,p0=new Map,$2={insert:(u,A,c)=>{A.insertBefore(u,c||null)},remove:u=>{const A=u.parentNode;A&&A.removeChild(u)},createElement:(u,A,c,g)=>{const L=A?Tl.createElementNS(Z2,u):Tl.createElement(u,c?{is:c}:void 0);return u==="select"&&g&&g.multiple!=null&&L.setAttribute("multiple",g.multiple),L},createText:u=>Tl.createTextNode(u),createComment:u=>Tl.createComment(u),setText:(u,A)=>{u.nodeValue=A},setElementText:(u,A)=>{u.textContent=A},parentNode:u=>u.parentNode,nextSibling:u=>u.nextSibling,querySelector:u=>Tl.querySelector(u),setScopeId(u,A){u.setAttribute(A,"")},cloneNode(u){const A=u.cloneNode(!0);return"_value"in u&&(A._value=u._value),A},insertStaticContent(u,A,c,g){const L=c?c.previousSibling:A.lastChild;let l=p0.get(u);if(!l){const h=Tl.createElement("template");if(h.innerHTML=g?`<svg>${u}</svg>`:u,l=h.content,g){const m=l.firstChild;for(;m.firstChild;)l.appendChild(m.firstChild);l.removeChild(m)}p0.set(u,l)}return A.insertBefore(l.cloneNode(!0),c),[L?L.nextSibling:A.firstChild,c?c.previousSibling:A.lastChild]}};function eT(u,A,c){const g=u._vtc;g&&(A=(A?[A,...g]:[...g]).join(" ")),A==null?u.removeAttribute("class"):c?u.setAttribute("class",A):u.className=A}function tT(u,A,c){const g=u.style,L=$n(c);if(c&&!L){for(const l in c)fp(g,l,c[l]);if(A&&!$n(A))for(const l in A)c[l]==null&&fp(g,l,"")}else{const l=g.display;L?A!==c&&(g.cssText=c):A&&u.removeAttribute("style"),"_vod"in u&&(g.display=l)}}const v0=/\s*!important$/;function fp(u,A,c){if(Mr(c))c.forEach(g=>fp(u,A,g));else if(A.startsWith("--"))u.setProperty(A,c);else{const g=rT(u,A);v0.test(c)?u.setProperty(vl(g),c.replace(v0,""),"important"):u[g]=c}}const m0=["Webkit","Moz","ms"],dp={};function rT(u,A){const c=dp[A];if(c)return c;let g=Ba(A);if(g!=="filter"&&g in u)return dp[A]=g;g=Eh(g);for(let L=0;L<m0.length;L++){const l=m0[L]+g;if(l in u)return dp[A]=l}return A}const g0="http://www.w3.org/1999/xlink";function nT(u,A,c,g,L){if(g&&A.startsWith("xlink:"))c==null?u.removeAttributeNS(g0,A.slice(6,A.length)):u.setAttributeNS(g0,A,c);else{const l=eM(A);c==null||l&&!jm(c)?u.removeAttribute(A):u.setAttribute(A,l?"":c)}}function iT(u,A,c,g,L,l,h){if(A==="innerHTML"||A==="textContent"){g&&h(g,L,l),u[A]=c==null?"":c;return}if(A==="value"&&u.tagName!=="PROGRESS"&&!u.tagName.includes("-")){u._value=c;const m=c==null?"":c;(u.value!==m||u.tagName==="OPTION")&&(u.value=m),c==null&&u.removeAttribute(A);return}if(c===""||c==null){const m=typeof u[A];if(m==="boolean"){u[A]=jm(c);return}else if(c==null&&m==="string"){u[A]="",u.removeAttribute(A);return}else if(m==="number"){try{u[A]=0}catch{}u.removeAttribute(A);return}}try{u[A]=c}catch{}}let jh=Date.now,y0=!1;if(typeof window!="undefined"){jh()>document.createEvent("Event").timeStamp&&(jh=()=>performance.now());const u=navigator.userAgent.match(/firefox\/(\d+)/i);y0=!!(u&&Number(u[1])<=53)}let pp=0;const aT=Promise.resolve(),oT=()=>{pp=0},sT=()=>pp||(aT.then(oT),pp=jh());function Sl(u,A,c,g){u.addEventListener(A,c,g)}function lT(u,A,c,g){u.removeEventListener(A,c,g)}function uT(u,A,c,g,L=null){const l=u._vei||(u._vei={}),h=l[A];if(g&&h)h.value=g;else{const[m,y]=cT(A);if(g){const d=l[A]=hT(g,L);Sl(u,m,d,y)}else h&&(lT(u,m,h,y),l[A]=void 0)}}const A0=/(?:Once|Passive|Capture)$/;function cT(u){let A;if(A0.test(u)){A={};let c;for(;c=u.match(A0);)u=u.slice(0,u.length-c[0].length),A[c[0].toLowerCase()]=!0}return[vl(u.slice(2)),A]}function hT(u,A){const c=g=>{const L=g.timeStamp||jh();(y0||L>=c.attached-1)&&ta(fT(g,c.value),A,5,[g])};return c.value=u,c.attached=sT(),c}function fT(u,A){if(Mr(A)){const c=u.stopImmediatePropagation;return u.stopImmediatePropagation=()=>{c.call(u),u._stopped=!0},A.map(g=>L=>!L._stopped&&g(L))}else return A}const b0=/^on[a-z]/,dT=(u,A,c,g,L=!1,l,h,m,y)=>{A==="class"?eT(u,g,L):A==="style"?tT(u,c,g):gh(A)?Td(A)||uT(u,A,c,g,h):(A[0]==="."?(A=A.slice(1),!0):A[0]==="^"?(A=A.slice(1),!1):pT(u,A,g,L))?iT(u,A,g,l,h,m,y):(A==="true-value"?u._trueValue=g:A==="false-value"&&(u._falseValue=g),nT(u,A,g,L))};function pT(u,A,c,g){return g?!!(A==="innerHTML"||A==="textContent"||A in u&&b0.test(A)&&Nr(c)):A==="spellcheck"||A==="draggable"||A==="form"||A==="list"&&u.tagName==="INPUT"||A==="type"&&u.tagName==="TEXTAREA"||b0.test(A)&&$n(c)?!1:A in u}const Ho="transition",Uu="animation",E0=(u,{slots:A})=>hp(xg,vT(u),A);E0.displayName="Transition";const w0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};E0.props=oi({},xg.props,w0);const Cs=(u,A=[])=>{Mr(u)?u.forEach(c=>c(...A)):u&&u(...A)},x0=u=>u?Mr(u)?u.some(A=>A.length>1):u.length>1:!1;function vT(u){const A={};for(const ue in u)ue in w0||(A[ue]=u[ue]);if(u.css===!1)return A;const{name:c="v",type:g,duration:L,enterFromClass:l=`${c}-enter-from`,enterActiveClass:h=`${c}-enter-active`,enterToClass:m=`${c}-enter-to`,appearFromClass:y=l,appearActiveClass:d=h,appearToClass:p=m,leaveFromClass:v=`${c}-leave-from`,leaveActiveClass:b=`${c}-leave-active`,leaveToClass:E=`${c}-leave-to`}=u,S=mT(L),x=S&&S[0],T=S&&S[1],{onBeforeEnter:_,onEnter:D,onEnterCancelled:C,onLeave:I,onLeaveCancelled:B,onBeforeAppear:U=_,onAppear:W=D,onAppearCancelled:oe=C}=A,J=(ue,Y,de)=>{_l(ue,Y?p:m),_l(ue,Y?d:h),de&&de()},le=(ue,Y)=>{_l(ue,E),_l(ue,b),Y&&Y()},te=ue=>(Y,de)=>{const ne=ue?W:D,xe=()=>J(Y,ue,de);Cs(ne,[Y,xe]),M0(()=>{_l(Y,ue?y:l),Go(Y,ue?p:m),x0(ne)||T0(Y,g,x,xe)})};return oi(A,{onBeforeEnter(ue){Cs(_,[ue]),Go(ue,l),Go(ue,h)},onBeforeAppear(ue){Cs(U,[ue]),Go(ue,y),Go(ue,d)},onEnter:te(!1),onAppear:te(!0),onLeave(ue,Y){const de=()=>le(ue,Y);Go(ue,v),AT(),Go(ue,b),M0(()=>{_l(ue,v),Go(ue,E),x0(I)||T0(ue,g,T,de)}),Cs(I,[ue,de])},onEnterCancelled(ue){J(ue,!1),Cs(C,[ue])},onAppearCancelled(ue){J(ue,!0),Cs(oe,[ue])},onLeaveCancelled(ue){le(ue),Cs(B,[ue])}})}function mT(u){if(u==null)return null;if(Yn(u))return[vp(u.enter),vp(u.leave)];{const A=vp(u);return[A,A]}}function vp(u){return Mh(u)}function Go(u,A){A.split(/\s+/).forEach(c=>c&&u.classList.add(c)),(u._vtc||(u._vtc=new Set)).add(A)}function _l(u,A){A.split(/\s+/).forEach(g=>g&&u.classList.remove(g));const{_vtc:c}=u;c&&(c.delete(A),c.size||(u._vtc=void 0))}function M0(u){requestAnimationFrame(()=>{requestAnimationFrame(u)})}let gT=0;function T0(u,A,c,g){const L=u._endId=++gT,l=()=>{L===u._endId&&g()};if(c)return setTimeout(l,c);const{type:h,timeout:m,propCount:y}=yT(u,A);if(!h)return g();const d=h+"end";let p=0;const v=()=>{u.removeEventListener(d,b),l()},b=E=>{E.target===u&&++p>=y&&v()};setTimeout(()=>{p<y&&v()},m+1),u.addEventListener(d,b)}function yT(u,A){const c=window.getComputedStyle(u),g=S=>(c[S]||"").split(", "),L=g(Ho+"Delay"),l=g(Ho+"Duration"),h=S0(L,l),m=g(Uu+"Delay"),y=g(Uu+"Duration"),d=S0(m,y);let p=null,v=0,b=0;A===Ho?h>0&&(p=Ho,v=h,b=l.length):A===Uu?d>0&&(p=Uu,v=d,b=y.length):(v=Math.max(h,d),p=v>0?h>d?Ho:Uu:null,b=p?p===Ho?l.length:y.length:0);const E=p===Ho&&/\b(transform|all)(,|$)/.test(c[Ho+"Property"]);return{type:p,timeout:v,propCount:b,hasTransform:E}}function S0(u,A){for(;u.length<A.length;)u=u.concat(u);return Math.max(...A.map((c,g)=>_0(c)+_0(u[g])))}function _0(u){return Number(u.slice(0,-1).replace(",","."))*1e3}function AT(){return document.body.offsetHeight}const C0=u=>{const A=u.props["onUpdate:modelValue"];return Mr(A)?c=>wh(A,c):A};function bT(u){u.target.composing=!0}function L0(u){const A=u.target;A.composing&&(A.composing=!1,ET(A,"input"))}function ET(u,A){const c=document.createEvent("HTMLEvents");c.initEvent(A,!0,!0),u.dispatchEvent(c)}const s_={created(u,{modifiers:{lazy:A,trim:c,number:g}},L){u._assign=C0(L);const l=g||L.props&&L.props.type==="number";Sl(u,A?"change":"input",h=>{if(h.target.composing)return;let m=u.value;c?m=m.trim():l&&(m=Mh(m)),u._assign(m)}),c&&Sl(u,"change",()=>{u.value=u.value.trim()}),A||(Sl(u,"compositionstart",bT),Sl(u,"compositionend",L0),Sl(u,"change",L0))},mounted(u,{value:A}){u.value=A==null?"":A},beforeUpdate(u,{value:A,modifiers:{lazy:c,trim:g,number:L}},l){if(u._assign=C0(l),u.composing||document.activeElement===u&&(c||g&&u.value.trim()===A||(L||u.type==="number")&&Mh(u.value)===A))return;const h=A==null?"":A;u.value!==h&&(u.value=h)}},wT=oi({patchProp:dT},$2);let R0;function xT(){return R0||(R0=x2(wT))}const l_=(...u)=>{const A=xT().createApp(...u),{mount:c}=A;return A.mount=g=>{const L=MT(g);if(!L)return;const l=A._component;!Nr(l)&&!l.render&&!l.template&&(l.template=L.innerHTML),L.innerHTML="";const h=c(L,!1,L instanceof SVGElement);return L instanceof Element&&(L.removeAttribute("v-cloak"),L.setAttribute("data-v-app","")),h},A};function MT(u){return $n(u)?document.querySelector(u):u}function TT(){return P0().__VUE_DEVTOOLS_GLOBAL_HOOK__}function P0(){return typeof navigator!="undefined"&&typeof window!="undefined"?window:typeof global!="undefined"?global:{}}const ST=typeof Proxy=="function",_T="devtools-plugin:setup",CT="plugin:settings:set";class LT{constructor(A,c){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=A,this.hook=c;const g={};if(A.settings)for(const h in A.settings){const m=A.settings[h];g[h]=m.defaultValue}const L=`__vue-devtools-plugin-settings__${A.id}`;let l=Object.assign({},g);try{const h=localStorage.getItem(L),m=JSON.parse(h);Object.assign(l,m)}catch{}this.fallbacks={getSettings(){return l},setSettings(h){try{localStorage.setItem(L,JSON.stringify(h))}catch{}l=h}},c&&c.on(CT,(h,m)=>{h===this.plugin.id&&this.fallbacks.setSettings(m)}),this.proxiedOn=new Proxy({},{get:(h,m)=>this.target?this.target.on[m]:(...y)=>{this.onQueue.push({method:m,args:y})}}),this.proxiedTarget=new Proxy({},{get:(h,m)=>this.target?this.target[m]:m==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(m)?(...y)=>(this.targetQueue.push({method:m,args:y,resolve:()=>{}}),this.fallbacks[m](...y)):(...y)=>new Promise(d=>{this.targetQueue.push({method:m,args:y,resolve:d})})})}async setRealTarget(A){this.target=A;for(const c of this.onQueue)this.target.on[c.method](...c.args);for(const c of this.targetQueue)c.resolve(await this.target[c.method](...c.args))}}function RT(u,A){const c=P0(),g=TT(),L=ST&&u.enableEarlyProxy;if(g&&(c.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!L))g.emit(_T,u,A);else{const l=L?new LT(u,g):null;(c.__VUE_DEVTOOLS_PLUGINS__=c.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:u,setupFn:A,proxy:l}),l&&A(l.proxiedTarget)}}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const D0=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Cl=u=>D0?Symbol(u):"_vr_"+u,PT=Cl("rvlm"),O0=Cl("rvd"),mp=Cl("r"),I0=Cl("rl"),gp=Cl("rvl"),Ll=typeof window!="undefined";function DT(u){return u.__esModule||D0&&u[Symbol.toStringTag]==="Module"}const wn=Object.assign;function yp(u,A){const c={};for(const g in A){const L=A[g];c[g]=Array.isArray(L)?L.map(u):u(L)}return c}const Hu=()=>{},OT=/\/$/,IT=u=>u.replace(OT,"");function Ap(u,A,c="/"){let g,L={},l="",h="";const m=A.indexOf("?"),y=A.indexOf("#",m>-1?m:0);return m>-1&&(g=A.slice(0,m),l=A.slice(m+1,y>-1?y:A.length),L=u(l)),y>-1&&(g=g||A.slice(0,y),h=A.slice(y,A.length)),g=kT(g!=null?g:A,c),{fullPath:g+(l&&"?")+l+h,path:g,query:L,hash:h}}function BT(u,A){const c=A.query?u(A.query):"";return A.path+(c&&"?")+c+(A.hash||"")}function B0(u,A){return!A||!u.toLowerCase().startsWith(A.toLowerCase())?u:u.slice(A.length)||"/"}function FT(u,A,c){const g=A.matched.length-1,L=c.matched.length-1;return g>-1&&g===L&&Rl(A.matched[g],c.matched[L])&&F0(A.params,c.params)&&u(A.query)===u(c.query)&&A.hash===c.hash}function Rl(u,A){return(u.aliasOf||u)===(A.aliasOf||A)}function F0(u,A){if(Object.keys(u).length!==Object.keys(A).length)return!1;for(const c in u)if(!NT(u[c],A[c]))return!1;return!0}function NT(u,A){return Array.isArray(u)?N0(u,A):Array.isArray(A)?N0(A,u):u===A}function N0(u,A){return Array.isArray(A)?u.length===A.length&&u.every((c,g)=>c===A[g]):u.length===1&&u[0]===A}function kT(u,A){if(u.startsWith("/"))return u;if(!u)return A;const c=A.split("/"),g=u.split("/");let L=c.length-1,l,h;for(l=0;l<g.length;l++)if(h=g[l],!(L===1||h==="."))if(h==="..")L--;else break;return c.slice(0,L).join("/")+"/"+g.slice(l-(l===g.length?1:0)).join("/")}var Gu;(function(u){u.pop="pop",u.push="push"})(Gu||(Gu={}));var Vu;(function(u){u.back="back",u.forward="forward",u.unknown=""})(Vu||(Vu={}));function UT(u){if(!u)if(Ll){const A=document.querySelector("base");u=A&&A.getAttribute("href")||"/",u=u.replace(/^\w+:\/\/[^\/]+/,"")}else u="/";return u[0]!=="/"&&u[0]!=="#"&&(u="/"+u),IT(u)}const HT=/^[^#]+#/;function GT(u,A){return u.replace(HT,"#")+A}function VT(u,A){const c=document.documentElement.getBoundingClientRect(),g=u.getBoundingClientRect();return{behavior:A.behavior,left:g.left-c.left-(A.left||0),top:g.top-c.top-(A.top||0)}}const Xh=()=>({left:window.pageXOffset,top:window.pageYOffset});function zT(u){let A;if("el"in u){const c=u.el,g=typeof c=="string"&&c.startsWith("#"),L=typeof c=="string"?g?document.getElementById(c.slice(1)):document.querySelector(c):c;if(!L)return;A=VT(L,u)}else A=u;"scrollBehavior"in document.documentElement.style?window.scrollTo(A):window.scrollTo(A.left!=null?A.left:window.pageXOffset,A.top!=null?A.top:window.pageYOffset)}function k0(u,A){return(history.state?history.state.position-A:-1)+u}const bp=new Map;function WT(u,A){bp.set(u,A)}function jT(u){const A=bp.get(u);return bp.delete(u),A}let XT=()=>location.protocol+"//"+location.host;function U0(u,A){const{pathname:c,search:g,hash:L}=A,l=u.indexOf("#");if(l>-1){let m=L.includes(u.slice(l))?u.slice(l).length:1,y=L.slice(m);return y[0]!=="/"&&(y="/"+y),B0(y,"")}return B0(c,u)+g+L}function YT(u,A,c,g){let L=[],l=[],h=null;const m=({state:b})=>{const E=U0(u,location),S=c.value,x=A.value;let T=0;if(b){if(c.value=E,A.value=b,h&&h===S){h=null;return}T=x?b.position-x.position:0}else g(E);L.forEach(_=>{_(c.value,S,{delta:T,type:Gu.pop,direction:T?T>0?Vu.forward:Vu.back:Vu.unknown})})};function y(){h=c.value}function d(b){L.push(b);const E=()=>{const S=L.indexOf(b);S>-1&&L.splice(S,1)};return l.push(E),E}function p(){const{history:b}=window;!b.state||b.replaceState(wn({},b.state,{scroll:Xh()}),"")}function v(){for(const b of l)b();l=[],window.removeEventListener("popstate",m),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",m),window.addEventListener("beforeunload",p),{pauseListeners:y,listen:d,destroy:v}}function H0(u,A,c,g=!1,L=!1){return{back:u,current:A,forward:c,replaced:g,position:window.history.length,scroll:L?Xh():null}}function QT(u){const{history:A,location:c}=window,g={value:U0(u,c)},L={value:A.state};L.value||l(g.value,{back:null,current:g.value,forward:null,position:A.length-1,replaced:!0,scroll:null},!0);function l(y,d,p){const v=u.indexOf("#"),b=v>-1?(c.host&&document.querySelector("base")?u:u.slice(v))+y:XT()+u+y;try{A[p?"replaceState":"pushState"](d,"",b),L.value=d}catch(E){console.error(E),c[p?"replace":"assign"](b)}}function h(y,d){const p=wn({},A.state,H0(L.value.back,y,L.value.forward,!0),d,{position:L.value.position});l(y,p,!0),g.value=y}function m(y,d){const p=wn({},L.value,A.state,{forward:y,scroll:Xh()});l(p.current,p,!0);const v=wn({},H0(g.value,y,null),{position:p.position+1},d);l(y,v,!1),g.value=y}return{location:g,state:L,push:m,replace:h}}function qT(u){u=UT(u);const A=QT(u),c=YT(u,A.state,A.location,A.replace);function g(l,h=!0){h||c.pauseListeners(),history.go(l)}const L=wn({location:"",base:u,go:g,createHref:GT.bind(null,u)},A,c);return Object.defineProperty(L,"location",{enumerable:!0,get:()=>A.location.value}),Object.defineProperty(L,"state",{enumerable:!0,get:()=>A.state.value}),L}function u_(u){return u=location.host?u||location.pathname+location.search:"",u.includes("#")||(u+="#"),qT(u)}function KT(u){return typeof u=="string"||u&&typeof u=="object"}function G0(u){return typeof u=="string"||typeof u=="symbol"}const Vo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},V0=Cl("nf");var z0;(function(u){u[u.aborted=4]="aborted",u[u.cancelled=8]="cancelled",u[u.duplicated=16]="duplicated"})(z0||(z0={}));function Pl(u,A){return wn(new Error,{type:u,[V0]:!0},A)}function Ls(u,A){return u instanceof Error&&V0 in u&&(A==null||!!(u.type&A))}const W0="[^/]+?",JT={sensitive:!1,strict:!1,start:!0,end:!0},ZT=/[.+*?^${}()[\]/\\]/g;function $T(u,A){const c=wn({},JT,A),g=[];let L=c.start?"^":"";const l=[];for(const d of u){const p=d.length?[]:[90];c.strict&&!d.length&&(L+="/");for(let v=0;v<d.length;v++){const b=d[v];let E=40+(c.sensitive?.25:0);if(b.type===0)v||(L+="/"),L+=b.value.replace(ZT,"\\$&"),E+=40;else if(b.type===1){const{value:S,repeatable:x,optional:T,regexp:_}=b;l.push({name:S,repeatable:x,optional:T});const D=_||W0;if(D!==W0){E+=10;try{new RegExp(`(${D})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${S}" (${D}): `+I.message)}}let C=x?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;v||(C=T&&d.length<2?`(?:/${C})`:"/"+C),T&&(C+="?"),L+=C,E+=20,T&&(E+=-8),x&&(E+=-20),D===".*"&&(E+=-50)}p.push(E)}g.push(p)}if(c.strict&&c.end){const d=g.length-1;g[d][g[d].length-1]+=.7000000000000001}c.strict||(L+="/?"),c.end?L+="$":c.strict&&(L+="(?:/|$)");const h=new RegExp(L,c.sensitive?"":"i");function m(d){const p=d.match(h),v={};if(!p)return null;for(let b=1;b<p.length;b++){const E=p[b]||"",S=l[b-1];v[S.name]=E&&S.repeatable?E.split("/"):E}return v}function y(d){let p="",v=!1;for(const b of u){(!v||!p.endsWith("/"))&&(p+="/"),v=!1;for(const E of b)if(E.type===0)p+=E.value;else if(E.type===1){const{value:S,repeatable:x,optional:T}=E,_=S in d?d[S]:"";if(Array.isArray(_)&&!x)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const D=Array.isArray(_)?_.join("/"):_;if(!D)if(T)b.length<2&&(p.endsWith("/")?p=p.slice(0,-1):v=!0);else throw new Error(`Missing required param "${S}"`);p+=D}}return p}return{re:h,score:g,keys:l,parse:m,stringify:y}}function eS(u,A){let c=0;for(;c<u.length&&c<A.length;){const g=A[c]-u[c];if(g)return g;c++}return u.length<A.length?u.length===1&&u[0]===40+40?-1:1:u.length>A.length?A.length===1&&A[0]===40+40?1:-1:0}function tS(u,A){let c=0;const g=u.score,L=A.score;for(;c<g.length&&c<L.length;){const l=eS(g[c],L[c]);if(l)return l;c++}return L.length-g.length}const rS={type:0,value:""},nS=/[a-zA-Z0-9_]/;function iS(u){if(!u)return[[]];if(u==="/")return[[rS]];if(!u.startsWith("/"))throw new Error(`Invalid path "${u}"`);function A(E){throw new Error(`ERR (${c})/"${d}": ${E}`)}let c=0,g=c;const L=[];let l;function h(){l&&L.push(l),l=[]}let m=0,y,d="",p="";function v(){!d||(c===0?l.push({type:0,value:d}):c===1||c===2||c===3?(l.length>1&&(y==="*"||y==="+")&&A(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:d,regexp:p,repeatable:y==="*"||y==="+",optional:y==="*"||y==="?"})):A("Invalid state to consume buffer"),d="")}function b(){d+=y}for(;m<u.length;){if(y=u[m++],y==="\\"&&c!==2){g=c,c=4;continue}switch(c){case 0:y==="/"?(d&&v(),h()):y===":"?(v(),c=1):b();break;case 4:b(),c=g;break;case 1:y==="("?c=2:nS.test(y)?b():(v(),c=0,y!=="*"&&y!=="?"&&y!=="+"&&m--);break;case 2:y===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+y:c=3:p+=y;break;case 3:v(),c=0,y!=="*"&&y!=="?"&&y!=="+"&&m--,p="";break;default:A("Unknown state");break}}return c===2&&A(`Unfinished custom RegExp for param "${d}"`),v(),h(),L}function aS(u,A,c){const g=$T(iS(u.path),c),L=wn(g,{record:u,parent:A,children:[],alias:[]});return A&&!L.record.aliasOf==!A.record.aliasOf&&A.children.push(L),L}function oS(u,A){const c=[],g=new Map;A=X0({strict:!1,end:!0,sensitive:!1},A);function L(p){return g.get(p)}function l(p,v,b){const E=!b,S=lS(p);S.aliasOf=b&&b.record;const x=X0(A,p),T=[S];if("alias"in p){const C=typeof p.alias=="string"?[p.alias]:p.alias;for(const I of C)T.push(wn({},S,{components:b?b.record.components:S.components,path:I,aliasOf:b?b.record:S}))}let _,D;for(const C of T){const{path:I}=C;if(v&&I[0]!=="/"){const B=v.record.path,U=B[B.length-1]==="/"?"":"/";C.path=v.record.path+(I&&U+I)}if(_=aS(C,v,x),b?b.alias.push(_):(D=D||_,D!==_&&D.alias.push(_),E&&p.name&&!j0(_)&&h(p.name)),"children"in S){const B=S.children;for(let U=0;U<B.length;U++)l(B[U],_,b&&b.children[U])}b=b||_,y(_)}return D?()=>{h(D)}:Hu}function h(p){if(G0(p)){const v=g.get(p);v&&(g.delete(p),c.splice(c.indexOf(v),1),v.children.forEach(h),v.alias.forEach(h))}else{const v=c.indexOf(p);v>-1&&(c.splice(v,1),p.record.name&&g.delete(p.record.name),p.children.forEach(h),p.alias.forEach(h))}}function m(){return c}function y(p){let v=0;for(;v<c.length&&tS(p,c[v])>=0;)v++;c.splice(v,0,p),p.record.name&&!j0(p)&&g.set(p.record.name,p)}function d(p,v){let b,E={},S,x;if("name"in p&&p.name){if(b=g.get(p.name),!b)throw Pl(1,{location:p});x=b.record.name,E=wn(sS(v.params,b.keys.filter(D=>!D.optional).map(D=>D.name)),p.params),S=b.stringify(E)}else if("path"in p)S=p.path,b=c.find(D=>D.re.test(S)),b&&(E=b.parse(S),x=b.record.name);else{if(b=v.name?g.get(v.name):c.find(D=>D.re.test(v.path)),!b)throw Pl(1,{location:p,currentLocation:v});x=b.record.name,E=wn({},v.params,p.params),S=b.stringify(E)}const T=[];let _=b;for(;_;)T.unshift(_.record),_=_.parent;return{name:x,path:S,params:E,matched:T,meta:cS(T)}}return u.forEach(p=>l(p)),{addRoute:l,resolve:d,removeRoute:h,getRoutes:m,getRecordMatcher:L}}function sS(u,A){const c={};for(const g of A)g in u&&(c[g]=u[g]);return c}function lS(u){return{path:u.path,redirect:u.redirect,name:u.name,meta:u.meta||{},aliasOf:void 0,beforeEnter:u.beforeEnter,props:uS(u),children:u.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in u?u.components||{}:{default:u.component}}}function uS(u){const A={},c=u.props||!1;if("component"in u)A.default=c;else for(const g in u.components)A[g]=typeof c=="boolean"?c:c[g];return A}function j0(u){for(;u;){if(u.record.aliasOf)return!0;u=u.parent}return!1}function cS(u){return u.reduce((A,c)=>wn(A,c.meta),{})}function X0(u,A){const c={};for(const g in u)c[g]=g in A?A[g]:u[g];return c}const Y0=/#/g,hS=/&/g,fS=/\//g,dS=/=/g,pS=/\?/g,Q0=/\+/g,vS=/%5B/g,mS=/%5D/g,q0=/%5E/g,gS=/%60/g,K0=/%7B/g,yS=/%7C/g,J0=/%7D/g,AS=/%20/g;function Ep(u){return encodeURI(""+u).replace(yS,"|").replace(vS,"[").replace(mS,"]")}function bS(u){return Ep(u).replace(K0,"{").replace(J0,"}").replace(q0,"^")}function wp(u){return Ep(u).replace(Q0,"%2B").replace(AS,"+").replace(Y0,"%23").replace(hS,"%26").replace(gS,"`").replace(K0,"{").replace(J0,"}").replace(q0,"^")}function ES(u){return wp(u).replace(dS,"%3D")}function wS(u){return Ep(u).replace(Y0,"%23").replace(pS,"%3F")}function xS(u){return u==null?"":wS(u).replace(fS,"%2F")}function Yh(u){try{return decodeURIComponent(""+u)}catch{}return""+u}function MS(u){const A={};if(u===""||u==="?")return A;const g=(u[0]==="?"?u.slice(1):u).split("&");for(let L=0;L<g.length;++L){const l=g[L].replace(Q0," "),h=l.indexOf("="),m=Yh(h<0?l:l.slice(0,h)),y=h<0?null:Yh(l.slice(h+1));if(m in A){let d=A[m];Array.isArray(d)||(d=A[m]=[d]),d.push(y)}else A[m]=y}return A}function Z0(u){let A="";for(let c in u){const g=u[c];if(c=ES(c),g==null){g!==void 0&&(A+=(A.length?"&":"")+c);continue}(Array.isArray(g)?g.map(l=>l&&wp(l)):[g&&wp(g)]).forEach(l=>{l!==void 0&&(A+=(A.length?"&":"")+c,l!=null&&(A+="="+l))})}return A}function TS(u){const A={};for(const c in u){const g=u[c];g!==void 0&&(A[c]=Array.isArray(g)?g.map(L=>L==null?null:""+L):g==null?g:""+g)}return A}function zu(){let u=[];function A(g){return u.push(g),()=>{const L=u.indexOf(g);L>-1&&u.splice(L,1)}}function c(){u=[]}return{add:A,list:()=>u,reset:c}}function zo(u,A,c,g,L){const l=g&&(g.enterCallbacks[L]=g.enterCallbacks[L]||[]);return()=>new Promise((h,m)=>{const y=v=>{v===!1?m(Pl(4,{from:c,to:A})):v instanceof Error?m(v):KT(v)?m(Pl(2,{from:A,to:v})):(l&&g.enterCallbacks[L]===l&&typeof v=="function"&&l.push(v),h())},d=u.call(g&&g.instances[L],A,c,y);let p=Promise.resolve(d);u.length<3&&(p=p.then(y)),p.catch(v=>m(v))})}function xp(u,A,c,g){const L=[];for(const l of u)for(const h in l.components){let m=l.components[h];if(!(A!=="beforeRouteEnter"&&!l.instances[h]))if(SS(m)){const d=(m.__vccOpts||m)[A];d&&L.push(zo(d,c,g,l,h))}else{let y=m();L.push(()=>y.then(d=>{if(!d)return Promise.reject(new Error(`Couldn't resolve component "${h}" at "${l.path}"`));const p=DT(d)?d.default:d;l.components[h]=p;const b=(p.__vccOpts||p)[A];return b&&zo(b,c,g,l,h)()}))}}return L}function SS(u){return typeof u=="object"||"displayName"in u||"props"in u||"__vccOpts"in u}function $0(u){const A=Fo(mp),c=Fo(I0),g=Fa(()=>A.resolve(Ou(u.to))),L=Fa(()=>{const{matched:y}=g.value,{length:d}=y,p=y[d-1],v=c.matched;if(!p||!v.length)return-1;const b=v.findIndex(Rl.bind(null,p));if(b>-1)return b;const E=ey(y[d-2]);return d>1&&ey(p)===E&&v[v.length-1].path!==E?v.findIndex(Rl.bind(null,y[d-2])):b}),l=Fa(()=>L.value>-1&&RS(c.params,g.value.params)),h=Fa(()=>L.value>-1&&L.value===c.matched.length-1&&F0(c.params,g.value.params));function m(y={}){return LS(y)?A[Ou(u.replace)?"replace":"push"](Ou(u.to)).catch(Hu):Promise.resolve()}return{route:g,href:Fa(()=>g.value.href),isActive:l,isExactActive:h,navigate:m}}const _S=_g({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:$0,setup(u,{slots:A}){const c=yl($0(u)),{options:g}=Fo(mp),L=Fa(()=>({[ty(u.activeClass,g.linkActiveClass,"router-link-active")]:c.isActive,[ty(u.exactActiveClass,g.linkExactActiveClass,"router-link-exact-active")]:c.isExactActive}));return()=>{const l=A.default&&A.default(c);return u.custom?l:hp("a",{"aria-current":c.isExactActive?u.ariaCurrentValue:null,href:c.href,onClick:c.navigate,class:L.value},l)}}}),CS=_S;function LS(u){if(!(u.metaKey||u.altKey||u.ctrlKey||u.shiftKey)&&!u.defaultPrevented&&!(u.button!==void 0&&u.button!==0)){if(u.currentTarget&&u.currentTarget.getAttribute){const A=u.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(A))return}return u.preventDefault&&u.preventDefault(),!0}}function RS(u,A){for(const c in A){const g=A[c],L=u[c];if(typeof g=="string"){if(g!==L)return!1}else if(!Array.isArray(L)||L.length!==g.length||g.some((l,h)=>l!==L[h]))return!1}return!0}function ey(u){return u?u.aliasOf?u.aliasOf.path:u.path:""}const ty=(u,A,c)=>u!=null?u:A!=null?A:c,PS=_g({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(u,{attrs:A,slots:c}){const g=Fo(gp),L=Fa(()=>u.route||g.value),l=Fo(O0,0),h=Fa(()=>L.value.matched[l]);Ih(O0,l+1),Ih(PT,h),Ih(gp,L);const m=HM();return Ml(()=>[m.value,h.value,u.name],([y,d,p],[v,b,E])=>{d&&(d.instances[p]=y,b&&b!==d&&y&&y===v&&(d.leaveGuards.size||(d.leaveGuards=b.leaveGuards),d.updateGuards.size||(d.updateGuards=b.updateGuards))),y&&d&&(!b||!Rl(d,b)||!v)&&(d.enterCallbacks[p]||[]).forEach(S=>S(y))},{flush:"post"}),()=>{const y=L.value,d=h.value,p=d&&d.components[u.name],v=u.name;if(!p)return ry(c.default,{Component:p,route:y});const b=d.props[u.name],E=b?b===!0?y.params:typeof b=="function"?b(y):b:null,x=hp(p,wn({},E,A,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(d.instances[v]=null)},ref:m}));return ry(c.default,{Component:x,route:y})||x}}});function ry(u,A){if(!u)return null;const c=u(A);return c.length===1?c[0]:c}const DS=PS;function c_(u){const A=oS(u.routes,u),c=u.parseQuery||MS,g=u.stringifyQuery||Z0,L=u.history,l=zu(),h=zu(),m=zu(),y=GM(Vo);let d=Vo;Ll&&u.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=yp.bind(null,tt=>""+tt),v=yp.bind(null,xS),b=yp.bind(null,Yh);function E(tt,pt){let $e,Tt;return G0(tt)?($e=A.getRecordMatcher(tt),Tt=pt):Tt=tt,A.addRoute(Tt,$e)}function S(tt){const pt=A.getRecordMatcher(tt);pt&&A.removeRoute(pt)}function x(){return A.getRoutes().map(tt=>tt.record)}function T(tt){return!!A.getRecordMatcher(tt)}function _(tt,pt){if(pt=wn({},pt||y.value),typeof tt=="string"){const ce=Ap(c,tt,pt.path),Q=A.resolve({path:ce.path},pt),K=L.createHref(ce.fullPath);return wn(ce,Q,{params:b(Q.params),hash:Yh(ce.hash),redirectedFrom:void 0,href:K})}let $e;if("path"in tt)$e=wn({},tt,{path:Ap(c,tt.path,pt.path).path});else{const ce=wn({},tt.params);for(const Q in ce)ce[Q]==null&&delete ce[Q];$e=wn({},tt,{params:v(tt.params)}),pt.params=v(pt.params)}const Tt=A.resolve($e,pt),Kt=tt.hash||"";Tt.params=p(b(Tt.params));const _t=BT(g,wn({},tt,{hash:bS(Kt),path:Tt.path})),se=L.createHref(_t);return wn({fullPath:_t,hash:Kt,query:g===Z0?TS(tt.query):tt.query||{}},Tt,{redirectedFrom:void 0,href:se})}function D(tt){return typeof tt=="string"?Ap(c,tt,y.value.path):wn({},tt)}function C(tt,pt){if(d!==tt)return Pl(8,{from:pt,to:tt})}function I(tt){return W(tt)}function B(tt){return I(wn(D(tt),{replace:!0}))}function U(tt){const pt=tt.matched[tt.matched.length-1];if(pt&&pt.redirect){const{redirect:$e}=pt;let Tt=typeof $e=="function"?$e(tt):$e;return typeof Tt=="string"&&(Tt=Tt.includes("?")||Tt.includes("#")?Tt=D(Tt):{path:Tt},Tt.params={}),wn({query:tt.query,hash:tt.hash,params:tt.params},Tt)}}function W(tt,pt){const $e=d=_(tt),Tt=y.value,Kt=tt.state,_t=tt.force,se=tt.replace===!0,ce=U($e);if(ce)return W(wn(D(ce),{state:Kt,force:_t,replace:se}),pt||$e);const Q=$e;Q.redirectedFrom=pt;let K;return!_t&&FT(g,Tt,$e)&&(K=Pl(16,{to:Q,from:Tt}),ct(Tt,Tt,!0,!1)),(K?Promise.resolve(K):J(Q,Tt)).catch(ae=>Ls(ae)?ae:Be(ae,Q,Tt)).then(ae=>{if(ae){if(Ls(ae,2))return W(wn(D(ae.to),{state:Kt,force:_t,replace:se}),pt||Q)}else ae=te(Q,Tt,!0,se,Kt);return le(Q,Tt,ae),ae})}function oe(tt,pt){const $e=C(tt,pt);return $e?Promise.reject($e):Promise.resolve()}function J(tt,pt){let $e;const[Tt,Kt,_t]=OS(tt,pt);$e=xp(Tt.reverse(),"beforeRouteLeave",tt,pt);for(const ce of Tt)ce.leaveGuards.forEach(Q=>{$e.push(zo(Q,tt,pt))});const se=oe.bind(null,tt,pt);return $e.push(se),Dl($e).then(()=>{$e=[];for(const ce of l.list())$e.push(zo(ce,tt,pt));return $e.push(se),Dl($e)}).then(()=>{$e=xp(Kt,"beforeRouteUpdate",tt,pt);for(const ce of Kt)ce.updateGuards.forEach(Q=>{$e.push(zo(Q,tt,pt))});return $e.push(se),Dl($e)}).then(()=>{$e=[];for(const ce of tt.matched)if(ce.beforeEnter&&!pt.matched.includes(ce))if(Array.isArray(ce.beforeEnter))for(const Q of ce.beforeEnter)$e.push(zo(Q,tt,pt));else $e.push(zo(ce.beforeEnter,tt,pt));return $e.push(se),Dl($e)}).then(()=>(tt.matched.forEach(ce=>ce.enterCallbacks={}),$e=xp(_t,"beforeRouteEnter",tt,pt),$e.push(se),Dl($e))).then(()=>{$e=[];for(const ce of h.list())$e.push(zo(ce,tt,pt));return $e.push(se),Dl($e)}).catch(ce=>Ls(ce,8)?ce:Promise.reject(ce))}function le(tt,pt,$e){for(const Tt of m.list())Tt(tt,pt,$e)}function te(tt,pt,$e,Tt,Kt){const _t=C(tt,pt);if(_t)return _t;const se=pt===Vo,ce=Ll?history.state:{};$e&&(Tt||se?L.replace(tt.fullPath,wn({scroll:se&&ce&&ce.scroll},Kt)):L.push(tt.fullPath,Kt)),y.value=tt,ct(tt,pt,$e,se),Ge()}let ue;function Y(){ue=L.listen((tt,pt,$e)=>{const Tt=_(tt),Kt=U(Tt);if(Kt){W(wn(Kt,{replace:!0}),Tt).catch(Hu);return}d=Tt;const _t=y.value;Ll&&WT(k0(_t.fullPath,$e.delta),Xh()),J(Tt,_t).catch(se=>Ls(se,4|8)?se:Ls(se,2)?(W(se.to,Tt).then(ce=>{Ls(ce,4|16)&&!$e.delta&&$e.type===Gu.pop&&L.go(-1,!1)}).catch(Hu),Promise.reject()):($e.delta&&L.go(-$e.delta,!1),Be(se,Tt,_t))).then(se=>{se=se||te(Tt,_t,!1),se&&($e.delta?L.go(-$e.delta,!1):$e.type===Gu.pop&&Ls(se,4|16)&&L.go(-1,!1)),le(Tt,_t,se)}).catch(Hu)})}let de=zu(),ne=zu(),xe;function Be(tt,pt,$e){Ge(tt);const Tt=ne.list();return Tt.length?Tt.forEach(Kt=>Kt(tt,pt,$e)):console.error(tt),Promise.reject(tt)}function je(){return xe&&y.value!==Vo?Promise.resolve():new Promise((tt,pt)=>{de.add([tt,pt])})}function Ge(tt){xe||(xe=!0,Y(),de.list().forEach(([pt,$e])=>tt?$e(tt):pt()),de.reset())}function ct(tt,pt,$e,Tt){const{scrollBehavior:Kt}=u;if(!Ll||!Kt)return Promise.resolve();const _t=!$e&&jT(k0(tt.fullPath,0))||(Tt||!$e)&&history.state&&history.state.scroll||null;return a0().then(()=>Kt(tt,pt,_t)).then(se=>se&&zT(se)).catch(se=>Be(se,tt,pt))}const lt=tt=>L.go(tt);let Et;const Ct=new Set;return{currentRoute:y,addRoute:E,removeRoute:S,hasRoute:T,getRoutes:x,resolve:_,options:u,push:I,replace:B,go:lt,back:()=>lt(-1),forward:()=>lt(1),beforeEach:l.add,beforeResolve:h.add,afterEach:m.add,onError:ne.add,isReady:je,install(tt){const pt=this;tt.component("RouterLink",CS),tt.component("RouterView",DS),tt.config.globalProperties.$router=pt,Object.defineProperty(tt.config.globalProperties,"$route",{enumerable:!0,get:()=>Ou(y)}),Ll&&!Et&&y.value===Vo&&(Et=!0,I(L.location).catch(Kt=>{}));const $e={};for(const Kt in Vo)$e[Kt]=Fa(()=>y.value[Kt]);tt.provide(mp,pt),tt.provide(I0,yl($e)),tt.provide(gp,y);const Tt=tt.unmount;Ct.add(tt),tt.unmount=function(){Ct.delete(tt),Ct.size<1&&(d=Vo,ue&&ue(),y.value=Vo,Et=!1,xe=!1),Tt()}}}}function Dl(u){return u.reduce((A,c)=>A.then(()=>c()),Promise.resolve())}function OS(u,A){const c=[],g=[],L=[],l=Math.max(A.matched.length,u.matched.length);for(let h=0;h<l;h++){const m=A.matched[h];m&&(u.matched.find(d=>Rl(d,m))?g.push(m):c.push(m));const y=u.matched[h];y&&(A.matched.find(d=>Rl(d,y))||L.push(y))}return[c,g,L]}/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var IS="store";function Ol(u,A){Object.keys(u).forEach(function(c){return A(u[c],c)})}function BS(u){return u!==null&&typeof u=="object"}function FS(u){return u&&typeof u.then=="function"}function NS(u,A){return function(){return u(A)}}function ny(u,A,c){return A.indexOf(u)<0&&(c&&c.prepend?A.unshift(u):A.push(u)),function(){var g=A.indexOf(u);g>-1&&A.splice(g,1)}}function iy(u,A){u._actions=Object.create(null),u._mutations=Object.create(null),u._wrappedGetters=Object.create(null),u._modulesNamespaceMap=Object.create(null);var c=u.state;Qh(u,c,[],u._modules.root,!0),Mp(u,c,A)}function Mp(u,A,c){var g=u._state;u.getters={},u._makeLocalGettersCache=Object.create(null);var L=u._wrappedGetters,l={};Ol(L,function(h,m){l[m]=NS(h,u),Object.defineProperty(u.getters,m,{get:function(){return l[m]()},enumerable:!0})}),u._state=yl({data:A}),u.strict&&VS(u),g&&c&&u._withCommit(function(){g.data=null})}function Qh(u,A,c,g,L){var l=!c.length,h=u._modules.getNamespace(c);if(g.namespaced&&(u._modulesNamespaceMap[h],u._modulesNamespaceMap[h]=g),!l&&!L){var m=Tp(A,c.slice(0,-1)),y=c[c.length-1];u._withCommit(function(){m[y]=g.state})}var d=g.context=kS(u,h,c);g.forEachMutation(function(p,v){var b=h+v;US(u,b,p,d)}),g.forEachAction(function(p,v){var b=p.root?v:h+v,E=p.handler||p;HS(u,b,E,d)}),g.forEachGetter(function(p,v){var b=h+v;GS(u,b,p,d)}),g.forEachChild(function(p,v){Qh(u,A,c.concat(v),p,L)})}function kS(u,A,c){var g=A==="",L={dispatch:g?u.dispatch:function(l,h,m){var y=qh(l,h,m),d=y.payload,p=y.options,v=y.type;return(!p||!p.root)&&(v=A+v),u.dispatch(v,d)},commit:g?u.commit:function(l,h,m){var y=qh(l,h,m),d=y.payload,p=y.options,v=y.type;(!p||!p.root)&&(v=A+v),u.commit(v,d,p)}};return Object.defineProperties(L,{getters:{get:g?function(){return u.getters}:function(){return ay(u,A)}},state:{get:function(){return Tp(u.state,c)}}}),L}function ay(u,A){if(!u._makeLocalGettersCache[A]){var c={},g=A.length;Object.keys(u.getters).forEach(function(L){if(L.slice(0,g)===A){var l=L.slice(g);Object.defineProperty(c,l,{get:function(){return u.getters[L]},enumerable:!0})}}),u._makeLocalGettersCache[A]=c}return u._makeLocalGettersCache[A]}function US(u,A,c,g){var L=u._mutations[A]||(u._mutations[A]=[]);L.push(function(h){c.call(u,g.state,h)})}function HS(u,A,c,g){var L=u._actions[A]||(u._actions[A]=[]);L.push(function(h){var m=c.call(u,{dispatch:g.dispatch,commit:g.commit,getters:g.getters,state:g.state,rootGetters:u.getters,rootState:u.state},h);return FS(m)||(m=Promise.resolve(m)),u._devtoolHook?m.catch(function(y){throw u._devtoolHook.emit("vuex:error",y),y}):m})}function GS(u,A,c,g){u._wrappedGetters[A]||(u._wrappedGetters[A]=function(l){return c(g.state,g.getters,l.state,l.getters)})}function VS(u){Ml(function(){return u._state.data},function(){},{deep:!0,flush:"sync"})}function Tp(u,A){return A.reduce(function(c,g){return c[g]},u)}function qh(u,A,c){return BS(u)&&u.type&&(c=A,A=u,u=u.type),{type:u,payload:A,options:c}}var zS="vuex bindings",oy="vuex:mutations",Sp="vuex:actions",Il="vuex",WS=0;function jS(u,A){RT({id:"org.vuejs.vuex",app:u,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[zS]},function(c){c.addTimelineLayer({id:oy,label:"Vuex Mutations",color:sy}),c.addTimelineLayer({id:Sp,label:"Vuex Actions",color:sy}),c.addInspector({id:Il,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),c.on.getInspectorTree(function(g){if(g.app===u&&g.inspectorId===Il)if(g.filter){var L=[];hy(L,A._modules.root,g.filter,""),g.rootNodes=L}else g.rootNodes=[cy(A._modules.root,"")]}),c.on.getInspectorState(function(g){if(g.app===u&&g.inspectorId===Il){var L=g.nodeId;ay(A,L),g.state=QS(KS(A._modules,L),L==="root"?A.getters:A._makeLocalGettersCache,L)}}),c.on.editInspectorState(function(g){if(g.app===u&&g.inspectorId===Il){var L=g.nodeId,l=g.path;L!=="root"&&(l=L.split("/").filter(Boolean).concat(l)),A._withCommit(function(){g.set(A._state.data,l,g.state.value)})}}),A.subscribe(function(g,L){var l={};g.payload&&(l.payload=g.payload),l.state=L,c.notifyComponentUpdate(),c.sendInspectorTree(Il),c.sendInspectorState(Il),c.addTimelineEvent({layerId:oy,event:{time:Date.now(),title:g.type,data:l}})}),A.subscribeAction({before:function(g,L){var l={};g.payload&&(l.payload=g.payload),g._id=WS++,g._time=Date.now(),l.state=L,c.addTimelineEvent({layerId:Sp,event:{time:g._time,title:g.type,groupId:g._id,subtitle:"start",data:l}})},after:function(g,L){var l={},h=Date.now()-g._time;l.duration={_custom:{type:"duration",display:h+"ms",tooltip:"Action duration",value:h}},g.payload&&(l.payload=g.payload),l.state=L,c.addTimelineEvent({layerId:Sp,event:{time:Date.now(),title:g.type,groupId:g._id,subtitle:"end",data:l}})}})})}var sy=8702998,XS=6710886,YS=16777215,ly={label:"namespaced",textColor:YS,backgroundColor:XS};function uy(u){return u&&u!=="root"?u.split("/").slice(-2,-1)[0]:"Root"}function cy(u,A){return{id:A||"root",label:uy(A),tags:u.namespaced?[ly]:[],children:Object.keys(u._children).map(function(c){return cy(u._children[c],A+c+"/")})}}function hy(u,A,c,g){g.includes(c)&&u.push({id:g||"root",label:g.endsWith("/")?g.slice(0,g.length-1):g||"Root",tags:A.namespaced?[ly]:[]}),Object.keys(A._children).forEach(function(L){hy(u,A._children[L],c,g+L+"/")})}function QS(u,A,c){A=c==="root"?A:A[c];var g=Object.keys(A),L={state:Object.keys(u.state).map(function(h){return{key:h,editable:!0,value:u.state[h]}})};if(g.length){var l=qS(A);L.getters=Object.keys(l).map(function(h){return{key:h.endsWith("/")?uy(h):h,editable:!1,value:_p(function(){return l[h]})}})}return L}function qS(u){var A={};return Object.keys(u).forEach(function(c){var g=c.split("/");if(g.length>1){var L=A,l=g.pop();g.forEach(function(h){L[h]||(L[h]={_custom:{value:{},display:h,tooltip:"Module",abstract:!0}}),L=L[h]._custom.value}),L[l]=_p(function(){return u[c]})}else A[c]=_p(function(){return u[c]})}),A}function KS(u,A){var c=A.split("/").filter(function(g){return g});return c.reduce(function(g,L,l){var h=g[L];if(!h)throw new Error('Missing module "'+L+'" for path "'+A+'".');return l===c.length-1?h:h._children},A==="root"?u:u.root._children)}function _p(u){try{return u()}catch(A){return A}}var ba=function(A,c){this.runtime=c,this._children=Object.create(null),this._rawModule=A;var g=A.state;this.state=(typeof g=="function"?g():g)||{}},fy={namespaced:{configurable:!0}};fy.namespaced.get=function(){return!!this._rawModule.namespaced};ba.prototype.addChild=function(A,c){this._children[A]=c};ba.prototype.removeChild=function(A){delete this._children[A]};ba.prototype.getChild=function(A){return this._children[A]};ba.prototype.hasChild=function(A){return A in this._children};ba.prototype.update=function(A){this._rawModule.namespaced=A.namespaced,A.actions&&(this._rawModule.actions=A.actions),A.mutations&&(this._rawModule.mutations=A.mutations),A.getters&&(this._rawModule.getters=A.getters)};ba.prototype.forEachChild=function(A){Ol(this._children,A)};ba.prototype.forEachGetter=function(A){this._rawModule.getters&&Ol(this._rawModule.getters,A)};ba.prototype.forEachAction=function(A){this._rawModule.actions&&Ol(this._rawModule.actions,A)};ba.prototype.forEachMutation=function(A){this._rawModule.mutations&&Ol(this._rawModule.mutations,A)};Object.defineProperties(ba.prototype,fy);var Rs=function(A){this.register([],A,!1)};Rs.prototype.get=function(A){return A.reduce(function(c,g){return c.getChild(g)},this.root)};Rs.prototype.getNamespace=function(A){var c=this.root;return A.reduce(function(g,L){return c=c.getChild(L),g+(c.namespaced?L+"/":"")},"")};Rs.prototype.update=function(A){dy([],this.root,A)};Rs.prototype.register=function(A,c,g){var L=this;g===void 0&&(g=!0);var l=new ba(c,g);if(A.length===0)this.root=l;else{var h=this.get(A.slice(0,-1));h.addChild(A[A.length-1],l)}c.modules&&Ol(c.modules,function(m,y){L.register(A.concat(y),m,g)})};Rs.prototype.unregister=function(A){var c=this.get(A.slice(0,-1)),g=A[A.length-1],L=c.getChild(g);!L||!L.runtime||c.removeChild(g)};Rs.prototype.isRegistered=function(A){var c=this.get(A.slice(0,-1)),g=A[A.length-1];return c?c.hasChild(g):!1};function dy(u,A,c){if(A.update(c),c.modules)for(var g in c.modules){if(!A.getChild(g))return;dy(u.concat(g),A.getChild(g),c.modules[g])}}function h_(u){return new Li(u)}var Li=function(A){var c=this;A===void 0&&(A={});var g=A.plugins;g===void 0&&(g=[]);var L=A.strict;L===void 0&&(L=!1);var l=A.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Rs(A),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=l;var h=this,m=this,y=m.dispatch,d=m.commit;this.dispatch=function(b,E){return y.call(h,b,E)},this.commit=function(b,E,S){return d.call(h,b,E,S)},this.strict=L;var p=this._modules.root.state;Qh(this,p,[],this._modules.root),Mp(this,p),g.forEach(function(v){return v(c)})},Cp={state:{configurable:!0}};Li.prototype.install=function(A,c){A.provide(c||IS,this),A.config.globalProperties.$store=this;var g=this._devtools!==void 0?this._devtools:!1;g&&jS(A,this)};Cp.state.get=function(){return this._state.data};Cp.state.set=function(u){};Li.prototype.commit=function(A,c,g){var L=this,l=qh(A,c,g),h=l.type,m=l.payload,y={type:h,payload:m},d=this._mutations[h];!d||(this._withCommit(function(){d.forEach(function(v){v(m)})}),this._subscribers.slice().forEach(function(p){return p(y,L.state)}))};Li.prototype.dispatch=function(A,c){var g=this,L=qh(A,c),l=L.type,h=L.payload,m={type:l,payload:h},y=this._actions[l];if(!!y){try{this._actionSubscribers.slice().filter(function(p){return p.before}).forEach(function(p){return p.before(m,g.state)})}catch{}var d=y.length>1?Promise.all(y.map(function(p){return p(h)})):y[0](h);return new Promise(function(p,v){d.then(function(b){try{g._actionSubscribers.filter(function(E){return E.after}).forEach(function(E){return E.after(m,g.state)})}catch{}p(b)},function(b){try{g._actionSubscribers.filter(function(E){return E.error}).forEach(function(E){return E.error(m,g.state,b)})}catch{}v(b)})})}};Li.prototype.subscribe=function(A,c){return ny(A,this._subscribers,c)};Li.prototype.subscribeAction=function(A,c){var g=typeof A=="function"?{before:A}:A;return ny(g,this._actionSubscribers,c)};Li.prototype.watch=function(A,c,g){var L=this;return Ml(function(){return A(L.state,L.getters)},c,Object.assign({},g))};Li.prototype.replaceState=function(A){var c=this;this._withCommit(function(){c._state.data=A})};Li.prototype.registerModule=function(A,c,g){g===void 0&&(g={}),typeof A=="string"&&(A=[A]),this._modules.register(A,c),Qh(this,this.state,A,this._modules.get(A),g.preserveState),Mp(this,this.state)};Li.prototype.unregisterModule=function(A){var c=this;typeof A=="string"&&(A=[A]),this._modules.unregister(A),this._withCommit(function(){var g=Tp(c.state,A.slice(0,-1));delete g[A[A.length-1]]}),iy(this)};Li.prototype.hasModule=function(A){return typeof A=="string"&&(A=[A]),this._modules.isRegistered(A)};Li.prototype.hotUpdate=function(A){this._modules.update(A),iy(this,!0)};Li.prototype._withCommit=function(A){var c=this._committing;this._committing=!0,A(),this._committing=c};Object.defineProperties(Li.prototype,Cp);var Ga=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Kh(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var JS={exports:{}};(function(u,A){(function(c){u.exports=c()})(function(){return function(){function c(g,L,l){function h(d,p){if(!L[d]){if(!g[d]){var v=typeof Kh=="function"&&Kh;if(!p&&v)return v(d,!0);if(m)return m(d,!0);var b=new Error("Cannot find module '"+d+"'");throw b.code="MODULE_NOT_FOUND",b}var E=L[d]={exports:{}};g[d][0].call(E.exports,function(S){var x=g[d][1][S];return h(x||S)},E,E.exports,c,g,L,l)}return L[d].exports}for(var m=typeof Kh=="function"&&Kh,y=0;y<l.length;y++)h(l[y]);return h}return c}()({1:[function(c,g,L){var l=Object.prototype.toString;g.exports=h;function h(m){return m.BYTES_PER_ELEMENT&&l.call(m.buffer)==="[object ArrayBuffer]"||Array.isArray(m)}},{}],2:[function(c,g,L){g.exports=function(h,m){return typeof h=="number"?h:typeof m=="number"?m:0}},{}],3:[function(c,g,L){L.byteLength=b,L.toByteArray=S,L.fromByteArray=_;for(var l=[],h=[],m=typeof Uint8Array!="undefined"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=y.length;d<p;++d)l[d]=y[d],h[y.charCodeAt(d)]=d;h["-".charCodeAt(0)]=62,h["_".charCodeAt(0)]=63;function v(D){var C=D.length;if(C%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=D.indexOf("=");I===-1&&(I=C);var B=I===C?0:4-I%4;return[I,B]}function b(D){var C=v(D),I=C[0],B=C[1];return(I+B)*3/4-B}function E(D,C,I){return(C+I)*3/4-I}function S(D){for(var C,I=v(D),B=I[0],U=I[1],W=new m(E(D,B,U)),oe=0,J=U>0?B-4:B,le=0;le<J;le+=4)C=h[D.charCodeAt(le)]<<18|h[D.charCodeAt(le+1)]<<12|h[D.charCodeAt(le+2)]<<6|h[D.charCodeAt(le+3)],W[oe++]=C>>16&255,W[oe++]=C>>8&255,W[oe++]=C&255;return U===2&&(C=h[D.charCodeAt(le)]<<2|h[D.charCodeAt(le+1)]>>4,W[oe++]=C&255),U===1&&(C=h[D.charCodeAt(le)]<<10|h[D.charCodeAt(le+1)]<<4|h[D.charCodeAt(le+2)]>>2,W[oe++]=C>>8&255,W[oe++]=C&255),W}function x(D){return l[D>>18&63]+l[D>>12&63]+l[D>>6&63]+l[D&63]}function T(D,C,I){for(var B,U=[],W=C;W<I;W+=3)B=(D[W]<<16&16711680)+(D[W+1]<<8&65280)+(D[W+2]&255),U.push(x(B));return U.join("")}function _(D){for(var C,I=D.length,B=I%3,U=[],W=16383,oe=0,J=I-B;oe<J;oe+=W)U.push(T(D,oe,oe+W>J?J:oe+W));return B===1?(C=D[I-1],U.push(l[C>>2]+l[C<<4&63]+"==")):B===2&&(C=(D[I-2]<<8)+D[I-1],U.push(l[C>>10]+l[C>>4&63]+l[C<<2&63]+"=")),U.join("")}},{}],4:[function(c,g,L){g.exports={createLink:function(l,h){var m=document.head||document.getElementsByTagName("head")[0],y=document.createElement("link");y.href=l,y.rel="stylesheet";for(var d in h)if(!!h.hasOwnProperty(d)){var p=h[d];y.setAttribute("data-"+d,p)}m.appendChild(y)},createStyle:function(l,h){var m=document.head||document.getElementsByTagName("head")[0],y=document.createElement("style");y.type="text/css";for(var d in h)if(!!h.hasOwnProperty(d)){var p=h[d];y.setAttribute("data-"+d,p)}y.sheet?(y.innerHTML=l,y.sheet.cssText=l,m.appendChild(y)):y.styleSheet?(m.appendChild(y),y.styleSheet.cssText=l):(y.appendChild(document.createTextNode(l)),m.appendChild(y))}}},{}],5:[function(c,g,L){var l=c("buffer").Buffer;g.exports=function(h,m){if(!!l.isBuffer(h)&&!!l.isBuffer(m)){if(typeof h.equals=="function")return h.equals(m);if(h.length!==m.length)return!1;for(var y=0;y<h.length;y++)if(h[y]!==m[y])return!1;return!0}}},{buffer:6}],6:[function(c,g,L){(function(l,h){var m=c("base64-js"),y=c("ieee754"),d=c("isarray");L.Buffer=h,L.SlowBuffer=U,L.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=l.TYPED_ARRAY_SUPPORT!==void 0?l.TYPED_ARRAY_SUPPORT:p(),L.kMaxLength=v();function p(){try{var $=new Uint8Array(1);return $.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},$.foo()===42&&typeof $.subarray=="function"&&$.subarray(1,1).byteLength===0}catch{return!1}}function v(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function b($,V){if(v()<V)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?($=new Uint8Array(V),$.__proto__=h.prototype):($===null&&($=new h(V)),$.length=V),$}function h($,V,z){if(!h.TYPED_ARRAY_SUPPORT&&!(this instanceof h))return new h($,V,z);if(typeof $=="number"){if(typeof V=="string")throw new Error("If encoding is specified then the first argument must be a string");return T(this,$)}return E(this,$,V,z)}h.poolSize=8192,h._augment=function($){return $.__proto__=h.prototype,$};function E($,V,z,fe){if(typeof V=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&V instanceof ArrayBuffer?C($,V,z,fe):typeof V=="string"?_($,V,z):I($,V)}h.from=function($,V,z){return E(null,$,V,z)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0}));function S($){if(typeof $!="number")throw new TypeError('"size" argument must be a number');if($<0)throw new RangeError('"size" argument must not be negative')}function x($,V,z,fe){return S(V),V<=0?b($,V):z!==void 0?typeof fe=="string"?b($,V).fill(z,fe):b($,V).fill(z):b($,V)}h.alloc=function($,V,z){return x(null,$,V,z)};function T($,V){if(S(V),$=b($,V<0?0:B(V)|0),!h.TYPED_ARRAY_SUPPORT)for(var z=0;z<V;++z)$[z]=0;return $}h.allocUnsafe=function($){return T(null,$)},h.allocUnsafeSlow=function($){return T(null,$)};function _($,V,z){if((typeof z!="string"||z==="")&&(z="utf8"),!h.isEncoding(z))throw new TypeError('"encoding" must be a valid string encoding');var fe=W(V,z)|0;$=b($,fe);var Te=$.write(V,z);return Te!==fe&&($=$.slice(0,Te)),$}function D($,V){var z=V.length<0?0:B(V.length)|0;$=b($,z);for(var fe=0;fe<z;fe+=1)$[fe]=V[fe]&255;return $}function C($,V,z,fe){if(V.byteLength,z<0||V.byteLength<z)throw new RangeError("'offset' is out of bounds");if(V.byteLength<z+(fe||0))throw new RangeError("'length' is out of bounds");return z===void 0&&fe===void 0?V=new Uint8Array(V):fe===void 0?V=new Uint8Array(V,z):V=new Uint8Array(V,z,fe),h.TYPED_ARRAY_SUPPORT?($=V,$.__proto__=h.prototype):$=D($,V),$}function I($,V){if(h.isBuffer(V)){var z=B(V.length)|0;return $=b($,z),$.length===0||V.copy($,0,0,z),$}if(V){if(typeof ArrayBuffer!="undefined"&&V.buffer instanceof ArrayBuffer||"length"in V)return typeof V.length!="number"||ze(V.length)?b($,0):D($,V);if(V.type==="Buffer"&&d(V.data))return D($,V.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function B($){if($>=v())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+v().toString(16)+" bytes");return $|0}function U($){return+$!=$&&($=0),h.alloc(+$)}h.isBuffer=function(V){return!!(V!=null&&V._isBuffer)},h.compare=function(V,z){if(!h.isBuffer(V)||!h.isBuffer(z))throw new TypeError("Arguments must be Buffers");if(V===z)return 0;for(var fe=V.length,Te=z.length,Qe=0,Je=Math.min(fe,Te);Qe<Je;++Qe)if(V[Qe]!==z[Qe]){fe=V[Qe],Te=z[Qe];break}return fe<Te?-1:Te<fe?1:0},h.isEncoding=function(V){switch(String(V).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(V,z){if(!d(V))throw new TypeError('"list" argument must be an Array of Buffers');if(V.length===0)return h.alloc(0);var fe;if(z===void 0)for(z=0,fe=0;fe<V.length;++fe)z+=V[fe].length;var Te=h.allocUnsafe(z),Qe=0;for(fe=0;fe<V.length;++fe){var Je=V[fe];if(!h.isBuffer(Je))throw new TypeError('"list" argument must be an Array of Buffers');Je.copy(Te,Qe),Qe+=Je.length}return Te};function W($,V){if(h.isBuffer($))return $.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView($)||$ instanceof ArrayBuffer))return $.byteLength;typeof $!="string"&&($=""+$);var z=$.length;if(z===0)return 0;for(var fe=!1;;)switch(V){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":case void 0:return me($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z*2;case"hex":return z>>>1;case"base64":return ke($).length;default:if(fe)return me($).length;V=(""+V).toLowerCase(),fe=!0}}h.byteLength=W;function oe($,V,z){var fe=!1;if((V===void 0||V<0)&&(V=0),V>this.length||((z===void 0||z>this.length)&&(z=this.length),z<=0)||(z>>>=0,V>>>=0,z<=V))return"";for($||($="utf8");;)switch($){case"hex":return jt(this,V,z);case"utf8":case"utf-8":return Ge(this,V,z);case"ascii":return Et(this,V,z);case"latin1":case"binary":return Ct(this,V,z);case"base64":return je(this,V,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tt(this,V,z);default:if(fe)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),fe=!0}}h.prototype._isBuffer=!0;function J($,V,z){var fe=$[V];$[V]=$[z],$[z]=fe}h.prototype.swap16=function(){var V=this.length;if(V%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var z=0;z<V;z+=2)J(this,z,z+1);return this},h.prototype.swap32=function(){var V=this.length;if(V%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var z=0;z<V;z+=4)J(this,z,z+3),J(this,z+1,z+2);return this},h.prototype.swap64=function(){var V=this.length;if(V%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var z=0;z<V;z+=8)J(this,z,z+7),J(this,z+1,z+6),J(this,z+2,z+5),J(this,z+3,z+4);return this},h.prototype.toString=function(){var V=this.length|0;return V===0?"":arguments.length===0?Ge(this,0,V):oe.apply(this,arguments)},h.prototype.equals=function(V){if(!h.isBuffer(V))throw new TypeError("Argument must be a Buffer");return this===V?!0:h.compare(this,V)===0},h.prototype.inspect=function(){var V="",z=L.INSPECT_MAX_BYTES;return this.length>0&&(V=this.toString("hex",0,z).match(/.{2}/g).join(" "),this.length>z&&(V+=" ... ")),"<Buffer "+V+">"},h.prototype.compare=function(V,z,fe,Te,Qe){if(!h.isBuffer(V))throw new TypeError("Argument must be a Buffer");if(z===void 0&&(z=0),fe===void 0&&(fe=V?V.length:0),Te===void 0&&(Te=0),Qe===void 0&&(Qe=this.length),z<0||fe>V.length||Te<0||Qe>this.length)throw new RangeError("out of range index");if(Te>=Qe&&z>=fe)return 0;if(Te>=Qe)return-1;if(z>=fe)return 1;if(z>>>=0,fe>>>=0,Te>>>=0,Qe>>>=0,this===V)return 0;for(var Je=Qe-Te,Mt=fe-z,Vt=Math.min(Je,Mt),or=this.slice(Te,Qe),Lr=V.slice(z,fe),Ht=0;Ht<Vt;++Ht)if(or[Ht]!==Lr[Ht]){Je=or[Ht],Mt=Lr[Ht];break}return Je<Mt?-1:Mt<Je?1:0};function le($,V,z,fe,Te){if($.length===0)return-1;if(typeof z=="string"?(fe=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),z=+z,isNaN(z)&&(z=Te?0:$.length-1),z<0&&(z=$.length+z),z>=$.length){if(Te)return-1;z=$.length-1}else if(z<0)if(Te)z=0;else return-1;if(typeof V=="string"&&(V=h.from(V,fe)),h.isBuffer(V))return V.length===0?-1:te($,V,z,fe,Te);if(typeof V=="number")return V=V&255,h.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?Te?Uint8Array.prototype.indexOf.call($,V,z):Uint8Array.prototype.lastIndexOf.call($,V,z):te($,[V],z,fe,Te);throw new TypeError("val must be string, number or Buffer")}function te($,V,z,fe,Te){var Qe=1,Je=$.length,Mt=V.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if($.length<2||V.length<2)return-1;Qe=2,Je/=2,Mt/=2,z/=2}function Vt(Qt,Vr){return Qe===1?Qt[Vr]:Qt.readUInt16BE(Vr*Qe)}var or;if(Te){var Lr=-1;for(or=z;or<Je;or++)if(Vt($,or)===Vt(V,Lr===-1?0:or-Lr)){if(Lr===-1&&(Lr=or),or-Lr+1===Mt)return Lr*Qe}else Lr!==-1&&(or-=or-Lr),Lr=-1}else for(z+Mt>Je&&(z=Je-Mt),or=z;or>=0;or--){for(var Ht=!0,Xr=0;Xr<Mt;Xr++)if(Vt($,or+Xr)!==Vt(V,Xr)){Ht=!1;break}if(Ht)return or}return-1}h.prototype.includes=function(V,z,fe){return this.indexOf(V,z,fe)!==-1},h.prototype.indexOf=function(V,z,fe){return le(this,V,z,fe,!0)},h.prototype.lastIndexOf=function(V,z,fe){return le(this,V,z,fe,!1)};function ue($,V,z,fe){z=Number(z)||0;var Te=$.length-z;fe?(fe=Number(fe),fe>Te&&(fe=Te)):fe=Te;var Qe=V.length;if(Qe%2!=0)throw new TypeError("Invalid hex string");fe>Qe/2&&(fe=Qe/2);for(var Je=0;Je<fe;++Je){var Mt=parseInt(V.substr(Je*2,2),16);if(isNaN(Mt))return Je;$[z+Je]=Mt}return Je}function Y($,V,z,fe){return Ve(me(V,$.length-z),$,z,fe)}function de($,V,z,fe){return Ve(Ee(V),$,z,fe)}function ne($,V,z,fe){return de($,V,z,fe)}function xe($,V,z,fe){return Ve(ke(V),$,z,fe)}function Be($,V,z,fe){return Ve(Pe(V,$.length-z),$,z,fe)}h.prototype.write=function(V,z,fe,Te){if(z===void 0)Te="utf8",fe=this.length,z=0;else if(fe===void 0&&typeof z=="string")Te=z,fe=this.length,z=0;else if(isFinite(z))z=z|0,isFinite(fe)?(fe=fe|0,Te===void 0&&(Te="utf8")):(Te=fe,fe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Qe=this.length-z;if((fe===void 0||fe>Qe)&&(fe=Qe),V.length>0&&(fe<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Te||(Te="utf8");for(var Je=!1;;)switch(Te){case"hex":return ue(this,V,z,fe);case"utf8":case"utf-8":return Y(this,V,z,fe);case"ascii":return de(this,V,z,fe);case"latin1":case"binary":return ne(this,V,z,fe);case"base64":return xe(this,V,z,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,V,z,fe);default:if(Je)throw new TypeError("Unknown encoding: "+Te);Te=(""+Te).toLowerCase(),Je=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function je($,V,z){return V===0&&z===$.length?m.fromByteArray($):m.fromByteArray($.slice(V,z))}function Ge($,V,z){z=Math.min($.length,z);for(var fe=[],Te=V;Te<z;){var Qe=$[Te],Je=null,Mt=Qe>239?4:Qe>223?3:Qe>191?2:1;if(Te+Mt<=z){var Vt,or,Lr,Ht;switch(Mt){case 1:Qe<128&&(Je=Qe);break;case 2:Vt=$[Te+1],(Vt&192)==128&&(Ht=(Qe&31)<<6|Vt&63,Ht>127&&(Je=Ht));break;case 3:Vt=$[Te+1],or=$[Te+2],(Vt&192)==128&&(or&192)==128&&(Ht=(Qe&15)<<12|(Vt&63)<<6|or&63,Ht>2047&&(Ht<55296||Ht>57343)&&(Je=Ht));break;case 4:Vt=$[Te+1],or=$[Te+2],Lr=$[Te+3],(Vt&192)==128&&(or&192)==128&&(Lr&192)==128&&(Ht=(Qe&15)<<18|(Vt&63)<<12|(or&63)<<6|Lr&63,Ht>65535&&Ht<1114112&&(Je=Ht))}}Je===null?(Je=65533,Mt=1):Je>65535&&(Je-=65536,fe.push(Je>>>10&1023|55296),Je=56320|Je&1023),fe.push(Je),Te+=Mt}return lt(fe)}var ct=4096;function lt($){var V=$.length;if(V<=ct)return String.fromCharCode.apply(String,$);for(var z="",fe=0;fe<V;)z+=String.fromCharCode.apply(String,$.slice(fe,fe+=ct));return z}function Et($,V,z){var fe="";z=Math.min($.length,z);for(var Te=V;Te<z;++Te)fe+=String.fromCharCode($[Te]&127);return fe}function Ct($,V,z){var fe="";z=Math.min($.length,z);for(var Te=V;Te<z;++Te)fe+=String.fromCharCode($[Te]);return fe}function jt($,V,z){var fe=$.length;(!V||V<0)&&(V=0),(!z||z<0||z>fe)&&(z=fe);for(var Te="",Qe=V;Qe<z;++Qe)Te+=ge($[Qe]);return Te}function tt($,V,z){for(var fe=$.slice(V,z),Te="",Qe=0;Qe<fe.length;Qe+=2)Te+=String.fromCharCode(fe[Qe]+fe[Qe+1]*256);return Te}h.prototype.slice=function(V,z){var fe=this.length;V=~~V,z=z===void 0?fe:~~z,V<0?(V+=fe,V<0&&(V=0)):V>fe&&(V=fe),z<0?(z+=fe,z<0&&(z=0)):z>fe&&(z=fe),z<V&&(z=V);var Te;if(h.TYPED_ARRAY_SUPPORT)Te=this.subarray(V,z),Te.__proto__=h.prototype;else{var Qe=z-V;Te=new h(Qe,void 0);for(var Je=0;Je<Qe;++Je)Te[Je]=this[Je+V]}return Te};function pt($,V,z){if($%1!=0||$<0)throw new RangeError("offset is not uint");if($+V>z)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUIntLE=function(V,z,fe){V=V|0,z=z|0,fe||pt(V,z,this.length);for(var Te=this[V],Qe=1,Je=0;++Je<z&&(Qe*=256);)Te+=this[V+Je]*Qe;return Te},h.prototype.readUIntBE=function(V,z,fe){V=V|0,z=z|0,fe||pt(V,z,this.length);for(var Te=this[V+--z],Qe=1;z>0&&(Qe*=256);)Te+=this[V+--z]*Qe;return Te},h.prototype.readUInt8=function(V,z){return z||pt(V,1,this.length),this[V]},h.prototype.readUInt16LE=function(V,z){return z||pt(V,2,this.length),this[V]|this[V+1]<<8},h.prototype.readUInt16BE=function(V,z){return z||pt(V,2,this.length),this[V]<<8|this[V+1]},h.prototype.readUInt32LE=function(V,z){return z||pt(V,4,this.length),(this[V]|this[V+1]<<8|this[V+2]<<16)+this[V+3]*16777216},h.prototype.readUInt32BE=function(V,z){return z||pt(V,4,this.length),this[V]*16777216+(this[V+1]<<16|this[V+2]<<8|this[V+3])},h.prototype.readIntLE=function(V,z,fe){V=V|0,z=z|0,fe||pt(V,z,this.length);for(var Te=this[V],Qe=1,Je=0;++Je<z&&(Qe*=256);)Te+=this[V+Je]*Qe;return Qe*=128,Te>=Qe&&(Te-=Math.pow(2,8*z)),Te},h.prototype.readIntBE=function(V,z,fe){V=V|0,z=z|0,fe||pt(V,z,this.length);for(var Te=z,Qe=1,Je=this[V+--Te];Te>0&&(Qe*=256);)Je+=this[V+--Te]*Qe;return Qe*=128,Je>=Qe&&(Je-=Math.pow(2,8*z)),Je},h.prototype.readInt8=function(V,z){return z||pt(V,1,this.length),this[V]&128?(255-this[V]+1)*-1:this[V]},h.prototype.readInt16LE=function(V,z){z||pt(V,2,this.length);var fe=this[V]|this[V+1]<<8;return fe&32768?fe|4294901760:fe},h.prototype.readInt16BE=function(V,z){z||pt(V,2,this.length);var fe=this[V+1]|this[V]<<8;return fe&32768?fe|4294901760:fe},h.prototype.readInt32LE=function(V,z){return z||pt(V,4,this.length),this[V]|this[V+1]<<8|this[V+2]<<16|this[V+3]<<24},h.prototype.readInt32BE=function(V,z){return z||pt(V,4,this.length),this[V]<<24|this[V+1]<<16|this[V+2]<<8|this[V+3]},h.prototype.readFloatLE=function(V,z){return z||pt(V,4,this.length),y.read(this,V,!0,23,4)},h.prototype.readFloatBE=function(V,z){return z||pt(V,4,this.length),y.read(this,V,!1,23,4)},h.prototype.readDoubleLE=function(V,z){return z||pt(V,8,this.length),y.read(this,V,!0,52,8)},h.prototype.readDoubleBE=function(V,z){return z||pt(V,8,this.length),y.read(this,V,!1,52,8)};function $e($,V,z,fe,Te,Qe){if(!h.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(V>Te||V<Qe)throw new RangeError('"value" argument is out of bounds');if(z+fe>$.length)throw new RangeError("Index out of range")}h.prototype.writeUIntLE=function(V,z,fe,Te){if(V=+V,z=z|0,fe=fe|0,!Te){var Qe=Math.pow(2,8*fe)-1;$e(this,V,z,fe,Qe,0)}var Je=1,Mt=0;for(this[z]=V&255;++Mt<fe&&(Je*=256);)this[z+Mt]=V/Je&255;return z+fe},h.prototype.writeUIntBE=function(V,z,fe,Te){if(V=+V,z=z|0,fe=fe|0,!Te){var Qe=Math.pow(2,8*fe)-1;$e(this,V,z,fe,Qe,0)}var Je=fe-1,Mt=1;for(this[z+Je]=V&255;--Je>=0&&(Mt*=256);)this[z+Je]=V/Mt&255;return z+fe},h.prototype.writeUInt8=function(V,z,fe){return V=+V,z=z|0,fe||$e(this,V,z,1,255,0),h.TYPED_ARRAY_SUPPORT||(V=Math.floor(V)),this[z]=V&255,z+1};function Tt($,V,z,fe){V<0&&(V=65535+V+1);for(var Te=0,Qe=Math.min($.length-z,2);Te<Qe;++Te)$[z+Te]=(V&255<<8*(fe?Te:1-Te))>>>(fe?Te:1-Te)*8}h.prototype.writeUInt16LE=function(V,z,fe){return V=+V,z=z|0,fe||$e(this,V,z,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[z]=V&255,this[z+1]=V>>>8):Tt(this,V,z,!0),z+2},h.prototype.writeUInt16BE=function(V,z,fe){return V=+V,z=z|0,fe||$e(this,V,z,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[z]=V>>>8,this[z+1]=V&255):Tt(this,V,z,!1),z+2};function Kt($,V,z,fe){V<0&&(V=4294967295+V+1);for(var Te=0,Qe=Math.min($.length-z,4);Te<Qe;++Te)$[z+Te]=V>>>(fe?Te:3-Te)*8&255}h.prototype.writeUInt32LE=function(V,z,fe){return V=+V,z=z|0,fe||$e(this,V,z,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[z+3]=V>>>24,this[z+2]=V>>>16,this[z+1]=V>>>8,this[z]=V&255):Kt(this,V,z,!0),z+4},h.prototype.writeUInt32BE=function(V,z,fe){return V=+V,z=z|0,fe||$e(this,V,z,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[z]=V>>>24,this[z+1]=V>>>16,this[z+2]=V>>>8,this[z+3]=V&255):Kt(this,V,z,!1),z+4},h.prototype.writeIntLE=function(V,z,fe,Te){if(V=+V,z=z|0,!Te){var Qe=Math.pow(2,8*fe-1);$e(this,V,z,fe,Qe-1,-Qe)}var Je=0,Mt=1,Vt=0;for(this[z]=V&255;++Je<fe&&(Mt*=256);)V<0&&Vt===0&&this[z+Je-1]!==0&&(Vt=1),this[z+Je]=(V/Mt>>0)-Vt&255;return z+fe},h.prototype.writeIntBE=function(V,z,fe,Te){if(V=+V,z=z|0,!Te){var Qe=Math.pow(2,8*fe-1);$e(this,V,z,fe,Qe-1,-Qe)}var Je=fe-1,Mt=1,Vt=0;for(this[z+Je]=V&255;--Je>=0&&(Mt*=256);)V<0&&Vt===0&&this[z+Je+1]!==0&&(Vt=1),this[z+Je]=(V/Mt>>0)-Vt&255;return z+fe},h.prototype.writeInt8=function(V,z,fe){return V=+V,z=z|0,fe||$e(this,V,z,1,127,-128),h.TYPED_ARRAY_SUPPORT||(V=Math.floor(V)),V<0&&(V=255+V+1),this[z]=V&255,z+1},h.prototype.writeInt16LE=function(V,z,fe){return V=+V,z=z|0,fe||$e(this,V,z,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[z]=V&255,this[z+1]=V>>>8):Tt(this,V,z,!0),z+2},h.prototype.writeInt16BE=function(V,z,fe){return V=+V,z=z|0,fe||$e(this,V,z,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[z]=V>>>8,this[z+1]=V&255):Tt(this,V,z,!1),z+2},h.prototype.writeInt32LE=function(V,z,fe){return V=+V,z=z|0,fe||$e(this,V,z,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[z]=V&255,this[z+1]=V>>>8,this[z+2]=V>>>16,this[z+3]=V>>>24):Kt(this,V,z,!0),z+4},h.prototype.writeInt32BE=function(V,z,fe){return V=+V,z=z|0,fe||$e(this,V,z,4,2147483647,-2147483648),V<0&&(V=4294967295+V+1),h.TYPED_ARRAY_SUPPORT?(this[z]=V>>>24,this[z+1]=V>>>16,this[z+2]=V>>>8,this[z+3]=V&255):Kt(this,V,z,!1),z+4};function _t($,V,z,fe,Te,Qe){if(z+fe>$.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function se($,V,z,fe,Te){return Te||_t($,V,z,4),y.write($,V,z,fe,23,4),z+4}h.prototype.writeFloatLE=function(V,z,fe){return se(this,V,z,!0,fe)},h.prototype.writeFloatBE=function(V,z,fe){return se(this,V,z,!1,fe)};function ce($,V,z,fe,Te){return Te||_t($,V,z,8),y.write($,V,z,fe,52,8),z+8}h.prototype.writeDoubleLE=function(V,z,fe){return ce(this,V,z,!0,fe)},h.prototype.writeDoubleBE=function(V,z,fe){return ce(this,V,z,!1,fe)},h.prototype.copy=function(V,z,fe,Te){if(fe||(fe=0),!Te&&Te!==0&&(Te=this.length),z>=V.length&&(z=V.length),z||(z=0),Te>0&&Te<fe&&(Te=fe),Te===fe||V.length===0||this.length===0)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("sourceStart out of bounds");if(Te<0)throw new RangeError("sourceEnd out of bounds");Te>this.length&&(Te=this.length),V.length-z<Te-fe&&(Te=V.length-z+fe);var Qe=Te-fe,Je;if(this===V&&fe<z&&z<Te)for(Je=Qe-1;Je>=0;--Je)V[Je+z]=this[Je+fe];else if(Qe<1e3||!h.TYPED_ARRAY_SUPPORT)for(Je=0;Je<Qe;++Je)V[Je+z]=this[Je+fe];else Uint8Array.prototype.set.call(V,this.subarray(fe,fe+Qe),z);return Qe},h.prototype.fill=function(V,z,fe,Te){if(typeof V=="string"){if(typeof z=="string"?(Te=z,z=0,fe=this.length):typeof fe=="string"&&(Te=fe,fe=this.length),V.length===1){var Qe=V.charCodeAt(0);Qe<256&&(V=Qe)}if(Te!==void 0&&typeof Te!="string")throw new TypeError("encoding must be a string");if(typeof Te=="string"&&!h.isEncoding(Te))throw new TypeError("Unknown encoding: "+Te)}else typeof V=="number"&&(V=V&255);if(z<0||this.length<z||this.length<fe)throw new RangeError("Out of range index");if(fe<=z)return this;z=z>>>0,fe=fe===void 0?this.length:fe>>>0,V||(V=0);var Je;if(typeof V=="number")for(Je=z;Je<fe;++Je)this[Je]=V;else{var Mt=h.isBuffer(V)?V:me(new h(V,Te).toString()),Vt=Mt.length;for(Je=0;Je<fe-z;++Je)this[Je+z]=Mt[Je%Vt]}return this};var Q=/[^+\/0-9A-Za-z-_]/g;function K($){if($=ae($).replace(Q,""),$.length<2)return"";for(;$.length%4!=0;)$=$+"=";return $}function ae($){return $.trim?$.trim():$.replace(/^\s+|\s+$/g,"")}function ge($){return $<16?"0"+$.toString(16):$.toString(16)}function me($,V){V=V||1/0;for(var z,fe=$.length,Te=null,Qe=[],Je=0;Je<fe;++Je){if(z=$.charCodeAt(Je),z>55295&&z<57344){if(!Te){if(z>56319){(V-=3)>-1&&Qe.push(239,191,189);continue}else if(Je+1===fe){(V-=3)>-1&&Qe.push(239,191,189);continue}Te=z;continue}if(z<56320){(V-=3)>-1&&Qe.push(239,191,189),Te=z;continue}z=(Te-55296<<10|z-56320)+65536}else Te&&(V-=3)>-1&&Qe.push(239,191,189);if(Te=null,z<128){if((V-=1)<0)break;Qe.push(z)}else if(z<2048){if((V-=2)<0)break;Qe.push(z>>6|192,z&63|128)}else if(z<65536){if((V-=3)<0)break;Qe.push(z>>12|224,z>>6&63|128,z&63|128)}else if(z<1114112){if((V-=4)<0)break;Qe.push(z>>18|240,z>>12&63|128,z>>6&63|128,z&63|128)}else throw new Error("Invalid code point")}return Qe}function Ee($){for(var V=[],z=0;z<$.length;++z)V.push($.charCodeAt(z)&255);return V}function Pe($,V){for(var z,fe,Te,Qe=[],Je=0;Je<$.length&&!((V-=2)<0);++Je)z=$.charCodeAt(Je),fe=z>>8,Te=z%256,Qe.push(Te),Qe.push(fe);return Qe}function ke($){return m.toByteArray(K($))}function Ve($,V,z,fe){for(var Te=0;Te<fe&&!(Te+z>=V.length||Te>=$.length);++Te)V[Te+z]=$[Te];return Te}function ze($){return $!==$}}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{},c("buffer").Buffer)},{"base64-js":3,buffer:6,ieee754:29,isarray:35}],7:[function(c,g,L){(function(){if(typeof window!="undefined")try{var l=new window.CustomEvent("test",{cancelable:!0});if(l.preventDefault(),l.defaultPrevented!==!0)throw new Error("Could not prevent default")}catch{var h=function(y,d){var p,v;return d=d||{},d.bubbles=!!d.bubbles,d.cancelable=!!d.cancelable,p=document.createEvent("CustomEvent"),p.initCustomEvent(y,d.bubbles,d.cancelable,d.detail),v=p.preventDefault,p.preventDefault=function(){v.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch{this.defaultPrevented=!0}},p};h.prototype=window.Event.prototype,window.CustomEvent=h}})()},{}],8:[function(c,g,L){L=g.exports=c("./debug"),L.log=m,L.formatArgs=h,L.save=y,L.load=d,L.useColors=l,L.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:p(),L.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function l(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}L.formatters.j=function(v){return JSON.stringify(v)};function h(){var v=arguments,b=this.useColors;if(v[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+v[0]+(b?"%c ":" "),!b)return v;var E="color: "+this.color;v=[v[0],E,"color: inherit"].concat(Array.prototype.slice.call(v,1));var S=0,x=0;return v[0].replace(/%[a-z%]/g,function(T){T!=="%%"&&(S++,T==="%c"&&(x=S))}),v.splice(x,0,E),v}function m(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function y(v){try{v==null?L.storage.removeItem("debug"):L.storage.debug=v}catch{}}function d(){var v;try{v=L.storage.debug}catch{}return v}L.enable(d());function p(){try{return window.localStorage}catch{}}},{"./debug":9}],9:[function(c,g,L){L=g.exports=m,L.coerce=v,L.disable=d,L.enable=y,L.enabled=p,L.names=[],L.skips=[],L.formatters={};var l=0;function h(){return L.colors[l++%L.colors.length]}function m(b){function E(){}E.enabled=!1;function S(){var T=S;T.useColors==null&&(T.useColors=L.useColors()),T.color==null&&T.useColors&&(T.color=h());var _=Array.prototype.slice.call(arguments);_[0]=L.coerce(_[0]),typeof _[0]!="string"&&(_=["%o"].concat(_));var D=0;_[0]=_[0].replace(/%([a-z%])/g,function(I,B){if(I==="%%")return I;D++;var U=L.formatters[B];if(typeof U=="function"){var W=_[D];I=U.call(T,W),_.splice(D,1),D--}return I}),typeof L.formatArgs=="function"&&(_=L.formatArgs.apply(T,_));var C=S.log||L.log||console.log.bind(console);C.apply(T,_)}S.enabled=!0;var x=L.enabled(b)?S:E;return x.namespace=b,x}function y(b){L.save(b);for(var E=(b||"").split(/[\s,]+/),S=E.length,x=0;x<S;x++)!E[x]||(b=E[x].replace(/\*/g,".*?"),b[0]==="-"?L.skips.push(new RegExp("^"+b.substr(1)+"$")):L.names.push(new RegExp("^"+b+"$")))}function d(){L.enable("")}function p(b){var E,S;for(E=0,S=L.skips.length;E<S;E++)if(L.skips[E].test(b))return!1;for(E=0,S=L.names.length;E<S;E++)if(L.names[E].test(b))return!0;return!1}function v(b){return b instanceof Error?b.stack||b.message:b}},{}],10:[function(c,g,L){var l=c("is-obj"),h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;function y(v){if(v==null)throw new TypeError("Sources cannot be null or undefined");return Object(v)}function d(v,b,E){var S=b[E];if(S!=null){if(h.call(v,E)&&(v[E]===void 0||v[E]===null))throw new TypeError("Cannot convert undefined or null to object ("+E+")");!h.call(v,E)||!l(S)?v[E]=S:v[E]=p(Object(v[E]),b[E])}}function p(v,b){if(v===b)return v;b=Object(b);for(var E in b)h.call(b,E)&&d(v,b,E);if(Object.getOwnPropertySymbols)for(var S=Object.getOwnPropertySymbols(b),x=0;x<S.length;x++)m.call(b,S[x])&&d(v,b,S[x]);return v}g.exports=function(b){b=y(b);for(var E=1;E<arguments.length;E++)p(b,arguments[E]);return b}},{"is-obj":34}],11:[function(c,g,L){var l=c("object-keys"),h=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",m=Object.prototype.toString,y=Array.prototype.concat,d=Object.defineProperty,p=function(x){return typeof x=="function"&&m.call(x)==="[object Function]"},v=function(){var x={};try{d(x,"x",{enumerable:!1,value:x});for(var T in x)return!1;return x.x===x}catch{return!1}},b=d&&v(),E=function(x,T,_,D){T in x&&(!p(D)||!D())||(b?d(x,T,{configurable:!0,enumerable:!1,value:_,writable:!0}):x[T]=_)},S=function(x,T){var _=arguments.length>2?arguments[2]:{},D=l(T);h&&(D=y.call(D,Object.getOwnPropertySymbols(T)));for(var C=0;C<D.length;C+=1)E(x,D[C],T[D[C]],_[D[C]])};S.supportsDescriptors=!!b,g.exports=S},{"object-keys":41}],12:[function(c,g,L){/*! (C) WebReflection Mit Style License */(function(l,h,m,y){function d(ft,ht){for(var St=0,rr=ft.length;St<rr;St++)B(ft[St],ht)}function p(ft){for(var ht=0,St=ft.length,rr;ht<St;ht++)rr=ft[ht],yn(rr,lt[b(rr)])}function v(ft){return function(ht){Pe(ht)&&(B(ht,ft),d(ht.querySelectorAll(Et),ft))}}function b(ft){var ht=ze.call(ft,"is"),St=ft.nodeName.toUpperCase(),rr=jt.call(ct,ht?Be+ht.toUpperCase():xe+St);return ht&&-1<rr&&!E(St,ht)?-1:rr}function E(ft,ht){return-1<Et.indexOf(ft+'[is="'+ht+'"]')}function S(ft){var ht=ft.currentTarget,St=ft.attrChange,rr=ft.attrName,sr=ft.target;Lr&&(!sr||sr===ht)&&ht.attributeChangedCallback&&rr!=="style"&&ft.prevValue!==ft.newValue&&ht.attributeChangedCallback(rr,St===ft[le]?null:ft.prevValue,St===ft[ue]?null:ft.newValue)}function x(ft){var ht=v(ft);return function(St){Qe.push(ht,St.target)}}function T(ft){or&&(or=!1,ft.currentTarget.removeEventListener(de,T)),d((ft.target||h).querySelectorAll(Et),ft.detail===oe?oe:W),Ee&&C()}function _(ft,ht){var St=this;$.call(St,ft,ht),Ht.call(St,{target:St})}function D(ft,ht){ae(ft,ht),Vr?Vr.observe(ft,fe):(Vt&&(ft.setAttribute=_,ft[U]=Qt(ft),ft.addEventListener(ne,Ht)),ft.addEventListener(Y,S)),ft.createdCallback&&Lr&&(ft.created=!0,ft.createdCallback(),ft.created=!1)}function C(){for(var ft,ht=0,St=ke.length;ht<St;ht++)ft=ke[ht],Ct.contains(ft)||(St--,ke.splice(ht--,1),B(ft,oe))}function I(ft){throw new Error("A "+ft+" type is already registered")}function B(ft,ht){var St,rr=b(ft);-1<rr&&(Rn(ft,lt[rr]),rr=0,ht===W&&!ft[W]?(ft[oe]=!1,ft[W]=!0,rr=1,Ee&&jt.call(ke,ft)<0&&ke.push(ft)):ht===oe&&!ft[oe]&&(ft[W]=!1,ft[oe]=!0,rr=1),rr&&(St=ft[ht+"Callback"])&&St.call(ft))}if(!(y in h)){var U="__"+y+(Math.random()*1e5>>0),W="attached",oe="detached",J="extends",le="ADDITION",te="MODIFICATION",ue="REMOVAL",Y="DOMAttrModified",de="DOMContentLoaded",ne="DOMSubtreeModified",xe="<",Be="=",je=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,Ge=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],ct=[],lt=[],Et="",Ct=h.documentElement,jt=ct.indexOf||function(ft){for(var ht=this.length;ht--&&this[ht]!==ft;);return ht},tt=m.prototype,pt=tt.hasOwnProperty,$e=tt.isPrototypeOf,Tt=m.defineProperty,Kt=m.getOwnPropertyDescriptor,_t=m.getOwnPropertyNames,se=m.getPrototypeOf,ce=m.setPrototypeOf,Q=!!m.__proto__,K=m.create||function ft(ht){return ht?(ft.prototype=ht,new ft):this},ae=ce||(Q?function(ft,ht){return ft.__proto__=ht,ft}:_t&&Kt?function(){function ft(ht,St){for(var rr,sr=_t(St),pr=0,cr=sr.length;pr<cr;pr++)rr=sr[pr],pt.call(ht,rr)||Tt(ht,rr,Kt(St,rr))}return function(ht,St){do ft(ht,St);while((St=se(St))&&!$e.call(St,ht));return ht}}():function(ft,ht){for(var St in ht)ft[St]=ht[St];return ft}),ge=l.MutationObserver||l.WebKitMutationObserver,me=(l.HTMLElement||l.Element||l.Node).prototype,Ee=!$e.call(me,Ct),Pe=Ee?function(ft){return ft.nodeType===1}:function(ft){return $e.call(me,ft)},ke=Ee&&[],Ve=me.cloneNode,ze=me.getAttribute,$=me.setAttribute,V=me.removeAttribute,z=h.createElement,fe=ge&&{attributes:!0,characterData:!0,attributeOldValue:!0},Te=ge||function(ft){Vt=!1,Ct.removeEventListener(Y,Te)},Qe,Je=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.msRequestAnimationFrame||function(ft){setTimeout(ft,10)},Mt=!1,Vt=!0,or=!0,Lr=!0,Ht,Xr,Qt,Vr,Rn,yn;ce||Q?(Rn=function(ft,ht){$e.call(ht,ft)||D(ft,ht)},yn=D):(Rn=function(ft,ht){ft[U]||(ft[U]=m(!0),D(ft,ht))},yn=Rn),Ee?(Vt=!1,function(){var ft=Kt(me,"addEventListener"),ht=ft.value,St=function(pr){var cr=new CustomEvent(Y,{bubbles:!0});cr.attrName=pr,cr.prevValue=ze.call(this,pr),cr.newValue=null,cr[ue]=cr.attrChange=2,V.call(this,pr),this.dispatchEvent(cr)},rr=function(pr,cr){var Cr=this.hasAttribute(pr),Zr=Cr&&ze.call(this,pr);e=new CustomEvent(Y,{bubbles:!0}),$.call(this,pr,cr),e.attrName=pr,e.prevValue=Cr?Zr:null,e.newValue=cr,Cr?e[te]=e.attrChange=1:e[le]=e.attrChange=0,this.dispatchEvent(e)},sr=function(pr){var cr=pr.currentTarget,Cr=cr[U],Zr=pr.propertyName,kr;Cr.hasOwnProperty(Zr)&&(Cr=Cr[Zr],kr=new CustomEvent(Y,{bubbles:!0}),kr.attrName=Cr.name,kr.prevValue=Cr.value||null,kr.newValue=Cr.value=cr[Zr]||null,kr.prevValue==null?kr[le]=kr.attrChange=0:kr[te]=kr.attrChange=1,cr.dispatchEvent(kr))};ft.value=function(pr,cr,Cr){pr===Y&&this.attributeChangedCallback&&this.setAttribute!==rr&&(this[U]={className:{name:"class",value:this.className}},this.setAttribute=rr,this.removeAttribute=St,ht.call(this,"propertychange",sr)),ht.call(this,pr,cr,Cr)},Tt(me,"addEventListener",ft)}()):ge||(Ct.addEventListener(Y,Te),Ct.setAttribute(U,1),Ct.removeAttribute(U),Vt&&(Ht=function(ft){var ht=this,St,rr,sr;if(ht===ft.target){St=ht[U],ht[U]=rr=Qt(ht);for(sr in rr){if(!(sr in St))return Xr(0,ht,sr,St[sr],rr[sr],le);if(rr[sr]!==St[sr])return Xr(1,ht,sr,St[sr],rr[sr],te)}for(sr in St)if(!(sr in rr))return Xr(2,ht,sr,St[sr],rr[sr],ue)}},Xr=function(ft,ht,St,rr,sr,pr){var cr={attrChange:ft,currentTarget:ht,attrName:St,prevValue:rr,newValue:sr};cr[pr]=ft,S(cr)},Qt=function(ft){for(var ht,St,rr={},sr=ft.attributes,pr=0,cr=sr.length;pr<cr;pr++)ht=sr[pr],St=ht.name,St!=="setAttribute"&&(rr[St]=ht.value);return rr})),h[y]=function(ft,ht){if(cr=ft.toUpperCase(),Mt||(Mt=!0,ge?(Vr=function(Zr,kr){function jn($r,jr){for(var dn=0,Ri=$r.length;dn<Ri;jr($r[dn++]));}return new ge(function($r){for(var jr,dn,Ri,si=0,tn=$r.length;si<tn;si++)jr=$r[si],jr.type==="childList"?(jn(jr.addedNodes,Zr),jn(jr.removedNodes,kr)):(dn=jr.target,Lr&&dn.attributeChangedCallback&&jr.attributeName!=="style"&&(Ri=ze.call(dn,jr.attributeName),Ri!==jr.oldValue&&dn.attributeChangedCallback(jr.attributeName,jr.oldValue,Ri)))})}(v(W),v(oe)),Vr.observe(h,{childList:!0,subtree:!0})):(Qe=[],Je(function Zr(){for(;Qe.length;)Qe.shift().call(null,Qe.shift());Je(Zr)}),h.addEventListener("DOMNodeInserted",x(W)),h.addEventListener("DOMNodeRemoved",x(oe))),h.addEventListener(de,T),h.addEventListener("readystatechange",T),h.createElement=function(Zr,kr){var jn=z.apply(h,arguments),$r=""+Zr,jr=jt.call(ct,(kr?Be:xe)+(kr||$r).toUpperCase()),dn=-1<jr;return kr&&(jn.setAttribute("is",kr=kr.toLowerCase()),dn&&(dn=E($r.toUpperCase(),kr))),Lr=!h.createElement.innerHTMLHelper,dn&&yn(jn,lt[jr]),jn},me.cloneNode=function(Zr){var kr=Ve.call(this,!!Zr),jn=b(kr);return-1<jn&&yn(kr,lt[jn]),Zr&&p(kr.querySelectorAll(Et)),kr}),-2<jt.call(ct,Be+cr)+jt.call(ct,xe+cr)&&I(ft),!je.test(cr)||-1<jt.call(Ge,cr))throw new Error("The type "+ft+" is invalid");var St=function(){return sr?h.createElement(pr,cr):h.createElement(pr)},rr=ht||tt,sr=pt.call(rr,J),pr=sr?ht[J].toUpperCase():cr,cr,Cr;return sr&&-1<jt.call(ct,xe+pr)&&I(pr),Cr=ct.push((sr?Be:xe)+cr)-1,Et=Et.concat(Et.length?",":"",sr?pr+'[is="'+ft.toLowerCase()+'"]':pr),St.prototype=lt[Cr]=pt.call(rr,"prototype")?rr.prototype:K(me),d(h.querySelectorAll(Et),W),St}}})(window,document,Object,"registerElement")},{}],13:[function(c,g,L){g.exports=function(l){switch(l){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],14:[function(c,g,L){var l,h=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",y=Object.getPrototypeOf||function(S){return S.__proto__},d=l,p=l,v=l,b=typeof Uint8Array=="undefined"?l:y(Uint8Array),E={"$ %Array%":Array,"$ %ArrayBuffer%":typeof ArrayBuffer=="undefined"?l:ArrayBuffer,"$ %ArrayBufferPrototype%":typeof ArrayBuffer=="undefined"?l:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":m?y([][Symbol.iterator]()):l,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":l,"$ %AsyncFunction%":p,"$ %AsyncFunctionPrototype%":l,"$ %AsyncGenerator%":l,"$ %AsyncGeneratorFunction%":v,"$ %AsyncGeneratorPrototype%":l,"$ %AsyncIteratorPrototype%":l,"$ %Atomics%":typeof Atomics=="undefined"?l:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":typeof DataView=="undefined"?l:DataView,"$ %DataViewPrototype%":typeof DataView=="undefined"?l:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":typeof Float32Array=="undefined"?l:Float32Array,"$ %Float32ArrayPrototype%":typeof Float32Array=="undefined"?l:Float32Array.prototype,"$ %Float64Array%":typeof Float64Array=="undefined"?l:Float64Array,"$ %Float64ArrayPrototype%":typeof Float64Array=="undefined"?l:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":l,"$ %GeneratorFunction%":d,"$ %GeneratorPrototype%":l,"$ %Int8Array%":typeof Int8Array=="undefined"?l:Int8Array,"$ %Int8ArrayPrototype%":typeof Int8Array=="undefined"?l:Int8Array.prototype,"$ %Int16Array%":typeof Int16Array=="undefined"?l:Int16Array,"$ %Int16ArrayPrototype%":typeof Int16Array=="undefined"?l:Int8Array.prototype,"$ %Int32Array%":typeof Int32Array=="undefined"?l:Int32Array,"$ %Int32ArrayPrototype%":typeof Int32Array=="undefined"?l:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":m?y(y([][Symbol.iterator]())):l,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":typeof Map=="undefined"?l:Map,"$ %MapIteratorPrototype%":typeof Map=="undefined"||!m?l:y(new Map()[Symbol.iterator]()),"$ %MapPrototype%":typeof Map=="undefined"?l:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":typeof Promise=="undefined"?l:Promise,"$ %PromisePrototype%":typeof Promise=="undefined"?l:Promise.prototype,"$ %PromiseProto_then%":typeof Promise=="undefined"?l:Promise.prototype.then,"$ %Promise_all%":typeof Promise=="undefined"?l:Promise.all,"$ %Promise_reject%":typeof Promise=="undefined"?l:Promise.reject,"$ %Promise_resolve%":typeof Promise=="undefined"?l:Promise.resolve,"$ %Proxy%":typeof Proxy=="undefined"?l:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":typeof Reflect=="undefined"?l:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":typeof Set=="undefined"?l:Set,"$ %SetIteratorPrototype%":typeof Set=="undefined"||!m?l:y(new Set()[Symbol.iterator]()),"$ %SetPrototype%":typeof Set=="undefined"?l:Set.prototype,"$ %SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?l:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":typeof SharedArrayBuffer=="undefined"?l:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":m?y(""[Symbol.iterator]()):l,"$ %StringPrototype%":String.prototype,"$ %Symbol%":m?Symbol:l,"$ %SymbolPrototype%":m?Symbol.prototype:l,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":h,"$ %TypedArray%":b,"$ %TypedArrayPrototype%":b?b.prototype:l,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":typeof Uint8Array=="undefined"?l:Uint8Array,"$ %Uint8ArrayPrototype%":typeof Uint8Array=="undefined"?l:Uint8Array.prototype,"$ %Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?l:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":typeof Uint8ClampedArray=="undefined"?l:Uint8ClampedArray.prototype,"$ %Uint16Array%":typeof Uint16Array=="undefined"?l:Uint16Array,"$ %Uint16ArrayPrototype%":typeof Uint16Array=="undefined"?l:Uint16Array.prototype,"$ %Uint32Array%":typeof Uint32Array=="undefined"?l:Uint32Array,"$ %Uint32ArrayPrototype%":typeof Uint32Array=="undefined"?l:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":typeof WeakMap=="undefined"?l:WeakMap,"$ %WeakMapPrototype%":typeof WeakMap=="undefined"?l:WeakMap.prototype,"$ %WeakSet%":typeof WeakSet=="undefined"?l:WeakSet,"$ %WeakSetPrototype%":typeof WeakSet=="undefined"?l:WeakSet.prototype};g.exports=function(x,T){if(arguments.length>1&&typeof T!="boolean")throw new TypeError('"allowMissing" argument must be a boolean');var _="$ "+x;if(!(_ in E))throw new SyntaxError("intrinsic "+x+" does not exist!");if(typeof E[_]=="undefined"&&!T)throw new TypeError("intrinsic "+x+" exists, but is not available. Please file an issue!");return E[_]}},{}],15:[function(c,g,L){var l=c("./GetIntrinsic"),h=l("%Object%"),m=l("%TypeError%"),y=l("%String%"),d=c("./helpers/assertRecord"),p=c("./helpers/isNaN"),v=c("./helpers/isFinite"),b=c("./helpers/sign"),E=c("./helpers/mod"),S=c("is-callable"),x=c("es-to-primitive/es5"),T=c("has"),_={ToPrimitive:x,ToBoolean:function(C){return!!C},ToNumber:function(C){return+C},ToInteger:function(C){var I=this.ToNumber(C);return p(I)?0:I===0||!v(I)?I:b(I)*Math.floor(Math.abs(I))},ToInt32:function(C){return this.ToNumber(C)>>0},ToUint32:function(C){return this.ToNumber(C)>>>0},ToUint16:function(C){var I=this.ToNumber(C);if(p(I)||I===0||!v(I))return 0;var B=b(I)*Math.floor(Math.abs(I));return E(B,65536)},ToString:function(C){return y(C)},ToObject:function(C){return this.CheckObjectCoercible(C),h(C)},CheckObjectCoercible:function(C,I){if(C==null)throw new m(I||"Cannot call method on "+C);return C},IsCallable:S,SameValue:function(C,I){return C===I?C===0?1/C==1/I:!0:p(C)&&p(I)},Type:function(C){if(C===null)return"Null";if(typeof C=="undefined")return"Undefined";if(typeof C=="function"||typeof C=="object")return"Object";if(typeof C=="number")return"Number";if(typeof C=="boolean")return"Boolean";if(typeof C=="string")return"String"},IsPropertyDescriptor:function(C){if(this.Type(C)!=="Object")return!1;var I={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var B in C)if(T(C,B)&&!I[B])return!1;var U=T(C,"[[Value]]"),W=T(C,"[[Get]]")||T(C,"[[Set]]");if(U&&W)throw new m("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(C){return!(typeof C=="undefined"||(d(this,"Property Descriptor","Desc",C),!T(C,"[[Get]]")&&!T(C,"[[Set]]")))},IsDataDescriptor:function(C){return!(typeof C=="undefined"||(d(this,"Property Descriptor","Desc",C),!T(C,"[[Value]]")&&!T(C,"[[Writable]]")))},IsGenericDescriptor:function(C){return typeof C=="undefined"?!1:(d(this,"Property Descriptor","Desc",C),!this.IsAccessorDescriptor(C)&&!this.IsDataDescriptor(C))},FromPropertyDescriptor:function(C){if(typeof C=="undefined")return C;if(d(this,"Property Descriptor","Desc",C),this.IsDataDescriptor(C))return{value:C["[[Value]]"],writable:!!C["[[Writable]]"],enumerable:!!C["[[Enumerable]]"],configurable:!!C["[[Configurable]]"]};if(this.IsAccessorDescriptor(C))return{get:C["[[Get]]"],set:C["[[Set]]"],enumerable:!!C["[[Enumerable]]"],configurable:!!C["[[Configurable]]"]};throw new m("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(C){if(this.Type(C)!=="Object")throw new m("ToPropertyDescriptor requires an object");var I={};if(T(C,"enumerable")&&(I["[[Enumerable]]"]=this.ToBoolean(C.enumerable)),T(C,"configurable")&&(I["[[Configurable]]"]=this.ToBoolean(C.configurable)),T(C,"value")&&(I["[[Value]]"]=C.value),T(C,"writable")&&(I["[[Writable]]"]=this.ToBoolean(C.writable)),T(C,"get")){var B=C.get;if(typeof B!="undefined"&&!this.IsCallable(B))throw new TypeError("getter must be a function");I["[[Get]]"]=B}if(T(C,"set")){var U=C.set;if(typeof U!="undefined"&&!this.IsCallable(U))throw new m("setter must be a function");I["[[Set]]"]=U}if((T(I,"[[Get]]")||T(I,"[[Set]]"))&&(T(I,"[[Value]]")||T(I,"[[Writable]]")))throw new m("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return I}};g.exports=_},{"./GetIntrinsic":14,"./helpers/assertRecord":16,"./helpers/isFinite":17,"./helpers/isNaN":18,"./helpers/mod":19,"./helpers/sign":20,"es-to-primitive/es5":21,has:28,"is-callable":32}],16:[function(c,g,L){var l=c("../GetIntrinsic"),h=l("%TypeError%"),m=l("%SyntaxError%"),y=c("has"),d={"Property Descriptor":function(v,b){if(v.Type(b)!=="Object")return!1;var E={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var S in b)if(y(b,S)&&!E[S])return!1;var x=y(b,"[[Value]]"),T=y(b,"[[Get]]")||y(b,"[[Set]]");if(x&&T)throw new h("Property Descriptors may not be both accessor and data descriptors");return!0}};g.exports=function(v,b,E,S){var x=d[b];if(typeof x!="function")throw new m("unknown record type: "+b);if(!x(v,S))throw new h(E+" must be a "+b);console.log(x(v,S),S)}},{"../GetIntrinsic":14,has:28}],17:[function(c,g,L){var l=Number.isNaN||function(h){return h!==h};g.exports=Number.isFinite||function(h){return typeof h=="number"&&!l(h)&&h!==1/0&&h!==-1/0}},{}],18:[function(c,g,L){g.exports=Number.isNaN||function(h){return h!==h}},{}],19:[function(c,g,L){g.exports=function(h,m){var y=h%m;return Math.floor(y>=0?y:y+m)}},{}],20:[function(c,g,L){g.exports=function(h){return h>=0?1:-1}},{}],21:[function(c,g,L){var l=Object.prototype.toString,h=c("./helpers/isPrimitive"),m=c("is-callable"),y={"[[DefaultValue]]":function(d){var p;if(arguments.length>1?p=arguments[1]:p=l.call(d)==="[object Date]"?String:Number,p===String||p===Number){var v=p===String?["toString","valueOf"]:["valueOf","toString"],b,E;for(E=0;E<v.length;++E)if(m(d[v[E]])&&(b=d[v[E]](),h(b)))return b;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};g.exports=function(p){return h(p)?p:arguments.length>1?y["[[DefaultValue]]"](p,arguments[1]):y["[[DefaultValue]]"](p)}},{"./helpers/isPrimitive":22,"is-callable":32}],22:[function(c,g,L){g.exports=function(h){return h===null||typeof h!="function"&&typeof h!="object"}},{}],23:[function(c,g,L){var l=c("dtype");g.exports=h;function h(m,y,d){if(!m)throw new TypeError("must specify data as first parameter");if(d=+(d||0)|0,Array.isArray(m)&&m[0]&&typeof m[0][0]=="number"){var p=m[0].length,v=m.length*p,b,E,S,x;(!y||typeof y=="string")&&(y=new(l(y||"float32"))(v+d));var T=y.length-d;if(v!==T)throw new Error("source length "+v+" ("+p+"x"+m.length+") does not match destination length "+T);for(b=0,S=d;b<m.length;b++)for(E=0;E<p;E++)y[S++]=m[b][E]===null?NaN:m[b][E]}else if(!y||typeof y=="string"){var _=l(y||"float32");if(Array.isArray(m)||y==="array")for(y=new _(m.length+d),b=0,S=d,x=y.length;S<x;S++,b++)y[S]=m[b]===null?NaN:m[b];else d===0?y=new _(m):(y=new _(m.length+d),y.set(m,d))}else y.set(m,d);return y}},{dtype:13}],24:[function(c,g,L){var l=c("is-callable"),h=Object.prototype.toString,m=Object.prototype.hasOwnProperty,y=function(E,S,x){for(var T=0,_=E.length;T<_;T++)m.call(E,T)&&(x==null?S(E[T],T,E):S.call(x,E[T],T,E))},d=function(E,S,x){for(var T=0,_=E.length;T<_;T++)x==null?S(E.charAt(T),T,E):S.call(x,E.charAt(T),T,E)},p=function(E,S,x){for(var T in E)m.call(E,T)&&(x==null?S(E[T],T,E):S.call(x,E[T],T,E))},v=function(E,S,x){if(!l(S))throw new TypeError("iterator must be a function");var T;arguments.length>=3&&(T=x),h.call(E)==="[object Array]"?y(E,S,T):typeof E=="string"?d(E,S,T):p(E,S,T)};g.exports=v},{"is-callable":32}],25:[function(c,g,L){var l="Function.prototype.bind called on incompatible ",h=Array.prototype.slice,m=Object.prototype.toString,y="[object Function]";g.exports=function(p){var v=this;if(typeof v!="function"||m.call(v)!==y)throw new TypeError(l+v);for(var b=h.call(arguments,1),E,S=function(){if(this instanceof E){var C=v.apply(this,b.concat(h.call(arguments)));return Object(C)===C?C:this}else return v.apply(p,b.concat(h.call(arguments)))},x=Math.max(0,v.length-b.length),T=[],_=0;_<x;_++)T.push("$"+_);if(E=Function("binder","return function ("+T.join(",")+"){ return binder.apply(this,arguments); }")(S),v.prototype){var D=function(){};D.prototype=v.prototype,E.prototype=new D,D.prototype=null}return E}},{}],26:[function(c,g,L){var l=c("./implementation");g.exports=Function.prototype.bind||l},{"./implementation":25}],27:[function(c,g,L){(function(l){var h;typeof window!="undefined"?h=window:typeof l!="undefined"?h=l:typeof self!="undefined"?h=self:h={},g.exports=h}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],28:[function(c,g,L){var l=c("function-bind");g.exports=l.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":26}],29:[function(c,g,L){L.read=function(l,h,m,y,d){var p,v,b=d*8-y-1,E=(1<<b)-1,S=E>>1,x=-7,T=m?d-1:0,_=m?-1:1,D=l[h+T];for(T+=_,p=D&(1<<-x)-1,D>>=-x,x+=b;x>0;p=p*256+l[h+T],T+=_,x-=8);for(v=p&(1<<-x)-1,p>>=-x,x+=y;x>0;v=v*256+l[h+T],T+=_,x-=8);if(p===0)p=1-S;else{if(p===E)return v?NaN:(D?-1:1)*(1/0);v=v+Math.pow(2,y),p=p-S}return(D?-1:1)*v*Math.pow(2,p-y)},L.write=function(l,h,m,y,d,p){var v,b,E,S=p*8-d-1,x=(1<<S)-1,T=x>>1,_=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=y?0:p-1,C=y?1:-1,I=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(b=isNaN(h)?1:0,v=x):(v=Math.floor(Math.log(h)/Math.LN2),h*(E=Math.pow(2,-v))<1&&(v--,E*=2),v+T>=1?h+=_/E:h+=_*Math.pow(2,1-T),h*E>=2&&(v++,E/=2),v+T>=x?(b=0,v=x):v+T>=1?(b=(h*E-1)*Math.pow(2,d),v=v+T):(b=h*Math.pow(2,T-1)*Math.pow(2,d),v=0));d>=8;l[m+D]=b&255,D+=C,b/=256,d-=8);for(v=v<<d|b,S+=d;S>0;l[m+D]=v&255,D+=C,v/=256,S-=8);l[m+D-C]|=I*128}},{}],30:[function(c,g,L){typeof Object.create=="function"?g.exports=function(h,m){m&&(h.super_=m,h.prototype=Object.create(m.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}))}:g.exports=function(h,m){if(m){h.super_=m;var y=function(){};y.prototype=m.prototype,h.prototype=new y,h.prototype.constructor=h}}},{}],31:[function(c,g,L){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */g.exports=function(m){return m!=null&&(l(m)||h(m)||!!m._isBuffer)};function l(m){return!!m.constructor&&typeof m.constructor.isBuffer=="function"&&m.constructor.isBuffer(m)}function h(m){return typeof m.readFloatLE=="function"&&typeof m.slice=="function"&&l(m.slice(0,0))}},{}],32:[function(c,g,L){var l=Function.prototype.toString,h=/^\s*class\b/,m=function(S){try{var x=l.call(S);return h.test(x)}catch{return!1}},y=function(S){try{return m(S)?!1:(l.call(S),!0)}catch{return!1}},d=Object.prototype.toString,p="[object Function]",v="[object GeneratorFunction]",b=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol";g.exports=function(S){if(!S||typeof S!="function"&&typeof S!="object")return!1;if(typeof S=="function"&&!S.prototype)return!0;if(b)return y(S);if(m(S))return!1;var x=d.call(S);return x===p||x===v}},{}],33:[function(c,g,L){g.exports=h;var l=Object.prototype.toString;function h(m){var y=l.call(m);return y==="[object Function]"||typeof m=="function"&&y!=="[object RegExp]"||typeof window!="undefined"&&(m===window.setTimeout||m===window.alert||m===window.confirm||m===window.prompt)}},{}],34:[function(c,g,L){g.exports=function(l){var h=typeof l;return l!==null&&(h==="object"||h==="function")}},{}],35:[function(c,g,L){var l={}.toString;g.exports=Array.isArray||function(h){return l.call(h)=="[object Array]"}},{}],36:[function(c,g,L){var l=c("word-wrapper"),h=c("xtend"),m=c("as-number"),y=["x","e","a","o","n","s","r","c","u","m","v","w","z"],d=["m","w"],p=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],v="	".charCodeAt(0),b=" ".charCodeAt(0),E=0,S=1,x=2;g.exports=function(te){return new T(te)};function T(le){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(le)}T.prototype.update=function(le){if(le=h({measure:this._measure},le),this._opt=le,this._opt.tabSize=m(this._opt.tabSize,4),!le.font)throw new Error("must provide a valid bitmap font");var te=this.glyphs,ue=le.text||"",Y=le.font;this._setupSpaceGlyphs(Y);var de=l.lines(ue,le),ne=le.width||0;te.length=0;var xe=de.reduce(function(pt,$e){return Math.max(pt,$e.width,ne)},0),Be=0,je=0,Ge=m(le.lineHeight,Y.common.lineHeight),ct=Y.common.base,lt=Ge-ct,Et=le.letterSpacing||0,Ct=Ge*de.length-lt,jt=oe(this._opt.align);je-=Ct,this._width=xe,this._height=Ct,this._descender=Ge-ct,this._baseline=ct,this._xHeight=I(Y),this._capHeight=U(Y),this._lineHeight=Ge,this._ascender=Ge-lt-this._xHeight;var tt=this;de.forEach(function(pt,$e){for(var Tt=pt.start,Kt=pt.end,_t=pt.width,se,ce=Tt;ce<Kt;ce++){var Q=ue.charCodeAt(ce),K=tt.getGlyph(Y,Q);if(K){se&&(Be+=W(Y,se.id,K.id));var ae=Be;jt===S?ae+=(xe-_t)/2:jt===x&&(ae+=xe-_t),te.push({position:[ae,je],data:K,index:ce,line:$e}),Be+=K.xadvance+Et,se=K}}je+=Ge,Be=0}),this._linesTotal=de.length},T.prototype._setupSpaceGlyphs=function(le){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,!(!le.chars||le.chars.length===0)){var te=C(le,b)||B(le)||le.chars[0],ue=this._opt.tabSize*te.xadvance;this._fallbackSpaceGlyph=te,this._fallbackTabGlyph=h(te,{x:0,y:0,xadvance:ue,id:v,xoffset:0,yoffset:0,width:0,height:0})}},T.prototype.getGlyph=function(le,te){var ue=C(le,te);return ue||(te===v?this._fallbackTabGlyph:te===b?this._fallbackSpaceGlyph:null)},T.prototype.computeMetrics=function(le,te,ue,Y){var de=this._opt.letterSpacing||0,ne=this._opt.font,xe=0,Be=0,je=0,Ge,ct;if(!ne.chars||ne.chars.length===0)return{start:te,end:te,width:0};ue=Math.min(le.length,ue);for(var lt=te;lt<ue;lt++){var Et=le.charCodeAt(lt),Ge=this.getGlyph(ne,Et);if(Ge){Ge.xoffset;var Ct=ct?W(ne,ct.id,Ge.id):0;xe+=Ct;var jt=xe+Ge.xadvance+de,tt=xe+Ge.width;if(tt>=Y||jt>=Y)break;xe=jt,Be=tt,ct=Ge}je++}return ct&&(Be+=ct.xoffset),{start:te,end:te+je,width:Be}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(_);function _(le){Object.defineProperty(T.prototype,le,{get:D(le),configurable:!0})}function D(le){return new Function(["return function "+le+"() {","  return this._"+le,"}"].join(`
`))()}function C(le,te){if(!le.chars||le.chars.length===0)return null;var ue=J(le.chars,te);return ue>=0?le.chars[ue]:null}function I(le){for(var te=0;te<y.length;te++){var ue=y[te].charCodeAt(0),Y=J(le.chars,ue);if(Y>=0)return le.chars[Y].height}return 0}function B(le){for(var te=0;te<d.length;te++){var ue=d[te].charCodeAt(0),Y=J(le.chars,ue);if(Y>=0)return le.chars[Y]}return 0}function U(le){for(var te=0;te<p.length;te++){var ue=p[te].charCodeAt(0),Y=J(le.chars,ue);if(Y>=0)return le.chars[Y].height}return 0}function W(le,te,ue){if(!le.kernings||le.kernings.length===0)return 0;for(var Y=le.kernings,de=0;de<Y.length;de++){var ne=Y[de];if(ne.first===te&&ne.second===ue)return ne.amount}return 0}function oe(le){return le==="center"?S:le==="right"?x:E}function J(le,te,ue){ue=ue||0;for(var Y=ue;Y<le.length;Y++)if(le[Y].id===te)return Y;return-1}},{"as-number":2,"word-wrapper":69,xtend:72}],37:[function(c,g,L){(function(l){var h=c("xhr"),m=function(){},y=c("parse-bmfont-ascii"),d=c("parse-bmfont-xml"),p=c("parse-bmfont-binary"),v=c("./lib/is-binary"),b=c("xtend"),E=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();g.exports=function(T,_){_=typeof _=="function"?_:m,typeof T=="string"?T={uri:T}:T||(T={});var D=T.binary;D&&(T=x(T)),h(T,function(C,I,B){if(C)return _(C);if(!/^2/.test(I.statusCode))return _(new Error("http status code: "+I.statusCode));if(!B)return _(new Error("no body result"));var U=!1;if(S(B)){var W=new Uint8Array(B);B=new l(W,"binary")}v(B)&&(U=!0,typeof B=="string"&&(B=new l(B,"binary"))),U||(l.isBuffer(B)&&(B=B.toString(T.encoding)),B=B.trim());var oe;try{var J=I.headers["content-type"];U?oe=p(B):/json/.test(J)||B.charAt(0)==="{"?oe=JSON.parse(B):/xml/.test(J)||B.charAt(0)==="<"?oe=d(B):oe=y(B)}catch(le){_(new Error("error parsing font "+le.message)),_=m}_(null,oe)})};function S(T){var _=Object.prototype.toString;return _.call(T)==="[object ArrayBuffer]"}function x(T){if(E)return b(T,{responseType:"arraybuffer"});if(typeof self.XMLHttpRequest=="undefined")throw new Error("your browser does not support XHR loading");var _=new self.XMLHttpRequest;return _.overrideMimeType("text/plain; charset=x-user-defined"),b({xhr:_},T)}}).call(this,c("buffer").Buffer)},{"./lib/is-binary":38,buffer:6,"parse-bmfont-ascii":43,"parse-bmfont-binary":44,"parse-bmfont-xml":45,xhr:70,xtend:72}],38:[function(c,g,L){(function(l){var h=c("buffer-equal"),m=new l([66,77,70,3]);g.exports=function(y){return typeof y=="string"?y.substring(0,3)==="BMF":y.length>4&&h(y.slice(0,4),m)}}).call(this,c("buffer").Buffer)},{buffer:6,"buffer-equal":5}],39:[function(c,g,L){var l=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;function y(p){if(p==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(p)}function d(){try{if(!Object.assign)return!1;var p=new String("abc");if(p[5]="de",Object.getOwnPropertyNames(p)[0]==="5")return!1;for(var v={},b=0;b<10;b++)v["_"+String.fromCharCode(b)]=b;var E=Object.getOwnPropertyNames(v).map(function(x){return v[x]});if(E.join("")!=="0123456789")return!1;var S={};return"abcdefghijklmnopqrst".split("").forEach(function(x){S[x]=x}),Object.keys(Object.assign({},S)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}g.exports=d()?Object.assign:function(p,v){for(var b,E=y(p),S,x=1;x<arguments.length;x++){b=Object(arguments[x]);for(var T in b)h.call(b,T)&&(E[T]=b[T]);if(l){S=l(b);for(var _=0;_<S.length;_++)m.call(b,S[_])&&(E[S[_]]=b[S[_]])}}return E}},{}],40:[function(c,g,L){var l;if(!Object.keys){var h=Object.prototype.hasOwnProperty,m=Object.prototype.toString,y=c("./isArguments"),d=Object.prototype.propertyIsEnumerable,p=!d.call({toString:null},"toString"),v=d.call(function(){},"prototype"),b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],E=function(_){var D=_.constructor;return D&&D.prototype===_},S={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},x=function(){if(typeof window=="undefined")return!1;for(var _ in window)try{if(!S["$"+_]&&h.call(window,_)&&window[_]!==null&&typeof window[_]=="object")try{E(window[_])}catch{return!0}}catch{return!0}return!1}(),T=function(_){if(typeof window=="undefined"||!x)return E(_);try{return E(_)}catch{return!1}};l=function(D){var C=D!==null&&typeof D=="object",I=m.call(D)==="[object Function]",B=y(D),U=C&&m.call(D)==="[object String]",W=[];if(!C&&!I&&!B)throw new TypeError("Object.keys called on a non-object");var oe=v&&I;if(U&&D.length>0&&!h.call(D,0))for(var J=0;J<D.length;++J)W.push(String(J));if(B&&D.length>0)for(var le=0;le<D.length;++le)W.push(String(le));else for(var te in D)!(oe&&te==="prototype")&&h.call(D,te)&&W.push(String(te));if(p)for(var ue=T(D),Y=0;Y<b.length;++Y)!(ue&&b[Y]==="constructor")&&h.call(D,b[Y])&&W.push(b[Y]);return W}}g.exports=l},{"./isArguments":42}],41:[function(c,g,L){var l=Array.prototype.slice,h=c("./isArguments"),m=Object.keys,y=m?function(v){return m(v)}:c("./implementation"),d=Object.keys;y.shim=function(){if(Object.keys){var v=function(){var b=Object.keys(arguments);return b&&b.length===arguments.length}(1,2);v||(Object.keys=function(E){return h(E)?d(l.call(E)):d(E)})}else Object.keys=y;return Object.keys||y},g.exports=y},{"./implementation":40,"./isArguments":42}],42:[function(c,g,L){var l=Object.prototype.toString;g.exports=function(m){var y=l.call(m),d=y==="[object Arguments]";return d||(d=y!=="[object Array]"&&m!==null&&typeof m=="object"&&typeof m.length=="number"&&m.length>=0&&l.call(m.callee)==="[object Function]"),d}},{}],43:[function(c,g,L){g.exports=function(d){if(!d)throw new Error("no data provided");d=d.toString().trim();var p={pages:[],chars:[],kernings:[]},v=d.split(/\r\n?|\n/g);if(v.length===0)throw new Error("no data in BMFont file");for(var b=0;b<v.length;b++){var E=l(v[b],b);if(!!E)if(E.key==="page"){if(typeof E.data.id!="number")throw new Error("malformed file at line "+b+" -- needs page id=N");if(typeof E.data.file!="string")throw new Error("malformed file at line "+b+' -- needs page file="path"');p.pages[E.data.id]=E.data.file}else E.key==="chars"||E.key==="kernings"||(E.key==="char"?p.chars.push(E.data):E.key==="kerning"?p.kernings.push(E.data):p[E.key]=E.data)}return p};function l(y,d){if(y=y.replace(/\t+/g," ").trim(),!y)return null;var p=y.indexOf(" ");if(p===-1)throw new Error("no named row at line "+d);var v=y.substring(0,p);y=y.substring(p+1),y=y.replace(/letter=[\'\"]\S+[\'\"]/gi,""),y=y.split("="),y=y.map(function(T){return T.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var b=[],E=0;E<y.length;E++){var S=y[E];E===0?b.push({key:S[0],data:""}):E===y.length-1?b[b.length-1].data=h(S[0]):(b[b.length-1].data=h(S[0]),b.push({key:S[1],data:""}))}var x={key:v,data:{}};return b.forEach(function(T){x.data[T.key]=T.data}),x}function h(y){return!y||y.length===0?"":y.indexOf('"')===0||y.indexOf("'")===0?y.substring(1,y.length-1):y.indexOf(",")!==-1?m(y):parseInt(y,10)}function m(y){return y.split(",").map(function(d){return parseInt(d,10)})}},{}],44:[function(c,g,L){var l=[66,77,70];g.exports=function(x){if(x.length<6)throw new Error("invalid buffer length for BMFont");var T=l.every(function(B,U){return x.readUInt8(U)===B});if(!T)throw new Error("BMFont missing BMF byte header");var _=3,D=x.readUInt8(_++);if(D>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var C={kernings:[],chars:[]},I=0;I<5;I++)_+=h(C,x,_);return C};function h(S,x,T){if(T>x.length-1)return 0;var _=x.readUInt8(T++),D=x.readInt32LE(T);switch(T+=4,_){case 1:S.info=m(x,T);break;case 2:S.common=y(x,T);break;case 3:S.pages=d(x,T,D);break;case 4:S.chars=p(x,T,D);break;case 5:S.kernings=v(x,T,D);break}return 5+D}function m(S,x){var T={};T.size=S.readInt16LE(x);var _=S.readUInt8(x+2);return T.smooth=_>>7&1,T.unicode=_>>6&1,T.italic=_>>5&1,T.bold=_>>4&1,_>>3&1&&(T.fixedHeight=1),T.charset=S.readUInt8(x+3)||"",T.stretchH=S.readUInt16LE(x+4),T.aa=S.readUInt8(x+6),T.padding=[S.readInt8(x+7),S.readInt8(x+8),S.readInt8(x+9),S.readInt8(x+10)],T.spacing=[S.readInt8(x+11),S.readInt8(x+12)],T.outline=S.readUInt8(x+13),T.face=E(S,x+14),T}function y(S,x){var T={};return T.lineHeight=S.readUInt16LE(x),T.base=S.readUInt16LE(x+2),T.scaleW=S.readUInt16LE(x+4),T.scaleH=S.readUInt16LE(x+6),T.pages=S.readUInt16LE(x+8),S.readUInt8(x+10),T.packed=0,T.alphaChnl=S.readUInt8(x+11),T.redChnl=S.readUInt8(x+12),T.greenChnl=S.readUInt8(x+13),T.blueChnl=S.readUInt8(x+14),T}function d(S,x,T){for(var _=[],D=b(S,x),C=D.length+1,I=T/C,B=0;B<I;B++)_[B]=S.slice(x,x+D.length).toString("utf8"),x+=C;return _}function p(S,x,T){for(var _=[],D=T/20,C=0;C<D;C++){var I={},B=C*20;I.id=S.readUInt32LE(x+0+B),I.x=S.readUInt16LE(x+4+B),I.y=S.readUInt16LE(x+6+B),I.width=S.readUInt16LE(x+8+B),I.height=S.readUInt16LE(x+10+B),I.xoffset=S.readInt16LE(x+12+B),I.yoffset=S.readInt16LE(x+14+B),I.xadvance=S.readInt16LE(x+16+B),I.page=S.readUInt8(x+18+B),I.chnl=S.readUInt8(x+19+B),_[C]=I}return _}function v(S,x,T){for(var _=[],D=T/10,C=0;C<D;C++){var I={},B=C*10;I.first=S.readUInt32LE(x+0+B),I.second=S.readUInt32LE(x+4+B),I.amount=S.readInt16LE(x+8+B),_[C]=I}return _}function b(S,x){for(var T=x;T<S.length&&S[T]!==0;T++);return S.slice(x,T)}function E(S,x){return b(S,x).toString("utf8")}},{}],45:[function(c,g,L){var l=c("./parse-attribs"),h=c("xml-parse-from-string"),m={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};g.exports=function(b){b=b.toString();var E=h(b),S={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(B){var U=E.getElementsByTagName(B)[0];U&&(S[B]=l(y(U)))});var x=E.getElementsByTagName("pages")[0];if(!x)throw new Error("malformed file -- no <pages> element");for(var T=x.getElementsByTagName("page"),_=0;_<T.length;_++){var D=T[_],C=parseInt(D.getAttribute("id"),10),I=D.getAttribute("file");if(isNaN(C))throw new Error('malformed file -- page "id" attribute is NaN');if(!I)throw new Error('malformed file -- needs page "file" attribute');S.pages[parseInt(C,10)]=I}return["chars","kernings"].forEach(function(B){var U=E.getElementsByTagName(B)[0];if(!!U)for(var W=B.substring(0,B.length-1),oe=U.getElementsByTagName(W),J=0;J<oe.length;J++){var le=oe[J];S[B].push(l(y(le)))}}),S};function y(v){var b=d(v);return b.reduce(function(E,S){var x=p(S.nodeName);return E[x]=S.nodeValue,E},{})}function d(v){for(var b=[],E=0;E<v.attributes.length;E++)b.push(v.attributes[E]);return b}function p(v){return m[v.toLowerCase()]||v}},{"./parse-attribs":46,"xml-parse-from-string":71}],46:[function(c,g,L){var l="chasrset";g.exports=function(y){l in y&&(y.charset=y[l],delete y[l]);for(var d in y)d==="face"||d==="charset"||(d==="padding"||d==="spacing"?y[d]=h(y[d]):y[d]=parseInt(y[d],10));return y};function h(m){return m.split(",").map(function(y){return parseInt(y,10)})}},{}],47:[function(c,g,L){var l=c("string.prototype.trim"),h=c("for-each"),m=function(y){return Object.prototype.toString.call(y)==="[object Array]"};g.exports=function(y){if(!y)return{};var d={};return h(l(y).split(`
`),function(p){var v=p.indexOf(":"),b=l(p.slice(0,v)).toLowerCase(),E=l(p.slice(v+1));typeof d[b]=="undefined"?d[b]=E:m(d[b])?d[b].push(E):d[b]=[d[b],E]}),d}},{"for-each":24,"string.prototype.trim":53}],48:[function(c,g,L){(function(l){var h=l.performance||{},m=function(){for(var y=["now","webkitNow","msNow","mozNow","oNow"];y.length;){var d=y.shift();if(d in h)return h[d].bind(h)}var p=Date.now||function(){return new Date().getTime()},v=(h.timing||{}).navigationStart||p();return function(){return p()-v}}();m.performanceNow=h.now,m.noConflict=function(){h.now=m.performanceNow},m.conflict=function(){h.now=m},m.conflict(),g.exports=m}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],49:[function(c,g,L){var l=g.exports={},h,m;function y(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?h=setTimeout:h=y}catch{h=y}try{typeof clearTimeout=="function"?m=clearTimeout:m=d}catch{m=d}})();function p(I){if(h===setTimeout)return setTimeout(I,0);if((h===y||!h)&&setTimeout)return h=setTimeout,setTimeout(I,0);try{return h(I,0)}catch{try{return h.call(null,I,0)}catch{return h.call(this,I,0)}}}function v(I){if(m===clearTimeout)return clearTimeout(I);if((m===d||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(I);try{return m(I)}catch{try{return m.call(null,I)}catch{return m.call(this,I)}}}var b=[],E=!1,S,x=-1;function T(){!E||!S||(E=!1,S.length?b=S.concat(b):x=-1,b.length&&_())}function _(){if(!E){var I=p(T);E=!0;for(var B=b.length;B;){for(S=b,b=[];++x<B;)S&&S[x].run();x=-1,B=b.length}S=null,E=!1,v(I)}}l.nextTick=function(I){var B=new Array(arguments.length-1);if(arguments.length>1)for(var U=1;U<arguments.length;U++)B[U-1]=arguments[U];b.push(new D(I,B)),b.length===1&&!E&&p(_)};function D(I,B){this.fun=I,this.array=B}D.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function C(){}l.on=C,l.addListener=C,l.once=C,l.off=C,l.removeListener=C,l.removeAllListeners=C,l.emit=C,l.prependListener=C,l.prependOnceListener=C,l.listeners=function(I){return[]},l.binding=function(I){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(I){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],50:[function(c,g,L){(function(l){(function(h){var m=setTimeout,y=typeof l=="function"&&l||function(D){m(D,1)};function d(D,C){return function(){D.apply(C,arguments)}}var p=Array.isArray||function(D){return Object.prototype.toString.call(D)==="[object Array]"};function v(D){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof D!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],_(D,d(E,this),d(S,this))}function b(D){var C=this;if(this._state===null){this._deferreds.push(D);return}y(function(){var I=C._state?D.onFulfilled:D.onRejected;if(I===null){(C._state?D.resolve:D.reject)(C._value);return}var B;try{B=I(C._value)}catch(U){D.reject(U);return}D.resolve(B)})}function E(D){try{if(D===this)throw new TypeError("A promise cannot be resolved with itself.");if(D&&(typeof D=="object"||typeof D=="function")){var C=D.then;if(typeof C=="function"){_(d(C,D),d(E,this),d(S,this));return}}this._state=!0,this._value=D,x.call(this)}catch(I){S.call(this,I)}}function S(D){this._state=!1,this._value=D,x.call(this)}function x(){for(var D=0,C=this._deferreds.length;D<C;D++)b.call(this,this._deferreds[D]);this._deferreds=null}function T(D,C,I,B){this.onFulfilled=typeof D=="function"?D:null,this.onRejected=typeof C=="function"?C:null,this.resolve=I,this.reject=B}function _(D,C,I){var B=!1;try{D(function(U){B||(B=!0,C(U))},function(U){B||(B=!0,I(U))})}catch(U){if(B)return;B=!0,I(U)}}v.prototype.catch=function(D){return this.then(null,D)},v.prototype.then=function(D,C){var I=this;return new v(function(B,U){b.call(I,new T(D,C,B,U))})},v.all=function(){var D=Array.prototype.slice.call(arguments.length===1&&p(arguments[0])?arguments[0]:arguments);return new v(function(C,I){if(D.length===0)return C([]);var B=D.length;function U(oe,J){try{if(J&&(typeof J=="object"||typeof J=="function")){var le=J.then;if(typeof le=="function"){le.call(J,function(te){U(oe,te)},I);return}}D[oe]=J,--B==0&&C(D)}catch(te){I(te)}}for(var W=0;W<D.length;W++)U(W,D[W])})},v.resolve=function(D){return D&&typeof D=="object"&&D.constructor===v?D:new v(function(C){C(D)})},v.reject=function(D){return new v(function(C,I){I(D)})},v.race=function(D){return new v(function(C,I){for(var B=0,U=D.length;B<U;B++)D[B].then(C,I)})},v._setImmediateFn=function(C){y=C},typeof g!="undefined"&&g.exports?g.exports=v:h.Promise||(h.Promise=v)})(this)}).call(this,c("timers").setImmediate)},{timers:67}],51:[function(c,g,L){var l=c("dtype"),h=c("an-array"),m=c("is-buffer"),y=[0,2,3],d=[2,1,3];g.exports=function(v,b){(!v||!(h(v)||m(v)))&&(b=v||{},v=null),typeof b=="number"?b={count:b}:b=b||{};for(var E=typeof b.type=="string"?b.type:"uint16",S=typeof b.count=="number"?b.count:1,x=b.start||0,T=b.clockwise!==!1?y:d,_=T[0],D=T[1],C=T[2],I=S*6,B=v||new(l(E))(I),U=0,W=0;U<I;U+=6,W+=4){var oe=U+x;B[oe+0]=W+0,B[oe+1]=W+1,B[oe+2]=W+2,B[oe+3]=W+_,B[oe+4]=W+D,B[oe+5]=W+C}return B}},{"an-array":1,dtype:13,"is-buffer":31}],52:[function(c,g,L){var l=c("function-bind"),h=c("es-abstract/es5"),m=l.call(Function.call,String.prototype.replace),y=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,d=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;g.exports=function(){var v=h.ToString(h.CheckObjectCoercible(this));return m(m(v,y,""),d,"")}},{"es-abstract/es5":15,"function-bind":26}],53:[function(c,g,L){var l=c("function-bind"),h=c("define-properties"),m=c("./implementation"),y=c("./polyfill"),d=c("./shim"),p=l.call(Function.call,y());h(p,{getPolyfill:y,implementation:m,shim:d}),g.exports=p},{"./implementation":52,"./polyfill":54,"./shim":55,"define-properties":11,"function-bind":26}],54:[function(c,g,L){var l=c("./implementation"),h="\u200B";g.exports=function(){return String.prototype.trim&&h.trim()===h?String.prototype.trim:l}},{"./implementation":52}],55:[function(c,g,L){var l=c("define-properties"),h=c("./polyfill");g.exports=function(){var y=h();return l(String.prototype,{trim:y},{trim:function(){return String.prototype.trim!==y}}),y}},{"./polyfill":54,"define-properties":11}],56:[function(c,g,L){var l={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},h={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},m=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],y={CSS:{},springs:{}};function d(pe,_e,qe){return Math.min(Math.max(pe,_e),qe)}function p(pe,_e){return pe.indexOf(_e)>-1}function v(pe,_e){return pe.apply(null,_e)}var b=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,E=/^rgb/,S=/^hsl/,x={arr:function(pe){return Array.isArray(pe)},obj:function(pe){return p(Object.prototype.toString.call(pe),"Object")},pth:function(pe){return x.obj(pe)&&pe.hasOwnProperty("totalLength")},svg:function(pe){return pe instanceof SVGElement},inp:function(pe){return pe instanceof HTMLInputElement},dom:function(pe){return pe.nodeType||x.svg(pe)},str:function(pe){return typeof pe=="string"},fnc:function(pe){return typeof pe=="function"},und:function(pe){return typeof pe=="undefined"},hex:function(pe){return b.test(pe)},rgb:function(pe){return E.test(pe)},hsl:function(pe){return S.test(pe)},col:function(pe){return x.hex(pe)||x.rgb(pe)||x.hsl(pe)},key:function(pe){return!l.hasOwnProperty(pe)&&!h.hasOwnProperty(pe)&&pe!=="targets"&&pe!=="keyframes"}},T=/\(([^)]+)\)/;function _(pe){var _e=T.exec(pe);return _e?_e[1].split(",").map(function(qe){return parseFloat(qe)}):[]}function D(pe,_e){var qe=_(pe),st=d(x.und(qe[0])?1:qe[0],.1,100),et=d(x.und(qe[1])?100:qe[1],.1,100),gt=d(x.und(qe[2])?10:qe[2],.1,100),Lt=d(x.und(qe[3])?0:qe[3],.1,100),Xt=Math.sqrt(et/st),Dt=gt/(2*Math.sqrt(et*st)),mt=Dt<1?Xt*Math.sqrt(1-Dt*Dt):0,Jt=1,tr=Dt<1?(Dt*Xt+-Lt)/mt:-Lt+Xt;function vr(Ur){var Tr=_e?_e*Ur/1e3:Ur;return Dt<1?Tr=Math.exp(-Tr*Dt*Xt)*(Jt*Math.cos(mt*Tr)+tr*Math.sin(mt*Tr)):Tr=(Jt+tr*Tr)*Math.exp(-Tr*Xt),Ur===0||Ur===1?Ur:1-Tr}function An(){var Ur=y.springs[pe];if(Ur)return Ur;for(var Tr=1/6,Yr=0,Sn=0;;)if(Yr+=Tr,vr(Yr)===1){if(Sn++,Sn>=16)break}else Sn=0;var qn=Yr*Tr*1e3;return y.springs[pe]=qn,qn}return _e?vr:An}function C(pe,_e){pe===void 0&&(pe=1),_e===void 0&&(_e=.5);var qe=d(pe,1,10),st=d(_e,.1,2);return function(et){return et===0||et===1?et:-qe*Math.pow(2,10*(et-1))*Math.sin((et-1-st/(Math.PI*2)*Math.asin(1/qe))*(Math.PI*2)/st)}}function I(pe){return pe===void 0&&(pe=10),function(_e){return Math.round(_e*pe)*(1/pe)}}var B=function(){var pe=11,_e=1/(pe-1);function qe(Jt,tr){return 1-3*tr+3*Jt}function st(Jt,tr){return 3*tr-6*Jt}function et(Jt){return 3*Jt}function gt(Jt,tr,vr){return((qe(tr,vr)*Jt+st(tr,vr))*Jt+et(tr))*Jt}function Lt(Jt,tr,vr){return 3*qe(tr,vr)*Jt*Jt+2*st(tr,vr)*Jt+et(tr)}function Xt(Jt,tr,vr,An,Ur){var Tr,Yr,Sn=0;do Yr=tr+(vr-tr)/2,Tr=gt(Yr,An,Ur)-Jt,Tr>0?vr=Yr:tr=Yr;while(Math.abs(Tr)>1e-7&&++Sn<10);return Yr}function Dt(Jt,tr,vr,An){for(var Ur=0;Ur<4;++Ur){var Tr=Lt(tr,vr,An);if(Tr===0)return tr;var Yr=gt(tr,vr,An)-Jt;tr-=Yr/Tr}return tr}function mt(Jt,tr,vr,An){if(!(0<=Jt&&Jt<=1&&0<=vr&&vr<=1))return;var Ur=new Float32Array(pe);if(Jt!==tr||vr!==An)for(var Tr=0;Tr<pe;++Tr)Ur[Tr]=gt(Tr*_e,Jt,vr);function Yr(Sn){for(var qn=0,mr=1,Pr=pe-1;mr!==Pr&&Ur[mr]<=Sn;++mr)qn+=_e;--mr;var Dr=(Sn-Ur[mr])/(Ur[mr+1]-Ur[mr]),Ai=qn+Dr*_e,pn=Lt(Ai,Jt,vr);return pn>=.001?Dt(Sn,Ai,Jt,vr):pn===0?Ai:Xt(Sn,qn,qn+_e,Jt,vr)}return function(Sn){return Jt===tr&&vr===An||Sn===0||Sn===1?Sn:gt(Yr(Sn),tr,An)}}return mt}(),U=function(){var pe=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],_e={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],C],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(Lt,Xt){return function(Dt){return 1-C(Lt,Xt)(1-Dt)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(Lt,Xt){return function(Dt){return Dt<.5?C(Lt,Xt)(Dt*2)/2:1-C(Lt,Xt)(Dt*-2+2)/2}}]},qe={linear:[.25,.25,.75,.75]};for(var st in _e)for(var et=0,gt=_e[st].length;et<gt;et++)qe["ease"+st+pe[et]]=_e[st][et];return qe}();function W(pe,_e){if(x.fnc(pe))return pe;var qe=pe.split("(")[0],st=U[qe],et=_(pe);switch(qe){case"spring":return D(pe,_e);case"cubicBezier":return v(B,et);case"steps":return v(I,et);default:return x.fnc(st)?v(st,et):v(B,st)}}function oe(pe){try{var _e=document.querySelectorAll(pe);return _e}catch{return}}var J=[];function le(pe,_e){for(var qe=J,st=pe.length,et=arguments.length>=2?arguments[1]:void 0,gt=0;gt<st;gt++)if(gt in pe){var Lt=pe[gt];_e.call(et,Lt,gt,pe)&&qe.push(Lt)}return J=pe,J.length=0,qe}function te(pe,_e){_e||(_e=[]);for(var qe=0,st=pe.length;qe<st;qe++){var et=pe[qe];Array.isArray(et)?te(et,_e):_e.push(et)}return _e}function ue(pe){return x.arr(pe)?pe:(x.str(pe)&&(pe=oe(pe)||pe),pe instanceof NodeList||pe instanceof HTMLCollection?[].slice.call(pe):[pe])}function Y(pe,_e){return pe.some(function(qe){return qe===_e})}function de(pe){var _e={};for(var qe in pe)_e[qe]=pe[qe];return _e}function ne(pe,_e){var qe=de(pe);for(var st in pe)qe[st]=_e.hasOwnProperty(st)?_e[st]:pe[st];return qe}function xe(pe,_e){var qe=de(pe);for(var st in _e)qe[st]=x.und(pe[st])?_e[st]:pe[st];return qe}var Be=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g;function je(pe){var _e=Be.exec(pe);return _e?"rgba("+_e[1]+",1)":pe}var Ge=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ct=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;function lt(pe){var _e=pe.replace(Ge,function(Lt,Xt,Dt,mt){return Xt+Xt+Dt+Dt+mt+mt}),qe=ct.exec(_e),st=parseInt(qe[1],16),et=parseInt(qe[2],16),gt=parseInt(qe[3],16);return"rgba("+st+","+et+","+gt+",1)"}var Et=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,Ct=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g;function jt(pe){var _e=Et.exec(pe)||Ct.exec(pe),qe=parseInt(_e[1],10)/360,st=parseInt(_e[2],10)/100,et=parseInt(_e[3],10)/100,gt=_e[4]||1;function Lt(vr,An,Ur){return Ur<0&&(Ur+=1),Ur>1&&(Ur-=1),Ur<1/6?vr+(An-vr)*6*Ur:Ur<1/2?An:Ur<2/3?vr+(An-vr)*(2/3-Ur)*6:vr}var Xt,Dt,mt;if(st==0)Xt=Dt=mt=et;else{var Jt=et<.5?et*(1+st):et+st-et*st,tr=2*et-Jt;Xt=Lt(tr,Jt,qe+1/3),Dt=Lt(tr,Jt,qe),mt=Lt(tr,Jt,qe-1/3)}return"rgba("+Xt*255+","+Dt*255+","+mt*255+","+gt+")"}function tt(pe){if(x.rgb(pe))return je(pe);if(x.hex(pe))return lt(pe);if(x.hsl(pe))return jt(pe)}var pt=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function $e(pe){var _e=pt.exec(pe);if(_e)return _e[2]}function Tt(pe){if(p(pe,"translate")||pe==="perspective")return"px";if(p(pe,"rotate")||p(pe,"skew"))return"deg"}function Kt(pe,_e){return x.fnc(pe)?pe(_e.target,_e.id,_e.total):pe}function _t(pe,_e){return pe.getAttribute(_e)}function se(pe,_e,qe){var st=$e(_e);if(Y([qe,"deg","rad","turn"],st))return _e;var et=y.CSS[_e+qe];if(!x.und(et))return et;var gt=100,Lt=document.createElement(pe.tagName),Xt=pe.parentNode&&pe.parentNode!==document?pe.parentNode:document.body;Xt.appendChild(Lt),Lt.style.position="absolute",Lt.style.width=gt+qe;var Dt=gt/Lt.offsetWidth;Xt.removeChild(Lt);var mt=Dt*parseFloat(_e);return y.CSS[_e+qe]=mt,mt}function ce(pe,_e,qe){if(_e in pe.style){var st=_e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),et=pe.style[_e]||getComputedStyle(pe).getPropertyValue(st)||"0";return qe?se(pe,et,qe):et}}function Q(pe,_e){if(x.dom(pe)&&!x.inp(pe)&&(_t(pe,_e)||x.svg(pe)&&pe[_e]))return"attribute";if(x.dom(pe)&&Y(m,_e))return"transform";if(x.dom(pe)&&_e!=="transform"&&ce(pe,_e))return"css";if(pe[_e]!=null)return"object"}var K=/(\w+)\(([^)]*)\)/g;function ae(pe){if(!!x.dom(pe)){for(var _e=pe.style.transform||"",qe=new Map,st;st=K.exec(_e);)qe.set(st[1],st[2]);return qe}}function ge(pe,_e,qe,st){var et=p(_e,"scale")?1:0+Tt(_e),gt=ae(pe).get(_e)||et;return qe&&(qe.transforms.list.set(_e,gt),qe.transforms.last=_e),st?se(pe,gt,st):gt}function me(pe,_e,qe,st){switch(Q(pe,_e)){case"transform":return ge(pe,_e,st,qe);case"css":return ce(pe,_e,qe);case"attribute":return _t(pe,_e);default:return pe[_e]||0}}var Ee=/^(\*=|\+=|-=)/;function Pe(pe,_e){var qe=Ee.exec(pe);if(!qe)return pe;var st=$e(pe)||0,et=parseFloat(_e),gt=parseFloat(pe.replace(qe[0],""));switch(qe[0][0]){case"+":return et+gt+st;case"-":return et-gt+st;case"*":return et*gt+st}}var ke=/\s/g;function Ve(pe,_e){if(x.col(pe))return tt(pe);var qe=$e(pe),st=qe?pe.substr(0,pe.length-qe.length):pe;return _e&&!ke.test(pe)?st+_e:st}function ze(pe,_e){return Math.sqrt(Math.pow(_e.x-pe.x,2)+Math.pow(_e.y-pe.y,2))}function $(pe){return Math.PI*2*_t(pe,"r")}function V(pe){return _t(pe,"width")*2+_t(pe,"height")*2}function z(pe){return ze({x:_t(pe,"x1"),y:_t(pe,"y1")},{x:_t(pe,"x2"),y:_t(pe,"y2")})}function fe(pe){for(var _e=pe.points,qe=0,st,et=0;et<_e.numberOfItems;et++){var gt=_e.getItem(et);et>0&&(qe+=ze(st,gt)),st=gt}return qe}function Te(pe){var _e=pe.points;return fe(pe)+ze(_e.getItem(_e.numberOfItems-1),_e.getItem(0))}function Qe(pe){if(pe.getTotalLength)return pe.getTotalLength();switch(pe.tagName.toLowerCase()){case"circle":return $(pe);case"rect":return V(pe);case"line":return z(pe);case"polyline":return fe(pe);case"polygon":return Te(pe)}}function Je(pe){var _e=Qe(pe);return pe.setAttribute("stroke-dasharray",_e),_e}function Mt(pe){for(var _e=pe.parentNode;x.svg(_e)&&(_e=_e.parentNode,!!x.svg(_e.parentNode)););return _e}function Vt(pe,_e){var qe=_e||{},st=qe.el||Mt(pe),et=st.getBoundingClientRect(),gt=_t(st,"viewBox"),Lt=et.width,Xt=et.height,Dt=qe.viewBox||(gt?gt.split(" "):[0,0,Lt,Xt]);return{el:st,viewBox:Dt,x:Dt[0]/1,y:Dt[1]/1,w:Lt/Dt[2],h:Xt/Dt[3]}}function or(pe,_e){var qe=x.str(pe)?oe(pe)[0]:pe,st=_e||100;return function(et){return{property:et,el:qe,svg:Vt(qe),totalLength:Qe(qe)*(st/100)}}}function Lr(pe,_e){function qe(Xt){Xt===void 0&&(Xt=0);var Dt=_e+Xt>=1?_e+Xt:0;return pe.el.getPointAtLength(Dt)}var st=Vt(pe.el,pe.svg),et=qe(),gt=qe(-1),Lt=qe(1);switch(pe.property){case"x":return(et.x-st.x)*st.w;case"y":return(et.y-st.y)*st.h;case"angle":return Math.atan2(Lt.y-gt.y,Lt.x-gt.x)*180/Math.PI}}var Ht=/-?\d*\.?\d+/g;function Xr(pe,_e){var qe=Ve(x.pth(pe)?pe.totalLength:pe,_e)+"";return{original:qe,numbers:qe.match(Ht)?qe.match(Ht).map(Number):[0],strings:x.str(pe)||_e?qe.split(Ht):[]}}function Qt(pe){var _e=pe?te(x.arr(pe)?pe.map(ue):ue(pe)):[];return le(_e,function(qe,st,et){return et.indexOf(qe)===st})}function Vr(pe){var _e=Qt(pe);return _e.map(function(qe,st){return{target:qe,id:st,total:_e.length,transforms:{list:ae(qe)}}})}var Rn=/^spring/;function yn(pe,_e){var qe=de(_e);if(Rn.test(qe.easing)&&(qe.duration=D(qe.easing)),x.arr(pe)){var st=pe.length,et=st===2&&!x.obj(pe[0]);et?pe={value:pe}:x.fnc(_e.duration)||(qe.duration=_e.duration/st)}var gt=x.arr(pe)?pe:[pe];return gt.map(function(Lt,Xt){var Dt=x.obj(Lt)&&!x.pth(Lt)?Lt:{value:Lt};return x.und(Dt.delay)&&(Dt.delay=Xt?0:_e.delay),x.und(Dt.endDelay)&&(Dt.endDelay=Xt===gt.length-1?_e.endDelay:0),Dt}).map(function(Lt){return xe(Lt,qe)})}function ft(pe){for(var _e=le(te(pe.map(function(gt){return Object.keys(gt)})),function(gt){return x.key(gt)}).reduce(function(gt,Lt){return gt.indexOf(Lt)<0&&gt.push(Lt),gt},[]),qe={},st=function(gt){var Lt=_e[gt];qe[Lt]=pe.map(function(Xt){var Dt={};for(var mt in Xt)x.key(mt)?mt==Lt&&(Dt.value=Xt[mt]):Dt[mt]=Xt[mt];return Dt})},et=0;et<_e.length;et++)st(et);return qe}function ht(pe,_e){var qe=[],st=_e.keyframes;st&&(_e=xe(ft(st),_e));for(var et in _e)x.key(et)&&qe.push({name:et,tweens:yn(_e[et],pe)});return qe}function St(pe,_e){var qe={};for(var st in pe){var et=Kt(pe[st],_e);x.arr(et)&&(et=et.map(function(gt){return Kt(gt,_e)}),et.length===1&&(et=et[0])),qe[st]=et}return qe.duration=parseFloat(qe.duration),qe.delay=parseFloat(qe.delay),qe}function rr(pe,_e){var qe;return pe.tweens.map(function(st){var et=St(st,_e),gt=et.value,Lt=x.arr(gt)?gt[1]:gt,Xt=$e(Lt),Dt=me(_e.target,pe.name,Xt,_e),mt=qe?qe.to.original:Dt,Jt=x.arr(gt)?gt[0]:mt,tr=$e(Jt)||$e(Dt),vr=Xt||tr;return x.und(Lt)&&(Lt=mt),et.from=Xr(Jt,vr),et.to=Xr(Pe(Lt,Jt),vr),et.start=qe?qe.end:0,et.end=et.start+et.delay+et.duration+et.endDelay,et.easing=W(et.easing,et.duration),et.isPath=x.pth(gt),et.isColor=x.col(et.from.original),et.isColor&&(et.round=1),qe=et,et})}var sr={css:function(pe,_e,qe){return pe.style[_e]=qe},attribute:function(pe,_e,qe){return pe.setAttribute(_e,qe)},object:function(pe,_e,qe){return pe[_e]=qe},transform:function(pe,_e,qe,st,et){if(st.list.set(_e,qe),_e===st.last||et){var gt="";st.list.forEach(function(Lt,Xt){gt+=Xt+"("+Lt+") "}),pe.style.transform=gt}}};function pr(pe,_e){for(var qe=Vr(pe),st=0,et=qe.length;st<et;st++){var gt=qe[st];for(var Lt in _e){var Xt=Kt(_e[Lt],gt),Dt=gt.target,mt=$e(Xt),Jt=me(Dt,Lt,mt,gt),tr=mt||$e(Jt),vr=Pe(Ve(Xt,tr),Jt),An=Q(Dt,Lt);sr[An](Dt,Lt,vr,gt.transforms,!0)}}}function cr(pe,_e){var qe=Q(pe.target,_e.name);if(qe){var st=rr(_e,pe),et=st[st.length-1];return{type:qe,property:_e.name,animatable:pe,tweens:st,duration:et.end,delay:st[0].delay,endDelay:et.endDelay}}}function Cr(pe,_e){return le(te(pe.map(function(qe){return _e.map(function(st){return cr(qe,st)})})),function(qe){return!x.und(qe)})}function Zr(pe,_e){var qe=pe.length,st=function(gt){return gt.timelineOffset?gt.timelineOffset:0},et={};return et.duration=qe?Math.max.apply(Math,pe.map(function(gt){return st(gt)+gt.duration})):_e.duration,et.delay=qe?Math.min.apply(Math,pe.map(function(gt){return st(gt)+gt.delay})):_e.delay,et.endDelay=qe?et.duration-Math.max.apply(Math,pe.map(function(gt){return st(gt)+gt.duration-gt.endDelay})):_e.endDelay,et}var kr=0;function jn(pe){var _e=ne(l,pe),qe=ne(h,pe),st=ht(qe,pe),et=Vr(pe.targets),gt=Cr(et,st),Lt=Zr(gt,qe),Xt=kr;return kr++,xe(_e,{id:Xt,children:[],animatables:et,animations:gt,duration:Lt.duration,delay:Lt.delay,endDelay:Lt.endDelay})}var $r=[],jr=[],dn,Ri=function(){function pe(){dn=requestAnimationFrame(_e)}function _e(qe){var st=$r.length;if(st){for(var et=0;et<st;){var gt=$r[et];if(!gt.paused)gt.tick(qe);else{var Lt=$r.indexOf(gt);Lt>-1&&($r.splice(Lt,1),st=$r.length)}et++}pe()}else dn=cancelAnimationFrame(dn)}return pe}();function si(){if(document.hidden){for(var pe=0,_e=$r.length;pe<_e;pe++)activeInstance[pe].pause();jr=$r.slice(0),$r=[]}else for(var qe=0,st=jr.length;qe<st;qe++)jr[qe].play()}document.addEventListener("visibilitychange",si);function tn(pe){pe===void 0&&(pe={});var _e=0,qe=0,st=0,et,gt=0,Lt=null;function Xt(){return window.Promise&&new Promise(function(mr){return Lt=mr})}var Dt=Xt(),mt=jn(pe);function Jt(){mt.reversed=!mt.reversed;for(var mr=0,Pr=et.length;mr<Pr;mr++)et[mr].reversed=mt.reversed}function tr(mr){return mt.reversed?mt.duration-mr:mr}function vr(){_e=0,qe=tr(mt.currentTime)*(1/tn.speed)}function An(mr,Pr){Pr&&Pr.seek(mr-Pr.timelineOffset)}function Ur(mr){if(mt.reversePlayback)for(var Dr=gt;Dr--;)An(mr,et[Dr]);else for(var Pr=0;Pr<gt;Pr++)An(mr,et[Pr])}function Tr(mr){for(var Pr=0,Dr=mt.animations,Ai=Dr.length;Pr<Ai;){var pn=Dr[Pr],bn=pn.animatable,k=pn.tweens,G=k.length-1,Z=k[G];G&&(Z=le(k,function(un){return mr<un.end})[0]||Z);for(var re=d(mr-Z.start-Z.delay,0,Z.duration)/Z.duration,Ae=isNaN(re)?1:Z.easing(re),He=Z.to.strings,it=Z.round,At=[],yt=Z.to.numbers.length,Ze=void 0,ut=0;ut<yt;ut++){var wt=void 0,zt=Z.to.numbers[ut],Zt=Z.from.numbers[ut]||0;Z.isPath?wt=Lr(Z.value,Ae*zt):wt=Zt+Ae*(zt-Zt),it&&(Z.isColor&&ut>2||(wt=Math.round(wt*it)/it)),At.push(wt)}var nr=He.length;if(!nr)Ze=At[0];else{Ze=He[0];for(var Sr=0;Sr<nr;Sr++){He[Sr];var yr=He[Sr+1],hr=At[Sr];isNaN(hr)||(yr?Ze+=hr+yr:Ze+=hr+" ")}}sr[pn.type](bn.target,pn.property,Ze,bn.transforms),pn.currentValue=Ze,Pr++}}function Yr(mr){mt[mr]&&!mt.passThrough&&mt[mr](mt)}function Sn(){mt.remaining&&mt.remaining!==!0&&mt.remaining--}function qn(mr){var Pr=mt.duration,Dr=mt.delay,Ai=Pr-mt.endDelay,pn=tr(mr);mt.progress=d(pn/Pr*100,0,100),mt.reversePlayback=pn<mt.currentTime,et&&Ur(pn),!mt.began&&mt.currentTime>0&&(mt.began=!0,Yr("begin"),Yr("loopBegin")),pn<=Dr&&mt.currentTime!==0&&Tr(0),(pn>=Ai&&mt.currentTime!==Pr||!Pr)&&Tr(Pr),pn>Dr&&pn<Ai?(mt.changeBegan||(mt.changeBegan=!0,mt.changeCompleted=!1,Yr("changeBegin")),Yr("change"),Tr(pn)):mt.changeBegan&&(mt.changeCompleted=!0,mt.changeBegan=!1,Yr("changeComplete")),mt.currentTime=d(pn,0,Pr),mt.began&&Yr("update"),mr>=Pr&&(qe=0,Sn(),mt.remaining?(_e=st,Yr("loopComplete"),Yr("loopBegin"),mt.direction==="alternate"&&Jt()):(mt.paused=!0,mt.completed||(mt.completed=!0,Yr("loopComplete"),Yr("complete"),"Promise"in window&&(Lt(),Dt=Xt()))))}return mt.reset=function(){var mr=mt.direction;mt.passThrough=!1,mt.currentTime=0,mt.progress=0,mt.paused=!0,mt.began=!1,mt.changeBegan=!1,mt.completed=!1,mt.changeCompleted=!1,mt.reversePlayback=!1,mt.reversed=mr==="reverse",mt.remaining=mt.loop,et=mt.children,gt=et.length;for(var Pr=gt;Pr--;)mt.children[Pr].reset();(mt.reversed&&mt.loop!==!0||mr==="alternate"&&mt.loop===1)&&mt.remaining++,Tr(0)},mt.set=function(mr,Pr){return pr(mr,Pr),mt},mt.tick=function(mr){st=mr,_e||(_e=st),qn((st+(qe-_e))*tn.speed)},mt.seek=function(mr){qn(tr(mr))},mt.pause=function(){mt.paused=!0,vr()},mt.play=function(){!mt.paused||(mt.paused=!1,$r.push(mt),vr(),dn||Ri())},mt.reverse=function(){Jt(),vr()},mt.restart=function(){mt.reset(),mt.play()},mt.finished=Dt,mt.reset(),mt.autoplay&&mt.play(),mt}function Yi(pe,_e){for(var qe=_e.length;qe--;)Y(pe,_e[qe].animatable.target)&&_e.splice(qe,1)}function ti(pe){for(var _e=Qt(pe),qe=$r.length;qe--;){var st=$r[qe],et=st.animations,gt=st.children;Yi(_e,et);for(var Lt=gt.length;Lt--;){var Xt=gt[Lt],Dt=Xt.animations;Yi(_e,Dt),!Dt.length&&!Xt.children.length&&gt.splice(Lt,1)}!et.length&&!gt.length&&st.pause()}}function Qi(pe,_e){_e===void 0&&(_e={});var qe=_e.direction||"normal",st=_e.easing?W(_e.easing):null,et=_e.grid,gt=_e.axis,Lt=_e.from||0,Xt=Lt==="first",Dt=Lt==="center",mt=Lt==="last",Jt=x.arr(pe),tr=parseFloat(Jt?pe[0]:pe),vr=Jt?parseFloat(pe[1]):0,An=$e(Jt?pe[1]:pe)||0,Ur=_e.start||0+(Jt?tr:0),Tr=[],Yr=0;return function(Sn,qn,mr){if(Xt&&(Lt=0),Dt&&(Lt=(mr-1)/2),mt&&(Lt=mr-1),!Tr.length){for(var Pr=0;Pr<mr;Pr++){if(!et)Tr.push(Math.abs(Lt-Pr));else{var Dr=Dt?(et[0]-1)/2:Lt%et[0],Ai=Dt?(et[1]-1)/2:Math.floor(Lt/et[0]),pn=Pr%et[0],bn=Math.floor(Pr/et[0]),k=Dr-pn,G=Ai-bn,Z=Math.sqrt(k*k+G*G);gt==="x"&&(Z=-k),gt==="y"&&(Z=-G),Tr.push(Z)}Yr=Math.max.apply(Math,Tr)}st&&(Tr=Tr.map(function(Ae){return st(Ae/Yr)*Yr})),qe==="reverse"&&(Tr=Tr.map(function(Ae){return gt?Ae<0?Ae*-1:-Ae:Math.abs(Yr-Ae)}))}var re=Jt?(vr-tr)/Yr:tr;return Ur+re*(Math.round(Tr[qn]*100)/100)+An}}function ri(pe){pe===void 0&&(pe={});var _e=tn(pe);return _e.duration=0,_e.add=function(qe,st){var et=$r.indexOf(_e),gt=_e.children;et>-1&&$r.splice(et,1);function Lt(vr){vr.passThrough=!0}for(var Xt=0;Xt<gt.length;Xt++)Lt(gt[Xt]);var Dt=xe(qe,ne(h,pe));Dt.targets=Dt.targets||pe.targets;var mt=_e.duration;Dt.autoplay=!1,Dt.direction=_e.direction,Dt.timelineOffset=x.und(st)?mt:Pe(st,mt),Lt(_e),_e.seek(Dt.timelineOffset);var Jt=tn(Dt);Lt(Jt),gt.push(Jt);var tr=Zr(gt,pe);return _e.delay=tr.delay,_e.endDelay=tr.endDelay,_e.duration=tr.duration,_e.seek(0),_e.reset(),_e.autoplay&&_e.play(),_e},_e}tn.version="3.0.0",tn.speed=1,tn.running=$r,tn.remove=ti,tn.get=me,tn.set=pr,tn.convertPx=se,tn.path=or,tn.setDashoffset=Je,tn.stagger=Qi,tn.timeline=ri,tn.easing=W,tn.penner=U,tn.random=function(pe,_e){return Math.floor(Math.random()*(_e-pe+1))+pe},g.exports=tn},{}],57:[function(c,g,L){(function(l,h){typeof L=="object"&&typeof g!="undefined"?h(L):(l=typeof globalThis!="undefined"?globalThis:l||self,h(l.THREE={}))})(this,function(l){Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52)),Number.isInteger===void 0&&(Number.isInteger=function(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}),Math.sign===void 0&&(Math.sign=function(a){return a<0?-1:a>0?1:+a}),"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Object.assign===void 0&&(Object.assign=function(a){if(a==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(a),i=1;i<arguments.length;i++){var r=arguments[i];if(r!=null)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t});var h=function(a){var t=Object.prototype,i=t.hasOwnProperty,r,n=typeof Symbol=="function"?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",f=n.toStringTag||"@@toStringTag";function w(De,Me,Xe){return Object.defineProperty(De,Me,{value:Xe,enumerable:!0,configurable:!0,writable:!0}),De[Me]}try{w({},"")}catch{w=function(Xe,Ye,rt){return Xe[Ye]=rt}}function M(De,Me,Xe,Ye){var rt=Me&&Me.prototype instanceof q?Me:q,nt=Object.create(rt.prototype),bt=new Se(Ye||[]);return nt._invoke=Le(De,Xe,bt),nt}a.wrap=M;function O(De,Me,Xe){try{return{type:"normal",arg:De.call(Me,Xe)}}catch(Ye){return{type:"throw",arg:Ye}}}var P="suspendedStart",R="suspendedYield",N="executing",F="completed",j={};function q(){}function X(){}function H(){}var he={};he[o]=function(){return this};var ye=Object.getPrototypeOf,ie=ye&&ye(ye(We([])));ie&&ie!==t&&i.call(ie,o)&&(he=ie);var ee=H.prototype=q.prototype=Object.create(he);X.prototype=ee.constructor=H,H.constructor=X,X.displayName=w(H,f,"GeneratorFunction");function ve(De){["next","throw","return"].forEach(function(Me){w(De,Me,function(Xe){return this._invoke(Me,Xe)})})}a.isGeneratorFunction=function(De){var Me=typeof De=="function"&&De.constructor;return Me?Me===X||(Me.displayName||Me.name)==="GeneratorFunction":!1},a.mark=function(De){return Object.setPrototypeOf?Object.setPrototypeOf(De,H):(De.__proto__=H,w(De,f,"GeneratorFunction")),De.prototype=Object.create(ee),De},a.awrap=function(De){return{__await:De}};function Re(De,Me){function Xe(nt,bt,Rt,Yt){var at=O(De[nt],De,bt);if(at.type==="throw")Yt(at.arg);else{var ar=at.arg,kt=ar.value;return kt&&typeof kt=="object"&&i.call(kt,"__await")?Me.resolve(kt.__await).then(function(lr){Xe("next",lr,Rt,Yt)},function(lr){Xe("throw",lr,Rt,Yt)}):Me.resolve(kt).then(function(lr){ar.value=lr,Rt(ar)},function(lr){return Xe("throw",lr,Rt,Yt)})}}var Ye;function rt(nt,bt){function Rt(){return new Me(function(Yt,at){Xe(nt,bt,Yt,at)})}return Ye=Ye?Ye.then(Rt,Rt):Rt()}this._invoke=rt}ve(Re.prototype),Re.prototype[s]=function(){return this},a.AsyncIterator=Re,a.async=function(De,Me,Xe,Ye,rt){rt===void 0&&(rt=Promise);var nt=new Re(M(De,Me,Xe,Ye),rt);return a.isGeneratorFunction(Me)?nt:nt.next().then(function(bt){return bt.done?bt.value:nt.next()})};function Le(De,Me,Xe){var Ye=P;return function(nt,bt){if(Ye===N)throw new Error("Generator is already running");if(Ye===F){if(nt==="throw")throw bt;return Oe()}for(Xe.method=nt,Xe.arg=bt;;){var Rt=Xe.delegate;if(Rt){var Yt=Ie(Rt,Xe);if(Yt){if(Yt===j)continue;return Yt}}if(Xe.method==="next")Xe.sent=Xe._sent=Xe.arg;else if(Xe.method==="throw"){if(Ye===P)throw Ye=F,Xe.arg;Xe.dispatchException(Xe.arg)}else Xe.method==="return"&&Xe.abrupt("return",Xe.arg);Ye=N;var at=O(De,Me,Xe);if(at.type==="normal"){if(Ye=Xe.done?F:R,at.arg===j)continue;return{value:at.arg,done:Xe.done}}else at.type==="throw"&&(Ye=F,Xe.method="throw",Xe.arg=at.arg)}}}function Ie(De,Me){var Xe=De.iterator[Me.method];if(Xe===r){if(Me.delegate=null,Me.method==="throw"){if(De.iterator.return&&(Me.method="return",Me.arg=r,Ie(De,Me),Me.method==="throw"))return j;Me.method="throw",Me.arg=new TypeError("The iterator does not provide a 'throw' method")}return j}var Ye=O(Xe,De.iterator,Me.arg);if(Ye.type==="throw")return Me.method="throw",Me.arg=Ye.arg,Me.delegate=null,j;var rt=Ye.arg;if(!rt)return Me.method="throw",Me.arg=new TypeError("iterator result is not an object"),Me.delegate=null,j;if(rt.done)Me[De.resultName]=rt.value,Me.next=De.nextLoc,Me.method!=="return"&&(Me.method="next",Me.arg=r);else return rt;return Me.delegate=null,j}ve(ee),w(ee,f,"Generator"),ee[o]=function(){return this},ee.toString=function(){return"[object Generator]"};function Ue(De){var Me={tryLoc:De[0]};1 in De&&(Me.catchLoc=De[1]),2 in De&&(Me.finallyLoc=De[2],Me.afterLoc=De[3]),this.tryEntries.push(Me)}function Fe(De){var Me=De.completion||{};Me.type="normal",delete Me.arg,De.completion=Me}function Se(De){this.tryEntries=[{tryLoc:"root"}],De.forEach(Ue,this),this.reset(!0)}a.keys=function(De){var Me=[];for(var Xe in De)Me.push(Xe);return Me.reverse(),function Ye(){for(;Me.length;){var rt=Me.pop();if(rt in De)return Ye.value=rt,Ye.done=!1,Ye}return Ye.done=!0,Ye}};function We(De){if(De){var Me=De[o];if(Me)return Me.call(De);if(typeof De.next=="function")return De;if(!isNaN(De.length)){var Xe=-1,Ye=function rt(){for(;++Xe<De.length;)if(i.call(De,Xe))return rt.value=De[Xe],rt.done=!1,rt;return rt.value=r,rt.done=!0,rt};return Ye.next=Ye}}return{next:Oe}}a.values=We;function Oe(){return{value:r,done:!0}}return Se.prototype={constructor:Se,reset:function(Me){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(Fe),!Me)for(var Xe in this)Xe.charAt(0)==="t"&&i.call(this,Xe)&&!isNaN(+Xe.slice(1))&&(this[Xe]=r)},stop:function(){this.done=!0;var Me=this.tryEntries[0],Xe=Me.completion;if(Xe.type==="throw")throw Xe.arg;return this.rval},dispatchException:function(Me){if(this.done)throw Me;var Xe=this;function Ye(at,ar){return bt.type="throw",bt.arg=Me,Xe.next=at,ar&&(Xe.method="next",Xe.arg=r),!!ar}for(var rt=this.tryEntries.length-1;rt>=0;--rt){var nt=this.tryEntries[rt],bt=nt.completion;if(nt.tryLoc==="root")return Ye("end");if(nt.tryLoc<=this.prev){var Rt=i.call(nt,"catchLoc"),Yt=i.call(nt,"finallyLoc");if(Rt&&Yt){if(this.prev<nt.catchLoc)return Ye(nt.catchLoc,!0);if(this.prev<nt.finallyLoc)return Ye(nt.finallyLoc)}else if(Rt){if(this.prev<nt.catchLoc)return Ye(nt.catchLoc,!0)}else if(Yt){if(this.prev<nt.finallyLoc)return Ye(nt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Me,Xe){for(var Ye=this.tryEntries.length-1;Ye>=0;--Ye){var rt=this.tryEntries[Ye];if(rt.tryLoc<=this.prev&&i.call(rt,"finallyLoc")&&this.prev<rt.finallyLoc){var nt=rt;break}}nt&&(Me==="break"||Me==="continue")&&nt.tryLoc<=Xe&&Xe<=nt.finallyLoc&&(nt=null);var bt=nt?nt.completion:{};return bt.type=Me,bt.arg=Xe,nt?(this.method="next",this.next=nt.finallyLoc,j):this.complete(bt)},complete:function(Me,Xe){if(Me.type==="throw")throw Me.arg;return Me.type==="break"||Me.type==="continue"?this.next=Me.arg:Me.type==="return"?(this.rval=this.arg=Me.arg,this.method="return",this.next="end"):Me.type==="normal"&&Xe&&(this.next=Xe),j},finish:function(Me){for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var Ye=this.tryEntries[Xe];if(Ye.finallyLoc===Me)return this.complete(Ye.completion,Ye.afterLoc),Fe(Ye),j}},catch:function(Me){for(var Xe=this.tryEntries.length-1;Xe>=0;--Xe){var Ye=this.tryEntries[Xe];if(Ye.tryLoc===Me){var rt=Ye.completion;if(rt.type==="throw"){var nt=rt.arg;Fe(Ye)}return nt}}throw new Error("illegal catch attempt")},delegateYield:function(Me,Xe,Ye){return this.delegate={iterator:We(Me),resultName:Xe,nextLoc:Ye},this.method==="next"&&(this.arg=r),j}},a}(typeof g=="object"?g.exports:{});try{regeneratorRuntime=h}catch{Function("r","regeneratorRuntime = r")(h)}var m="125",y={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},d={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},p=0,v=1,b=2,E=3,S=0,x=1,T=2,_=3,D=0,C=1,I=2,B=1,U=2,W=0,oe=1,J=2,le=3,te=4,ue=5,Y=100,de=101,ne=102,xe=103,Be=104,je=200,Ge=201,ct=202,lt=203,Et=204,Ct=205,jt=206,tt=207,pt=208,$e=209,Tt=210,Kt=0,_t=1,se=2,ce=3,Q=4,K=5,ae=6,ge=7,me=0,Ee=1,Pe=2,ke=0,Ve=1,ze=2,$=3,V=4,z=5,fe=300,Te=301,Qe=302,Je=303,Mt=304,Vt=306,or=307,Lr=1e3,Ht=1001,Xr=1002,Qt=1003,Vr=1004,Rn=1004,yn=1005,ft=1005,ht=1006,St=1007,rr=1007,sr=1008,pr=1008,cr=1009,Cr=1010,Zr=1011,kr=1012,jn=1013,$r=1014,jr=1015,dn=1016,Ri=1017,si=1018,tn=1019,Yi=1020,ti=1021,Qi=1022,ri=1023,pe=1024,_e=1025,qe=ri,st=1026,et=1027,gt=1028,Lt=1029,Xt=1030,Dt=1031,mt=1032,Jt=1033,tr=33776,vr=33777,An=33778,Ur=33779,Tr=35840,Yr=35841,Sn=35842,qn=35843,mr=36196,Pr=37492,Dr=37496,Ai=37808,pn=37809,bn=37810,k=37811,G=37812,Z=37813,re=37814,Ae=37815,He=37816,it=37817,At=37818,yt=37819,Ze=37820,ut=37821,wt=36492,zt=37840,Zt=37841,nr=37842,Sr=37843,yr=37844,hr=37845,un=37846,On=37847,Un=37848,_n=37849,Qn=37850,li=37851,ui=37852,ci=37853,hi=2200,ra=2201,so=2202,na=2300,ia=2301,Ea=2302,Pi=2400,Di=2401,aa=2402,wa=2500,Va=2501,lo=0,Wo=1,Hn=2,bi=3e3,Bl=3001,Wu=3007,ju=3002,Lp=3003,Jh=3004,Zh=3005,$h=3006,Rp=3200,Pp=3201,jo=0,Dp=1,py=0,Xu=7680,vy=7681,my=7682,gy=7683,yy=34055,Ay=34056,by=5386,Ey=512,wy=513,xy=514,My=515,Ty=516,Sy=517,_y=518,Op=519,Fl=35044,Xo=35048,Cy=35040,Ly=35045,Ry=35049,Py=35041,Dy=35046,Oy=35050,Iy=35042,By="100",ef="300 es";function Ip(a,t,i,r,n,o,s){try{var f=a[o](s),w=f.value}catch(M){i(M);return}f.done?t(w):Promise.resolve(w).then(r,n)}function Fy(a){return function(){var t=this,i=arguments;return new Promise(function(r,n){var o=a.apply(t,i);function s(w){Ip(o,r,n,s,f,"next",w)}function f(w){Ip(o,r,n,s,f,"throw",w)}s(void 0)})}}function Bp(a,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}function Yu(a,t,i){return t&&Bp(a.prototype,t),i&&Bp(a,i),a}function Rr(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.__proto__=t}function oa(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ny(a,t){if(!!a){if(typeof a=="string")return Fp(a,t);var i=Object.prototype.toString.call(a).slice(8,-1);if(i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set")return Array.from(a);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Fp(a,t)}}function Fp(a,t){(t==null||t>a.length)&&(t=a.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=a[i];return r}function ky(a,t){var i;if(typeof Symbol=="undefined"||a[Symbol.iterator]==null){if(Array.isArray(a)||(i=Ny(a))||t&&a&&typeof a.length=="number"){i&&(a=i);var r=0;return function(){return r>=a.length?{done:!0}:{done:!1,value:a[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return i=a[Symbol.iterator](),i.next.bind(i)}function xa(){}Object.assign(xa.prototype,{addEventListener:function(t,i){this._listeners===void 0&&(this._listeners={});var r=this._listeners;r[t]===void 0&&(r[t]=[]),r[t].indexOf(i)===-1&&r[t].push(i)},hasEventListener:function(t,i){if(this._listeners===void 0)return!1;var r=this._listeners;return r[t]!==void 0&&r[t].indexOf(i)!==-1},removeEventListener:function(t,i){if(this._listeners!==void 0){var r=this._listeners,n=r[t];if(n!==void 0){var o=n.indexOf(i);o!==-1&&n.splice(o,1)}}},dispatchEvent:function(t){if(this._listeners!==void 0){var i=this._listeners,r=i[t.type];if(r!==void 0){t.target=this;for(var n=r.slice(0),o=0,s=n.length;o<s;o++)n[o].call(this,t)}}}});for(var ni=[],Nl=0;Nl<256;Nl++)ni[Nl]=(Nl<16?"0":"")+Nl.toString(16);var Qu=1234567,gr={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,r=Math.random()*4294967295|0,n=Math.random()*4294967295|0,o=ni[t&255]+ni[t>>8&255]+ni[t>>16&255]+ni[t>>24&255]+"-"+ni[i&255]+ni[i>>8&255]+"-"+ni[i>>16&15|64]+ni[i>>24&255]+"-"+ni[r&63|128]+ni[r>>8&255]+"-"+ni[r>>16&255]+ni[r>>24&255]+ni[n&255]+ni[n>>8&255]+ni[n>>16&255]+ni[n>>24&255];return o.toUpperCase()},clamp:function(t,i,r){return Math.max(i,Math.min(r,t))},euclideanModulo:function(t,i){return(t%i+i)%i},mapLinear:function(t,i,r,n,o){return n+(t-i)*(o-n)/(r-i)},lerp:function(t,i,r){return(1-r)*t+r*i},damp:function(t,i,r,n){return gr.lerp(t,i,1-Math.exp(-r*n))},pingpong:function(t,i){return i===void 0&&(i=1),i-Math.abs(gr.euclideanModulo(t,i*2)-i)},smoothstep:function(t,i,r){return t<=i?0:t>=r?1:(t=(t-i)/(r-i),t*t*(3-2*t))},smootherstep:function(t,i,r){return t<=i?0:t>=r?1:(t=(t-i)/(r-i),t*t*t*(t*(t*6-15)+10))},randInt:function(t,i){return t+Math.floor(Math.random()*(i-t+1))},randFloat:function(t,i){return t+Math.random()*(i-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return t!==void 0&&(Qu=t%2147483647),Qu=Qu*16807%2147483647,(Qu-1)/2147483646},degToRad:function(t){return t*gr.DEG2RAD},radToDeg:function(t){return t*gr.RAD2DEG},isPowerOfTwo:function(t){return(t&t-1)==0&&t!==0},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,i,r,n,o){var s=Math.cos,f=Math.sin,w=s(r/2),M=f(r/2),O=s((i+n)/2),P=f((i+n)/2),R=s((i-n)/2),N=f((i-n)/2),F=s((n-i)/2),j=f((n-i)/2);switch(o){case"XYX":t.set(w*P,M*R,M*N,w*O);break;case"YZY":t.set(M*N,w*P,M*R,w*O);break;case"ZXZ":t.set(M*R,M*N,w*P,w*O);break;case"XZX":t.set(w*P,M*j,M*F,w*O);break;case"YXY":t.set(M*F,w*P,M*j,w*O);break;case"ZYZ":t.set(M*j,M*F,w*P,w*O);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}},xt=function(){function a(i,r){i===void 0&&(i=0),r===void 0&&(r=0),Object.defineProperty(this,"isVector2",{value:!0}),this.x=i,this.y=r}var t=a.prototype;return t.set=function(r,n){return this.x=r,this.y=n,this},t.setScalar=function(r){return this.x=r,this.y=r,this},t.setX=function(r){return this.x=r,this},t.setY=function(r){return this.y=r,this},t.setComponent=function(r,n){switch(r){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+r)}return this},t.getComponent=function(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r)}},t.clone=function(){return new this.constructor(this.x,this.y)},t.copy=function(r){return this.x=r.x,this.y=r.y,this},t.add=function(r,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,n)):(this.x+=r.x,this.y+=r.y,this)},t.addScalar=function(r){return this.x+=r,this.y+=r,this},t.addVectors=function(r,n){return this.x=r.x+n.x,this.y=r.y+n.y,this},t.addScaledVector=function(r,n){return this.x+=r.x*n,this.y+=r.y*n,this},t.sub=function(r,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,n)):(this.x-=r.x,this.y-=r.y,this)},t.subScalar=function(r){return this.x-=r,this.y-=r,this},t.subVectors=function(r,n){return this.x=r.x-n.x,this.y=r.y-n.y,this},t.multiply=function(r){return this.x*=r.x,this.y*=r.y,this},t.multiplyScalar=function(r){return this.x*=r,this.y*=r,this},t.divide=function(r){return this.x/=r.x,this.y/=r.y,this},t.divideScalar=function(r){return this.multiplyScalar(1/r)},t.applyMatrix3=function(r){var n=this.x,o=this.y,s=r.elements;return this.x=s[0]*n+s[3]*o+s[6],this.y=s[1]*n+s[4]*o+s[7],this},t.min=function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this},t.max=function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this},t.clamp=function(r,n){return this.x=Math.max(r.x,Math.min(n.x,this.x)),this.y=Math.max(r.y,Math.min(n.y,this.y)),this},t.clampScalar=function(r,n){return this.x=Math.max(r,Math.min(n,this.x)),this.y=Math.max(r,Math.min(n,this.y)),this},t.clampLength=function(r,n){var o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(r,Math.min(n,o)))},t.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},t.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},t.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},t.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},t.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.dot=function(r){return this.x*r.x+this.y*r.y},t.cross=function(r){return this.x*r.y-this.y*r.x},t.lengthSq=function(){return this.x*this.x+this.y*this.y},t.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)},t.normalize=function(){return this.divideScalar(this.length()||1)},t.angle=function(){var r=Math.atan2(-this.y,-this.x)+Math.PI;return r},t.distanceTo=function(r){return Math.sqrt(this.distanceToSquared(r))},t.distanceToSquared=function(r){var n=this.x-r.x,o=this.y-r.y;return n*n+o*o},t.manhattanDistanceTo=function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)},t.setLength=function(r){return this.normalize().multiplyScalar(r)},t.lerp=function(r,n){return this.x+=(r.x-this.x)*n,this.y+=(r.y-this.y)*n,this},t.lerpVectors=function(r,n,o){return this.x=r.x+(n.x-r.x)*o,this.y=r.y+(n.y-r.y)*o,this},t.equals=function(r){return r.x===this.x&&r.y===this.y},t.fromArray=function(r,n){return n===void 0&&(n=0),this.x=r[n],this.y=r[n+1],this},t.toArray=function(r,n){return r===void 0&&(r=[]),n===void 0&&(n=0),r[n]=this.x,r[n+1]=this.y,r},t.fromBufferAttribute=function(r,n,o){return o!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(n),this.y=r.getY(n),this},t.rotateAround=function(r,n){var o=Math.cos(n),s=Math.sin(n),f=this.x-r.x,w=this.y-r.y;return this.x=f*o-w*s+r.x,this.y=f*s+w*o+r.y,this},t.random=function(){return this.x=Math.random(),this.y=Math.random(),this},Yu(a,[{key:"width",get:function(){return this.x},set:function(r){this.x=r}},{key:"height",get:function(){return this.y},set:function(r){this.y=r}}]),a}(),Oi=function(){function a(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}var t=a.prototype;return t.set=function(r,n,o,s,f,w,M,O,P){var R=this.elements;return R[0]=r,R[1]=s,R[2]=M,R[3]=n,R[4]=f,R[5]=O,R[6]=o,R[7]=w,R[8]=P,this},t.identity=function(){return this.set(1,0,0,0,1,0,0,0,1),this},t.clone=function(){return new this.constructor().fromArray(this.elements)},t.copy=function(r){var n=this.elements,o=r.elements;return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],this},t.extractBasis=function(r,n,o){return r.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),o.setFromMatrix3Column(this,2),this},t.setFromMatrix4=function(r){var n=r.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this},t.multiply=function(r){return this.multiplyMatrices(this,r)},t.premultiply=function(r){return this.multiplyMatrices(r,this)},t.multiplyMatrices=function(r,n){var o=r.elements,s=n.elements,f=this.elements,w=o[0],M=o[3],O=o[6],P=o[1],R=o[4],N=o[7],F=o[2],j=o[5],q=o[8],X=s[0],H=s[3],he=s[6],ye=s[1],ie=s[4],ee=s[7],ve=s[2],Re=s[5],Le=s[8];return f[0]=w*X+M*ye+O*ve,f[3]=w*H+M*ie+O*Re,f[6]=w*he+M*ee+O*Le,f[1]=P*X+R*ye+N*ve,f[4]=P*H+R*ie+N*Re,f[7]=P*he+R*ee+N*Le,f[2]=F*X+j*ye+q*ve,f[5]=F*H+j*ie+q*Re,f[8]=F*he+j*ee+q*Le,this},t.multiplyScalar=function(r){var n=this.elements;return n[0]*=r,n[3]*=r,n[6]*=r,n[1]*=r,n[4]*=r,n[7]*=r,n[2]*=r,n[5]*=r,n[8]*=r,this},t.determinant=function(){var r=this.elements,n=r[0],o=r[1],s=r[2],f=r[3],w=r[4],M=r[5],O=r[6],P=r[7],R=r[8];return n*w*R-n*M*P-o*f*R+o*M*O+s*f*P-s*w*O},t.invert=function(){var r=this.elements,n=r[0],o=r[1],s=r[2],f=r[3],w=r[4],M=r[5],O=r[6],P=r[7],R=r[8],N=R*w-M*P,F=M*O-R*f,j=P*f-w*O,q=n*N+o*F+s*j;if(q===0)return this.set(0,0,0,0,0,0,0,0,0);var X=1/q;return r[0]=N*X,r[1]=(s*P-R*o)*X,r[2]=(M*o-s*w)*X,r[3]=F*X,r[4]=(R*n-s*O)*X,r[5]=(s*f-M*n)*X,r[6]=j*X,r[7]=(o*O-P*n)*X,r[8]=(w*n-o*f)*X,this},t.transpose=function(){var r,n=this.elements;return r=n[1],n[1]=n[3],n[3]=r,r=n[2],n[2]=n[6],n[6]=r,r=n[5],n[5]=n[7],n[7]=r,this},t.getNormalMatrix=function(r){return this.setFromMatrix4(r).copy(this).invert().transpose()},t.transposeIntoArray=function(r){var n=this.elements;return r[0]=n[0],r[1]=n[3],r[2]=n[6],r[3]=n[1],r[4]=n[4],r[5]=n[7],r[6]=n[2],r[7]=n[5],r[8]=n[8],this},t.setUvTransform=function(r,n,o,s,f,w,M){var O=Math.cos(f),P=Math.sin(f);return this.set(o*O,o*P,-o*(O*w+P*M)+w+r,-s*P,s*O,-s*(-P*w+O*M)+M+n,0,0,1),this},t.scale=function(r,n){var o=this.elements;return o[0]*=r,o[3]*=r,o[6]*=r,o[1]*=n,o[4]*=n,o[7]*=n,this},t.rotate=function(r){var n=Math.cos(r),o=Math.sin(r),s=this.elements,f=s[0],w=s[3],M=s[6],O=s[1],P=s[4],R=s[7];return s[0]=n*f+o*O,s[3]=n*w+o*P,s[6]=n*M+o*R,s[1]=-o*f+n*O,s[4]=-o*w+n*P,s[7]=-o*M+n*R,this},t.translate=function(r,n){var o=this.elements;return o[0]+=r*o[2],o[3]+=r*o[5],o[6]+=r*o[8],o[1]+=n*o[2],o[4]+=n*o[5],o[7]+=n*o[8],this},t.equals=function(r){for(var n=this.elements,o=r.elements,s=0;s<9;s++)if(n[s]!==o[s])return!1;return!0},t.fromArray=function(r,n){n===void 0&&(n=0);for(var o=0;o<9;o++)this.elements[o]=r[o+n];return this},t.toArray=function(r,n){r===void 0&&(r=[]),n===void 0&&(n=0);var o=this.elements;return r[n]=o[0],r[n+1]=o[1],r[n+2]=o[2],r[n+3]=o[3],r[n+4]=o[4],r[n+5]=o[5],r[n+6]=o[6],r[n+7]=o[7],r[n+8]=o[8],r},a}(),Ps,Yo={getDataURL:function(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement=="undefined")return t.src;var i;if(t instanceof HTMLCanvasElement)i=t;else{Ps===void 0&&(Ps=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Ps.width=t.width,Ps.height=t.height;var r=Ps.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),i=Ps}return i.width>2048||i.height>2048?i.toDataURL("image/jpeg",.6):i.toDataURL("image/png")}},Uy=0;function vn(a,t,i,r,n,o,s,f,w,M){a===void 0&&(a=vn.DEFAULT_IMAGE),t===void 0&&(t=vn.DEFAULT_MAPPING),i===void 0&&(i=Ht),r===void 0&&(r=Ht),n===void 0&&(n=ht),o===void 0&&(o=sr),s===void 0&&(s=ri),f===void 0&&(f=cr),w===void 0&&(w=1),M===void 0&&(M=bi),Object.defineProperty(this,"id",{value:Uy++}),this.uuid=gr.generateUUID(),this.name="",this.image=a,this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=n,this.minFilter=o,this.anisotropy=w,this.format=s,this.internalFormat=null,this.type=f,this.offset=new xt(0,0),this.repeat=new xt(1,1),this.center=new xt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Oi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=M,this.version=0,this.onUpdate=null}vn.DEFAULT_IMAGE=void 0,vn.DEFAULT_MAPPING=fe,vn.prototype=Object.assign(Object.create(xa.prototype),{constructor:vn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){var n=this.image;if(n.uuid===void 0&&(n.uuid=gr.generateUUID()),!i&&t.images[n.uuid]===void 0){var o;if(Array.isArray(n)){o=[];for(var s=0,f=n.length;s<f;s++)n[s].isDataTexture?o.push(tf(n[s].image)):o.push(tf(n[s]))}else o=tf(n);t.images[n.uuid]={uuid:n.uuid,url:o}}r.image=n.uuid}return i||(t.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==fe)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Lr:t.x=t.x-Math.floor(t.x);break;case Ht:t.x=t.x<0?0:1;break;case Xr:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Lr:t.y=t.y-Math.floor(t.y);break;case Ht:t.y=t.y<0?0:1;break;case Xr:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(vn.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});function tf(a){return typeof HTMLImageElement!="undefined"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&a instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&a instanceof ImageBitmap?Yo.getDataURL(a):a.data?{data:Array.prototype.slice.call(a.data),width:a.width,height:a.height,type:a.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var cn=function(){function a(i,r,n,o){i===void 0&&(i=0),r===void 0&&(r=0),n===void 0&&(n=0),o===void 0&&(o=1),Object.defineProperty(this,"isVector4",{value:!0}),this.x=i,this.y=r,this.z=n,this.w=o}var t=a.prototype;return t.set=function(r,n,o,s){return this.x=r,this.y=n,this.z=o,this.w=s,this},t.setScalar=function(r){return this.x=r,this.y=r,this.z=r,this.w=r,this},t.setX=function(r){return this.x=r,this},t.setY=function(r){return this.y=r,this},t.setZ=function(r){return this.z=r,this},t.setW=function(r){return this.w=r,this},t.setComponent=function(r,n){switch(r){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+r)}return this},t.getComponent=function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}},t.clone=function(){return new this.constructor(this.x,this.y,this.z,this.w)},t.copy=function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=r.w!==void 0?r.w:1,this},t.add=function(r,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,n)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this)},t.addScalar=function(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this},t.addVectors=function(r,n){return this.x=r.x+n.x,this.y=r.y+n.y,this.z=r.z+n.z,this.w=r.w+n.w,this},t.addScaledVector=function(r,n){return this.x+=r.x*n,this.y+=r.y*n,this.z+=r.z*n,this.w+=r.w*n,this},t.sub=function(r,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,n)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this)},t.subScalar=function(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this},t.subVectors=function(r,n){return this.x=r.x-n.x,this.y=r.y-n.y,this.z=r.z-n.z,this.w=r.w-n.w,this},t.multiply=function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this.w*=r.w,this},t.multiplyScalar=function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this},t.applyMatrix4=function(r){var n=this.x,o=this.y,s=this.z,f=this.w,w=r.elements;return this.x=w[0]*n+w[4]*o+w[8]*s+w[12]*f,this.y=w[1]*n+w[5]*o+w[9]*s+w[13]*f,this.z=w[2]*n+w[6]*o+w[10]*s+w[14]*f,this.w=w[3]*n+w[7]*o+w[11]*s+w[15]*f,this},t.divideScalar=function(r){return this.multiplyScalar(1/r)},t.setAxisAngleFromQuaternion=function(r){this.w=2*Math.acos(r.w);var n=Math.sqrt(1-r.w*r.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=r.x/n,this.y=r.y/n,this.z=r.z/n),this},t.setAxisAngleFromRotationMatrix=function(r){var n,o,s,f,w=.01,M=.1,O=r.elements,P=O[0],R=O[4],N=O[8],F=O[1],j=O[5],q=O[9],X=O[2],H=O[6],he=O[10];if(Math.abs(R-F)<w&&Math.abs(N-X)<w&&Math.abs(q-H)<w){if(Math.abs(R+F)<M&&Math.abs(N+X)<M&&Math.abs(q+H)<M&&Math.abs(P+j+he-3)<M)return this.set(1,0,0,0),this;n=Math.PI;var ye=(P+1)/2,ie=(j+1)/2,ee=(he+1)/2,ve=(R+F)/4,Re=(N+X)/4,Le=(q+H)/4;return ye>ie&&ye>ee?ye<w?(o=0,s=.707106781,f=.707106781):(o=Math.sqrt(ye),s=ve/o,f=Re/o):ie>ee?ie<w?(o=.707106781,s=0,f=.707106781):(s=Math.sqrt(ie),o=ve/s,f=Le/s):ee<w?(o=.707106781,s=.707106781,f=0):(f=Math.sqrt(ee),o=Re/f,s=Le/f),this.set(o,s,f,n),this}var Ie=Math.sqrt((H-q)*(H-q)+(N-X)*(N-X)+(F-R)*(F-R));return Math.abs(Ie)<.001&&(Ie=1),this.x=(H-q)/Ie,this.y=(N-X)/Ie,this.z=(F-R)/Ie,this.w=Math.acos((P+j+he-1)/2),this},t.min=function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this},t.max=function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this},t.clamp=function(r,n){return this.x=Math.max(r.x,Math.min(n.x,this.x)),this.y=Math.max(r.y,Math.min(n.y,this.y)),this.z=Math.max(r.z,Math.min(n.z,this.z)),this.w=Math.max(r.w,Math.min(n.w,this.w)),this},t.clampScalar=function(r,n){return this.x=Math.max(r,Math.min(n,this.x)),this.y=Math.max(r,Math.min(n,this.y)),this.z=Math.max(r,Math.min(n,this.z)),this.w=Math.max(r,Math.min(n,this.w)),this},t.clampLength=function(r,n){var o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(r,Math.min(n,o)))},t.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},t.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},t.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},t.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},t.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},t.dot=function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w},t.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},t.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},t.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},t.normalize=function(){return this.divideScalar(this.length()||1)},t.setLength=function(r){return this.normalize().multiplyScalar(r)},t.lerp=function(r,n){return this.x+=(r.x-this.x)*n,this.y+=(r.y-this.y)*n,this.z+=(r.z-this.z)*n,this.w+=(r.w-this.w)*n,this},t.lerpVectors=function(r,n,o){return this.x=r.x+(n.x-r.x)*o,this.y=r.y+(n.y-r.y)*o,this.z=r.z+(n.z-r.z)*o,this.w=r.w+(n.w-r.w)*o,this},t.equals=function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w},t.fromArray=function(r,n){return n===void 0&&(n=0),this.x=r[n],this.y=r[n+1],this.z=r[n+2],this.w=r[n+3],this},t.toArray=function(r,n){return r===void 0&&(r=[]),n===void 0&&(n=0),r[n]=this.x,r[n+1]=this.y,r[n+2]=this.z,r[n+3]=this.w,r},t.fromBufferAttribute=function(r,n,o){return o!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(n),this.y=r.getY(n),this.z=r.getZ(n),this.w=r.getW(n),this},t.random=function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this},Yu(a,[{key:"width",get:function(){return this.z},set:function(r){this.z=r}},{key:"height",get:function(){return this.w},set:function(r){this.w=r}}]),a}(),uo=function(a){Rr(t,a);function t(r,n,o){var s;return s=a.call(this)||this,Object.defineProperty(oa(s),"isWebGLRenderTarget",{value:!0}),s.width=r,s.height=n,s.scissor=new cn(0,0,r,n),s.scissorTest=!1,s.viewport=new cn(0,0,r,n),o=o||{},s.texture=new vn(void 0,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),s.texture.image={},s.texture.image.width=r,s.texture.image.height=n,s.texture.generateMipmaps=o.generateMipmaps!==void 0?o.generateMipmaps:!1,s.texture.minFilter=o.minFilter!==void 0?o.minFilter:ht,s.depthBuffer=o.depthBuffer!==void 0?o.depthBuffer:!0,s.stencilBuffer=o.stencilBuffer!==void 0?o.stencilBuffer:!1,s.depthTexture=o.depthTexture!==void 0?o.depthTexture:null,s}var i=t.prototype;return i.setSize=function(n,o){(this.width!==n||this.height!==o)&&(this.width=n,this.height=o,this.texture.image.width=n,this.texture.image.height=o,this.dispose()),this.viewport.set(0,0,n,o),this.scissor.set(0,0,n,o)},i.clone=function(){return new this.constructor().copy(this)},i.copy=function(n){return this.width=n.width,this.height=n.height,this.viewport.copy(n.viewport),this.texture=n.texture.clone(),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this},i.dispose=function(){this.dispatchEvent({type:"dispose"})},t}(xa),Hy=function(a){Rr(t,a);function t(r,n,o){var s;return s=a.call(this,r,n,o)||this,Object.defineProperty(oa(s),"isWebGLMultisampleRenderTarget",{value:!0}),s.samples=4,s}var i=t.prototype;return i.copy=function(n){return a.prototype.copy.call(this,n),this.samples=n.samples,this},t}(uo),ii=function(){function a(i,r,n,o){i===void 0&&(i=0),r===void 0&&(r=0),n===void 0&&(n=0),o===void 0&&(o=1),Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=i,this._y=r,this._z=n,this._w=o}a.slerp=function(r,n,o,s){return o.copy(r).slerp(n,s)},a.slerpFlat=function(r,n,o,s,f,w,M){var O=o[s+0],P=o[s+1],R=o[s+2],N=o[s+3],F=f[w+0],j=f[w+1],q=f[w+2],X=f[w+3];if(N!==X||O!==F||P!==j||R!==q){var H=1-M,he=O*F+P*j+R*q+N*X,ye=he>=0?1:-1,ie=1-he*he;if(ie>Number.EPSILON){var ee=Math.sqrt(ie),ve=Math.atan2(ee,he*ye);H=Math.sin(H*ve)/ee,M=Math.sin(M*ve)/ee}var Re=M*ye;if(O=O*H+F*Re,P=P*H+j*Re,R=R*H+q*Re,N=N*H+X*Re,H===1-M){var Le=1/Math.sqrt(O*O+P*P+R*R+N*N);O*=Le,P*=Le,R*=Le,N*=Le}}r[n]=O,r[n+1]=P,r[n+2]=R,r[n+3]=N},a.multiplyQuaternionsFlat=function(r,n,o,s,f,w){var M=o[s],O=o[s+1],P=o[s+2],R=o[s+3],N=f[w],F=f[w+1],j=f[w+2],q=f[w+3];return r[n]=M*q+R*N+O*j-P*F,r[n+1]=O*q+R*F+P*N-M*j,r[n+2]=P*q+R*j+M*F-O*N,r[n+3]=R*q-M*N-O*F-P*j,r};var t=a.prototype;return t.set=function(r,n,o,s){return this._x=r,this._y=n,this._z=o,this._w=s,this._onChangeCallback(),this},t.clone=function(){return new this.constructor(this._x,this._y,this._z,this._w)},t.copy=function(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this._onChangeCallback(),this},t.setFromEuler=function(r,n){if(!(r&&r.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var o=r._x,s=r._y,f=r._z,w=r._order,M=Math.cos,O=Math.sin,P=M(o/2),R=M(s/2),N=M(f/2),F=O(o/2),j=O(s/2),q=O(f/2);switch(w){case"XYZ":this._x=F*R*N+P*j*q,this._y=P*j*N-F*R*q,this._z=P*R*q+F*j*N,this._w=P*R*N-F*j*q;break;case"YXZ":this._x=F*R*N+P*j*q,this._y=P*j*N-F*R*q,this._z=P*R*q-F*j*N,this._w=P*R*N+F*j*q;break;case"ZXY":this._x=F*R*N-P*j*q,this._y=P*j*N+F*R*q,this._z=P*R*q+F*j*N,this._w=P*R*N-F*j*q;break;case"ZYX":this._x=F*R*N-P*j*q,this._y=P*j*N+F*R*q,this._z=P*R*q-F*j*N,this._w=P*R*N+F*j*q;break;case"YZX":this._x=F*R*N+P*j*q,this._y=P*j*N+F*R*q,this._z=P*R*q-F*j*N,this._w=P*R*N-F*j*q;break;case"XZY":this._x=F*R*N-P*j*q,this._y=P*j*N-F*R*q,this._z=P*R*q+F*j*N,this._w=P*R*N+F*j*q;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+w)}return n!==!1&&this._onChangeCallback(),this},t.setFromAxisAngle=function(r,n){var o=n/2,s=Math.sin(o);return this._x=r.x*s,this._y=r.y*s,this._z=r.z*s,this._w=Math.cos(o),this._onChangeCallback(),this},t.setFromRotationMatrix=function(r){var n=r.elements,o=n[0],s=n[4],f=n[8],w=n[1],M=n[5],O=n[9],P=n[2],R=n[6],N=n[10],F=o+M+N;if(F>0){var j=.5/Math.sqrt(F+1);this._w=.25/j,this._x=(R-O)*j,this._y=(f-P)*j,this._z=(w-s)*j}else if(o>M&&o>N){var q=2*Math.sqrt(1+o-M-N);this._w=(R-O)/q,this._x=.25*q,this._y=(s+w)/q,this._z=(f+P)/q}else if(M>N){var X=2*Math.sqrt(1+M-o-N);this._w=(f-P)/X,this._x=(s+w)/X,this._y=.25*X,this._z=(O+R)/X}else{var H=2*Math.sqrt(1+N-o-M);this._w=(w-s)/H,this._x=(f+P)/H,this._y=(O+R)/H,this._z=.25*H}return this._onChangeCallback(),this},t.setFromUnitVectors=function(r,n){var o=1e-6,s=r.dot(n)+1;return s<o?(s=0,Math.abs(r.x)>Math.abs(r.z)?(this._x=-r.y,this._y=r.x,this._z=0,this._w=s):(this._x=0,this._y=-r.z,this._z=r.y,this._w=s)):(this._x=r.y*n.z-r.z*n.y,this._y=r.z*n.x-r.x*n.z,this._z=r.x*n.y-r.y*n.x,this._w=s),this.normalize()},t.angleTo=function(r){return 2*Math.acos(Math.abs(gr.clamp(this.dot(r),-1,1)))},t.rotateTowards=function(r,n){var o=this.angleTo(r);if(o===0)return this;var s=Math.min(1,n/o);return this.slerp(r,s),this},t.identity=function(){return this.set(0,0,0,1)},t.invert=function(){return this.conjugate()},t.conjugate=function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},t.dot=function(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w},t.lengthSq=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},t.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},t.normalize=function(){var r=this.length();return r===0?(this._x=0,this._y=0,this._z=0,this._w=1):(r=1/r,this._x=this._x*r,this._y=this._y*r,this._z=this._z*r,this._w=this._w*r),this._onChangeCallback(),this},t.multiply=function(r,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(r,n)):this.multiplyQuaternions(this,r)},t.premultiply=function(r){return this.multiplyQuaternions(r,this)},t.multiplyQuaternions=function(r,n){var o=r._x,s=r._y,f=r._z,w=r._w,M=n._x,O=n._y,P=n._z,R=n._w;return this._x=o*R+w*M+s*P-f*O,this._y=s*R+w*O+f*M-o*P,this._z=f*R+w*P+o*O-s*M,this._w=w*R-o*M-s*O-f*P,this._onChangeCallback(),this},t.slerp=function(r,n){if(n===0)return this;if(n===1)return this.copy(r);var o=this._x,s=this._y,f=this._z,w=this._w,M=w*r._w+o*r._x+s*r._y+f*r._z;if(M<0?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,M=-M):this.copy(r),M>=1)return this._w=w,this._x=o,this._y=s,this._z=f,this;var O=1-M*M;if(O<=Number.EPSILON){var P=1-n;return this._w=P*w+n*this._w,this._x=P*o+n*this._x,this._y=P*s+n*this._y,this._z=P*f+n*this._z,this.normalize(),this._onChangeCallback(),this}var R=Math.sqrt(O),N=Math.atan2(R,M),F=Math.sin((1-n)*N)/R,j=Math.sin(n*N)/R;return this._w=w*F+this._w*j,this._x=o*F+this._x*j,this._y=s*F+this._y*j,this._z=f*F+this._z*j,this._onChangeCallback(),this},t.equals=function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w},t.fromArray=function(r,n){return n===void 0&&(n=0),this._x=r[n],this._y=r[n+1],this._z=r[n+2],this._w=r[n+3],this._onChangeCallback(),this},t.toArray=function(r,n){return r===void 0&&(r=[]),n===void 0&&(n=0),r[n]=this._x,r[n+1]=this._y,r[n+2]=this._z,r[n+3]=this._w,r},t.fromBufferAttribute=function(r,n){return this._x=r.getX(n),this._y=r.getY(n),this._z=r.getZ(n),this._w=r.getW(n),this},t._onChange=function(r){return this._onChangeCallback=r,this},t._onChangeCallback=function(){},Yu(a,[{key:"x",get:function(){return this._x},set:function(r){this._x=r,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(r){this._y=r,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(r){this._z=r,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(r){this._w=r,this._onChangeCallback()}}]),a}(),be=function(){function a(i,r,n){i===void 0&&(i=0),r===void 0&&(r=0),n===void 0&&(n=0),Object.defineProperty(this,"isVector3",{value:!0}),this.x=i,this.y=r,this.z=n}var t=a.prototype;return t.set=function(r,n,o){return o===void 0&&(o=this.z),this.x=r,this.y=n,this.z=o,this},t.setScalar=function(r){return this.x=r,this.y=r,this.z=r,this},t.setX=function(r){return this.x=r,this},t.setY=function(r){return this.y=r,this},t.setZ=function(r){return this.z=r,this},t.setComponent=function(r,n){switch(r){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+r)}return this},t.getComponent=function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r)}},t.clone=function(){return new this.constructor(this.x,this.y,this.z)},t.copy=function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this},t.add=function(r,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,n)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this)},t.addScalar=function(r){return this.x+=r,this.y+=r,this.z+=r,this},t.addVectors=function(r,n){return this.x=r.x+n.x,this.y=r.y+n.y,this.z=r.z+n.z,this},t.addScaledVector=function(r,n){return this.x+=r.x*n,this.y+=r.y*n,this.z+=r.z*n,this},t.sub=function(r,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,n)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this)},t.subScalar=function(r){return this.x-=r,this.y-=r,this.z-=r,this},t.subVectors=function(r,n){return this.x=r.x-n.x,this.y=r.y-n.y,this.z=r.z-n.z,this},t.multiply=function(r,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(r,n)):(this.x*=r.x,this.y*=r.y,this.z*=r.z,this)},t.multiplyScalar=function(r){return this.x*=r,this.y*=r,this.z*=r,this},t.multiplyVectors=function(r,n){return this.x=r.x*n.x,this.y=r.y*n.y,this.z=r.z*n.z,this},t.applyEuler=function(r){return r&&r.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Np.setFromEuler(r))},t.applyAxisAngle=function(r,n){return this.applyQuaternion(Np.setFromAxisAngle(r,n))},t.applyMatrix3=function(r){var n=this.x,o=this.y,s=this.z,f=r.elements;return this.x=f[0]*n+f[3]*o+f[6]*s,this.y=f[1]*n+f[4]*o+f[7]*s,this.z=f[2]*n+f[5]*o+f[8]*s,this},t.applyNormalMatrix=function(r){return this.applyMatrix3(r).normalize()},t.applyMatrix4=function(r){var n=this.x,o=this.y,s=this.z,f=r.elements,w=1/(f[3]*n+f[7]*o+f[11]*s+f[15]);return this.x=(f[0]*n+f[4]*o+f[8]*s+f[12])*w,this.y=(f[1]*n+f[5]*o+f[9]*s+f[13])*w,this.z=(f[2]*n+f[6]*o+f[10]*s+f[14])*w,this},t.applyQuaternion=function(r){var n=this.x,o=this.y,s=this.z,f=r.x,w=r.y,M=r.z,O=r.w,P=O*n+w*s-M*o,R=O*o+M*n-f*s,N=O*s+f*o-w*n,F=-f*n-w*o-M*s;return this.x=P*O+F*-f+R*-M-N*-w,this.y=R*O+F*-w+N*-f-P*-M,this.z=N*O+F*-M+P*-w-R*-f,this},t.project=function(r){return this.applyMatrix4(r.matrixWorldInverse).applyMatrix4(r.projectionMatrix)},t.unproject=function(r){return this.applyMatrix4(r.projectionMatrixInverse).applyMatrix4(r.matrixWorld)},t.transformDirection=function(r){var n=this.x,o=this.y,s=this.z,f=r.elements;return this.x=f[0]*n+f[4]*o+f[8]*s,this.y=f[1]*n+f[5]*o+f[9]*s,this.z=f[2]*n+f[6]*o+f[10]*s,this.normalize()},t.divide=function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this},t.divideScalar=function(r){return this.multiplyScalar(1/r)},t.min=function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this},t.max=function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this},t.clamp=function(r,n){return this.x=Math.max(r.x,Math.min(n.x,this.x)),this.y=Math.max(r.y,Math.min(n.y,this.y)),this.z=Math.max(r.z,Math.min(n.z,this.z)),this},t.clampScalar=function(r,n){return this.x=Math.max(r,Math.min(n,this.x)),this.y=Math.max(r,Math.min(n,this.y)),this.z=Math.max(r,Math.min(n,this.z)),this},t.clampLength=function(r,n){var o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(r,Math.min(n,o)))},t.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},t.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},t.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},t.roundToZero=function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},t.negate=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},t.dot=function(r){return this.x*r.x+this.y*r.y+this.z*r.z},t.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z},t.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.manhattanLength=function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},t.normalize=function(){return this.divideScalar(this.length()||1)},t.setLength=function(r){return this.normalize().multiplyScalar(r)},t.lerp=function(r,n){return this.x+=(r.x-this.x)*n,this.y+=(r.y-this.y)*n,this.z+=(r.z-this.z)*n,this},t.lerpVectors=function(r,n,o){return this.x=r.x+(n.x-r.x)*o,this.y=r.y+(n.y-r.y)*o,this.z=r.z+(n.z-r.z)*o,this},t.cross=function(r,n){return n!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(r,n)):this.crossVectors(this,r)},t.crossVectors=function(r,n){var o=r.x,s=r.y,f=r.z,w=n.x,M=n.y,O=n.z;return this.x=s*O-f*M,this.y=f*w-o*O,this.z=o*M-s*w,this},t.projectOnVector=function(r){var n=r.lengthSq();if(n===0)return this.set(0,0,0);var o=r.dot(this)/n;return this.copy(r).multiplyScalar(o)},t.projectOnPlane=function(r){return rf.copy(this).projectOnVector(r),this.sub(rf)},t.reflect=function(r){return this.sub(rf.copy(r).multiplyScalar(2*this.dot(r)))},t.angleTo=function(r){var n=Math.sqrt(this.lengthSq()*r.lengthSq());if(n===0)return Math.PI/2;var o=this.dot(r)/n;return Math.acos(gr.clamp(o,-1,1))},t.distanceTo=function(r){return Math.sqrt(this.distanceToSquared(r))},t.distanceToSquared=function(r){var n=this.x-r.x,o=this.y-r.y,s=this.z-r.z;return n*n+o*o+s*s},t.manhattanDistanceTo=function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)+Math.abs(this.z-r.z)},t.setFromSpherical=function(r){return this.setFromSphericalCoords(r.radius,r.phi,r.theta)},t.setFromSphericalCoords=function(r,n,o){var s=Math.sin(n)*r;return this.x=s*Math.sin(o),this.y=Math.cos(n)*r,this.z=s*Math.cos(o),this},t.setFromCylindrical=function(r){return this.setFromCylindricalCoords(r.radius,r.theta,r.y)},t.setFromCylindricalCoords=function(r,n,o){return this.x=r*Math.sin(n),this.y=o,this.z=r*Math.cos(n),this},t.setFromMatrixPosition=function(r){var n=r.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this},t.setFromMatrixScale=function(r){var n=this.setFromMatrixColumn(r,0).length(),o=this.setFromMatrixColumn(r,1).length(),s=this.setFromMatrixColumn(r,2).length();return this.x=n,this.y=o,this.z=s,this},t.setFromMatrixColumn=function(r,n){return this.fromArray(r.elements,n*4)},t.setFromMatrix3Column=function(r,n){return this.fromArray(r.elements,n*3)},t.equals=function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z},t.fromArray=function(r,n){return n===void 0&&(n=0),this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},t.toArray=function(r,n){return r===void 0&&(r=[]),n===void 0&&(n=0),r[n]=this.x,r[n+1]=this.y,r[n+2]=this.z,r},t.fromBufferAttribute=function(r,n,o){return o!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(n),this.y=r.getY(n),this.z=r.getZ(n),this},t.random=function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this},a}(),rf=new be,Np=new ii,za=function(){function a(i,r){Object.defineProperty(this,"isBox3",{value:!0}),this.min=i!==void 0?i:new be(1/0,1/0,1/0),this.max=r!==void 0?r:new be(-1/0,-1/0,-1/0)}var t=a.prototype;return t.set=function(r,n){return this.min.copy(r),this.max.copy(n),this},t.setFromArray=function(r){for(var n=1/0,o=1/0,s=1/0,f=-1/0,w=-1/0,M=-1/0,O=0,P=r.length;O<P;O+=3){var R=r[O],N=r[O+1],F=r[O+2];R<n&&(n=R),N<o&&(o=N),F<s&&(s=F),R>f&&(f=R),N>w&&(w=N),F>M&&(M=F)}return this.min.set(n,o,s),this.max.set(f,w,M),this},t.setFromBufferAttribute=function(r){for(var n=1/0,o=1/0,s=1/0,f=-1/0,w=-1/0,M=-1/0,O=0,P=r.count;O<P;O++){var R=r.getX(O),N=r.getY(O),F=r.getZ(O);R<n&&(n=R),N<o&&(o=N),F<s&&(s=F),R>f&&(f=R),N>w&&(w=N),F>M&&(M=F)}return this.min.set(n,o,s),this.max.set(f,w,M),this},t.setFromPoints=function(r){this.makeEmpty();for(var n=0,o=r.length;n<o;n++)this.expandByPoint(r[n]);return this},t.setFromCenterAndSize=function(r,n){var o=kl.copy(n).multiplyScalar(.5);return this.min.copy(r).sub(o),this.max.copy(r).add(o),this},t.setFromObject=function(r){return this.makeEmpty(),this.expandByObject(r)},t.clone=function(){return new this.constructor().copy(this)},t.copy=function(r){return this.min.copy(r.min),this.max.copy(r.max),this},t.makeEmpty=function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},t.isEmpty=function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},t.getCenter=function(r){return r===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),r=new be),this.isEmpty()?r.set(0,0,0):r.addVectors(this.min,this.max).multiplyScalar(.5)},t.getSize=function(r){return r===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),r=new be),this.isEmpty()?r.set(0,0,0):r.subVectors(this.max,this.min)},t.expandByPoint=function(r){return this.min.min(r),this.max.max(r),this},t.expandByVector=function(r){return this.min.sub(r),this.max.add(r),this},t.expandByScalar=function(r){return this.min.addScalar(-r),this.max.addScalar(r),this},t.expandByObject=function(r){r.updateWorldMatrix(!1,!1);var n=r.geometry;n!==void 0&&(n.boundingBox===null&&n.computeBoundingBox(),af.copy(n.boundingBox),af.applyMatrix4(r.matrixWorld),this.union(af));for(var o=r.children,s=0,f=o.length;s<f;s++)this.expandByObject(o[s]);return this},t.containsPoint=function(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y||r.z<this.min.z||r.z>this.max.z)},t.containsBox=function(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y&&this.min.z<=r.min.z&&r.max.z<=this.max.z},t.getParameter=function(r,n){return n===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),n=new be),n.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y),(r.z-this.min.z)/(this.max.z-this.min.z))},t.intersectsBox=function(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y||r.max.z<this.min.z||r.min.z>this.max.z)},t.intersectsSphere=function(r){return this.clampPoint(r.center,kl),kl.distanceToSquared(r.center)<=r.radius*r.radius},t.intersectsPlane=function(r){var n,o;return r.normal.x>0?(n=r.normal.x*this.min.x,o=r.normal.x*this.max.x):(n=r.normal.x*this.max.x,o=r.normal.x*this.min.x),r.normal.y>0?(n+=r.normal.y*this.min.y,o+=r.normal.y*this.max.y):(n+=r.normal.y*this.max.y,o+=r.normal.y*this.min.y),r.normal.z>0?(n+=r.normal.z*this.min.z,o+=r.normal.z*this.max.z):(n+=r.normal.z*this.max.z,o+=r.normal.z*this.min.z),n<=-r.constant&&o>=-r.constant},t.intersectsTriangle=function(r){if(this.isEmpty())return!1;this.getCenter(Ul),qu.subVectors(this.max,Ul),Ds.subVectors(r.a,Ul),Os.subVectors(r.b,Ul),Is.subVectors(r.c,Ul),co.subVectors(Os,Ds),ho.subVectors(Is,Os),Qo.subVectors(Ds,Is);var n=[0,-co.z,co.y,0,-ho.z,ho.y,0,-Qo.z,Qo.y,co.z,0,-co.x,ho.z,0,-ho.x,Qo.z,0,-Qo.x,-co.y,co.x,0,-ho.y,ho.x,0,-Qo.y,Qo.x,0];return!nf(n,Ds,Os,Is,qu)||(n=[1,0,0,0,1,0,0,0,1],!nf(n,Ds,Os,Is,qu))?!1:(Ku.crossVectors(co,ho),n=[Ku.x,Ku.y,Ku.z],nf(n,Ds,Os,Is,qu))},t.clampPoint=function(r,n){return n===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),n=new be),n.copy(r).clamp(this.min,this.max)},t.distanceToPoint=function(r){var n=kl.copy(r).clamp(this.min,this.max);return n.sub(r).length()},t.getBoundingSphere=function(r){return r===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(r.center),r.radius=this.getSize(kl).length()*.5,r},t.intersect=function(r){return this.min.max(r.min),this.max.min(r.max),this.isEmpty()&&this.makeEmpty(),this},t.union=function(r){return this.min.min(r.min),this.max.max(r.max),this},t.applyMatrix4=function(r){return this.isEmpty()?this:(Wa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r),Wa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r),Wa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r),Wa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r),Wa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r),Wa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r),Wa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r),Wa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r),this.setFromPoints(Wa),this)},t.translate=function(r){return this.min.add(r),this.max.add(r),this},t.equals=function(r){return r.min.equals(this.min)&&r.max.equals(this.max)},a}();function nf(a,t,i,r,n){for(var o=0,s=a.length-3;o<=s;o+=3){qo.fromArray(a,o);var f=n.x*Math.abs(qo.x)+n.y*Math.abs(qo.y)+n.z*Math.abs(qo.z),w=t.dot(qo),M=i.dot(qo),O=r.dot(qo);if(Math.max(-Math.max(w,M,O),Math.min(w,M,O))>f)return!1}return!0}var Wa=[new be,new be,new be,new be,new be,new be,new be,new be],kl=new be,af=new za,Ds=new be,Os=new be,Is=new be,co=new be,ho=new be,Qo=new be,Ul=new be,qu=new be,Ku=new be,qo=new be,Gy=new za,fo=function(){function a(i,r){this.center=i!==void 0?i:new be,this.radius=r!==void 0?r:-1}var t=a.prototype;return t.set=function(r,n){return this.center.copy(r),this.radius=n,this},t.setFromPoints=function(r,n){var o=this.center;n!==void 0?o.copy(n):Gy.setFromPoints(r).getCenter(o);for(var s=0,f=0,w=r.length;f<w;f++)s=Math.max(s,o.distanceToSquared(r[f]));return this.radius=Math.sqrt(s),this},t.clone=function(){return new this.constructor().copy(this)},t.copy=function(r){return this.center.copy(r.center),this.radius=r.radius,this},t.isEmpty=function(){return this.radius<0},t.makeEmpty=function(){return this.center.set(0,0,0),this.radius=-1,this},t.containsPoint=function(r){return r.distanceToSquared(this.center)<=this.radius*this.radius},t.distanceToPoint=function(r){return r.distanceTo(this.center)-this.radius},t.intersectsSphere=function(r){var n=this.radius+r.radius;return r.center.distanceToSquared(this.center)<=n*n},t.intersectsBox=function(r){return r.intersectsSphere(this)},t.intersectsPlane=function(r){return Math.abs(r.distanceToPoint(this.center))<=this.radius},t.clampPoint=function(r,n){var o=this.center.distanceToSquared(r);return n===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),n=new be),n.copy(r),o>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},t.getBoundingBox=function(r){return r===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),r=new za),this.isEmpty()?(r.makeEmpty(),r):(r.set(this.center,this.center),r.expandByScalar(this.radius),r)},t.applyMatrix4=function(r){return this.center.applyMatrix4(r),this.radius=this.radius*r.getMaxScaleOnAxis(),this},t.translate=function(r){return this.center.add(r),this},t.equals=function(r){return r.center.equals(this.center)&&r.radius===this.radius},a}(),ja=new be,of=new be,Ju=new be,po=new be,sf=new be,Zu=new be,lf=new be,Bs=function(){function a(i,r){this.origin=i!==void 0?i:new be,this.direction=r!==void 0?r:new be(0,0,-1)}var t=a.prototype;return t.set=function(r,n){return this.origin.copy(r),this.direction.copy(n),this},t.clone=function(){return new this.constructor().copy(this)},t.copy=function(r){return this.origin.copy(r.origin),this.direction.copy(r.direction),this},t.at=function(r,n){return n===void 0&&(console.warn("THREE.Ray: .at() target is now required"),n=new be),n.copy(this.direction).multiplyScalar(r).add(this.origin)},t.lookAt=function(r){return this.direction.copy(r).sub(this.origin).normalize(),this},t.recast=function(r){return this.origin.copy(this.at(r,ja)),this},t.closestPointToPoint=function(r,n){n===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),n=new be),n.subVectors(r,this.origin);var o=n.dot(this.direction);return o<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(o).add(this.origin)},t.distanceToPoint=function(r){return Math.sqrt(this.distanceSqToPoint(r))},t.distanceSqToPoint=function(r){var n=ja.subVectors(r,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(r):(ja.copy(this.direction).multiplyScalar(n).add(this.origin),ja.distanceToSquared(r))},t.distanceSqToSegment=function(r,n,o,s){of.copy(r).add(n).multiplyScalar(.5),Ju.copy(n).sub(r).normalize(),po.copy(this.origin).sub(of);var f=r.distanceTo(n)*.5,w=-this.direction.dot(Ju),M=po.dot(this.direction),O=-po.dot(Ju),P=po.lengthSq(),R=Math.abs(1-w*w),N,F,j,q;if(R>0)if(N=w*O-M,F=w*M-O,q=f*R,N>=0)if(F>=-q)if(F<=q){var X=1/R;N*=X,F*=X,j=N*(N+w*F+2*M)+F*(w*N+F+2*O)+P}else F=f,N=Math.max(0,-(w*F+M)),j=-N*N+F*(F+2*O)+P;else F=-f,N=Math.max(0,-(w*F+M)),j=-N*N+F*(F+2*O)+P;else F<=-q?(N=Math.max(0,-(-w*f+M)),F=N>0?-f:Math.min(Math.max(-f,-O),f),j=-N*N+F*(F+2*O)+P):F<=q?(N=0,F=Math.min(Math.max(-f,-O),f),j=F*(F+2*O)+P):(N=Math.max(0,-(w*f+M)),F=N>0?f:Math.min(Math.max(-f,-O),f),j=-N*N+F*(F+2*O)+P);else F=w>0?-f:f,N=Math.max(0,-(w*F+M)),j=-N*N+F*(F+2*O)+P;return o&&o.copy(this.direction).multiplyScalar(N).add(this.origin),s&&s.copy(Ju).multiplyScalar(F).add(of),j},t.intersectSphere=function(r,n){ja.subVectors(r.center,this.origin);var o=ja.dot(this.direction),s=ja.dot(ja)-o*o,f=r.radius*r.radius;if(s>f)return null;var w=Math.sqrt(f-s),M=o-w,O=o+w;return M<0&&O<0?null:M<0?this.at(O,n):this.at(M,n)},t.intersectsSphere=function(r){return this.distanceSqToPoint(r.center)<=r.radius*r.radius},t.distanceToPlane=function(r){var n=r.normal.dot(this.direction);if(n===0)return r.distanceToPoint(this.origin)===0?0:null;var o=-(this.origin.dot(r.normal)+r.constant)/n;return o>=0?o:null},t.intersectPlane=function(r,n){var o=this.distanceToPlane(r);return o===null?null:this.at(o,n)},t.intersectsPlane=function(r){var n=r.distanceToPoint(this.origin);if(n===0)return!0;var o=r.normal.dot(this.direction);return o*n<0},t.intersectBox=function(r,n){var o,s,f,w,M,O,P=1/this.direction.x,R=1/this.direction.y,N=1/this.direction.z,F=this.origin;return P>=0?(o=(r.min.x-F.x)*P,s=(r.max.x-F.x)*P):(o=(r.max.x-F.x)*P,s=(r.min.x-F.x)*P),R>=0?(f=(r.min.y-F.y)*R,w=(r.max.y-F.y)*R):(f=(r.max.y-F.y)*R,w=(r.min.y-F.y)*R),o>w||f>s||((f>o||o!==o)&&(o=f),(w<s||s!==s)&&(s=w),N>=0?(M=(r.min.z-F.z)*N,O=(r.max.z-F.z)*N):(M=(r.max.z-F.z)*N,O=(r.min.z-F.z)*N),o>O||M>s)||((M>o||o!==o)&&(o=M),(O<s||s!==s)&&(s=O),s<0)?null:this.at(o>=0?o:s,n)},t.intersectsBox=function(r){return this.intersectBox(r,ja)!==null},t.intersectTriangle=function(r,n,o,s,f){sf.subVectors(n,r),Zu.subVectors(o,r),lf.crossVectors(sf,Zu);var w=this.direction.dot(lf),M;if(w>0){if(s)return null;M=1}else if(w<0)M=-1,w=-w;else return null;po.subVectors(this.origin,r);var O=M*this.direction.dot(Zu.crossVectors(po,Zu));if(O<0)return null;var P=M*this.direction.dot(sf.cross(po));if(P<0||O+P>w)return null;var R=-M*po.dot(lf);return R<0?null:this.at(R/w,f)},t.applyMatrix4=function(r){return this.origin.applyMatrix4(r),this.direction.transformDirection(r),this},t.equals=function(r){return r.origin.equals(this.origin)&&r.direction.equals(this.direction)},a}(),Br=function(){function a(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}var t=a.prototype;return t.set=function(r,n,o,s,f,w,M,O,P,R,N,F,j,q,X,H){var he=this.elements;return he[0]=r,he[4]=n,he[8]=o,he[12]=s,he[1]=f,he[5]=w,he[9]=M,he[13]=O,he[2]=P,he[6]=R,he[10]=N,he[14]=F,he[3]=j,he[7]=q,he[11]=X,he[15]=H,this},t.identity=function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},t.clone=function(){return new a().fromArray(this.elements)},t.copy=function(r){var n=this.elements,o=r.elements;return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],this},t.copyPosition=function(r){var n=this.elements,o=r.elements;return n[12]=o[12],n[13]=o[13],n[14]=o[14],this},t.setFromMatrix3=function(r){var n=r.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this},t.extractBasis=function(r,n,o){return r.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),o.setFromMatrixColumn(this,2),this},t.makeBasis=function(r,n,o){return this.set(r.x,n.x,o.x,0,r.y,n.y,o.y,0,r.z,n.z,o.z,0,0,0,0,1),this},t.extractRotation=function(r){var n=this.elements,o=r.elements,s=1/Fs.setFromMatrixColumn(r,0).length(),f=1/Fs.setFromMatrixColumn(r,1).length(),w=1/Fs.setFromMatrixColumn(r,2).length();return n[0]=o[0]*s,n[1]=o[1]*s,n[2]=o[2]*s,n[3]=0,n[4]=o[4]*f,n[5]=o[5]*f,n[6]=o[6]*f,n[7]=0,n[8]=o[8]*w,n[9]=o[9]*w,n[10]=o[10]*w,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},t.makeRotationFromEuler=function(r){r&&r.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=this.elements,o=r.x,s=r.y,f=r.z,w=Math.cos(o),M=Math.sin(o),O=Math.cos(s),P=Math.sin(s),R=Math.cos(f),N=Math.sin(f);if(r.order==="XYZ"){var F=w*R,j=w*N,q=M*R,X=M*N;n[0]=O*R,n[4]=-O*N,n[8]=P,n[1]=j+q*P,n[5]=F-X*P,n[9]=-M*O,n[2]=X-F*P,n[6]=q+j*P,n[10]=w*O}else if(r.order==="YXZ"){var H=O*R,he=O*N,ye=P*R,ie=P*N;n[0]=H+ie*M,n[4]=ye*M-he,n[8]=w*P,n[1]=w*N,n[5]=w*R,n[9]=-M,n[2]=he*M-ye,n[6]=ie+H*M,n[10]=w*O}else if(r.order==="ZXY"){var ee=O*R,ve=O*N,Re=P*R,Le=P*N;n[0]=ee-Le*M,n[4]=-w*N,n[8]=Re+ve*M,n[1]=ve+Re*M,n[5]=w*R,n[9]=Le-ee*M,n[2]=-w*P,n[6]=M,n[10]=w*O}else if(r.order==="ZYX"){var Ie=w*R,Ue=w*N,Fe=M*R,Se=M*N;n[0]=O*R,n[4]=Fe*P-Ue,n[8]=Ie*P+Se,n[1]=O*N,n[5]=Se*P+Ie,n[9]=Ue*P-Fe,n[2]=-P,n[6]=M*O,n[10]=w*O}else if(r.order==="YZX"){var We=w*O,Oe=w*P,De=M*O,Me=M*P;n[0]=O*R,n[4]=Me-We*N,n[8]=De*N+Oe,n[1]=N,n[5]=w*R,n[9]=-M*R,n[2]=-P*R,n[6]=Oe*N+De,n[10]=We-Me*N}else if(r.order==="XZY"){var Xe=w*O,Ye=w*P,rt=M*O,nt=M*P;n[0]=O*R,n[4]=-N,n[8]=P*R,n[1]=Xe*N+nt,n[5]=w*R,n[9]=Ye*N-rt,n[2]=rt*N-Ye,n[6]=M*R,n[10]=nt*N+Xe}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},t.makeRotationFromQuaternion=function(r){return this.compose(Vy,r,zy)},t.lookAt=function(r,n,o){var s=this.elements;return Ii.subVectors(r,n),Ii.lengthSq()===0&&(Ii.z=1),Ii.normalize(),vo.crossVectors(o,Ii),vo.lengthSq()===0&&(Math.abs(o.z)===1?Ii.x+=1e-4:Ii.z+=1e-4,Ii.normalize(),vo.crossVectors(o,Ii)),vo.normalize(),$u.crossVectors(Ii,vo),s[0]=vo.x,s[4]=$u.x,s[8]=Ii.x,s[1]=vo.y,s[5]=$u.y,s[9]=Ii.y,s[2]=vo.z,s[6]=$u.z,s[10]=Ii.z,this},t.multiply=function(r,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(r,n)):this.multiplyMatrices(this,r)},t.premultiply=function(r){return this.multiplyMatrices(r,this)},t.multiplyMatrices=function(r,n){var o=r.elements,s=n.elements,f=this.elements,w=o[0],M=o[4],O=o[8],P=o[12],R=o[1],N=o[5],F=o[9],j=o[13],q=o[2],X=o[6],H=o[10],he=o[14],ye=o[3],ie=o[7],ee=o[11],ve=o[15],Re=s[0],Le=s[4],Ie=s[8],Ue=s[12],Fe=s[1],Se=s[5],We=s[9],Oe=s[13],De=s[2],Me=s[6],Xe=s[10],Ye=s[14],rt=s[3],nt=s[7],bt=s[11],Rt=s[15];return f[0]=w*Re+M*Fe+O*De+P*rt,f[4]=w*Le+M*Se+O*Me+P*nt,f[8]=w*Ie+M*We+O*Xe+P*bt,f[12]=w*Ue+M*Oe+O*Ye+P*Rt,f[1]=R*Re+N*Fe+F*De+j*rt,f[5]=R*Le+N*Se+F*Me+j*nt,f[9]=R*Ie+N*We+F*Xe+j*bt,f[13]=R*Ue+N*Oe+F*Ye+j*Rt,f[2]=q*Re+X*Fe+H*De+he*rt,f[6]=q*Le+X*Se+H*Me+he*nt,f[10]=q*Ie+X*We+H*Xe+he*bt,f[14]=q*Ue+X*Oe+H*Ye+he*Rt,f[3]=ye*Re+ie*Fe+ee*De+ve*rt,f[7]=ye*Le+ie*Se+ee*Me+ve*nt,f[11]=ye*Ie+ie*We+ee*Xe+ve*bt,f[15]=ye*Ue+ie*Oe+ee*Ye+ve*Rt,this},t.multiplyScalar=function(r){var n=this.elements;return n[0]*=r,n[4]*=r,n[8]*=r,n[12]*=r,n[1]*=r,n[5]*=r,n[9]*=r,n[13]*=r,n[2]*=r,n[6]*=r,n[10]*=r,n[14]*=r,n[3]*=r,n[7]*=r,n[11]*=r,n[15]*=r,this},t.determinant=function(){var r=this.elements,n=r[0],o=r[4],s=r[8],f=r[12],w=r[1],M=r[5],O=r[9],P=r[13],R=r[2],N=r[6],F=r[10],j=r[14],q=r[3],X=r[7],H=r[11],he=r[15];return q*(+f*O*N-s*P*N-f*M*F+o*P*F+s*M*j-o*O*j)+X*(+n*O*j-n*P*F+f*w*F-s*w*j+s*P*R-f*O*R)+H*(+n*P*N-n*M*j-f*w*N+o*w*j+f*M*R-o*P*R)+he*(-s*M*R-n*O*N+n*M*F+s*w*N-o*w*F+o*O*R)},t.transpose=function(){var r=this.elements,n;return n=r[1],r[1]=r[4],r[4]=n,n=r[2],r[2]=r[8],r[8]=n,n=r[6],r[6]=r[9],r[9]=n,n=r[3],r[3]=r[12],r[12]=n,n=r[7],r[7]=r[13],r[13]=n,n=r[11],r[11]=r[14],r[14]=n,this},t.setPosition=function(r,n,o){var s=this.elements;return r.isVector3?(s[12]=r.x,s[13]=r.y,s[14]=r.z):(s[12]=r,s[13]=n,s[14]=o),this},t.invert=function(){var r=this.elements,n=r[0],o=r[1],s=r[2],f=r[3],w=r[4],M=r[5],O=r[6],P=r[7],R=r[8],N=r[9],F=r[10],j=r[11],q=r[12],X=r[13],H=r[14],he=r[15],ye=N*H*P-X*F*P+X*O*j-M*H*j-N*O*he+M*F*he,ie=q*F*P-R*H*P-q*O*j+w*H*j+R*O*he-w*F*he,ee=R*X*P-q*N*P+q*M*j-w*X*j-R*M*he+w*N*he,ve=q*N*O-R*X*O-q*M*F+w*X*F+R*M*H-w*N*H,Re=n*ye+o*ie+s*ee+f*ve;if(Re===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var Le=1/Re;return r[0]=ye*Le,r[1]=(X*F*f-N*H*f-X*s*j+o*H*j+N*s*he-o*F*he)*Le,r[2]=(M*H*f-X*O*f+X*s*P-o*H*P-M*s*he+o*O*he)*Le,r[3]=(N*O*f-M*F*f-N*s*P+o*F*P+M*s*j-o*O*j)*Le,r[4]=ie*Le,r[5]=(R*H*f-q*F*f+q*s*j-n*H*j-R*s*he+n*F*he)*Le,r[6]=(q*O*f-w*H*f-q*s*P+n*H*P+w*s*he-n*O*he)*Le,r[7]=(w*F*f-R*O*f+R*s*P-n*F*P-w*s*j+n*O*j)*Le,r[8]=ee*Le,r[9]=(q*N*f-R*X*f-q*o*j+n*X*j+R*o*he-n*N*he)*Le,r[10]=(w*X*f-q*M*f+q*o*P-n*X*P-w*o*he+n*M*he)*Le,r[11]=(R*M*f-w*N*f-R*o*P+n*N*P+w*o*j-n*M*j)*Le,r[12]=ve*Le,r[13]=(R*X*s-q*N*s+q*o*F-n*X*F-R*o*H+n*N*H)*Le,r[14]=(q*M*s-w*X*s-q*o*O+n*X*O+w*o*H-n*M*H)*Le,r[15]=(w*N*s-R*M*s+R*o*O-n*N*O-w*o*F+n*M*F)*Le,this},t.scale=function(r){var n=this.elements,o=r.x,s=r.y,f=r.z;return n[0]*=o,n[4]*=s,n[8]*=f,n[1]*=o,n[5]*=s,n[9]*=f,n[2]*=o,n[6]*=s,n[10]*=f,n[3]*=o,n[7]*=s,n[11]*=f,this},t.getMaxScaleOnAxis=function(){var r=this.elements,n=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],o=r[4]*r[4]+r[5]*r[5]+r[6]*r[6],s=r[8]*r[8]+r[9]*r[9]+r[10]*r[10];return Math.sqrt(Math.max(n,o,s))},t.makeTranslation=function(r,n,o){return this.set(1,0,0,r,0,1,0,n,0,0,1,o,0,0,0,1),this},t.makeRotationX=function(r){var n=Math.cos(r),o=Math.sin(r);return this.set(1,0,0,0,0,n,-o,0,0,o,n,0,0,0,0,1),this},t.makeRotationY=function(r){var n=Math.cos(r),o=Math.sin(r);return this.set(n,0,o,0,0,1,0,0,-o,0,n,0,0,0,0,1),this},t.makeRotationZ=function(r){var n=Math.cos(r),o=Math.sin(r);return this.set(n,-o,0,0,o,n,0,0,0,0,1,0,0,0,0,1),this},t.makeRotationAxis=function(r,n){var o=Math.cos(n),s=Math.sin(n),f=1-o,w=r.x,M=r.y,O=r.z,P=f*w,R=f*M;return this.set(P*w+o,P*M-s*O,P*O+s*M,0,P*M+s*O,R*M+o,R*O-s*w,0,P*O-s*M,R*O+s*w,f*O*O+o,0,0,0,0,1),this},t.makeScale=function(r,n,o){return this.set(r,0,0,0,0,n,0,0,0,0,o,0,0,0,0,1),this},t.makeShear=function(r,n,o){return this.set(1,n,o,0,r,1,o,0,r,n,1,0,0,0,0,1),this},t.compose=function(r,n,o){var s=this.elements,f=n._x,w=n._y,M=n._z,O=n._w,P=f+f,R=w+w,N=M+M,F=f*P,j=f*R,q=f*N,X=w*R,H=w*N,he=M*N,ye=O*P,ie=O*R,ee=O*N,ve=o.x,Re=o.y,Le=o.z;return s[0]=(1-(X+he))*ve,s[1]=(j+ee)*ve,s[2]=(q-ie)*ve,s[3]=0,s[4]=(j-ee)*Re,s[5]=(1-(F+he))*Re,s[6]=(H+ye)*Re,s[7]=0,s[8]=(q+ie)*Le,s[9]=(H-ye)*Le,s[10]=(1-(F+X))*Le,s[11]=0,s[12]=r.x,s[13]=r.y,s[14]=r.z,s[15]=1,this},t.decompose=function(r,n,o){var s=this.elements,f=Fs.set(s[0],s[1],s[2]).length(),w=Fs.set(s[4],s[5],s[6]).length(),M=Fs.set(s[8],s[9],s[10]).length(),O=this.determinant();O<0&&(f=-f),r.x=s[12],r.y=s[13],r.z=s[14],sa.copy(this);var P=1/f,R=1/w,N=1/M;return sa.elements[0]*=P,sa.elements[1]*=P,sa.elements[2]*=P,sa.elements[4]*=R,sa.elements[5]*=R,sa.elements[6]*=R,sa.elements[8]*=N,sa.elements[9]*=N,sa.elements[10]*=N,n.setFromRotationMatrix(sa),o.x=f,o.y=w,o.z=M,this},t.makePerspective=function(r,n,o,s,f,w){w===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var M=this.elements,O=2*f/(n-r),P=2*f/(o-s),R=(n+r)/(n-r),N=(o+s)/(o-s),F=-(w+f)/(w-f),j=-2*w*f/(w-f);return M[0]=O,M[4]=0,M[8]=R,M[12]=0,M[1]=0,M[5]=P,M[9]=N,M[13]=0,M[2]=0,M[6]=0,M[10]=F,M[14]=j,M[3]=0,M[7]=0,M[11]=-1,M[15]=0,this},t.makeOrthographic=function(r,n,o,s,f,w){var M=this.elements,O=1/(n-r),P=1/(o-s),R=1/(w-f),N=(n+r)*O,F=(o+s)*P,j=(w+f)*R;return M[0]=2*O,M[4]=0,M[8]=0,M[12]=-N,M[1]=0,M[5]=2*P,M[9]=0,M[13]=-F,M[2]=0,M[6]=0,M[10]=-2*R,M[14]=-j,M[3]=0,M[7]=0,M[11]=0,M[15]=1,this},t.equals=function(r){for(var n=this.elements,o=r.elements,s=0;s<16;s++)if(n[s]!==o[s])return!1;return!0},t.fromArray=function(r,n){n===void 0&&(n=0);for(var o=0;o<16;o++)this.elements[o]=r[o+n];return this},t.toArray=function(r,n){r===void 0&&(r=[]),n===void 0&&(n=0);var o=this.elements;return r[n]=o[0],r[n+1]=o[1],r[n+2]=o[2],r[n+3]=o[3],r[n+4]=o[4],r[n+5]=o[5],r[n+6]=o[6],r[n+7]=o[7],r[n+8]=o[8],r[n+9]=o[9],r[n+10]=o[10],r[n+11]=o[11],r[n+12]=o[12],r[n+13]=o[13],r[n+14]=o[14],r[n+15]=o[15],r},a}(),Fs=new be,sa=new Br,Vy=new be(0,0,0),zy=new be(1,1,1),vo=new be,$u=new be,Ii=new be,ec=function(){function a(i,r,n,o){i===void 0&&(i=0),r===void 0&&(r=0),n===void 0&&(n=0),o===void 0&&(o=a.DefaultOrder),Object.defineProperty(this,"isEuler",{value:!0}),this._x=i,this._y=r,this._z=n,this._order=o}var t=a.prototype;return t.set=function(r,n,o,s){return this._x=r,this._y=n,this._z=o,this._order=s||this._order,this._onChangeCallback(),this},t.clone=function(){return new this.constructor(this._x,this._y,this._z,this._order)},t.copy=function(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this._onChangeCallback(),this},t.setFromRotationMatrix=function(r,n,o){var s=gr.clamp,f=r.elements,w=f[0],M=f[4],O=f[8],P=f[1],R=f[5],N=f[9],F=f[2],j=f[6],q=f[10];switch(n=n||this._order,n){case"XYZ":this._y=Math.asin(s(O,-1,1)),Math.abs(O)<.9999999?(this._x=Math.atan2(-N,q),this._z=Math.atan2(-M,w)):(this._x=Math.atan2(j,R),this._z=0);break;case"YXZ":this._x=Math.asin(-s(N,-1,1)),Math.abs(N)<.9999999?(this._y=Math.atan2(O,q),this._z=Math.atan2(P,R)):(this._y=Math.atan2(-F,w),this._z=0);break;case"ZXY":this._x=Math.asin(s(j,-1,1)),Math.abs(j)<.9999999?(this._y=Math.atan2(-F,q),this._z=Math.atan2(-M,R)):(this._y=0,this._z=Math.atan2(P,w));break;case"ZYX":this._y=Math.asin(-s(F,-1,1)),Math.abs(F)<.9999999?(this._x=Math.atan2(j,q),this._z=Math.atan2(P,w)):(this._x=0,this._z=Math.atan2(-M,R));break;case"YZX":this._z=Math.asin(s(P,-1,1)),Math.abs(P)<.9999999?(this._x=Math.atan2(-N,R),this._y=Math.atan2(-F,w)):(this._x=0,this._y=Math.atan2(O,q));break;case"XZY":this._z=Math.asin(-s(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(j,R),this._y=Math.atan2(O,w)):(this._x=Math.atan2(-N,q),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,o!==!1&&this._onChangeCallback(),this},t.setFromQuaternion=function(r,n,o){return kp.makeRotationFromQuaternion(r),this.setFromRotationMatrix(kp,n,o)},t.setFromVector3=function(r,n){return this.set(r.x,r.y,r.z,n||this._order)},t.reorder=function(r){return Up.setFromEuler(this),this.setFromQuaternion(Up,r)},t.equals=function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order},t.fromArray=function(r){return this._x=r[0],this._y=r[1],this._z=r[2],r[3]!==void 0&&(this._order=r[3]),this._onChangeCallback(),this},t.toArray=function(r,n){return r===void 0&&(r=[]),n===void 0&&(n=0),r[n]=this._x,r[n+1]=this._y,r[n+2]=this._z,r[n+3]=this._order,r},t.toVector3=function(r){return r?r.set(this._x,this._y,this._z):new be(this._x,this._y,this._z)},t._onChange=function(r){return this._onChangeCallback=r,this},t._onChangeCallback=function(){},Yu(a,[{key:"x",get:function(){return this._x},set:function(r){this._x=r,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(r){this._y=r,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(r){this._z=r,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(r){this._order=r,this._onChangeCallback()}}]),a}();ec.DefaultOrder="XYZ",ec.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var kp=new Br,Up=new ii,uf=function(){function a(){this.mask=1|0}var t=a.prototype;return t.set=function(r){this.mask=1<<r|0},t.enable=function(r){this.mask|=1<<r|0},t.enableAll=function(){this.mask=4294967295|0},t.toggle=function(r){this.mask^=1<<r|0},t.disable=function(r){this.mask&=~(1<<r|0)},t.disableAll=function(){this.mask=0},t.test=function(r){return(this.mask&r.mask)!=0},a}(),Wy=0,Hp=new be,Ns=new ii,Xa=new Br,tc=new be,Hl=new be,jy=new be,Xy=new ii,Gp=new be(1,0,0),Vp=new be(0,1,0),zp=new be(0,0,1),Yy={type:"added"},Wp={type:"removed"};function $t(){Object.defineProperty(this,"id",{value:Wy++}),this.uuid=gr.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=$t.DefaultUp.clone();var a=new be,t=new ec,i=new ii,r=new be(1,1,1);function n(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(n),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Br},normalMatrix:{value:new Oi}}),this.matrix=new Br,this.matrixWorld=new Br,this.matrixAutoUpdate=$t.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new uf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}$t.DefaultUp=new be(0,1,0),$t.DefaultMatrixAutoUpdate=!0,$t.prototype=Object.assign(Object.create(xa.prototype),{constructor:$t,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,i){this.quaternion.setFromAxisAngle(t,i)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,i){return Ns.setFromAxisAngle(t,i),this.quaternion.multiply(Ns),this},rotateOnWorldAxis:function(t,i){return Ns.setFromAxisAngle(t,i),this.quaternion.premultiply(Ns),this},rotateX:function(t){return this.rotateOnAxis(Gp,t)},rotateY:function(t){return this.rotateOnAxis(Vp,t)},rotateZ:function(t){return this.rotateOnAxis(zp,t)},translateOnAxis:function(t,i){return Hp.copy(t).applyQuaternion(this.quaternion),this.position.add(Hp.multiplyScalar(i)),this},translateX:function(t){return this.translateOnAxis(Gp,t)},translateY:function(t){return this.translateOnAxis(Vp,t)},translateZ:function(t){return this.translateOnAxis(zp,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Xa.copy(this.matrixWorld).invert())},lookAt:function(t,i,r){t.isVector3?tc.copy(t):tc.set(t,i,r);var n=this.parent;this.updateWorldMatrix(!0,!1),Hl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xa.lookAt(Hl,tc,this.up):Xa.lookAt(tc,Hl,this.up),this.quaternion.setFromRotationMatrix(Xa),n&&(Xa.extractRotation(n.matrixWorld),Ns.setFromRotationMatrix(Xa),this.quaternion.premultiply(Ns.invert()))},add:function(t){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Yy)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}var r=this.children.indexOf(t);return r!==-1&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(Wp)),this},clear:function(){for(var t=0;t<this.children.length;t++){var i=this.children[t];i.parent=null,i.dispatchEvent(Wp)}return this.children.length=0,this},attach:function(t){return this.updateWorldMatrix(!0,!1),Xa.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Xa.multiply(t.parent.matrixWorld)),t.applyMatrix4(Xa),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,i){if(this[t]===i)return this;for(var r=0,n=this.children.length;r<n;r++){var o=this.children[r],s=o.getObjectByProperty(t,i);if(s!==void 0)return s}},getWorldPosition:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new be),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new ii),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hl,t,jy),t},getWorldScale:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new be),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hl,Xy,t),t},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new be),this.updateWorldMatrix(!0,!1);var i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var i=this.children,r=0,n=i.length;r<n;r++)i[r].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var i=this.children,r=0,n=i.length;r<n;r++)i[r].traverseVisible(t)}},traverseAncestors:function(t){var i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var i=this.children,r=0,n=i.length;r<n;r++)i[r].updateMatrixWorld(t)},updateWorldMatrix:function(t,i){var r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),i===!0)for(var n=this.children,o=0,s=n.length;o<s;o++)n[o].updateWorldMatrix(!1,!0)},toJSON:function(t){var i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON());function o(Le,Ie){return Le[Ie.uuid]===void 0&&(Le[Ie.uuid]=Ie.toJSON(t)),Ie.uuid}if(this.isMesh||this.isLine||this.isPoints){n.geometry=o(t.geometries,this.geometry);var s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){var f=s.shapes;if(Array.isArray(f))for(var w=0,M=f.length;w<M;w++){var O=f[w];o(t.shapes,O)}else o(t.shapes,f)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){for(var P=[],R=0,N=this.material.length;R<N;R++)P.push(o(t.materials,this.material[R]));n.material=P}else n.material=o(t.materials,this.material);if(this.children.length>0){n.children=[];for(var F=0;F<this.children.length;F++)n.children.push(this.children[F].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(var j=0;j<this.animations.length;j++){var q=this.animations[j];n.animations.push(o(t.animations,q))}}if(i){var X=Re(t.geometries),H=Re(t.materials),he=Re(t.textures),ye=Re(t.images),ie=Re(t.shapes),ee=Re(t.skeletons),ve=Re(t.animations);X.length>0&&(r.geometries=X),H.length>0&&(r.materials=H),he.length>0&&(r.textures=he),ye.length>0&&(r.images=ye),ie.length>0&&(r.shapes=ie),ee.length>0&&(r.skeletons=ee),ve.length>0&&(r.animations=ve)}return r.object=n,r;function Re(Le){var Ie=[];for(var Ue in Le){var Fe=Le[Ue];delete Fe.metadata,Ie.push(Fe)}return Ie}},clone:function(t){return new this.constructor().copy(this,t)},copy:function(t,i){if(i===void 0&&(i=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(var r=0;r<t.children.length;r++){var n=t.children[r];this.add(n.clone())}return this}});var cf=new be,Qy=new be,qy=new Oi,Ma=function(){function a(i,r){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=i!==void 0?i:new be(1,0,0),this.constant=r!==void 0?r:0}var t=a.prototype;return t.set=function(r,n){return this.normal.copy(r),this.constant=n,this},t.setComponents=function(r,n,o,s){return this.normal.set(r,n,o),this.constant=s,this},t.setFromNormalAndCoplanarPoint=function(r,n){return this.normal.copy(r),this.constant=-n.dot(this.normal),this},t.setFromCoplanarPoints=function(r,n,o){var s=cf.subVectors(o,n).cross(Qy.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,r),this},t.clone=function(){return new this.constructor().copy(this)},t.copy=function(r){return this.normal.copy(r.normal),this.constant=r.constant,this},t.normalize=function(){var r=1/this.normal.length();return this.normal.multiplyScalar(r),this.constant*=r,this},t.negate=function(){return this.constant*=-1,this.normal.negate(),this},t.distanceToPoint=function(r){return this.normal.dot(r)+this.constant},t.distanceToSphere=function(r){return this.distanceToPoint(r.center)-r.radius},t.projectPoint=function(r,n){return n===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),n=new be),n.copy(this.normal).multiplyScalar(-this.distanceToPoint(r)).add(r)},t.intersectLine=function(r,n){n===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new be);var o=r.delta(cf),s=this.normal.dot(o);if(s===0)return this.distanceToPoint(r.start)===0?n.copy(r.start):void 0;var f=-(r.start.dot(this.normal)+this.constant)/s;if(!(f<0||f>1))return n.copy(o).multiplyScalar(f).add(r.start)},t.intersectsLine=function(r){var n=this.distanceToPoint(r.start),o=this.distanceToPoint(r.end);return n<0&&o>0||o<0&&n>0},t.intersectsBox=function(r){return r.intersectsPlane(this)},t.intersectsSphere=function(r){return r.intersectsPlane(this)},t.coplanarPoint=function(r){return r===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),r=new be),r.copy(this.normal).multiplyScalar(-this.constant)},t.applyMatrix4=function(r,n){var o=n||qy.getNormalMatrix(r),s=this.coplanarPoint(cf).applyMatrix4(r),f=this.normal.applyMatrix3(o).normalize();return this.constant=-s.dot(f),this},t.translate=function(r){return this.constant-=r.dot(this.normal),this},t.equals=function(r){return r.normal.equals(this.normal)&&r.constant===this.constant},a}(),la=new be,Ya=new be,hf=new be,Qa=new be,ks=new be,Us=new be,jp=new be,ff=new be,df=new be,pf=new be,Ta=function(){function a(i,r,n){this.a=i!==void 0?i:new be,this.b=r!==void 0?r:new be,this.c=n!==void 0?n:new be}a.getNormal=function(r,n,o,s){s===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),s=new be),s.subVectors(o,n),la.subVectors(r,n),s.cross(la);var f=s.lengthSq();return f>0?s.multiplyScalar(1/Math.sqrt(f)):s.set(0,0,0)},a.getBarycoord=function(r,n,o,s,f){la.subVectors(s,n),Ya.subVectors(o,n),hf.subVectors(r,n);var w=la.dot(la),M=la.dot(Ya),O=la.dot(hf),P=Ya.dot(Ya),R=Ya.dot(hf),N=w*P-M*M;if(f===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),f=new be),N===0)return f.set(-2,-1,-1);var F=1/N,j=(P*O-M*R)*F,q=(w*R-M*O)*F;return f.set(1-j-q,q,j)},a.containsPoint=function(r,n,o,s){return this.getBarycoord(r,n,o,s,Qa),Qa.x>=0&&Qa.y>=0&&Qa.x+Qa.y<=1},a.getUV=function(r,n,o,s,f,w,M,O){return this.getBarycoord(r,n,o,s,Qa),O.set(0,0),O.addScaledVector(f,Qa.x),O.addScaledVector(w,Qa.y),O.addScaledVector(M,Qa.z),O},a.isFrontFacing=function(r,n,o,s){return la.subVectors(o,n),Ya.subVectors(r,n),la.cross(Ya).dot(s)<0};var t=a.prototype;return t.set=function(r,n,o){return this.a.copy(r),this.b.copy(n),this.c.copy(o),this},t.setFromPointsAndIndices=function(r,n,o,s){return this.a.copy(r[n]),this.b.copy(r[o]),this.c.copy(r[s]),this},t.clone=function(){return new this.constructor().copy(this)},t.copy=function(r){return this.a.copy(r.a),this.b.copy(r.b),this.c.copy(r.c),this},t.getArea=function(){return la.subVectors(this.c,this.b),Ya.subVectors(this.a,this.b),la.cross(Ya).length()*.5},t.getMidpoint=function(r){return r===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),r=new be),r.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},t.getNormal=function(r){return a.getNormal(this.a,this.b,this.c,r)},t.getPlane=function(r){return r===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),r=new Ma),r.setFromCoplanarPoints(this.a,this.b,this.c)},t.getBarycoord=function(r,n){return a.getBarycoord(r,this.a,this.b,this.c,n)},t.getUV=function(r,n,o,s,f){return a.getUV(r,this.a,this.b,this.c,n,o,s,f)},t.containsPoint=function(r){return a.containsPoint(r,this.a,this.b,this.c)},t.isFrontFacing=function(r){return a.isFrontFacing(this.a,this.b,this.c,r)},t.intersectsBox=function(r){return r.intersectsTriangle(this)},t.closestPointToPoint=function(r,n){n===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),n=new be);var o=this.a,s=this.b,f=this.c,w,M;ks.subVectors(s,o),Us.subVectors(f,o),ff.subVectors(r,o);var O=ks.dot(ff),P=Us.dot(ff);if(O<=0&&P<=0)return n.copy(o);df.subVectors(r,s);var R=ks.dot(df),N=Us.dot(df);if(R>=0&&N<=R)return n.copy(s);var F=O*N-R*P;if(F<=0&&O>=0&&R<=0)return w=O/(O-R),n.copy(o).addScaledVector(ks,w);pf.subVectors(r,f);var j=ks.dot(pf),q=Us.dot(pf);if(q>=0&&j<=q)return n.copy(f);var X=j*P-O*q;if(X<=0&&P>=0&&q<=0)return M=P/(P-q),n.copy(o).addScaledVector(Us,M);var H=R*q-j*N;if(H<=0&&N-R>=0&&j-q>=0)return jp.subVectors(f,s),M=(N-R)/(N-R+(j-q)),n.copy(s).addScaledVector(jp,M);var he=1/(H+X+F);return w=X*he,M=F*he,n.copy(o).addScaledVector(ks,w).addScaledVector(Us,M)},t.equals=function(r){return r.a.equals(this.a)&&r.b.equals(this.b)&&r.c.equals(this.c)},a}(),Xp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ua={h:0,s:0,l:0},rc={h:0,s:0,l:0};function vf(a,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?a+(t-a)*6*i:i<1/2?t:i<2/3?a+(t-a)*6*(2/3-i):a}function mf(a){return a<.04045?a*.0773993808:Math.pow(a*.9478672986+.0521327014,2.4)}function gf(a){return a<.0031308?a*12.92:1.055*Math.pow(a,.41666)-.055}var Nt=function(){function a(i,r,n){return Object.defineProperty(this,"isColor",{value:!0}),r===void 0&&n===void 0?this.set(i):this.setRGB(i,r,n)}var t=a.prototype;return t.set=function(r){return r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r),this},t.setScalar=function(r){return this.r=r,this.g=r,this.b=r,this},t.setHex=function(r){return r=Math.floor(r),this.r=(r>>16&255)/255,this.g=(r>>8&255)/255,this.b=(r&255)/255,this},t.setRGB=function(r,n,o){return this.r=r,this.g=n,this.b=o,this},t.setHSL=function(r,n,o){if(r=gr.euclideanModulo(r,1),n=gr.clamp(n,0,1),o=gr.clamp(o,0,1),n===0)this.r=this.g=this.b=o;else{var s=o<=.5?o*(1+n):o+n-o*n,f=2*o-s;this.r=vf(f,s,r+1/3),this.g=vf(f,s,r),this.b=vf(f,s,r-1/3)}return this},t.setStyle=function(r){function n(F){F!==void 0&&parseFloat(F)<1&&console.warn("THREE.Color: Alpha component of "+r+" will be ignored.")}var o;if(o=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(r)){var s,f=o[1],w=o[2];switch(f){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(w))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,n(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(w))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,n(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(w)){var M=parseFloat(s[1])/360,O=parseInt(s[2],10)/100,P=parseInt(s[3],10)/100;return n(s[4]),this.setHSL(M,O,P)}break}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(r)){var R=o[1],N=R.length;if(N===3)return this.r=parseInt(R.charAt(0)+R.charAt(0),16)/255,this.g=parseInt(R.charAt(1)+R.charAt(1),16)/255,this.b=parseInt(R.charAt(2)+R.charAt(2),16)/255,this;if(N===6)return this.r=parseInt(R.charAt(0)+R.charAt(1),16)/255,this.g=parseInt(R.charAt(2)+R.charAt(3),16)/255,this.b=parseInt(R.charAt(4)+R.charAt(5),16)/255,this}return r&&r.length>0?this.setColorName(r):this},t.setColorName=function(r){var n=Xp[r];return n!==void 0?this.setHex(n):console.warn("THREE.Color: Unknown color "+r),this},t.clone=function(){return new this.constructor(this.r,this.g,this.b)},t.copy=function(r){return this.r=r.r,this.g=r.g,this.b=r.b,this},t.copyGammaToLinear=function(r,n){return n===void 0&&(n=2),this.r=Math.pow(r.r,n),this.g=Math.pow(r.g,n),this.b=Math.pow(r.b,n),this},t.copyLinearToGamma=function(r,n){n===void 0&&(n=2);var o=n>0?1/n:1;return this.r=Math.pow(r.r,o),this.g=Math.pow(r.g,o),this.b=Math.pow(r.b,o),this},t.convertGammaToLinear=function(r){return this.copyGammaToLinear(this,r),this},t.convertLinearToGamma=function(r){return this.copyLinearToGamma(this,r),this},t.copySRGBToLinear=function(r){return this.r=mf(r.r),this.g=mf(r.g),this.b=mf(r.b),this},t.copyLinearToSRGB=function(r){return this.r=gf(r.r),this.g=gf(r.g),this.b=gf(r.b),this},t.convertSRGBToLinear=function(){return this.copySRGBToLinear(this),this},t.convertLinearToSRGB=function(){return this.copyLinearToSRGB(this),this},t.getHex=function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},t.getHexString=function(){return("000000"+this.getHex().toString(16)).slice(-6)},t.getHSL=function(r){r===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),r={h:0,s:0,l:0});var n=this.r,o=this.g,s=this.b,f=Math.max(n,o,s),w=Math.min(n,o,s),M,O,P=(w+f)/2;if(w===f)M=0,O=0;else{var R=f-w;switch(O=P<=.5?R/(f+w):R/(2-f-w),f){case n:M=(o-s)/R+(o<s?6:0);break;case o:M=(s-n)/R+2;break;case s:M=(n-o)/R+4;break}M/=6}return r.h=M,r.s=O,r.l=P,r},t.getStyle=function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},t.offsetHSL=function(r,n,o){return this.getHSL(ua),ua.h+=r,ua.s+=n,ua.l+=o,this.setHSL(ua.h,ua.s,ua.l),this},t.add=function(r){return this.r+=r.r,this.g+=r.g,this.b+=r.b,this},t.addColors=function(r,n){return this.r=r.r+n.r,this.g=r.g+n.g,this.b=r.b+n.b,this},t.addScalar=function(r){return this.r+=r,this.g+=r,this.b+=r,this},t.sub=function(r){return this.r=Math.max(0,this.r-r.r),this.g=Math.max(0,this.g-r.g),this.b=Math.max(0,this.b-r.b),this},t.multiply=function(r){return this.r*=r.r,this.g*=r.g,this.b*=r.b,this},t.multiplyScalar=function(r){return this.r*=r,this.g*=r,this.b*=r,this},t.lerp=function(r,n){return this.r+=(r.r-this.r)*n,this.g+=(r.g-this.g)*n,this.b+=(r.b-this.b)*n,this},t.lerpColors=function(r,n,o){return this.r=r.r+(n.r-r.r)*o,this.g=r.g+(n.g-r.g)*o,this.b=r.b+(n.b-r.b)*o,this},t.lerpHSL=function(r,n){this.getHSL(ua),r.getHSL(rc);var o=gr.lerp(ua.h,rc.h,n),s=gr.lerp(ua.s,rc.s,n),f=gr.lerp(ua.l,rc.l,n);return this.setHSL(o,s,f),this},t.equals=function(r){return r.r===this.r&&r.g===this.g&&r.b===this.b},t.fromArray=function(r,n){return n===void 0&&(n=0),this.r=r[n],this.g=r[n+1],this.b=r[n+2],this},t.toArray=function(r,n){return r===void 0&&(r=[]),n===void 0&&(n=0),r[n]=this.r,r[n+1]=this.g,r[n+2]=this.b,r},t.fromBufferAttribute=function(r,n){return this.r=r.getX(n),this.g=r.getY(n),this.b=r.getZ(n),r.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this},t.toJSON=function(){return this.getHex()},a}();Nt.NAMES=Xp,Nt.prototype.r=1,Nt.prototype.g=1,Nt.prototype.b=1;var yf=function(){function a(i,r,n,o,s,f){f===void 0&&(f=0),this.a=i,this.b=r,this.c=n,this.normal=o&&o.isVector3?o:new be,this.vertexNormals=Array.isArray(o)?o:[],this.color=s&&s.isColor?s:new Nt,this.vertexColors=Array.isArray(s)?s:[],this.materialIndex=f}var t=a.prototype;return t.clone=function(){return new this.constructor().copy(this)},t.copy=function(r){this.a=r.a,this.b=r.b,this.c=r.c,this.normal.copy(r.normal),this.color.copy(r.color),this.materialIndex=r.materialIndex;for(var n=0,o=r.vertexNormals.length;n<o;n++)this.vertexNormals[n]=r.vertexNormals[n].clone();for(var s=0,f=r.vertexColors.length;s<f;s++)this.vertexColors[s]=r.vertexColors[s].clone();return this},a}(),Ky=0;function fr(){Object.defineProperty(this,"id",{value:Ky++}),this.uuid=gr.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=oe,this.side=D,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Et,this.blendDst=Ct,this.blendEquation=Y,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ce,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Op,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Xu,this.stencilZFail=Xu,this.stencilZPass=Xu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}fr.prototype=Object.assign(Object.create(xa.prototype),{constructor:fr,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(t!==void 0)for(var i in t){var r=t[i];if(r===void 0){console.warn("THREE.Material: '"+i+"' parameter is undefined.");continue}if(i==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===B;continue}var n=this[i];if(n===void 0){console.warn("THREE."+this.type+": '"+i+"' is not a property of this material.");continue}n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[i]=r}},toJSON:function(t){var i=t===void 0||typeof t=="string";i&&(t={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(r.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,this.combine!==void 0&&(r.combine=this.combine),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),this.size!==void 0&&(r.size=this.size),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==oe&&(r.blending=this.blending),this.flatShading===!0&&(r.flatShading=this.flatShading),this.side!==D&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(r.morphTargets=!0),this.morphNormals===!0&&(r.morphNormals=!0),this.skinning===!0&&(r.skinning=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function n(f){var w=[];for(var M in f){var O=f[M];delete O.metadata,w.push(O)}return w}if(i){var o=n(t.textures),s=n(t.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r},clone:function(){return new this.constructor().copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var i=t.clippingPlanes,r=null;if(i!==null){var n=i.length;r=new Array(n);for(var o=0;o!==n;++o)r[o]=i[o].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(fr.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});function Bi(a){fr.call(this),this.type="MeshBasicMaterial",this.color=new Nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=me,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(a)}Bi.prototype=Object.create(fr.prototype),Bi.prototype.constructor=Bi,Bi.prototype.isMeshBasicMaterial=!0,Bi.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this};var xn=new be,nc=new xt;function dr(a,t,i){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=a,this.itemSize=t,this.count=a!==void 0?a.length/t:0,this.normalized=i===!0,this.usage=Fl,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(dr.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(dr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,i,r){t*=this.itemSize,r*=i.itemSize;for(var n=0,o=this.itemSize;n<o;n++)this.array[t+n]=i.array[r+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var i=this.array,r=0,n=0,o=t.length;n<o;n++){var s=t[n];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),s=new Nt),i[r++]=s.r,i[r++]=s.g,i[r++]=s.b}return this},copyVector2sArray:function(t){for(var i=this.array,r=0,n=0,o=t.length;n<o;n++){var s=t[n];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),s=new xt),i[r++]=s.x,i[r++]=s.y}return this},copyVector3sArray:function(t){for(var i=this.array,r=0,n=0,o=t.length;n<o;n++){var s=t[n];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),s=new be),i[r++]=s.x,i[r++]=s.y,i[r++]=s.z}return this},copyVector4sArray:function(t){for(var i=this.array,r=0,n=0,o=t.length;n<o;n++){var s=t[n];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),s=new cn),i[r++]=s.x,i[r++]=s.y,i[r++]=s.z,i[r++]=s.w}return this},applyMatrix3:function(t){if(this.itemSize===2)for(var i=0,r=this.count;i<r;i++)nc.fromBufferAttribute(this,i),nc.applyMatrix3(t),this.setXY(i,nc.x,nc.y);else if(this.itemSize===3)for(var n=0,o=this.count;n<o;n++)xn.fromBufferAttribute(this,n),xn.applyMatrix3(t),this.setXYZ(n,xn.x,xn.y,xn.z);return this},applyMatrix4:function(t){for(var i=0,r=this.count;i<r;i++)xn.x=this.getX(i),xn.y=this.getY(i),xn.z=this.getZ(i),xn.applyMatrix4(t),this.setXYZ(i,xn.x,xn.y,xn.z);return this},applyNormalMatrix:function(t){for(var i=0,r=this.count;i<r;i++)xn.x=this.getX(i),xn.y=this.getY(i),xn.z=this.getZ(i),xn.applyNormalMatrix(t),this.setXYZ(i,xn.x,xn.y,xn.z);return this},transformDirection:function(t){for(var i=0,r=this.count;i<r;i++)xn.x=this.getX(i),xn.y=this.getY(i),xn.z=this.getZ(i),xn.transformDirection(t),this.setXYZ(i,xn.x,xn.y,xn.z);return this},set:function(t,i){return i===void 0&&(i=0),this.array.set(t,i),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,i){return this.array[t*this.itemSize]=i,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,i){return this.array[t*this.itemSize+1]=i,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,i){return this.array[t*this.itemSize+2]=i,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,i){return this.array[t*this.itemSize+3]=i,this},setXY:function(t,i,r){return t*=this.itemSize,this.array[t+0]=i,this.array[t+1]=r,this},setXYZ:function(t,i,r,n){return t*=this.itemSize,this.array[t+0]=i,this.array[t+1]=r,this.array[t+2]=n,this},setXYZW:function(t,i,r,n,o){return t*=this.itemSize,this.array[t+0]=i,this.array[t+1]=r,this.array[t+2]=n,this.array[t+3]=o,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Gl(a,t,i){dr.call(this,new Int8Array(a),t,i)}Gl.prototype=Object.create(dr.prototype),Gl.prototype.constructor=Gl;function Vl(a,t,i){dr.call(this,new Uint8Array(a),t,i)}Vl.prototype=Object.create(dr.prototype),Vl.prototype.constructor=Vl;function zl(a,t,i){dr.call(this,new Uint8ClampedArray(a),t,i)}zl.prototype=Object.create(dr.prototype),zl.prototype.constructor=zl;function Wl(a,t,i){dr.call(this,new Int16Array(a),t,i)}Wl.prototype=Object.create(dr.prototype),Wl.prototype.constructor=Wl;function Ko(a,t,i){dr.call(this,new Uint16Array(a),t,i)}Ko.prototype=Object.create(dr.prototype),Ko.prototype.constructor=Ko;function jl(a,t,i){dr.call(this,new Int32Array(a),t,i)}jl.prototype=Object.create(dr.prototype),jl.prototype.constructor=jl;function Jo(a,t,i){dr.call(this,new Uint32Array(a),t,i)}Jo.prototype=Object.create(dr.prototype),Jo.prototype.constructor=Jo;function Xl(a,t,i){dr.call(this,new Uint16Array(a),t,i)}Xl.prototype=Object.create(dr.prototype),Xl.prototype.constructor=Xl,Xl.prototype.isFloat16BufferAttribute=!0;function Gt(a,t,i){dr.call(this,new Float32Array(a),t,i)}Gt.prototype=Object.create(dr.prototype),Gt.prototype.constructor=Gt;function Yl(a,t,i){dr.call(this,new Float64Array(a),t,i)}Yl.prototype=Object.create(dr.prototype),Yl.prototype.constructor=Yl;function Yp(a){if(a.length===0)return-1/0;for(var t=a[0],i=1,r=a.length;i<r;++i)a[i]>t&&(t=a[i]);return t}var Jy={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray!="undefined"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ql(a,t){return new Jy[a](t)}var Zy=0,Sa=new Br,Af=new $t,Hs=new be,Fi=new za,ql=new za,Kn=new be;function ir(){Object.defineProperty(this,"id",{value:Zy++}),this.uuid=gr.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ir.prototype=Object.assign(Object.create(xa.prototype),{constructor:ir,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){return Array.isArray(t)?this.index=new(Yp(t)>65535?Jo:Ko)(t,1):this.index=t,this},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,i){return this.attributes[t]=i,this},deleteAttribute:function(t){return delete this.attributes[t],this},hasAttribute:function(t){return this.attributes[t]!==void 0},addGroup:function(t,i,r){r===void 0&&(r=0),this.groups.push({start:t,count:i,materialIndex:r})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,i){this.drawRange.start=t,this.drawRange.count=i},applyMatrix4:function(t){var i=this.attributes.position;i!==void 0&&(i.applyMatrix4(t),i.needsUpdate=!0);var r=this.attributes.normal;if(r!==void 0){var n=new Oi().getNormalMatrix(t);r.applyNormalMatrix(n),r.needsUpdate=!0}var o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(t),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(t){return Sa.makeRotationX(t),this.applyMatrix4(Sa),this},rotateY:function(t){return Sa.makeRotationY(t),this.applyMatrix4(Sa),this},rotateZ:function(t){return Sa.makeRotationZ(t),this.applyMatrix4(Sa),this},translate:function(t,i,r){return Sa.makeTranslation(t,i,r),this.applyMatrix4(Sa),this},scale:function(t,i,r){return Sa.makeScale(t,i,r),this.applyMatrix4(Sa),this},lookAt:function(t){return Af.lookAt(t),Af.updateMatrix(),this.applyMatrix4(Af.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hs).negate(),this.translate(Hs.x,Hs.y,Hs.z),this},setFromPoints:function(t){for(var i=[],r=0,n=t.length;r<n;r++){var o=t[r];i.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Gt(i,3)),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new za);var t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new be(-1/0,-1/0,-1/0),new be(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),i)for(var r=0,n=i.length;r<n;r++){var o=i[r];Fi.setFromBufferAttribute(o),this.morphTargetsRelative?(Kn.addVectors(this.boundingBox.min,Fi.min),this.boundingBox.expandByPoint(Kn),Kn.addVectors(this.boundingBox.max,Fi.max),this.boundingBox.expandByPoint(Kn)):(this.boundingBox.expandByPoint(Fi.min),this.boundingBox.expandByPoint(Fi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new fo);var t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new be,1/0);return}if(t){var r=this.boundingSphere.center;if(Fi.setFromBufferAttribute(t),i)for(var n=0,o=i.length;n<o;n++){var s=i[n];ql.setFromBufferAttribute(s),this.morphTargetsRelative?(Kn.addVectors(Fi.min,ql.min),Fi.expandByPoint(Kn),Kn.addVectors(Fi.max,ql.max),Fi.expandByPoint(Kn)):(Fi.expandByPoint(ql.min),Fi.expandByPoint(ql.max))}Fi.getCenter(r);for(var f=0,w=0,M=t.count;w<M;w++)Kn.fromBufferAttribute(t,w),f=Math.max(f,r.distanceToSquared(Kn));if(i)for(var O=0,P=i.length;O<P;O++)for(var R=i[O],N=this.morphTargetsRelative,F=0,j=R.count;F<j;F++)Kn.fromBufferAttribute(R,F),N&&(Hs.fromBufferAttribute(t,F),Kn.add(Hs)),f=Math.max(f,r.distanceToSquared(Kn));this.boundingSphere.radius=Math.sqrt(f),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){var t=this.index,i=this.attributes;if(t===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}var r=t.array,n=i.position.array,o=i.normal.array,s=i.uv.array,f=n.length/3;i.tangent===void 0&&this.setAttribute("tangent",new dr(new Float32Array(4*f),4));for(var w=i.tangent.array,M=[],O=[],P=0;P<f;P++)M[P]=new be,O[P]=new be;var R=new be,N=new be,F=new be,j=new xt,q=new xt,X=new xt,H=new be,he=new be;function ye(at,ar,kt){R.fromArray(n,at*3),N.fromArray(n,ar*3),F.fromArray(n,kt*3),j.fromArray(s,at*2),q.fromArray(s,ar*2),X.fromArray(s,kt*2),N.sub(R),F.sub(R),q.sub(j),X.sub(j);var lr=1/(q.x*X.y-X.x*q.y);!isFinite(lr)||(H.copy(N).multiplyScalar(X.y).addScaledVector(F,-q.y).multiplyScalar(lr),he.copy(F).multiplyScalar(q.x).addScaledVector(N,-X.x).multiplyScalar(lr),M[at].add(H),M[ar].add(H),M[kt].add(H),O[at].add(he),O[ar].add(he),O[kt].add(he))}var ie=this.groups;ie.length===0&&(ie=[{start:0,count:r.length}]);for(var ee=0,ve=ie.length;ee<ve;++ee)for(var Re=ie[ee],Le=Re.start,Ie=Re.count,Ue=Le,Fe=Le+Ie;Ue<Fe;Ue+=3)ye(r[Ue+0],r[Ue+1],r[Ue+2]);var Se=new be,We=new be,Oe=new be,De=new be;function Me(at){Oe.fromArray(o,at*3),De.copy(Oe);var ar=M[at];Se.copy(ar),Se.sub(Oe.multiplyScalar(Oe.dot(ar))).normalize(),We.crossVectors(De,ar);var kt=We.dot(O[at]),lr=kt<0?-1:1;w[at*4]=Se.x,w[at*4+1]=Se.y,w[at*4+2]=Se.z,w[at*4+3]=lr}for(var Xe=0,Ye=ie.length;Xe<Ye;++Xe)for(var rt=ie[Xe],nt=rt.start,bt=rt.count,Rt=nt,Yt=nt+bt;Rt<Yt;Rt+=3)Me(r[Rt+0]),Me(r[Rt+1]),Me(r[Rt+2])},computeVertexNormals:function(){var t=this.index,i=this.getAttribute("position");if(i!==void 0){var r=this.getAttribute("normal");if(r===void 0)r=new dr(new Float32Array(i.count*3),3),this.setAttribute("normal",r);else for(var n=0,o=r.count;n<o;n++)r.setXYZ(n,0,0,0);var s=new be,f=new be,w=new be,M=new be,O=new be,P=new be,R=new be,N=new be;if(t)for(var F=0,j=t.count;F<j;F+=3){var q=t.getX(F+0),X=t.getX(F+1),H=t.getX(F+2);s.fromBufferAttribute(i,q),f.fromBufferAttribute(i,X),w.fromBufferAttribute(i,H),R.subVectors(w,f),N.subVectors(s,f),R.cross(N),M.fromBufferAttribute(r,q),O.fromBufferAttribute(r,X),P.fromBufferAttribute(r,H),M.add(R),O.add(R),P.add(R),r.setXYZ(q,M.x,M.y,M.z),r.setXYZ(X,O.x,O.y,O.z),r.setXYZ(H,P.x,P.y,P.z)}else for(var he=0,ye=i.count;he<ye;he+=3)s.fromBufferAttribute(i,he+0),f.fromBufferAttribute(i,he+1),w.fromBufferAttribute(i,he+2),R.subVectors(w,f),N.subVectors(s,f),R.cross(N),r.setXYZ(he+0,R.x,R.y,R.z),r.setXYZ(he+1,R.x,R.y,R.z),r.setXYZ(he+2,R.x,R.y,R.z);this.normalizeNormals(),r.needsUpdate=!0}},merge:function(t,i){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}i===void 0&&(i=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=this.attributes;for(var n in r)if(t.attributes[n]!==void 0)for(var o=r[n],s=o.array,f=t.attributes[n],w=f.array,M=f.itemSize*i,O=Math.min(w.length,s.length-M),P=0,R=M;P<O;P++,R++)s[R]=w[P];return this},normalizeNormals:function(){for(var t=this.attributes.normal,i=0,r=t.count;i<r;i++)Kn.fromBufferAttribute(t,i),Kn.normalize(),t.setXYZ(i,Kn.x,Kn.y,Kn.z)},toNonIndexed:function(){function t(ye,ie){for(var ee=ye.array,ve=ye.itemSize,Re=ye.normalized,Le=new ee.constructor(ie.length*ve),Ie=0,Ue=0,Fe=0,Se=ie.length;Fe<Se;Fe++){Ie=ie[Fe]*ve;for(var We=0;We<ve;We++)Le[Ue++]=ee[Ie++]}return new dr(Le,ve,Re)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var i=new ir,r=this.index.array,n=this.attributes;for(var o in n){var s=n[o],f=t(s,r);i.setAttribute(o,f)}var w=this.morphAttributes;for(var M in w){for(var O=[],P=w[M],R=0,N=P.length;R<N;R++){var F=P[R],j=t(F,r);O.push(j)}i.morphAttributes[M]=O}i.morphTargetsRelative=this.morphTargetsRelative;for(var q=this.groups,X=0,H=q.length;X<H;X++){var he=q[X];i.addGroup(he.start,he.count,he.materialIndex)}return i},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){var i=this.parameters;for(var r in i)i[r]!==void 0&&(t[r]=i[r]);return t}t.data={attributes:{}};var n=this.index;n!==null&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});var o=this.attributes;for(var s in o){var f=o[s],w=f.toJSON(t.data);f.name!==""&&(w.name=f.name),t.data.attributes[s]=w}var M={},O=!1;for(var P in this.morphAttributes){for(var R=this.morphAttributes[P],N=[],F=0,j=R.length;F<j;F++){var q=R[F],X=q.toJSON(t.data);q.name!==""&&(X.name=q.name),N.push(X)}N.length>0&&(M[P]=N,O=!0)}O&&(t.data.morphAttributes=M,t.data.morphTargetsRelative=this.morphTargetsRelative);var H=this.groups;H.length>0&&(t.data.groups=JSON.parse(JSON.stringify(H)));var he=this.boundingSphere;return he!==null&&(t.data.boundingSphere={center:he.center.toArray(),radius:he.radius}),t},clone:function(){return new ir().copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var i={};this.name=t.name;var r=t.index;r!==null&&this.setIndex(r.clone(i));var n=t.attributes;for(var o in n){var s=n[o];this.setAttribute(o,s.clone(i))}var f=t.morphAttributes;for(var w in f){for(var M=[],O=f[w],P=0,R=O.length;P<R;P++)M.push(O[P].clone(i));this.morphAttributes[w]=M}this.morphTargetsRelative=t.morphTargetsRelative;for(var N=t.groups,F=0,j=N.length;F<j;F++){var q=N[F];this.addGroup(q.start,q.count,q.materialIndex)}var X=t.boundingBox;X!==null&&(this.boundingBox=X.clone());var H=t.boundingSphere;return H!==null&&(this.boundingSphere=H.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Qp=new Br,Gs=new Bs,bf=new fo,mo=new be,go=new be,yo=new be,Ef=new be,wf=new be,xf=new be,ic=new be,ac=new be,oc=new be,sc=new xt,lc=new xt,uc=new xt,Mf=new be,cc=new be;function Mn(a,t){a===void 0&&(a=new ir),t===void 0&&(t=new Bi),$t.call(this),this.type="Mesh",this.geometry=a,this.material=t,this.updateMorphTargets()}Mn.prototype=Object.assign(Object.create($t.prototype),{constructor:Mn,isMesh:!0,copy:function(t){return $t.prototype.copy.call(this,t),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var i=t.morphAttributes,r=Object.keys(i);if(r.length>0){var n=i[r[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var o=0,s=n.length;o<s;o++){var f=n[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=o}}}}else{var w=t.morphTargets;w!==void 0&&w.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,i){var r=this.geometry,n=this.material,o=this.matrixWorld;if(n!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),bf.copy(r.boundingSphere),bf.applyMatrix4(o),t.ray.intersectsSphere(bf)!==!1&&(Qp.copy(o).invert(),Gs.copy(t.ray).applyMatrix4(Qp),!(r.boundingBox!==null&&Gs.intersectsBox(r.boundingBox)===!1)))){var s;if(r.isBufferGeometry){var f=r.index,w=r.attributes.position,M=r.morphAttributes.position,O=r.morphTargetsRelative,P=r.attributes.uv,R=r.attributes.uv2,N=r.groups,F=r.drawRange;if(f!==null)if(Array.isArray(n))for(var j=0,q=N.length;j<q;j++)for(var X=N[j],H=n[X.materialIndex],he=Math.max(X.start,F.start),ye=Math.min(X.start+X.count,F.start+F.count),ie=he,ee=ye;ie<ee;ie+=3){var ve=f.getX(ie),Re=f.getX(ie+1),Le=f.getX(ie+2);s=hc(this,H,t,Gs,w,M,O,P,R,ve,Re,Le),s&&(s.faceIndex=Math.floor(ie/3),s.face.materialIndex=X.materialIndex,i.push(s))}else for(var Ie=Math.max(0,F.start),Ue=Math.min(f.count,F.start+F.count),Fe=Ie,Se=Ue;Fe<Se;Fe+=3){var We=f.getX(Fe),Oe=f.getX(Fe+1),De=f.getX(Fe+2);s=hc(this,n,t,Gs,w,M,O,P,R,We,Oe,De),s&&(s.faceIndex=Math.floor(Fe/3),i.push(s))}else if(w!==void 0)if(Array.isArray(n))for(var Me=0,Xe=N.length;Me<Xe;Me++)for(var Ye=N[Me],rt=n[Ye.materialIndex],nt=Math.max(Ye.start,F.start),bt=Math.min(Ye.start+Ye.count,F.start+F.count),Rt=nt,Yt=bt;Rt<Yt;Rt+=3){var at=Rt,ar=Rt+1,kt=Rt+2;s=hc(this,rt,t,Gs,w,M,O,P,R,at,ar,kt),s&&(s.faceIndex=Math.floor(Rt/3),s.face.materialIndex=Ye.materialIndex,i.push(s))}else for(var lr=Math.max(0,F.start),br=Math.min(w.count,F.start+F.count),Or=lr,wr=br;Or<wr;Or+=3){var mn=Or,Qr=Or+1,hn=Or+2;s=hc(this,n,t,Gs,w,M,O,P,R,mn,Qr,hn),s&&(s.faceIndex=Math.floor(Or/3),i.push(s))}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function $y(a,t,i,r,n,o,s,f){var w;if(t.side===C?w=r.intersectTriangle(s,o,n,!0,f):w=r.intersectTriangle(n,o,s,t.side!==I,f),w===null)return null;cc.copy(f),cc.applyMatrix4(a.matrixWorld);var M=i.ray.origin.distanceTo(cc);return M<i.near||M>i.far?null:{distance:M,point:cc.clone(),object:a}}function hc(a,t,i,r,n,o,s,f,w,M,O,P){mo.fromBufferAttribute(n,M),go.fromBufferAttribute(n,O),yo.fromBufferAttribute(n,P);var R=a.morphTargetInfluences;if(t.morphTargets&&o&&R){ic.set(0,0,0),ac.set(0,0,0),oc.set(0,0,0);for(var N=0,F=o.length;N<F;N++){var j=R[N],q=o[N];j!==0&&(Ef.fromBufferAttribute(q,M),wf.fromBufferAttribute(q,O),xf.fromBufferAttribute(q,P),s?(ic.addScaledVector(Ef,j),ac.addScaledVector(wf,j),oc.addScaledVector(xf,j)):(ic.addScaledVector(Ef.sub(mo),j),ac.addScaledVector(wf.sub(go),j),oc.addScaledVector(xf.sub(yo),j)))}mo.add(ic),go.add(ac),yo.add(oc)}a.isSkinnedMesh&&(a.boneTransform(M,mo),a.boneTransform(O,go),a.boneTransform(P,yo));var X=$y(a,t,i,r,mo,go,yo,Mf);if(X){f&&(sc.fromBufferAttribute(f,M),lc.fromBufferAttribute(f,O),uc.fromBufferAttribute(f,P),X.uv=Ta.getUV(Mf,mo,go,yo,sc,lc,uc,new xt)),w&&(sc.fromBufferAttribute(w,M),lc.fromBufferAttribute(w,O),uc.fromBufferAttribute(w,P),X.uv2=Ta.getUV(Mf,mo,go,yo,sc,lc,uc,new xt));var H=new yf(M,O,P);Ta.getNormal(mo,go,yo,H.normal),X.face=H}return X}var Zo=function(a){Rr(t,a);function t(i,r,n,o,s,f){var w;i===void 0&&(i=1),r===void 0&&(r=1),n===void 0&&(n=1),o===void 0&&(o=1),s===void 0&&(s=1),f===void 0&&(f=1),w=a.call(this)||this,w.type="BoxGeometry",w.parameters={width:i,height:r,depth:n,widthSegments:o,heightSegments:s,depthSegments:f};var M=oa(w);o=Math.floor(o),s=Math.floor(s),f=Math.floor(f);var O=[],P=[],R=[],N=[],F=0,j=0;q("z","y","x",-1,-1,n,r,i,f,s,0),q("z","y","x",1,-1,n,r,-i,f,s,1),q("x","z","y",1,1,i,n,r,o,f,2),q("x","z","y",1,-1,i,n,-r,o,f,3),q("x","y","z",1,-1,i,r,n,o,s,4),q("x","y","z",-1,-1,i,r,-n,o,s,5),w.setIndex(O),w.setAttribute("position",new Gt(P,3)),w.setAttribute("normal",new Gt(R,3)),w.setAttribute("uv",new Gt(N,2));function q(X,H,he,ye,ie,ee,ve,Re,Le,Ie,Ue){for(var Fe=ee/Le,Se=ve/Ie,We=ee/2,Oe=ve/2,De=Re/2,Me=Le+1,Xe=Ie+1,Ye=0,rt=0,nt=new be,bt=0;bt<Xe;bt++)for(var Rt=bt*Se-Oe,Yt=0;Yt<Me;Yt++){var at=Yt*Fe-We;nt[X]=at*ye,nt[H]=Rt*ie,nt[he]=De,P.push(nt.x,nt.y,nt.z),nt[X]=0,nt[H]=0,nt[he]=Re>0?1:-1,R.push(nt.x,nt.y,nt.z),N.push(Yt/Le),N.push(1-bt/Ie),Ye+=1}for(var ar=0;ar<Ie;ar++)for(var kt=0;kt<Le;kt++){var lr=F+kt+Me*ar,br=F+kt+Me*(ar+1),Or=F+(kt+1)+Me*(ar+1),wr=F+(kt+1)+Me*ar;O.push(lr,br,wr),O.push(br,Or,wr),rt+=6}M.addGroup(j,rt,Ue),j+=rt,F+=Ye}return w}return t}(ir);function Vs(a){var t={};for(var i in a){t[i]={};for(var r in a[i]){var n=a[i][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?t[i][r]=n.clone():Array.isArray(n)?t[i][r]=n.slice():t[i][r]=n}}return t}function fi(a){for(var t={},i=0;i<a.length;i++){var r=Vs(a[i]);for(var n in r)t[n]=r[n]}return t}var qp={clone:Vs,merge:fi},eA=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,tA=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function Ei(a){fr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=eA,this.fragmentShader=tA,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,a!==void 0&&(a.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}Ei.prototype=Object.create(fr.prototype),Ei.prototype.constructor=Ei,Ei.prototype.isShaderMaterial=!0,Ei.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=Vs(a.uniforms),this.defines=Object.assign({},a.defines),this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.lights=a.lights,this.clipping=a.clipping,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.extensions=Object.assign({},a.extensions),this.glslVersion=a.glslVersion,this},Ei.prototype.toJSON=function(a){var t=fr.prototype.toJSON.call(this,a);t.glslVersion=this.glslVersion,t.uniforms={};for(var i in this.uniforms){var r=this.uniforms[i],n=r.value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(a).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var o={};for(var s in this.extensions)this.extensions[s]===!0&&(o[s]=!0);return Object.keys(o).length>0&&(t.extensions=o),t};function _a(){$t.call(this),this.type="Camera",this.matrixWorldInverse=new Br,this.projectionMatrix=new Br,this.projectionMatrixInverse=new Br}_a.prototype=Object.assign(Object.create($t.prototype),{constructor:_a,isCamera:!0,copy:function(t,i){return $t.prototype.copy.call(this,t,i),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new be),this.updateWorldMatrix(!0,!1);var i=this.matrixWorld.elements;return t.set(-i[8],-i[9],-i[10]).normalize()},updateMatrixWorld:function(t){$t.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(t,i){$t.prototype.updateWorldMatrix.call(this,t,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return new this.constructor().copy(this)}});function Fn(a,t,i,r){a===void 0&&(a=50),t===void 0&&(t=1),i===void 0&&(i=.1),r===void 0&&(r=2e3),_a.call(this),this.type="PerspectiveCamera",this.fov=a,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Fn.prototype=Object.assign(Object.create(_a.prototype),{constructor:Fn,isPerspectiveCamera:!0,copy:function(t,i){return _a.prototype.copy.call(this,t,i),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var i=.5*this.getFilmHeight()/t;this.fov=gr.RAD2DEG*2*Math.atan(i),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(gr.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function(){return gr.RAD2DEG*2*Math.atan(Math.tan(gr.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,i,r,n,o,s){this.aspect=t/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=r,this.view.offsetY=n,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,i=t*Math.tan(gr.DEG2RAD*.5*this.fov)/this.zoom,r=2*i,n=this.aspect*r,o=-.5*n,s=this.view;if(this.view!==null&&this.view.enabled){var f=s.fullWidth,w=s.fullHeight;o+=s.offsetX*n/f,i-=s.offsetY*r/w,n*=s.width/f,r*=s.height/w}var M=this.filmOffset;M!==0&&(o+=t*M/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+n,i,i-r,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){var i=$t.prototype.toJSON.call(this,t);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}});var zs=90,Ws=1;function $o(a,t,i){if($t.call(this),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;var r=new Fn(zs,Ws,a,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new be(1,0,0)),this.add(r);var n=new Fn(zs,Ws,a,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new be(-1,0,0)),this.add(n);var o=new Fn(zs,Ws,a,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new be(0,1,0)),this.add(o);var s=new Fn(zs,Ws,a,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new be(0,-1,0)),this.add(s);var f=new Fn(zs,Ws,a,t);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new be(0,0,1)),this.add(f);var w=new Fn(zs,Ws,a,t);w.layers=this.layers,w.up.set(0,-1,0),w.lookAt(new be(0,0,-1)),this.add(w),this.update=function(M,O){this.parent===null&&this.updateMatrixWorld();var P=M.xr.enabled,R=M.getRenderTarget();M.xr.enabled=!1;var N=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,M.setRenderTarget(i,0),M.render(O,r),M.setRenderTarget(i,1),M.render(O,n),M.setRenderTarget(i,2),M.render(O,o),M.setRenderTarget(i,3),M.render(O,s),M.setRenderTarget(i,4),M.render(O,f),i.texture.generateMipmaps=N,M.setRenderTarget(i,5),M.render(O,w),M.setRenderTarget(R),M.xr.enabled=P}}$o.prototype=Object.create($t.prototype),$o.prototype.constructor=$o;function Ca(a,t,i,r,n,o,s,f,w,M){a=a!==void 0?a:[],t=t!==void 0?t:Te,s=s!==void 0?s:Qi,vn.call(this,a,t,i,r,n,o,s,f,w,M),this.flipY=!1,this._needsFlipEnvMap=!0}Ca.prototype=Object.create(vn.prototype),Ca.prototype.constructor=Ca,Ca.prototype.isCubeTexture=!0,Object.defineProperty(Ca.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Tf=function(a){Rr(t,a);function t(r,n,o){var s;return Number.isInteger(n)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),n=o),s=a.call(this,r,r,n)||this,Object.defineProperty(oa(s),"isWebGLCubeRenderTarget",{value:!0}),n=n||{},s.texture=new Ca(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),s.texture._needsFlipEnvMap=!1,s}var i=t.prototype;return i.fromEquirectangularTexture=function(n,o){this.texture.type=o.type,this.texture.format=ri,this.texture.encoding=o.encoding,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;var s={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},f=new Zo(5,5,5),w=new Ei({name:"CubemapFromEquirect",uniforms:Vs(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,side:C,blending:W});w.uniforms.tEquirect.value=o;var M=new Mn(f,w),O=o.minFilter;o.minFilter===sr&&(o.minFilter=ht);var P=new $o(1,10,this);return P.update(n,M),o.minFilter=O,M.geometry.dispose(),M.material.dispose(),this},i.clear=function(n,o,s,f){for(var w=n.getRenderTarget(),M=0;M<6;M++)n.setRenderTarget(this,M),n.clear(o,s,f);n.setRenderTarget(w)},t}(uo);function qa(a,t,i,r,n,o,s,f,w,M,O,P){vn.call(this,null,o,s,f,w,M,r,n,O,P),this.image={data:a||null,width:t||1,height:i||1},this.magFilter=w!==void 0?w:Qt,this.minFilter=M!==void 0?M:Qt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}qa.prototype=Object.create(vn.prototype),qa.prototype.constructor=qa,qa.prototype.isDataTexture=!0;var js=new fo,fc=new be,Kl=function(){function a(i,r,n,o,s,f){this.planes=[i!==void 0?i:new Ma,r!==void 0?r:new Ma,n!==void 0?n:new Ma,o!==void 0?o:new Ma,s!==void 0?s:new Ma,f!==void 0?f:new Ma]}var t=a.prototype;return t.set=function(r,n,o,s,f,w){var M=this.planes;return M[0].copy(r),M[1].copy(n),M[2].copy(o),M[3].copy(s),M[4].copy(f),M[5].copy(w),this},t.clone=function(){return new this.constructor().copy(this)},t.copy=function(r){for(var n=this.planes,o=0;o<6;o++)n[o].copy(r.planes[o]);return this},t.setFromProjectionMatrix=function(r){var n=this.planes,o=r.elements,s=o[0],f=o[1],w=o[2],M=o[3],O=o[4],P=o[5],R=o[6],N=o[7],F=o[8],j=o[9],q=o[10],X=o[11],H=o[12],he=o[13],ye=o[14],ie=o[15];return n[0].setComponents(M-s,N-O,X-F,ie-H).normalize(),n[1].setComponents(M+s,N+O,X+F,ie+H).normalize(),n[2].setComponents(M+f,N+P,X+j,ie+he).normalize(),n[3].setComponents(M-f,N-P,X-j,ie-he).normalize(),n[4].setComponents(M-w,N-R,X-q,ie-ye).normalize(),n[5].setComponents(M+w,N+R,X+q,ie+ye).normalize(),this},t.intersectsObject=function(r){var n=r.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),js.copy(n.boundingSphere).applyMatrix4(r.matrixWorld),this.intersectsSphere(js)},t.intersectsSprite=function(r){return js.center.set(0,0,0),js.radius=.7071067811865476,js.applyMatrix4(r.matrixWorld),this.intersectsSphere(js)},t.intersectsSphere=function(r){for(var n=this.planes,o=r.center,s=-r.radius,f=0;f<6;f++){var w=n[f].distanceToPoint(o);if(w<s)return!1}return!0},t.intersectsBox=function(r){for(var n=this.planes,o=0;o<6;o++){var s=n[o];if(fc.x=s.normal.x>0?r.max.x:r.min.x,fc.y=s.normal.y>0?r.max.y:r.min.y,fc.z=s.normal.z>0?r.max.z:r.min.z,s.distanceToPoint(fc)<0)return!1}return!0},t.containsPoint=function(r){for(var n=this.planes,o=0;o<6;o++)if(n[o].distanceToPoint(r)<0)return!1;return!0},a}();function Sf(){var a=null,t=!1,i=null,r=null;function n(o,s){i(o,s),r=a.requestAnimationFrame(n)}return{start:function(){t!==!0&&i!==null&&(r=a.requestAnimationFrame(n),t=!0)},stop:function(){a.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(s){i=s},setContext:function(s){a=s}}}function rA(a,t){var i=t.isWebGL2,r=new WeakMap;function n(M,O){var P=M.array,R=M.usage,N=a.createBuffer();a.bindBuffer(O,N),a.bufferData(O,P,R),M.onUploadCallback();var F=5126;return P instanceof Float32Array?F=5126:P instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):P instanceof Uint16Array?M.isFloat16BufferAttribute?i?F=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):F=5123:P instanceof Int16Array?F=5122:P instanceof Uint32Array?F=5125:P instanceof Int32Array?F=5124:P instanceof Int8Array?F=5120:P instanceof Uint8Array&&(F=5121),{buffer:N,type:F,bytesPerElement:P.BYTES_PER_ELEMENT,version:M.version}}function o(M,O,P){var R=O.array,N=O.updateRange;a.bindBuffer(P,M),N.count===-1?a.bufferSubData(P,0,R):(i?a.bufferSubData(P,N.offset*R.BYTES_PER_ELEMENT,R,N.offset,N.count):a.bufferSubData(P,N.offset*R.BYTES_PER_ELEMENT,R.subarray(N.offset,N.offset+N.count)),N.count=-1)}function s(M){return M.isInterleavedBufferAttribute&&(M=M.data),r.get(M)}function f(M){M.isInterleavedBufferAttribute&&(M=M.data);var O=r.get(M);O&&(a.deleteBuffer(O.buffer),r.delete(M))}function w(M,O){if(M.isGLBufferAttribute){var P=r.get(M);(!P||P.version<M.version)&&r.set(M,{buffer:M.buffer,type:M.type,bytesPerElement:M.elementSize,version:M.version});return}M.isInterleavedBufferAttribute&&(M=M.data);var R=r.get(M);R===void 0?r.set(M,n(M,O)):R.version<M.version&&(o(R.buffer,M,O),R.version=M.version)}return{get:s,remove:f,update:w}}var Jl=function(a){Rr(t,a);function t(i,r,n,o){var s;i===void 0&&(i=1),r===void 0&&(r=1),n===void 0&&(n=1),o===void 0&&(o=1),s=a.call(this)||this,s.type="PlaneGeometry",s.parameters={width:i,height:r,widthSegments:n,heightSegments:o};for(var f=i/2,w=r/2,M=Math.floor(n),O=Math.floor(o),P=M+1,R=O+1,N=i/M,F=r/O,j=[],q=[],X=[],H=[],he=0;he<R;he++)for(var ye=he*F-w,ie=0;ie<P;ie++){var ee=ie*N-f;q.push(ee,-ye,0),X.push(0,0,1),H.push(ie/M),H.push(1-he/O)}for(var ve=0;ve<O;ve++)for(var Re=0;Re<M;Re++){var Le=Re+P*ve,Ie=Re+P*(ve+1),Ue=Re+1+P*(ve+1),Fe=Re+1+P*ve;j.push(Le,Ie,Fe),j.push(Ie,Ue,Fe)}return s.setIndex(j),s.setAttribute("position",new Gt(q,3)),s.setAttribute("normal",new Gt(X,3)),s.setAttribute("uv",new Gt(H,2)),s}return t}(ir),nA=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,iA=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,aA=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,oA=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,sA=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,lA="vec3 transformed = vec3( position );",uA=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,cA=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,hA=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,fA=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,dA=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,pA=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,vA=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,mA=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,gA=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,yA=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,AA=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor.xyz *= color.xyz;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,bA=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,EA=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,wA=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,xA=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,MA=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,TA=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,SA=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,_A="gl_FragColor = linearToOutputTexel( gl_FragColor );",CA=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,LA=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,RA=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,PA=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,DA=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,OA=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,IA=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,BA=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,FA=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,NA=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,kA=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,UA=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,HA=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,GA=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,VA=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,zA=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,WA=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jA=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,XA=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,YA=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,QA=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,qA=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(		0, 1,		0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,KA=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,JA=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,ZA=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,$A=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,e1=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,t1=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,r1=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,n1=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,i1=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,a1=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,o1=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,s1=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,l1=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,u1=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,c1=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,h1=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,f1=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,d1=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,p1=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,v1=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,m1=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,g1=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,y1=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,A1=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,b1=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,E1=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,w1=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,x1=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,M1=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,T1=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
							texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
							f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
							texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
							f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,S1=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,_1=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,C1=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,L1=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,R1=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,P1=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,D1=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,O1=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,I1=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,B1=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,F1=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(	1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,	1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,	1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,N1=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,k1=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,U1=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,H1=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,G1=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,V1=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,z1=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,W1=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,j1=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,X1=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Y1=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Q1=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,q1=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,K1=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,J1=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Z1=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,$1=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,eb=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,tb=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,rb=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,nb=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ib=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ab=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,ob=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sb=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lb=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ub=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,cb=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hb=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fb=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,db=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pb=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vb=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mb=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,gb=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,yb=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ab=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,bb=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Eb=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wb=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,xb=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zr={alphamap_fragment:nA,alphamap_pars_fragment:iA,alphatest_fragment:aA,aomap_fragment:oA,aomap_pars_fragment:sA,begin_vertex:lA,beginnormal_vertex:uA,bsdfs:cA,bumpmap_pars_fragment:hA,clipping_planes_fragment:fA,clipping_planes_pars_fragment:dA,clipping_planes_pars_vertex:pA,clipping_planes_vertex:vA,color_fragment:mA,color_pars_fragment:gA,color_pars_vertex:yA,color_vertex:AA,common:bA,cube_uv_reflection_fragment:EA,defaultnormal_vertex:wA,displacementmap_pars_vertex:xA,displacementmap_vertex:MA,emissivemap_fragment:TA,emissivemap_pars_fragment:SA,encodings_fragment:_A,encodings_pars_fragment:CA,envmap_fragment:LA,envmap_common_pars_fragment:RA,envmap_pars_fragment:PA,envmap_pars_vertex:DA,envmap_physical_pars_fragment:zA,envmap_vertex:OA,fog_vertex:IA,fog_pars_vertex:BA,fog_fragment:FA,fog_pars_fragment:NA,gradientmap_pars_fragment:kA,lightmap_fragment:UA,lightmap_pars_fragment:HA,lights_lambert_vertex:GA,lights_pars_begin:VA,lights_toon_fragment:WA,lights_toon_pars_fragment:jA,lights_phong_fragment:XA,lights_phong_pars_fragment:YA,lights_physical_fragment:QA,lights_physical_pars_fragment:qA,lights_fragment_begin:KA,lights_fragment_maps:JA,lights_fragment_end:ZA,logdepthbuf_fragment:$A,logdepthbuf_pars_fragment:e1,logdepthbuf_pars_vertex:t1,logdepthbuf_vertex:r1,map_fragment:n1,map_pars_fragment:i1,map_particle_fragment:a1,map_particle_pars_fragment:o1,metalnessmap_fragment:s1,metalnessmap_pars_fragment:l1,morphnormal_vertex:u1,morphtarget_pars_vertex:c1,morphtarget_vertex:h1,normal_fragment_begin:f1,normal_fragment_maps:d1,normalmap_pars_fragment:p1,clearcoat_normal_fragment_begin:v1,clearcoat_normal_fragment_maps:m1,clearcoat_pars_fragment:g1,packing:y1,premultiplied_alpha_fragment:A1,project_vertex:b1,dithering_fragment:E1,dithering_pars_fragment:w1,roughnessmap_fragment:x1,roughnessmap_pars_fragment:M1,shadowmap_pars_fragment:T1,shadowmap_pars_vertex:S1,shadowmap_vertex:_1,shadowmask_pars_fragment:C1,skinbase_vertex:L1,skinning_pars_vertex:R1,skinning_vertex:P1,skinnormal_vertex:D1,specularmap_fragment:O1,specularmap_pars_fragment:I1,tonemapping_fragment:B1,tonemapping_pars_fragment:F1,transmissionmap_fragment:N1,transmissionmap_pars_fragment:k1,uv_pars_fragment:U1,uv_pars_vertex:H1,uv_vertex:G1,uv2_pars_fragment:V1,uv2_pars_vertex:z1,uv2_vertex:W1,worldpos_vertex:j1,background_frag:X1,background_vert:Y1,cube_frag:Q1,cube_vert:q1,depth_frag:K1,depth_vert:J1,distanceRGBA_frag:Z1,distanceRGBA_vert:$1,equirect_frag:eb,equirect_vert:tb,linedashed_frag:rb,linedashed_vert:nb,meshbasic_frag:ib,meshbasic_vert:ab,meshlambert_frag:ob,meshlambert_vert:sb,meshmatcap_frag:lb,meshmatcap_vert:ub,meshtoon_frag:cb,meshtoon_vert:hb,meshphong_frag:fb,meshphong_vert:db,meshphysical_frag:pb,meshphysical_vert:vb,normal_frag:mb,normal_vert:gb,points_frag:yb,points_vert:Ab,shadow_frag:bb,shadow_vert:Eb,sprite_frag:wb,sprite_vert:xb},It={common:{diffuse:{value:new Nt(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Oi},uv2Transform:{value:new Oi},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new xt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Nt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Nt(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Oi}},sprite:{diffuse:{value:new Nt(15658734)},opacity:{value:1},center:{value:new xt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Oi}}},ca={basic:{uniforms:fi([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.fog]),vertexShader:zr.meshbasic_vert,fragmentShader:zr.meshbasic_frag},lambert:{uniforms:fi([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.fog,It.lights,{emissive:{value:new Nt(0)}}]),vertexShader:zr.meshlambert_vert,fragmentShader:zr.meshlambert_frag},phong:{uniforms:fi([It.common,It.specularmap,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.fog,It.lights,{emissive:{value:new Nt(0)},specular:{value:new Nt(1118481)},shininess:{value:30}}]),vertexShader:zr.meshphong_vert,fragmentShader:zr.meshphong_frag},standard:{uniforms:fi([It.common,It.envmap,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.roughnessmap,It.metalnessmap,It.fog,It.lights,{emissive:{value:new Nt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zr.meshphysical_vert,fragmentShader:zr.meshphysical_frag},toon:{uniforms:fi([It.common,It.aomap,It.lightmap,It.emissivemap,It.bumpmap,It.normalmap,It.displacementmap,It.gradientmap,It.fog,It.lights,{emissive:{value:new Nt(0)}}]),vertexShader:zr.meshtoon_vert,fragmentShader:zr.meshtoon_frag},matcap:{uniforms:fi([It.common,It.bumpmap,It.normalmap,It.displacementmap,It.fog,{matcap:{value:null}}]),vertexShader:zr.meshmatcap_vert,fragmentShader:zr.meshmatcap_frag},points:{uniforms:fi([It.points,It.fog]),vertexShader:zr.points_vert,fragmentShader:zr.points_frag},dashed:{uniforms:fi([It.common,It.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zr.linedashed_vert,fragmentShader:zr.linedashed_frag},depth:{uniforms:fi([It.common,It.displacementmap]),vertexShader:zr.depth_vert,fragmentShader:zr.depth_frag},normal:{uniforms:fi([It.common,It.bumpmap,It.normalmap,It.displacementmap,{opacity:{value:1}}]),vertexShader:zr.normal_vert,fragmentShader:zr.normal_frag},sprite:{uniforms:fi([It.sprite,It.fog]),vertexShader:zr.sprite_vert,fragmentShader:zr.sprite_frag},background:{uniforms:{uvTransform:{value:new Oi},t2D:{value:null}},vertexShader:zr.background_vert,fragmentShader:zr.background_frag},cube:{uniforms:fi([It.envmap,{opacity:{value:1}}]),vertexShader:zr.cube_vert,fragmentShader:zr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zr.equirect_vert,fragmentShader:zr.equirect_frag},distanceRGBA:{uniforms:fi([It.common,It.displacementmap,{referencePosition:{value:new be},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zr.distanceRGBA_vert,fragmentShader:zr.distanceRGBA_frag},shadow:{uniforms:fi([It.lights,It.fog,{color:{value:new Nt(0)},opacity:{value:1}}]),vertexShader:zr.shadow_vert,fragmentShader:zr.shadow_frag}};ca.physical={uniforms:fi([ca.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new xt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Nt(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:zr.meshphysical_vert,fragmentShader:zr.meshphysical_frag};function Mb(a,t,i,r,n){var o=new Nt(0),s=0,f,w,M=null,O=0,P=null;function R(F,j,q,X){var H=j.isScene===!0?j.background:null;H&&H.isTexture&&(H=t.get(H));var he=a.xr,ye=he.getSession&&he.getSession();ye&&ye.environmentBlendMode==="additive"&&(H=null),H===null?N(o,s):H&&H.isColor&&(N(H,1),X=!0),(a.autoClear||X)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),H&&(H.isCubeTexture||H.isWebGLCubeRenderTarget||H.mapping===Vt)?(w===void 0&&(w=new Mn(new Zo(1,1,1),new Ei({name:"BackgroundCubeMaterial",uniforms:Vs(ca.cube.uniforms),vertexShader:ca.cube.vertexShader,fragmentShader:ca.cube.fragmentShader,side:C,depthTest:!1,depthWrite:!1,fog:!1})),w.geometry.deleteAttribute("normal"),w.geometry.deleteAttribute("uv"),w.onBeforeRender=function(ie,ee,ve){this.matrixWorld.copyPosition(ve.matrixWorld)},Object.defineProperty(w.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(w)),H.isWebGLCubeRenderTarget&&(H=H.texture),w.material.uniforms.envMap.value=H,w.material.uniforms.flipEnvMap.value=H.isCubeTexture&&H._needsFlipEnvMap?-1:1,(M!==H||O!==H.version||P!==a.toneMapping)&&(w.material.needsUpdate=!0,M=H,O=H.version,P=a.toneMapping),F.unshift(w,w.geometry,w.material,0,0,null)):H&&H.isTexture&&(f===void 0&&(f=new Mn(new Jl(2,2),new Ei({name:"BackgroundMaterial",uniforms:Vs(ca.background.uniforms),vertexShader:ca.background.vertexShader,fragmentShader:ca.background.fragmentShader,side:D,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=H,H.matrixAutoUpdate===!0&&H.updateMatrix(),f.material.uniforms.uvTransform.value.copy(H.matrix),(M!==H||O!==H.version||P!==a.toneMapping)&&(f.material.needsUpdate=!0,M=H,O=H.version,P=a.toneMapping),F.unshift(f,f.geometry,f.material,0,0,null))}function N(F,j){i.buffers.color.setClear(F.r,F.g,F.b,j,n)}return{getClearColor:function(){return o},setClearColor:function(j,q){q===void 0&&(q=1),o.set(j),s=q,N(o,s)},getClearAlpha:function(){return s},setClearAlpha:function(j){s=j,N(o,s)},render:R}}function Tb(a,t,i,r){var n=a.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||o!==null,f={},w=j(null),M=w;function O(Se,We,Oe,De,Me){var Xe=!1;if(s){var Ye=F(De,Oe,We);M!==Ye&&(M=Ye,R(M.object)),Xe=q(De,Me),Xe&&X(De,Me)}else{var rt=We.wireframe===!0;(M.geometry!==De.id||M.program!==Oe.id||M.wireframe!==rt)&&(M.geometry=De.id,M.program=Oe.id,M.wireframe=rt,Xe=!0)}Se.isInstancedMesh===!0&&(Xe=!0),Me!==null&&i.update(Me,34963),Xe&&(ve(Se,We,Oe,De),Me!==null&&a.bindBuffer(34963,i.get(Me).buffer))}function P(){return r.isWebGL2?a.createVertexArray():o.createVertexArrayOES()}function R(Se){return r.isWebGL2?a.bindVertexArray(Se):o.bindVertexArrayOES(Se)}function N(Se){return r.isWebGL2?a.deleteVertexArray(Se):o.deleteVertexArrayOES(Se)}function F(Se,We,Oe){var De=Oe.wireframe===!0,Me=f[Se.id];Me===void 0&&(Me={},f[Se.id]=Me);var Xe=Me[We.id];Xe===void 0&&(Xe={},Me[We.id]=Xe);var Ye=Xe[De];return Ye===void 0&&(Ye=j(P()),Xe[De]=Ye),Ye}function j(Se){for(var We=[],Oe=[],De=[],Me=0;Me<n;Me++)We[Me]=0,Oe[Me]=0,De[Me]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:We,enabledAttributes:Oe,attributeDivisors:De,object:Se,attributes:{},index:null}}function q(Se,We){var Oe=M.attributes,De=Se.attributes,Me=0;for(var Xe in De){var Ye=Oe[Xe],rt=De[Xe];if(Ye===void 0||Ye.attribute!==rt||Ye.data!==rt.data)return!0;Me++}return M.attributesNum!==Me||M.index!==We}function X(Se,We){var Oe={},De=Se.attributes,Me=0;for(var Xe in De){var Ye=De[Xe],rt={};rt.attribute=Ye,Ye.data&&(rt.data=Ye.data),Oe[Xe]=rt,Me++}M.attributes=Oe,M.attributesNum=Me,M.index=We}function H(){for(var Se=M.newAttributes,We=0,Oe=Se.length;We<Oe;We++)Se[We]=0}function he(Se){ye(Se,0)}function ye(Se,We){var Oe=M.newAttributes,De=M.enabledAttributes,Me=M.attributeDivisors;if(Oe[Se]=1,De[Se]===0&&(a.enableVertexAttribArray(Se),De[Se]=1),Me[Se]!==We){var Xe=r.isWebGL2?a:t.get("ANGLE_instanced_arrays");Xe[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Se,We),Me[Se]=We}}function ie(){for(var Se=M.newAttributes,We=M.enabledAttributes,Oe=0,De=We.length;Oe<De;Oe++)We[Oe]!==Se[Oe]&&(a.disableVertexAttribArray(Oe),We[Oe]=0)}function ee(Se,We,Oe,De,Me,Xe){r.isWebGL2===!0&&(Oe===5124||Oe===5125)?a.vertexAttribIPointer(Se,We,Oe,Me,Xe):a.vertexAttribPointer(Se,We,Oe,De,Me,Xe)}function ve(Se,We,Oe,De){if(!(r.isWebGL2===!1&&(Se.isInstancedMesh||De.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)){H();var Me=De.attributes,Xe=Oe.getAttributes(),Ye=We.defaultAttributeValues;for(var rt in Xe){var nt=Xe[rt];if(nt>=0){var bt=Me[rt];if(bt!==void 0){var Rt=bt.normalized,Yt=bt.itemSize,at=i.get(bt);if(at===void 0)continue;var ar=at.buffer,kt=at.type,lr=at.bytesPerElement;if(bt.isInterleavedBufferAttribute){var br=bt.data,Or=br.stride,wr=bt.offset;br&&br.isInstancedInterleavedBuffer?(ye(nt,br.meshPerAttribute),De._maxInstanceCount===void 0&&(De._maxInstanceCount=br.meshPerAttribute*br.count)):he(nt),a.bindBuffer(34962,ar),ee(nt,Yt,kt,Rt,Or*lr,wr*lr)}else bt.isInstancedBufferAttribute?(ye(nt,bt.meshPerAttribute),De._maxInstanceCount===void 0&&(De._maxInstanceCount=bt.meshPerAttribute*bt.count)):he(nt),a.bindBuffer(34962,ar),ee(nt,Yt,kt,Rt,0,0)}else if(rt==="instanceMatrix"){var mn=i.get(Se.instanceMatrix);if(mn===void 0)continue;var Qr=mn.buffer,hn=mn.type;ye(nt+0,1),ye(nt+1,1),ye(nt+2,1),ye(nt+3,1),a.bindBuffer(34962,Qr),a.vertexAttribPointer(nt+0,4,hn,!1,64,0),a.vertexAttribPointer(nt+1,4,hn,!1,64,16),a.vertexAttribPointer(nt+2,4,hn,!1,64,32),a.vertexAttribPointer(nt+3,4,hn,!1,64,48)}else if(rt==="instanceColor"){var Vn=i.get(Se.instanceColor);if(Vn===void 0)continue;var vi=Vn.buffer,Jn=Vn.type;ye(nt,1),a.bindBuffer(34962,vi),a.vertexAttribPointer(nt,3,Jn,!1,12,0)}else if(Ye!==void 0){var kn=Ye[rt];if(kn!==void 0)switch(kn.length){case 2:a.vertexAttrib2fv(nt,kn);break;case 3:a.vertexAttrib3fv(nt,kn);break;case 4:a.vertexAttrib4fv(nt,kn);break;default:a.vertexAttrib1fv(nt,kn)}}}}ie()}}function Re(){Ue();for(var Se in f){var We=f[Se];for(var Oe in We){var De=We[Oe];for(var Me in De)N(De[Me].object),delete De[Me];delete We[Oe]}delete f[Se]}}function Le(Se){if(f[Se.id]!==void 0){var We=f[Se.id];for(var Oe in We){var De=We[Oe];for(var Me in De)N(De[Me].object),delete De[Me];delete We[Oe]}delete f[Se.id]}}function Ie(Se){for(var We in f){var Oe=f[We];if(Oe[Se.id]!==void 0){var De=Oe[Se.id];for(var Me in De)N(De[Me].object),delete De[Me];delete Oe[Se.id]}}}function Ue(){Fe(),M!==w&&(M=w,R(M.object))}function Fe(){w.geometry=null,w.program=null,w.wireframe=!1}return{setup:O,reset:Ue,resetDefaultState:Fe,dispose:Re,releaseStatesOfGeometry:Le,releaseStatesOfProgram:Ie,initAttributes:H,enableAttribute:he,disableUnusedAttributes:ie}}function Sb(a,t,i,r){var n=r.isWebGL2,o;function s(M){o=M}function f(M,O){a.drawArrays(o,M,O),i.update(O,o,1)}function w(M,O,P){if(P!==0){var R,N;if(n)R=a,N="drawArraysInstanced";else if(R=t.get("ANGLE_instanced_arrays"),N="drawArraysInstancedANGLE",R===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}R[N](o,M,O,P),i.update(O,o,P)}}this.setMode=s,this.render=f,this.renderInstances=w}function _b(a,t,i){var r;function n(){if(r!==void 0)return r;var ee=t.get("EXT_texture_filter_anisotropic");return ee!==null?r=a.getParameter(ee.MAX_TEXTURE_MAX_ANISOTROPY_EXT):r=0,r}function o(ee){if(ee==="highp"){if(a.getShaderPrecisionFormat(35633,36338).precision>0&&a.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";ee="mediump"}return ee==="mediump"&&a.getShaderPrecisionFormat(35633,36337).precision>0&&a.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var s=typeof WebGL2RenderingContext!="undefined"&&a instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&a instanceof WebGL2ComputeRenderingContext,f=i.precision!==void 0?i.precision:"highp",w=o(f);w!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",w,"instead."),f=w);var M=i.logarithmicDepthBuffer===!0,O=a.getParameter(34930),P=a.getParameter(35660),R=a.getParameter(3379),N=a.getParameter(34076),F=a.getParameter(34921),j=a.getParameter(36347),q=a.getParameter(36348),X=a.getParameter(36349),H=P>0,he=s||!!t.get("OES_texture_float"),ye=H&&he,ie=s?a.getParameter(36183):0;return{isWebGL2:s,getMaxAnisotropy:n,getMaxPrecision:o,precision:f,logarithmicDepthBuffer:M,maxTextures:O,maxVertexTextures:P,maxTextureSize:R,maxCubemapSize:N,maxAttributes:F,maxVertexUniforms:j,maxVaryings:q,maxFragmentUniforms:X,vertexTextures:H,floatFragmentTextures:he,floatVertexTextures:ye,maxSamples:ie}}function Cb(a){var t=this,i=null,r=0,n=!1,o=!1,s=new Ma,f=new Oi,w={value:null,needsUpdate:!1};this.uniform=w,this.numPlanes=0,this.numIntersection=0,this.init=function(P,R,N){var F=P.length!==0||R||r!==0||n;return n=R,i=O(P,N,0),r=P.length,F},this.beginShadows=function(){o=!0,O(null)},this.endShadows=function(){o=!1,M()},this.setState=function(P,R,N){var F=P.clippingPlanes,j=P.clipIntersection,q=P.clipShadows,X=a.get(P);if(!n||F===null||F.length===0||o&&!q)o?O(null):M();else{var H=o?0:r,he=H*4,ye=X.clippingState||null;w.value=ye,ye=O(F,R,he,N);for(var ie=0;ie!==he;++ie)ye[ie]=i[ie];X.clippingState=ye,this.numIntersection=j?this.numPlanes:0,this.numPlanes+=H}};function M(){w.value!==i&&(w.value=i,w.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function O(P,R,N,F){var j=P!==null?P.length:0,q=null;if(j!==0){if(q=w.value,F!==!0||q===null){var X=N+j*4,H=R.matrixWorldInverse;f.getNormalMatrix(H),(q===null||q.length<X)&&(q=new Float32Array(X));for(var he=0,ye=N;he!==j;++he,ye+=4)s.copy(P[he]).applyMatrix4(H,f),s.normal.toArray(q,ye),q[ye+3]=s.constant}w.value=q,w.needsUpdate=!0}return t.numPlanes=j,t.numIntersection=0,q}}function Lb(a){var t=new WeakMap;function i(s,f){return f===Je?s.mapping=Te:f===Mt&&(s.mapping=Qe),s}function r(s){if(s&&s.isTexture){var f=s.mapping;if(f===Je||f===Mt)if(t.has(s)){var w=t.get(s).texture;return i(w,s.mapping)}else{var M=s.image;if(M&&M.height>0){var O=a.getRenderList(),P=a.getRenderTarget(),R=new Tf(M.height/2);return R.fromEquirectangularTexture(a,s),t.set(s,R),a.setRenderTarget(P),a.setRenderList(O),s.addEventListener("dispose",n),i(R.texture,s.mapping)}else return null}}return s}function n(s){var f=s.target;f.removeEventListener("dispose",n);var w=t.get(f);w!==void 0&&(t.delete(f),w.dispose())}function o(){t=new WeakMap}return{get:r,dispose:o}}function Rb(a){var t={};function i(r){if(t[r]!==void 0)return t[r];var n;switch(r){case"WEBGL_depth_texture":n=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=a.getExtension(r)}return t[r]=n,n}return{has:function(n){return i(n)!==null},init:function(n){n.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float")},get:function(n){var o=i(n);return o===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),o}}}function Pb(a,t,i,r){var n={},o=new WeakMap;function s(P){var R=P.target;R.index!==null&&t.remove(R.index);for(var N in R.attributes)t.remove(R.attributes[N]);R.removeEventListener("dispose",s),delete n[R.id];var F=o.get(R);F&&(t.remove(F),o.delete(R)),r.releaseStatesOfGeometry(R),R.isInstancedBufferGeometry===!0&&delete R._maxInstanceCount,i.memory.geometries--}function f(P,R){return n[R.id]===!0||(R.addEventListener("dispose",s),n[R.id]=!0,i.memory.geometries++),R}function w(P){var R=P.attributes;for(var N in R)t.update(R[N],34962);var F=P.morphAttributes;for(var j in F)for(var q=F[j],X=0,H=q.length;X<H;X++)t.update(q[X],34962)}function M(P){var R=[],N=P.index,F=P.attributes.position,j=0;if(N!==null){var q=N.array;j=N.version;for(var X=0,H=q.length;X<H;X+=3){var he=q[X+0],ye=q[X+1],ie=q[X+2];R.push(he,ye,ye,ie,ie,he)}}else{var ee=F.array;j=F.version;for(var ve=0,Re=ee.length/3-1;ve<Re;ve+=3){var Le=ve+0,Ie=ve+1,Ue=ve+2;R.push(Le,Ie,Ie,Ue,Ue,Le)}}var Fe=new(Yp(R)>65535?Jo:Ko)(R,1);Fe.version=j;var Se=o.get(P);Se&&t.remove(Se),o.set(P,Fe)}function O(P){var R=o.get(P);if(R){var N=P.index;N!==null&&R.version<N.version&&M(P)}else M(P);return o.get(P)}return{get:f,update:w,getWireframeAttribute:O}}function Db(a,t,i,r){var n=r.isWebGL2,o;function s(R){o=R}var f,w;function M(R){f=R.type,w=R.bytesPerElement}function O(R,N){a.drawElements(o,N,f,R*w),i.update(N,o,1)}function P(R,N,F){if(F!==0){var j,q;if(n)j=a,q="drawElementsInstanced";else if(j=t.get("ANGLE_instanced_arrays"),q="drawElementsInstancedANGLE",j===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}j[q](o,N,f,R*w,F),i.update(N,o,F)}}this.setMode=s,this.setIndex=M,this.render=O,this.renderInstances=P}function Ob(a){var t={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,f){switch(i.calls++,s){case 4:i.triangles+=f*(o/3);break;case 1:i.lines+=f*(o/2);break;case 3:i.lines+=f*(o-1);break;case 2:i.lines+=f*o;break;case 0:i.points+=f*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function n(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:t,render:i,programs:null,autoReset:!0,reset:n,update:r}}function Ib(a,t){return a[0]-t[0]}function Bb(a,t){return Math.abs(t[1])-Math.abs(a[1])}function Fb(a){for(var t={},i=new Float32Array(8),r=[],n=0;n<8;n++)r[n]=[n,0];function o(s,f,w,M){var O=s.morphTargetInfluences,P=O===void 0?0:O.length,R=t[f.id];if(R===void 0){R=[];for(var N=0;N<P;N++)R[N]=[N,0];t[f.id]=R}for(var F=0;F<P;F++){var j=R[F];j[0]=F,j[1]=O[F]}R.sort(Bb);for(var q=0;q<8;q++)q<P&&R[q][1]?(r[q][0]=R[q][0],r[q][1]=R[q][1]):(r[q][0]=Number.MAX_SAFE_INTEGER,r[q][1]=0);r.sort(Ib);for(var X=w.morphTargets&&f.morphAttributes.position,H=w.morphNormals&&f.morphAttributes.normal,he=0,ye=0;ye<8;ye++){var ie=r[ye],ee=ie[0],ve=ie[1];ee!==Number.MAX_SAFE_INTEGER&&ve?(X&&f.getAttribute("morphTarget"+ye)!==X[ee]&&f.setAttribute("morphTarget"+ye,X[ee]),H&&f.getAttribute("morphNormal"+ye)!==H[ee]&&f.setAttribute("morphNormal"+ye,H[ee]),i[ye]=ve,he+=ve):(X&&f.hasAttribute("morphTarget"+ye)===!0&&f.deleteAttribute("morphTarget"+ye),H&&f.hasAttribute("morphNormal"+ye)===!0&&f.deleteAttribute("morphNormal"+ye),i[ye]=0)}var Re=f.morphTargetsRelative?1:1-he;M.getUniforms().setValue(a,"morphTargetBaseInfluence",Re),M.getUniforms().setValue(a,"morphTargetInfluences",i)}return{update:o}}function Nb(a,t,i,r){var n=new WeakMap;function o(w){var M=r.render.frame,O=w.geometry,P=t.get(w,O);return n.get(P)!==M&&(t.update(P),n.set(P,M)),w.isInstancedMesh&&(w.hasEventListener("dispose",f)===!1&&w.addEventListener("dispose",f),i.update(w.instanceMatrix,34962),w.instanceColor!==null&&i.update(w.instanceColor,34962)),P}function s(){n=new WeakMap}function f(w){var M=w.target;M.removeEventListener("dispose",f),i.remove(M.instanceMatrix),M.instanceColor!==null&&i.remove(M.instanceColor)}return{update:o,dispose:s}}function Xs(a,t,i,r){a===void 0&&(a=null),t===void 0&&(t=1),i===void 0&&(i=1),r===void 0&&(r=1),vn.call(this,null),this.image={data:a,width:t,height:i,depth:r},this.magFilter=Qt,this.minFilter=Qt,this.wrapR=Ht,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Xs.prototype=Object.create(vn.prototype),Xs.prototype.constructor=Xs,Xs.prototype.isDataTexture2DArray=!0;function Ys(a,t,i,r){a===void 0&&(a=null),t===void 0&&(t=1),i===void 0&&(i=1),r===void 0&&(r=1),vn.call(this,null),this.image={data:a,width:t,height:i,depth:r},this.magFilter=Qt,this.minFilter=Qt,this.wrapR=Ht,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Ys.prototype=Object.create(vn.prototype),Ys.prototype.constructor=Ys,Ys.prototype.isDataTexture3D=!0;var Kp=new vn,kb=new Xs,Ub=new Ys,Jp=new Ca,Zp=[],$p=[],ev=new Float32Array(16),tv=new Float32Array(9),rv=new Float32Array(4);function Qs(a,t,i){var r=a[0];if(r<=0||r>0)return a;var n=t*i,o=Zp[n];if(o===void 0&&(o=new Float32Array(n),Zp[n]=o),t!==0){r.toArray(o,0);for(var s=1,f=0;s!==t;++s)f+=i,a[s].toArray(o,f)}return o}function qi(a,t){if(a.length!==t.length)return!1;for(var i=0,r=a.length;i<r;i++)if(a[i]!==t[i])return!1;return!0}function Ni(a,t){for(var i=0,r=t.length;i<r;i++)a[i]=t[i]}function nv(a,t){var i=$p[t];i===void 0&&(i=new Int32Array(t),$p[t]=i);for(var r=0;r!==t;++r)i[r]=a.allocateTextureUnit();return i}function Hb(a,t){var i=this.cache;i[0]!==t&&(a.uniform1f(this.addr,t),i[0]=t)}function Gb(a,t){var i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(a.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(qi(i,t))return;a.uniform2fv(this.addr,t),Ni(i,t)}}function Vb(a,t){var i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(a.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(a.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(qi(i,t))return;a.uniform3fv(this.addr,t),Ni(i,t)}}function zb(a,t){var i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(a.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(qi(i,t))return;a.uniform4fv(this.addr,t),Ni(i,t)}}function Wb(a,t){var i=this.cache,r=t.elements;if(r===void 0){if(qi(i,t))return;a.uniformMatrix2fv(this.addr,!1,t),Ni(i,t)}else{if(qi(i,r))return;rv.set(r),a.uniformMatrix2fv(this.addr,!1,rv),Ni(i,r)}}function jb(a,t){var i=this.cache,r=t.elements;if(r===void 0){if(qi(i,t))return;a.uniformMatrix3fv(this.addr,!1,t),Ni(i,t)}else{if(qi(i,r))return;tv.set(r),a.uniformMatrix3fv(this.addr,!1,tv),Ni(i,r)}}function Xb(a,t){var i=this.cache,r=t.elements;if(r===void 0){if(qi(i,t))return;a.uniformMatrix4fv(this.addr,!1,t),Ni(i,t)}else{if(qi(i,r))return;ev.set(r),a.uniformMatrix4fv(this.addr,!1,ev),Ni(i,r)}}function Yb(a,t,i){var r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(a.uniform1i(this.addr,n),r[0]=n),i.safeSetTexture2D(t||Kp,n)}function Qb(a,t,i){var r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(a.uniform1i(this.addr,n),r[0]=n),i.setTexture2DArray(t||kb,n)}function qb(a,t,i){var r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(a.uniform1i(this.addr,n),r[0]=n),i.setTexture3D(t||Ub,n)}function Kb(a,t,i){var r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(a.uniform1i(this.addr,n),r[0]=n),i.safeSetTextureCube(t||Jp,n)}function Jb(a,t){var i=this.cache;i[0]!==t&&(a.uniform1i(this.addr,t),i[0]=t)}function Zb(a,t){var i=this.cache;qi(i,t)||(a.uniform2iv(this.addr,t),Ni(i,t))}function $b(a,t){var i=this.cache;qi(i,t)||(a.uniform3iv(this.addr,t),Ni(i,t))}function eE(a,t){var i=this.cache;qi(i,t)||(a.uniform4iv(this.addr,t),Ni(i,t))}function tE(a,t){var i=this.cache;i[0]!==t&&(a.uniform1ui(this.addr,t),i[0]=t)}function rE(a){switch(a){case 5126:return Hb;case 35664:return Gb;case 35665:return Vb;case 35666:return zb;case 35674:return Wb;case 35675:return jb;case 35676:return Xb;case 5124:case 35670:return Jb;case 35667:case 35671:return Zb;case 35668:case 35672:return $b;case 35669:case 35673:return eE;case 5125:return tE;case 35678:case 36198:case 36298:case 36306:case 35682:return Yb;case 35679:case 36299:case 36307:return qb;case 35680:case 36300:case 36308:case 36293:return Kb;case 36289:case 36303:case 36311:case 36292:return Qb}}function nE(a,t){a.uniform1fv(this.addr,t)}function iE(a,t){a.uniform1iv(this.addr,t)}function aE(a,t){a.uniform2iv(this.addr,t)}function oE(a,t){a.uniform3iv(this.addr,t)}function sE(a,t){a.uniform4iv(this.addr,t)}function lE(a,t){var i=Qs(t,this.size,2);a.uniform2fv(this.addr,i)}function uE(a,t){var i=Qs(t,this.size,3);a.uniform3fv(this.addr,i)}function cE(a,t){var i=Qs(t,this.size,4);a.uniform4fv(this.addr,i)}function hE(a,t){var i=Qs(t,this.size,4);a.uniformMatrix2fv(this.addr,!1,i)}function fE(a,t){var i=Qs(t,this.size,9);a.uniformMatrix3fv(this.addr,!1,i)}function dE(a,t){var i=Qs(t,this.size,16);a.uniformMatrix4fv(this.addr,!1,i)}function pE(a,t,i){var r=t.length,n=nv(i,r);a.uniform1iv(this.addr,n);for(var o=0;o!==r;++o)i.safeSetTexture2D(t[o]||Kp,n[o])}function vE(a,t,i){var r=t.length,n=nv(i,r);a.uniform1iv(this.addr,n);for(var o=0;o!==r;++o)i.safeSetTextureCube(t[o]||Jp,n[o])}function mE(a){switch(a){case 5126:return nE;case 35664:return lE;case 35665:return uE;case 35666:return cE;case 35674:return hE;case 35675:return fE;case 35676:return dE;case 5124:case 35670:return iE;case 35667:case 35671:return aE;case 35668:case 35672:return oE;case 35669:case 35673:return sE;case 35678:case 36198:case 36298:case 36306:case 35682:return pE;case 35680:case 36300:case 36308:case 36293:return vE}}function gE(a,t,i){this.id=a,this.addr=i,this.cache=[],this.setValue=rE(t.type)}function iv(a,t,i){this.id=a,this.addr=i,this.cache=[],this.size=t.size,this.setValue=mE(t.type)}iv.prototype.updateCache=function(a){var t=this.cache;a instanceof Float32Array&&t.length!==a.length&&(this.cache=new Float32Array(a.length)),Ni(t,a)};function av(a){this.id=a,this.seq=[],this.map={}}av.prototype.setValue=function(a,t,i){for(var r=this.seq,n=0,o=r.length;n!==o;++n){var s=r[n];s.setValue(a,t[s.id],i)}};var _f=/(\w+)(\])?(\[|\.)?/g;function ov(a,t){a.seq.push(t),a.map[t.id]=t}function yE(a,t,i){var r=a.name,n=r.length;for(_f.lastIndex=0;;){var o=_f.exec(r),s=_f.lastIndex,f=o[1],w=o[2]==="]",M=o[3];if(w&&(f=f|0),M===void 0||M==="["&&s+2===n){ov(i,M===void 0?new gE(f,a,t):new iv(f,a,t));break}else{var O=i.map,P=O[f];P===void 0&&(P=new av(f),ov(i,P)),i=P}}}function Ao(a,t){this.seq=[],this.map={};for(var i=a.getProgramParameter(t,35718),r=0;r<i;++r){var n=a.getActiveUniform(t,r),o=a.getUniformLocation(t,n.name);yE(n,o,this)}}Ao.prototype.setValue=function(a,t,i,r){var n=this.map[t];n!==void 0&&n.setValue(a,i,r)},Ao.prototype.setOptional=function(a,t,i){var r=t[i];r!==void 0&&this.setValue(a,i,r)},Ao.upload=function(a,t,i,r){for(var n=0,o=t.length;n!==o;++n){var s=t[n],f=i[s.id];f.needsUpdate!==!1&&s.setValue(a,f.value,r)}},Ao.seqWithValue=function(a,t){for(var i=[],r=0,n=a.length;r!==n;++r){var o=a[r];o.id in t&&i.push(o)}return i};function sv(a,t,i){var r=a.createShader(t);return a.shaderSource(r,i),a.compileShader(r),r}var AE=0;function bE(a){for(var t=a.split(`
`),i=0;i<t.length;i++)t[i]=i+1+": "+t[i];return t.join(`
`)}function lv(a){switch(a){case bi:return["Linear","( value )"];case Bl:return["sRGB","( value )"];case ju:return["RGBE","( value )"];case Jh:return["RGBM","( value, 7.0 )"];case Zh:return["RGBM","( value, 16.0 )"];case $h:return["RGBD","( value, 256.0 )"];case Wu:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Lp:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",a),["Linear","( value )"]}}function uv(a,t,i){var r=a.getShaderParameter(t,35713),n=a.getShaderInfoLog(t).trim();if(r&&n==="")return"";var o=a.getShaderSource(t);return"THREE.WebGLShader: gl.getShaderInfoLog() "+i+`
`+n+bE(o)}function Zl(a,t){var i=lv(t);return"vec4 "+a+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function EE(a,t){var i=lv(t);return"vec4 "+a+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function wE(a,t){var i;switch(t){case Ve:i="Linear";break;case ze:i="Reinhard";break;case $:i="OptimizedCineon";break;case V:i="ACESFilmic";break;case z:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+a+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function xE(a){var t=[a.extensionDerivatives||a.envMapCubeUV||a.bumpMap||a.tangentSpaceNormalMap||a.clearcoatNormalMap||a.flatShading||a.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(a.extensionFragDepth||a.logarithmicDepthBuffer)&&a.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",a.extensionDrawBuffers&&a.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(a.extensionShaderTextureLOD||a.envMap)&&a.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter($l).join(`
`)}function ME(a){var t=[];for(var i in a){var r=a[i];r!==!1&&t.push("#define "+i+" "+r)}return t.join(`
`)}function TE(a,t){for(var i={},r=a.getProgramParameter(t,35721),n=0;n<r;n++){var o=a.getActiveAttrib(t,n),s=o.name;i[s]=a.getAttribLocation(t,s)}return i}function $l(a){return a!==""}function cv(a,t){return a.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function hv(a,t){return a.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var SE=/^[ \t]*#include +<([\w\d./]+)>/gm;function Cf(a){return a.replace(SE,_E)}function _E(a,t){var i=zr[t];if(i===void 0)throw new Error("Can not resolve #include <"+t+">");return Cf(i)}var CE=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,LE=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function fv(a){return a.replace(LE,dv).replace(CE,RE)}function RE(a,t,i,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),dv(a,t,i,r)}function dv(a,t,i,r){for(var n="",o=parseInt(t);o<parseInt(i);o++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return n}function pv(a){var t="precision "+a.precision+` float;
precision `+a.precision+" int;";return a.precision==="highp"?t+=`
#define HIGH_PRECISION`:a.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:a.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function PE(a){var t="SHADOWMAP_TYPE_BASIC";return a.shadowMapType===x?t="SHADOWMAP_TYPE_PCF":a.shadowMapType===T?t="SHADOWMAP_TYPE_PCF_SOFT":a.shadowMapType===_&&(t="SHADOWMAP_TYPE_VSM"),t}function DE(a){var t="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case Te:case Qe:t="ENVMAP_TYPE_CUBE";break;case Vt:case or:t="ENVMAP_TYPE_CUBE_UV";break}return t}function OE(a){var t="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case Qe:case or:t="ENVMAP_MODE_REFRACTION";break}return t}function IE(a){var t="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case me:t="ENVMAP_BLENDING_MULTIPLY";break;case Ee:t="ENVMAP_BLENDING_MIX";break;case Pe:t="ENVMAP_BLENDING_ADD";break}return t}function BE(a,t,i,r){var n=a.getContext(),o=i.defines,s=i.vertexShader,f=i.fragmentShader,w=PE(i),M=DE(i),O=OE(i),P=IE(i),R=a.gammaFactor>0?a.gammaFactor:1,N=i.isWebGL2?"":xE(i),F=ME(o),j=n.createProgram(),q,X,H=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(q=[F].filter($l).join(`
`),q.length>0&&(q+=`
`),X=[N,F].filter($l).join(`
`),X.length>0&&(X+=`
`)):(q=[pv(i),"#define SHADER_NAME "+i.shaderName,F,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+R,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+O:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+w:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter($l).join(`
`),X=[N,pv(i),"#define SHADER_NAME "+i.shaderName,F,i.alphaTest?"#define ALPHATEST "+i.alphaTest+(i.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+R,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+M:"",i.envMap?"#define "+O:"",i.envMap?"#define "+P:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.sheen?"#define USE_SHEEN":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+w:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==ke?"#define TONE_MAPPING":"",i.toneMapping!==ke?zr.tonemapping_pars_fragment:"",i.toneMapping!==ke?wE("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",zr.encodings_pars_fragment,i.map?Zl("mapTexelToLinear",i.mapEncoding):"",i.matcap?Zl("matcapTexelToLinear",i.matcapEncoding):"",i.envMap?Zl("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMap?Zl("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.lightMap?Zl("lightMapTexelToLinear",i.lightMapEncoding):"",EE("linearToOutputTexel",i.outputEncoding),i.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter($l).join(`
`)),s=Cf(s),s=cv(s,i),s=hv(s,i),f=Cf(f),f=cv(f,i),f=hv(f,i),s=fv(s),f=fv(f),i.isWebGL2&&i.isRawShaderMaterial!==!0&&(H=`#version 300 es
`,q=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+q,X=["#define varying in",i.glslVersion===ef?"":"out highp vec4 pc_fragColor;",i.glslVersion===ef?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+X);var he=H+q+s,ye=H+X+f,ie=sv(n,35633,he),ee=sv(n,35632,ye);if(n.attachShader(j,ie),n.attachShader(j,ee),i.index0AttributeName!==void 0?n.bindAttribLocation(j,0,i.index0AttributeName):i.morphTargets===!0&&n.bindAttribLocation(j,0,"position"),n.linkProgram(j),a.debug.checkShaderErrors){var ve=n.getProgramInfoLog(j).trim(),Re=n.getShaderInfoLog(ie).trim(),Le=n.getShaderInfoLog(ee).trim(),Ie=!0,Ue=!0;if(n.getProgramParameter(j,35714)===!1){Ie=!1;var Fe=uv(n,ie,"vertex"),Se=uv(n,ee,"fragment");console.error("THREE.WebGLProgram: shader error: ",n.getError(),"35715",n.getProgramParameter(j,35715),"gl.getProgramInfoLog",ve,Fe,Se)}else ve!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",ve):(Re===""||Le==="")&&(Ue=!1);Ue&&(this.diagnostics={runnable:Ie,programLog:ve,vertexShader:{log:Re,prefix:q},fragmentShader:{log:Le,prefix:X}})}n.deleteShader(ie),n.deleteShader(ee);var We;this.getUniforms=function(){return We===void 0&&(We=new Ao(n,j)),We};var Oe;return this.getAttributes=function(){return Oe===void 0&&(Oe=TE(n,j)),Oe},this.destroy=function(){r.releaseStatesOfProgram(this),n.deleteProgram(j),this.program=void 0},this.name=i.shaderName,this.id=AE++,this.cacheKey=t,this.usedTimes=1,this.program=j,this.vertexShader=ie,this.fragmentShader=ee,this}function FE(a,t,i,r,n,o){var s=[],f=r.isWebGL2,w=r.logarithmicDepthBuffer,M=r.floatVertexTextures,O=r.maxVertexUniforms,P=r.vertexTextures,R=r.precision,N={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},F=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function j(ee){var ve=ee.skeleton,Re=ve.bones;if(M)return 1024;var Le=O,Ie=Math.floor((Le-20)/4),Ue=Math.min(Ie,Re.length);return Ue<Re.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Re.length+" bones. This GPU supports "+Ue+"."),0):Ue}function q(ee){var ve;return ee&&ee.isTexture?ve=ee.encoding:ee&&ee.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ve=ee.texture.encoding):ve=bi,ve}function X(ee,ve,Re,Le,Ie){var Ue=Le.fog,Fe=ee.isMeshStandardMaterial?Le.environment:null,Se=t.get(ee.envMap||Fe),We=N[ee.type],Oe=Ie.isSkinnedMesh?j(Ie):0;ee.precision!==null&&(R=r.getMaxPrecision(ee.precision),R!==ee.precision&&console.warn("THREE.WebGLProgram.getParameters:",ee.precision,"not supported, using",R,"instead."));var De,Me;if(We){var Xe=ca[We];De=Xe.vertexShader,Me=Xe.fragmentShader}else De=ee.vertexShader,Me=ee.fragmentShader;var Ye=a.getRenderTarget(),rt={isWebGL2:f,shaderID:We,shaderName:ee.type,vertexShader:De,fragmentShader:Me,defines:ee.defines,isRawShaderMaterial:ee.isRawShaderMaterial===!0,glslVersion:ee.glslVersion,precision:R,instancing:Ie.isInstancedMesh===!0,instancingColor:Ie.isInstancedMesh===!0&&Ie.instanceColor!==null,supportsVertexTextures:P,outputEncoding:Ye!==null?q(Ye.texture):a.outputEncoding,map:!!ee.map,mapEncoding:q(ee.map),matcap:!!ee.matcap,matcapEncoding:q(ee.matcap),envMap:!!Se,envMapMode:Se&&Se.mapping,envMapEncoding:q(Se),envMapCubeUV:!!Se&&(Se.mapping===Vt||Se.mapping===or),lightMap:!!ee.lightMap,lightMapEncoding:q(ee.lightMap),aoMap:!!ee.aoMap,emissiveMap:!!ee.emissiveMap,emissiveMapEncoding:q(ee.emissiveMap),bumpMap:!!ee.bumpMap,normalMap:!!ee.normalMap,objectSpaceNormalMap:ee.normalMapType===Dp,tangentSpaceNormalMap:ee.normalMapType===jo,clearcoatMap:!!ee.clearcoatMap,clearcoatRoughnessMap:!!ee.clearcoatRoughnessMap,clearcoatNormalMap:!!ee.clearcoatNormalMap,displacementMap:!!ee.displacementMap,roughnessMap:!!ee.roughnessMap,metalnessMap:!!ee.metalnessMap,specularMap:!!ee.specularMap,alphaMap:!!ee.alphaMap,gradientMap:!!ee.gradientMap,sheen:!!ee.sheen,transmissionMap:!!ee.transmissionMap,combine:ee.combine,vertexTangents:ee.normalMap&&ee.vertexTangents,vertexColors:ee.vertexColors,vertexUvs:!!ee.map||!!ee.bumpMap||!!ee.normalMap||!!ee.specularMap||!!ee.alphaMap||!!ee.emissiveMap||!!ee.roughnessMap||!!ee.metalnessMap||!!ee.clearcoatMap||!!ee.clearcoatRoughnessMap||!!ee.clearcoatNormalMap||!!ee.displacementMap||!!ee.transmissionMap,uvsVertexOnly:!(!!ee.map||!!ee.bumpMap||!!ee.normalMap||!!ee.specularMap||!!ee.alphaMap||!!ee.emissiveMap||!!ee.roughnessMap||!!ee.metalnessMap||!!ee.clearcoatNormalMap||!!ee.transmissionMap)&&!!ee.displacementMap,fog:!!Ue,useFog:ee.fog,fogExp2:Ue&&Ue.isFogExp2,flatShading:ee.flatShading,sizeAttenuation:ee.sizeAttenuation,logarithmicDepthBuffer:w,skinning:ee.skinning&&Oe>0,maxBones:Oe,useVertexTexture:M,morphTargets:ee.morphTargets,morphNormals:ee.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:ve.directional.length,numPointLights:ve.point.length,numSpotLights:ve.spot.length,numRectAreaLights:ve.rectArea.length,numHemiLights:ve.hemi.length,numDirLightShadows:ve.directionalShadowMap.length,numPointLightShadows:ve.pointShadowMap.length,numSpotLightShadows:ve.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:ee.dithering,shadowMapEnabled:a.shadowMap.enabled&&Re.length>0,shadowMapType:a.shadowMap.type,toneMapping:ee.toneMapped?a.toneMapping:ke,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:ee.premultipliedAlpha,alphaTest:ee.alphaTest,doubleSided:ee.side===I,flipSided:ee.side===C,depthPacking:ee.depthPacking!==void 0?ee.depthPacking:!1,index0AttributeName:ee.index0AttributeName,extensionDerivatives:ee.extensions&&ee.extensions.derivatives,extensionFragDepth:ee.extensions&&ee.extensions.fragDepth,extensionDrawBuffers:ee.extensions&&ee.extensions.drawBuffers,extensionShaderTextureLOD:ee.extensions&&ee.extensions.shaderTextureLOD,rendererExtensionFragDepth:f||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||i.has("EXT_shader_texture_lod"),customProgramCacheKey:ee.customProgramCacheKey()};return rt}function H(ee){var ve=[];if(ee.shaderID?ve.push(ee.shaderID):(ve.push(ee.fragmentShader),ve.push(ee.vertexShader)),ee.defines!==void 0)for(var Re in ee.defines)ve.push(Re),ve.push(ee.defines[Re]);if(ee.isRawShaderMaterial===!1){for(var Le=0;Le<F.length;Le++)ve.push(ee[F[Le]]);ve.push(a.outputEncoding),ve.push(a.gammaFactor)}return ve.push(ee.customProgramCacheKey),ve.join()}function he(ee){var ve=N[ee.type],Re;if(ve){var Le=ca[ve];Re=qp.clone(Le.uniforms)}else Re=ee.uniforms;return Re}function ye(ee,ve){for(var Re,Le=0,Ie=s.length;Le<Ie;Le++){var Ue=s[Le];if(Ue.cacheKey===ve){Re=Ue,++Re.usedTimes;break}}return Re===void 0&&(Re=new BE(a,ve,ee,n),s.push(Re)),Re}function ie(ee){if(--ee.usedTimes==0){var ve=s.indexOf(ee);s[ve]=s[s.length-1],s.pop(),ee.destroy()}}return{getParameters:X,getProgramCacheKey:H,getUniforms:he,acquireProgram:ye,releaseProgram:ie,programs:s}}function NE(){var a=new WeakMap;function t(o){var s=a.get(o);return s===void 0&&(s={},a.set(o,s)),s}function i(o){a.delete(o)}function r(o,s,f){a.get(o)[s]=f}function n(){a=new WeakMap}return{get:t,remove:i,update:r,dispose:n}}function kE(a,t){return a.groupOrder!==t.groupOrder?a.groupOrder-t.groupOrder:a.renderOrder!==t.renderOrder?a.renderOrder-t.renderOrder:a.program!==t.program?a.program.id-t.program.id:a.material.id!==t.material.id?a.material.id-t.material.id:a.z!==t.z?a.z-t.z:a.id-t.id}function UE(a,t){return a.groupOrder!==t.groupOrder?a.groupOrder-t.groupOrder:a.renderOrder!==t.renderOrder?a.renderOrder-t.renderOrder:a.z!==t.z?t.z-a.z:a.id-t.id}function vv(a){var t=[],i=0,r=[],n=[],o={id:-1};function s(){i=0,r.length=0,n.length=0}function f(R,N,F,j,q,X){var H=t[i],he=a.get(F);return H===void 0?(H={id:R.id,object:R,geometry:N,material:F,program:he.program||o,groupOrder:j,renderOrder:R.renderOrder,z:q,group:X},t[i]=H):(H.id=R.id,H.object=R,H.geometry=N,H.material=F,H.program=he.program||o,H.groupOrder=j,H.renderOrder=R.renderOrder,H.z=q,H.group=X),i++,H}function w(R,N,F,j,q,X){var H=f(R,N,F,j,q,X);(F.transparent===!0?n:r).push(H)}function M(R,N,F,j,q,X){var H=f(R,N,F,j,q,X);(F.transparent===!0?n:r).unshift(H)}function O(R,N){r.length>1&&r.sort(R||kE),n.length>1&&n.sort(N||UE)}function P(){for(var R=i,N=t.length;R<N;R++){var F=t[R];if(F.id===null)break;F.id=null,F.object=null,F.geometry=null,F.material=null,F.program=null,F.group=null}}return{opaque:r,transparent:n,init:s,push:w,unshift:M,finish:P,sort:O}}function HE(a){var t=new WeakMap;function i(n,o){var s=t.get(n),f;return s===void 0?(f=new vv(a),t.set(n,new WeakMap),t.get(n).set(o,f)):(f=s.get(o),f===void 0&&(f=new vv(a),s.set(o,f))),f}function r(){t=new WeakMap}return{get:i,dispose:r}}function GE(){var a={};return{get:function(i){if(a[i.id]!==void 0)return a[i.id];var r;switch(i.type){case"DirectionalLight":r={direction:new be,color:new Nt};break;case"SpotLight":r={position:new be,direction:new be,color:new Nt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new be,color:new Nt,distance:0,decay:0};break;case"HemisphereLight":r={direction:new be,skyColor:new Nt,groundColor:new Nt};break;case"RectAreaLight":r={color:new Nt,position:new be,halfWidth:new be,halfHeight:new be};break}return a[i.id]=r,r}}}function VE(){var a={};return{get:function(i){if(a[i.id]!==void 0)return a[i.id];var r;switch(i.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xt};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xt};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xt,shadowCameraNear:1,shadowCameraFar:1e3};break}return a[i.id]=r,r}}}var zE=0;function WE(a,t){return(t.castShadow?1:0)-(a.castShadow?1:0)}function jE(a,t){for(var i=new GE,r=VE(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},o=0;o<9;o++)n.probe.push(new be);var s=new be,f=new Br,w=new Br;function M(P){for(var R=0,N=0,F=0,j=0;j<9;j++)n.probe[j].set(0,0,0);var q=0,X=0,H=0,he=0,ye=0,ie=0,ee=0,ve=0;P.sort(WE);for(var Re=0,Le=P.length;Re<Le;Re++){var Ie=P[Re],Ue=Ie.color,Fe=Ie.intensity,Se=Ie.distance,We=Ie.shadow&&Ie.shadow.map?Ie.shadow.map.texture:null;if(Ie.isAmbientLight)R+=Ue.r*Fe,N+=Ue.g*Fe,F+=Ue.b*Fe;else if(Ie.isLightProbe)for(var Oe=0;Oe<9;Oe++)n.probe[Oe].addScaledVector(Ie.sh.coefficients[Oe],Fe);else if(Ie.isDirectionalLight){var De=i.get(Ie);if(De.color.copy(Ie.color).multiplyScalar(Ie.intensity),Ie.castShadow){var Me=Ie.shadow,Xe=r.get(Ie);Xe.shadowBias=Me.bias,Xe.shadowNormalBias=Me.normalBias,Xe.shadowRadius=Me.radius,Xe.shadowMapSize=Me.mapSize,n.directionalShadow[q]=Xe,n.directionalShadowMap[q]=We,n.directionalShadowMatrix[q]=Ie.shadow.matrix,ie++}n.directional[q]=De,q++}else if(Ie.isSpotLight){var Ye=i.get(Ie);if(Ye.position.setFromMatrixPosition(Ie.matrixWorld),Ye.color.copy(Ue).multiplyScalar(Fe),Ye.distance=Se,Ye.coneCos=Math.cos(Ie.angle),Ye.penumbraCos=Math.cos(Ie.angle*(1-Ie.penumbra)),Ye.decay=Ie.decay,Ie.castShadow){var rt=Ie.shadow,nt=r.get(Ie);nt.shadowBias=rt.bias,nt.shadowNormalBias=rt.normalBias,nt.shadowRadius=rt.radius,nt.shadowMapSize=rt.mapSize,n.spotShadow[H]=nt,n.spotShadowMap[H]=We,n.spotShadowMatrix[H]=Ie.shadow.matrix,ve++}n.spot[H]=Ye,H++}else if(Ie.isRectAreaLight){var bt=i.get(Ie);bt.color.copy(Ue).multiplyScalar(Fe),bt.halfWidth.set(Ie.width*.5,0,0),bt.halfHeight.set(0,Ie.height*.5,0),n.rectArea[he]=bt,he++}else if(Ie.isPointLight){var Rt=i.get(Ie);if(Rt.color.copy(Ie.color).multiplyScalar(Ie.intensity),Rt.distance=Ie.distance,Rt.decay=Ie.decay,Ie.castShadow){var Yt=Ie.shadow,at=r.get(Ie);at.shadowBias=Yt.bias,at.shadowNormalBias=Yt.normalBias,at.shadowRadius=Yt.radius,at.shadowMapSize=Yt.mapSize,at.shadowCameraNear=Yt.camera.near,at.shadowCameraFar=Yt.camera.far,n.pointShadow[X]=at,n.pointShadowMap[X]=We,n.pointShadowMatrix[X]=Ie.shadow.matrix,ee++}n.point[X]=Rt,X++}else if(Ie.isHemisphereLight){var ar=i.get(Ie);ar.skyColor.copy(Ie.color).multiplyScalar(Fe),ar.groundColor.copy(Ie.groundColor).multiplyScalar(Fe),n.hemi[ye]=ar,ye++}}he>0&&(t.isWebGL2||a.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=It.LTC_FLOAT_1,n.rectAreaLTC2=It.LTC_FLOAT_2):a.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=It.LTC_HALF_1,n.rectAreaLTC2=It.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=R,n.ambient[1]=N,n.ambient[2]=F;var kt=n.hash;(kt.directionalLength!==q||kt.pointLength!==X||kt.spotLength!==H||kt.rectAreaLength!==he||kt.hemiLength!==ye||kt.numDirectionalShadows!==ie||kt.numPointShadows!==ee||kt.numSpotShadows!==ve)&&(n.directional.length=q,n.spot.length=H,n.rectArea.length=he,n.point.length=X,n.hemi.length=ye,n.directionalShadow.length=ie,n.directionalShadowMap.length=ie,n.pointShadow.length=ee,n.pointShadowMap.length=ee,n.spotShadow.length=ve,n.spotShadowMap.length=ve,n.directionalShadowMatrix.length=ie,n.pointShadowMatrix.length=ee,n.spotShadowMatrix.length=ve,kt.directionalLength=q,kt.pointLength=X,kt.spotLength=H,kt.rectAreaLength=he,kt.hemiLength=ye,kt.numDirectionalShadows=ie,kt.numPointShadows=ee,kt.numSpotShadows=ve,n.version=zE++)}function O(P,R){for(var N=0,F=0,j=0,q=0,X=0,H=R.matrixWorldInverse,he=0,ye=P.length;he<ye;he++){var ie=P[he];if(ie.isDirectionalLight){var ee=n.directional[N];ee.direction.setFromMatrixPosition(ie.matrixWorld),s.setFromMatrixPosition(ie.target.matrixWorld),ee.direction.sub(s),ee.direction.transformDirection(H),N++}else if(ie.isSpotLight){var ve=n.spot[j];ve.position.setFromMatrixPosition(ie.matrixWorld),ve.position.applyMatrix4(H),ve.direction.setFromMatrixPosition(ie.matrixWorld),s.setFromMatrixPosition(ie.target.matrixWorld),ve.direction.sub(s),ve.direction.transformDirection(H),j++}else if(ie.isRectAreaLight){var Re=n.rectArea[q];Re.position.setFromMatrixPosition(ie.matrixWorld),Re.position.applyMatrix4(H),w.identity(),f.copy(ie.matrixWorld),f.premultiply(H),w.extractRotation(f),Re.halfWidth.set(ie.width*.5,0,0),Re.halfHeight.set(0,ie.height*.5,0),Re.halfWidth.applyMatrix4(w),Re.halfHeight.applyMatrix4(w),q++}else if(ie.isPointLight){var Le=n.point[F];Le.position.setFromMatrixPosition(ie.matrixWorld),Le.position.applyMatrix4(H),F++}else if(ie.isHemisphereLight){var Ie=n.hemi[X];Ie.direction.setFromMatrixPosition(ie.matrixWorld),Ie.direction.transformDirection(H),Ie.direction.normalize(),X++}}}return{setup:M,setupView:O,state:n}}function mv(a,t){var i=new jE(a,t),r=[],n=[];function o(){r.length=0,n.length=0}function s(P){r.push(P)}function f(P){n.push(P)}function w(){i.setup(r)}function M(P){i.setupView(r,P)}var O={lightsArray:r,shadowsArray:n,lights:i};return{init:o,state:O,setupLights:w,setupLightsView:M,pushLight:s,pushShadow:f}}function XE(a,t){var i=new WeakMap;function r(o,s){s===void 0&&(s=0);var f;return i.has(o)===!1?(f=new mv(a,t),i.set(o,[]),i.get(o).push(f)):s>=i.get(o).length?(f=new mv(a,t),i.get(o).push(f)):f=i.get(o)[s],f}function n(){i=new WeakMap}return{get:r,dispose:n}}function bo(a){fr.call(this),this.type="MeshDepthMaterial",this.depthPacking=Rp,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(a)}bo.prototype=Object.create(fr.prototype),bo.prototype.constructor=bo,bo.prototype.isMeshDepthMaterial=!0,bo.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.depthPacking=a.depthPacking,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this};function Eo(a){fr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new be,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(a)}Eo.prototype=Object.create(fr.prototype),Eo.prototype.constructor=Eo,Eo.prototype.isMeshDistanceMaterial=!0,Eo.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.referencePosition.copy(a.referencePosition),this.nearDistance=a.nearDistance,this.farDistance=a.farDistance,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this};var YE=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,QE=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function gv(a,t,i){var r=new Kl,n=new xt,o=new xt,s=new cn,f=[],w=[],M={},O={0:C,1:D,2:I},P=new Ei({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new xt},radius:{value:4}},vertexShader:QE,fragmentShader:YE}),R=P.clone();R.defines.HORIZONTAL_PASS=1;var N=new ir;N.setAttribute("position",new dr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var F=new Mn(N,P),j=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=x,this.render=function(ie,ee,ve){if(j.enabled!==!1&&!(j.autoUpdate===!1&&j.needsUpdate===!1)&&ie.length!==0){var Re=a.getRenderTarget(),Le=a.getActiveCubeFace(),Ie=a.getActiveMipmapLevel(),Ue=a.state;Ue.setBlending(W),Ue.buffers.color.setClear(1,1,1,1),Ue.buffers.depth.setTest(!0),Ue.setScissorTest(!1);for(var Fe=0,Se=ie.length;Fe<Se;Fe++){var We=ie[Fe],Oe=We.shadow;if(Oe===void 0){console.warn("THREE.WebGLShadowMap:",We,"has no shadow.");continue}if(!(Oe.autoUpdate===!1&&Oe.needsUpdate===!1)){n.copy(Oe.mapSize);var De=Oe.getFrameExtents();if(n.multiply(De),o.copy(Oe.mapSize),(n.x>i||n.y>i)&&(n.x>i&&(o.x=Math.floor(i/De.x),n.x=o.x*De.x,Oe.mapSize.x=o.x),n.y>i&&(o.y=Math.floor(i/De.y),n.y=o.y*De.y,Oe.mapSize.y=o.y)),Oe.map===null&&!Oe.isPointLightShadow&&this.type===_){var Me={minFilter:ht,magFilter:ht,format:ri};Oe.map=new uo(n.x,n.y,Me),Oe.map.texture.name=We.name+".shadowMap",Oe.mapPass=new uo(n.x,n.y,Me),Oe.camera.updateProjectionMatrix()}if(Oe.map===null){var Xe={minFilter:Qt,magFilter:Qt,format:ri};Oe.map=new uo(n.x,n.y,Xe),Oe.map.texture.name=We.name+".shadowMap",Oe.camera.updateProjectionMatrix()}a.setRenderTarget(Oe.map),a.clear();for(var Ye=Oe.getViewportCount(),rt=0;rt<Ye;rt++){var nt=Oe.getViewport(rt);s.set(o.x*nt.x,o.y*nt.y,o.x*nt.z,o.y*nt.w),Ue.viewport(s),Oe.updateMatrices(We,rt),r=Oe.getFrustum(),ye(ee,ve,Oe.camera,We,this.type)}!Oe.isPointLightShadow&&this.type===_&&q(Oe,ve),Oe.needsUpdate=!1}}j.needsUpdate=!1,a.setRenderTarget(Re,Le,Ie)}};function q(ie,ee){var ve=t.update(F);P.uniforms.shadow_pass.value=ie.map.texture,P.uniforms.resolution.value=ie.mapSize,P.uniforms.radius.value=ie.radius,a.setRenderTarget(ie.mapPass),a.clear(),a.renderBufferDirect(ee,null,ve,P,F,null),R.uniforms.shadow_pass.value=ie.mapPass.texture,R.uniforms.resolution.value=ie.mapSize,R.uniforms.radius.value=ie.radius,a.setRenderTarget(ie.map),a.clear(),a.renderBufferDirect(ee,null,ve,R,F,null)}function X(ie,ee,ve){var Re=ie<<0|ee<<1|ve<<2,Le=f[Re];return Le===void 0&&(Le=new bo({depthPacking:Pp,morphTargets:ie,skinning:ee}),f[Re]=Le),Le}function H(ie,ee,ve){var Re=ie<<0|ee<<1|ve<<2,Le=w[Re];return Le===void 0&&(Le=new Eo({morphTargets:ie,skinning:ee}),w[Re]=Le),Le}function he(ie,ee,ve,Re,Le,Ie,Ue){var Fe=null,Se=X,We=ie.customDepthMaterial;if(Re.isPointLight===!0&&(Se=H,We=ie.customDistanceMaterial),We===void 0){var Oe=!1;ve.morphTargets===!0&&(Oe=ee.morphAttributes&&ee.morphAttributes.position&&ee.morphAttributes.position.length>0);var De=!1;ie.isSkinnedMesh===!0&&(ve.skinning===!0?De=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",ie));var Me=ie.isInstancedMesh===!0;Fe=Se(Oe,De,Me)}else Fe=We;if(a.localClippingEnabled&&ve.clipShadows===!0&&ve.clippingPlanes.length!==0){var Xe=Fe.uuid,Ye=ve.uuid,rt=M[Xe];rt===void 0&&(rt={},M[Xe]=rt);var nt=rt[Ye];nt===void 0&&(nt=Fe.clone(),rt[Ye]=nt),Fe=nt}return Fe.visible=ve.visible,Fe.wireframe=ve.wireframe,Ue===_?Fe.side=ve.shadowSide!==null?ve.shadowSide:ve.side:Fe.side=ve.shadowSide!==null?ve.shadowSide:O[ve.side],Fe.clipShadows=ve.clipShadows,Fe.clippingPlanes=ve.clippingPlanes,Fe.clipIntersection=ve.clipIntersection,Fe.wireframeLinewidth=ve.wireframeLinewidth,Fe.linewidth=ve.linewidth,Re.isPointLight===!0&&Fe.isMeshDistanceMaterial===!0&&(Fe.referencePosition.setFromMatrixPosition(Re.matrixWorld),Fe.nearDistance=Le,Fe.farDistance=Ie),Fe}function ye(ie,ee,ve,Re,Le){if(ie.visible!==!1){var Ie=ie.layers.test(ee.layers);if(Ie&&(ie.isMesh||ie.isLine||ie.isPoints)&&(ie.castShadow||ie.receiveShadow&&Le===_)&&(!ie.frustumCulled||r.intersectsObject(ie))){ie.modelViewMatrix.multiplyMatrices(ve.matrixWorldInverse,ie.matrixWorld);var Ue=t.update(ie),Fe=ie.material;if(Array.isArray(Fe))for(var Se=Ue.groups,We=0,Oe=Se.length;We<Oe;We++){var De=Se[We],Me=Fe[De.materialIndex];if(Me&&Me.visible){var Xe=he(ie,Ue,Me,Re,ve.near,ve.far,Le);a.renderBufferDirect(ve,null,Ue,Xe,ie,De)}}else if(Fe.visible){var Ye=he(ie,Ue,Fe,Re,ve.near,ve.far,Le);a.renderBufferDirect(ve,null,Ue,Ye,ie,null)}}for(var rt=ie.children,nt=0,bt=rt.length;nt<bt;nt++)ye(rt[nt],ee,ve,Re,Le)}}}function qE(a,t,i){var r,n,o=i.isWebGL2;function s(){var Ke=!1,qt=new cn,Wt=null,ur=new cn(0,0,0,0);return{setMask:function(Pt){Wt!==Pt&&!Ke&&(a.colorMask(Pt,Pt,Pt,Pt),Wt=Pt)},setLocked:function(Pt){Ke=Pt},setClear:function(Pt,xr,Ir,Bn,gn){gn===!0&&(Pt*=Bn,xr*=Bn,Ir*=Bn),qt.set(Pt,xr,Ir,Bn),ur.equals(qt)===!1&&(a.clearColor(Pt,xr,Ir,Bn),ur.copy(qt))},reset:function(){Ke=!1,Wt=null,ur.set(-1,0,0,0)}}}function f(){var Ke=!1,qt=null,Wt=null,ur=null;return{setTest:function(Pt){Pt?bt(2929):Rt(2929)},setMask:function(Pt){qt!==Pt&&!Ke&&(a.depthMask(Pt),qt=Pt)},setFunc:function(Pt){if(Wt!==Pt){if(Pt)switch(Pt){case Kt:a.depthFunc(512);break;case _t:a.depthFunc(519);break;case se:a.depthFunc(513);break;case ce:a.depthFunc(515);break;case Q:a.depthFunc(514);break;case K:a.depthFunc(518);break;case ae:a.depthFunc(516);break;case ge:a.depthFunc(517);break;default:a.depthFunc(515)}else a.depthFunc(515);Wt=Pt}},setLocked:function(Pt){Ke=Pt},setClear:function(Pt){ur!==Pt&&(a.clearDepth(Pt),ur=Pt)},reset:function(){Ke=!1,qt=null,Wt=null,ur=null}}}function w(){var Ke=!1,qt=null,Wt=null,ur=null,Ut=null,Pt=null,xr=null,Ir=null,Bn=null;return{setTest:function(en){Ke||(en?bt(2960):Rt(2960))},setMask:function(en){qt!==en&&!Ke&&(a.stencilMask(en),qt=en)},setFunc:function(en,on,zn){(Wt!==en||ur!==on||Ut!==zn)&&(a.stencilFunc(en,on,zn),Wt=en,ur=on,Ut=zn)},setOp:function(en,on,zn){(Pt!==en||xr!==on||Ir!==zn)&&(a.stencilOp(en,on,zn),Pt=en,xr=on,Ir=zn)},setLocked:function(en){Ke=en},setClear:function(en){Bn!==en&&(a.clearStencil(en),Bn=en)},reset:function(){Ke=!1,qt=null,Wt=null,ur=null,Ut=null,Pt=null,xr=null,Ir=null,Bn=null}}}var M=new s,O=new f,P=new w,R={},N=null,F=null,j=null,q=null,X=null,H=null,he=null,ye=null,ie=null,ee=!1,ve=null,Re=null,Le=null,Ie=null,Ue=null,Fe=a.getParameter(35661),Se=!1,We=0,Oe=a.getParameter(7938);Oe.indexOf("WebGL")!==-1?(We=parseFloat(/^WebGL (\d)/.exec(Oe)[1]),Se=We>=1):Oe.indexOf("OpenGL ES")!==-1&&(We=parseFloat(/^OpenGL ES (\d)/.exec(Oe)[1]),Se=We>=2);var De=null,Me={},Xe=new cn,Ye=new cn;function rt(Ke,qt,Wt){var ur=new Uint8Array(4),Ut=a.createTexture();a.bindTexture(Ke,Ut),a.texParameteri(Ke,10241,9728),a.texParameteri(Ke,10240,9728);for(var Pt=0;Pt<Wt;Pt++)a.texImage2D(qt+Pt,0,6408,1,1,0,6408,5121,ur);return Ut}var nt={};nt[3553]=rt(3553,3553,1),nt[34067]=rt(34067,34069,6),M.setClear(0,0,0,1),O.setClear(1),P.setClear(0),bt(2929),O.setFunc(ce),Or(!1),wr(v),bt(2884),lr(W);function bt(Ke){R[Ke]!==!0&&(a.enable(Ke),R[Ke]=!0)}function Rt(Ke){R[Ke]!==!1&&(a.disable(Ke),R[Ke]=!1)}function Yt(Ke){return N!==Ke?(a.useProgram(Ke),N=Ke,!0):!1}var at=(r={},r[Y]=32774,r[de]=32778,r[ne]=32779,r);if(o)at[xe]=32775,at[Be]=32776;else{var ar=t.get("EXT_blend_minmax");ar!==null&&(at[xe]=ar.MIN_EXT,at[Be]=ar.MAX_EXT)}var kt=(n={},n[je]=0,n[Ge]=1,n[ct]=768,n[Et]=770,n[Tt]=776,n[pt]=774,n[jt]=772,n[lt]=769,n[Ct]=771,n[$e]=775,n[tt]=773,n);function lr(Ke,qt,Wt,ur,Ut,Pt,xr,Ir){if(Ke===W){F&&(Rt(3042),F=!1);return}if(F||(bt(3042),F=!0),Ke!==ue){if(Ke!==j||Ir!==ee){if((q!==Y||he!==Y)&&(a.blendEquation(32774),q=Y,he=Y),Ir)switch(Ke){case oe:a.blendFuncSeparate(1,771,1,771);break;case J:a.blendFunc(1,1);break;case le:a.blendFuncSeparate(0,0,769,771);break;case te:a.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ke);break}else switch(Ke){case oe:a.blendFuncSeparate(770,771,1,771);break;case J:a.blendFunc(770,1);break;case le:a.blendFunc(0,769);break;case te:a.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ke);break}X=null,H=null,ye=null,ie=null,j=Ke,ee=Ir}return}Ut=Ut||qt,Pt=Pt||Wt,xr=xr||ur,(qt!==q||Ut!==he)&&(a.blendEquationSeparate(at[qt],at[Ut]),q=qt,he=Ut),(Wt!==X||ur!==H||Pt!==ye||xr!==ie)&&(a.blendFuncSeparate(kt[Wt],kt[ur],kt[Pt],kt[xr]),X=Wt,H=ur,ye=Pt,ie=xr),j=Ke,ee=null}function br(Ke,qt){Ke.side===I?Rt(2884):bt(2884);var Wt=Ke.side===C;qt&&(Wt=!Wt),Or(Wt),Ke.blending===oe&&Ke.transparent===!1?lr(W):lr(Ke.blending,Ke.blendEquation,Ke.blendSrc,Ke.blendDst,Ke.blendEquationAlpha,Ke.blendSrcAlpha,Ke.blendDstAlpha,Ke.premultipliedAlpha),O.setFunc(Ke.depthFunc),O.setTest(Ke.depthTest),O.setMask(Ke.depthWrite),M.setMask(Ke.colorWrite);var ur=Ke.stencilWrite;P.setTest(ur),ur&&(P.setMask(Ke.stencilWriteMask),P.setFunc(Ke.stencilFunc,Ke.stencilRef,Ke.stencilFuncMask),P.setOp(Ke.stencilFail,Ke.stencilZFail,Ke.stencilZPass)),Qr(Ke.polygonOffset,Ke.polygonOffsetFactor,Ke.polygonOffsetUnits)}function Or(Ke){ve!==Ke&&(Ke?a.frontFace(2304):a.frontFace(2305),ve=Ke)}function wr(Ke){Ke!==p?(bt(2884),Ke!==Re&&(Ke===v?a.cullFace(1029):Ke===b?a.cullFace(1028):a.cullFace(1032))):Rt(2884),Re=Ke}function mn(Ke){Ke!==Le&&(Se&&a.lineWidth(Ke),Le=Ke)}function Qr(Ke,qt,Wt){Ke?(bt(32823),(Ie!==qt||Ue!==Wt)&&(a.polygonOffset(qt,Wt),Ie=qt,Ue=Wt)):Rt(32823)}function hn(Ke){Ke?bt(3089):Rt(3089)}function Vn(Ke){Ke===void 0&&(Ke=33984+Fe-1),De!==Ke&&(a.activeTexture(Ke),De=Ke)}function vi(Ke,qt){De===null&&Vn();var Wt=Me[De];Wt===void 0&&(Wt={type:void 0,texture:void 0},Me[De]=Wt),(Wt.type!==Ke||Wt.texture!==qt)&&(a.bindTexture(Ke,qt||nt[Ke]),Wt.type=Ke,Wt.texture=qt)}function Jn(){var Ke=Me[De];Ke!==void 0&&Ke.type!==void 0&&(a.bindTexture(Ke.type,null),Ke.type=void 0,Ke.texture=void 0)}function kn(){try{a.compressedTexImage2D.apply(a,arguments)}catch(Ke){console.error("THREE.WebGLState:",Ke)}}function Ne(){try{a.texImage2D.apply(a,arguments)}catch(Ke){console.error("THREE.WebGLState:",Ke)}}function Ce(){try{a.texImage3D.apply(a,arguments)}catch(Ke){console.error("THREE.WebGLState:",Ke)}}function Ft(Ke){Xe.equals(Ke)===!1&&(a.scissor(Ke.x,Ke.y,Ke.z,Ke.w),Xe.copy(Ke))}function Ot(Ke){Ye.equals(Ke)===!1&&(a.viewport(Ke.x,Ke.y,Ke.z,Ke.w),Ye.copy(Ke))}function Ar(){R={},De=null,Me={},N=null,F=null,j=null,q=null,X=null,H=null,he=null,ye=null,ie=null,ee=!1,ve=null,Re=null,Le=null,Ie=null,Ue=null,M.reset(),O.reset(),P.reset()}return{buffers:{color:M,depth:O,stencil:P},enable:bt,disable:Rt,useProgram:Yt,setBlending:lr,setMaterial:br,setFlipSided:Or,setCullFace:wr,setLineWidth:mn,setPolygonOffset:Qr,setScissorTest:hn,activeTexture:Vn,bindTexture:vi,unbindTexture:Jn,compressedTexImage2D:kn,texImage2D:Ne,texImage3D:Ce,scissor:Ft,viewport:Ot,reset:Ar}}function KE(a,t,i,r,n,o,s){var f,w,M=n.isWebGL2,O=n.maxTextures,P=n.maxCubemapSize,R=n.maxTextureSize,N=n.maxSamples,F=new WeakMap,j,q=!1;try{q=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function X(Ne,Ce){return q?new OffscreenCanvas(Ne,Ce):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function H(Ne,Ce,Ft,Ot){var Ar=1;if((Ne.width>Ot||Ne.height>Ot)&&(Ar=Ot/Math.max(Ne.width,Ne.height)),Ar<1||Ce===!0)if(typeof HTMLImageElement!="undefined"&&Ne instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&Ne instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&Ne instanceof ImageBitmap){var Ke=Ce?gr.floorPowerOfTwo:Math.floor,qt=Ke(Ar*Ne.width),Wt=Ke(Ar*Ne.height);j===void 0&&(j=X(qt,Wt));var ur=Ft?X(qt,Wt):j;ur.width=qt,ur.height=Wt;var Ut=ur.getContext("2d");return Ut.drawImage(Ne,0,0,qt,Wt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ne.width+"x"+Ne.height+") to ("+qt+"x"+Wt+")."),ur}else return"data"in Ne&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ne.width+"x"+Ne.height+")."),Ne;return Ne}function he(Ne){return gr.isPowerOfTwo(Ne.width)&&gr.isPowerOfTwo(Ne.height)}function ye(Ne){return M?!1:Ne.wrapS!==Ht||Ne.wrapT!==Ht||Ne.minFilter!==Qt&&Ne.minFilter!==ht}function ie(Ne,Ce){return Ne.generateMipmaps&&Ce&&Ne.minFilter!==Qt&&Ne.minFilter!==ht}function ee(Ne,Ce,Ft,Ot){a.generateMipmap(Ne);var Ar=r.get(Ce);Ar.__maxMipLevel=Math.log(Math.max(Ft,Ot))*Math.LOG2E}function ve(Ne,Ce,Ft){if(M===!1)return Ce;if(Ne!==null){if(a[Ne]!==void 0)return a[Ne];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ne+"'")}var Ot=Ce;return Ce===6403&&(Ft===5126&&(Ot=33326),Ft===5131&&(Ot=33325),Ft===5121&&(Ot=33321)),Ce===6407&&(Ft===5126&&(Ot=34837),Ft===5131&&(Ot=34843),Ft===5121&&(Ot=32849)),Ce===6408&&(Ft===5126&&(Ot=34836),Ft===5131&&(Ot=34842),Ft===5121&&(Ot=32856)),(Ot===33325||Ot===33326||Ot===34842||Ot===34836)&&t.get("EXT_color_buffer_float"),Ot}function Re(Ne){return Ne===Qt||Ne===Vr||Ne===yn?9728:9729}function Le(Ne){var Ce=Ne.target;Ce.removeEventListener("dispose",Le),Ue(Ce),Ce.isVideoTexture&&F.delete(Ce),s.memory.textures--}function Ie(Ne){var Ce=Ne.target;Ce.removeEventListener("dispose",Ie),Fe(Ce),s.memory.textures--}function Ue(Ne){var Ce=r.get(Ne);Ce.__webglInit!==void 0&&(a.deleteTexture(Ce.__webglTexture),r.remove(Ne))}function Fe(Ne){var Ce=r.get(Ne),Ft=r.get(Ne.texture);if(!!Ne){if(Ft.__webglTexture!==void 0&&a.deleteTexture(Ft.__webglTexture),Ne.depthTexture&&Ne.depthTexture.dispose(),Ne.isWebGLCubeRenderTarget)for(var Ot=0;Ot<6;Ot++)a.deleteFramebuffer(Ce.__webglFramebuffer[Ot]),Ce.__webglDepthbuffer&&a.deleteRenderbuffer(Ce.__webglDepthbuffer[Ot]);else a.deleteFramebuffer(Ce.__webglFramebuffer),Ce.__webglDepthbuffer&&a.deleteRenderbuffer(Ce.__webglDepthbuffer),Ce.__webglMultisampledFramebuffer&&a.deleteFramebuffer(Ce.__webglMultisampledFramebuffer),Ce.__webglColorRenderbuffer&&a.deleteRenderbuffer(Ce.__webglColorRenderbuffer),Ce.__webglDepthRenderbuffer&&a.deleteRenderbuffer(Ce.__webglDepthRenderbuffer);r.remove(Ne.texture),r.remove(Ne)}}var Se=0;function We(){Se=0}function Oe(){var Ne=Se;return Ne>=O&&console.warn("THREE.WebGLTextures: Trying to use "+Ne+" texture units while this GPU supports only "+O),Se+=1,Ne}function De(Ne,Ce){var Ft=r.get(Ne);if(Ne.isVideoTexture&&hn(Ne),Ne.version>0&&Ft.__version!==Ne.version){var Ot=Ne.image;if(Ot===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Ot.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Yt(Ft,Ne,Ce);return}}i.activeTexture(33984+Ce),i.bindTexture(3553,Ft.__webglTexture)}function Me(Ne,Ce){var Ft=r.get(Ne);if(Ne.version>0&&Ft.__version!==Ne.version){Yt(Ft,Ne,Ce);return}i.activeTexture(33984+Ce),i.bindTexture(35866,Ft.__webglTexture)}function Xe(Ne,Ce){var Ft=r.get(Ne);if(Ne.version>0&&Ft.__version!==Ne.version){Yt(Ft,Ne,Ce);return}i.activeTexture(33984+Ce),i.bindTexture(32879,Ft.__webglTexture)}function Ye(Ne,Ce){var Ft=r.get(Ne);if(Ne.version>0&&Ft.__version!==Ne.version){at(Ft,Ne,Ce);return}i.activeTexture(33984+Ce),i.bindTexture(34067,Ft.__webglTexture)}var rt=(f={},f[Lr]=10497,f[Ht]=33071,f[Xr]=33648,f),nt=(w={},w[Qt]=9728,w[Vr]=9984,w[yn]=9986,w[ht]=9729,w[St]=9985,w[sr]=9987,w);function bt(Ne,Ce,Ft){Ft?(a.texParameteri(Ne,10242,rt[Ce.wrapS]),a.texParameteri(Ne,10243,rt[Ce.wrapT]),(Ne===32879||Ne===35866)&&a.texParameteri(Ne,32882,rt[Ce.wrapR]),a.texParameteri(Ne,10240,nt[Ce.magFilter]),a.texParameteri(Ne,10241,nt[Ce.minFilter])):(a.texParameteri(Ne,10242,33071),a.texParameteri(Ne,10243,33071),(Ne===32879||Ne===35866)&&a.texParameteri(Ne,32882,33071),(Ce.wrapS!==Ht||Ce.wrapT!==Ht)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),a.texParameteri(Ne,10240,Re(Ce.magFilter)),a.texParameteri(Ne,10241,Re(Ce.minFilter)),Ce.minFilter!==Qt&&Ce.minFilter!==ht&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var Ot=t.get("EXT_texture_filter_anisotropic");if(Ot){if(Ce.type===jr&&t.get("OES_texture_float_linear")===null||Ce.type===dn&&(M||t.get("OES_texture_half_float_linear"))===null)return;(Ce.anisotropy>1||r.get(Ce).__currentAnisotropy)&&(a.texParameterf(Ne,Ot.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Ce.anisotropy,n.getMaxAnisotropy())),r.get(Ce).__currentAnisotropy=Ce.anisotropy)}}function Rt(Ne,Ce){Ne.__webglInit===void 0&&(Ne.__webglInit=!0,Ce.addEventListener("dispose",Le),Ne.__webglTexture=a.createTexture(),s.memory.textures++)}function Yt(Ne,Ce,Ft){var Ot=3553;Ce.isDataTexture2DArray&&(Ot=35866),Ce.isDataTexture3D&&(Ot=32879),Rt(Ne,Ce),i.activeTexture(33984+Ft),i.bindTexture(Ot,Ne.__webglTexture),a.pixelStorei(37440,Ce.flipY),a.pixelStorei(37441,Ce.premultiplyAlpha),a.pixelStorei(3317,Ce.unpackAlignment);var Ar=ye(Ce)&&he(Ce.image)===!1,Ke=H(Ce.image,Ar,!1,R),qt=he(Ke)||M,Wt=o.convert(Ce.format),ur=o.convert(Ce.type),Ut=ve(Ce.internalFormat,Wt,ur);bt(Ot,Ce,qt);var Pt,xr=Ce.mipmaps;if(Ce.isDepthTexture)Ut=6402,M?Ce.type===jr?Ut=36012:Ce.type===$r?Ut=33190:Ce.type===Yi?Ut=35056:Ut=33189:Ce.type===jr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Ce.format===st&&Ut===6402&&Ce.type!==kr&&Ce.type!==$r&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Ce.type=kr,ur=o.convert(Ce.type)),Ce.format===et&&Ut===6402&&(Ut=34041,Ce.type!==Yi&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Ce.type=Yi,ur=o.convert(Ce.type))),i.texImage2D(3553,0,Ut,Ke.width,Ke.height,0,Wt,ur,null);else if(Ce.isDataTexture)if(xr.length>0&&qt){for(var Ir=0,Bn=xr.length;Ir<Bn;Ir++)Pt=xr[Ir],i.texImage2D(3553,Ir,Ut,Pt.width,Pt.height,0,Wt,ur,Pt.data);Ce.generateMipmaps=!1,Ne.__maxMipLevel=xr.length-1}else i.texImage2D(3553,0,Ut,Ke.width,Ke.height,0,Wt,ur,Ke.data),Ne.__maxMipLevel=0;else if(Ce.isCompressedTexture){for(var gn=0,en=xr.length;gn<en;gn++)Pt=xr[gn],Ce.format!==ri&&Ce.format!==Qi?Wt!==null?i.compressedTexImage2D(3553,gn,Ut,Pt.width,Pt.height,0,Pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(3553,gn,Ut,Pt.width,Pt.height,0,Wt,ur,Pt.data);Ne.__maxMipLevel=xr.length-1}else if(Ce.isDataTexture2DArray)i.texImage3D(35866,0,Ut,Ke.width,Ke.height,Ke.depth,0,Wt,ur,Ke.data),Ne.__maxMipLevel=0;else if(Ce.isDataTexture3D)i.texImage3D(32879,0,Ut,Ke.width,Ke.height,Ke.depth,0,Wt,ur,Ke.data),Ne.__maxMipLevel=0;else if(xr.length>0&&qt){for(var on=0,zn=xr.length;on<zn;on++)Pt=xr[on],i.texImage2D(3553,on,Ut,Wt,ur,Pt);Ce.generateMipmaps=!1,Ne.__maxMipLevel=xr.length-1}else i.texImage2D(3553,0,Ut,Wt,ur,Ke),Ne.__maxMipLevel=0;ie(Ce,qt)&&ee(Ot,Ce,Ke.width,Ke.height),Ne.__version=Ce.version,Ce.onUpdate&&Ce.onUpdate(Ce)}function at(Ne,Ce,Ft){if(Ce.image.length===6){Rt(Ne,Ce),i.activeTexture(33984+Ft),i.bindTexture(34067,Ne.__webglTexture),a.pixelStorei(37440,Ce.flipY),a.pixelStorei(37441,Ce.premultiplyAlpha),a.pixelStorei(3317,Ce.unpackAlignment);for(var Ot=Ce&&(Ce.isCompressedTexture||Ce.image[0].isCompressedTexture),Ar=Ce.image[0]&&Ce.image[0].isDataTexture,Ke=[],qt=0;qt<6;qt++)!Ot&&!Ar?Ke[qt]=H(Ce.image[qt],!1,!0,P):Ke[qt]=Ar?Ce.image[qt].image:Ce.image[qt];var Wt=Ke[0],ur=he(Wt)||M,Ut=o.convert(Ce.format),Pt=o.convert(Ce.type),xr=ve(Ce.internalFormat,Ut,Pt);bt(34067,Ce,ur);var Ir;if(Ot){for(var Bn=0;Bn<6;Bn++){Ir=Ke[Bn].mipmaps;for(var gn=0;gn<Ir.length;gn++){var en=Ir[gn];Ce.format!==ri&&Ce.format!==Qi?Ut!==null?i.compressedTexImage2D(34069+Bn,gn,xr,en.width,en.height,0,en.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(34069+Bn,gn,xr,en.width,en.height,0,Ut,Pt,en.data)}}Ne.__maxMipLevel=Ir.length-1}else{Ir=Ce.mipmaps;for(var on=0;on<6;on++)if(Ar){i.texImage2D(34069+on,0,xr,Ke[on].width,Ke[on].height,0,Ut,Pt,Ke[on].data);for(var zn=0;zn<Ir.length;zn++){var fl=Ir[zn],Do=fl.image[on].image;i.texImage2D(34069+on,zn+1,xr,Do.width,Do.height,0,Ut,Pt,Do.data)}}else{i.texImage2D(34069+on,0,xr,Ut,Pt,Ke[on]);for(var ya=0;ya<Ir.length;ya++){var to=Ir[ya];i.texImage2D(34069+on,ya+1,xr,Ut,Pt,to.image[on])}}Ne.__maxMipLevel=Ir.length}ie(Ce,ur)&&ee(34067,Ce,Wt.width,Wt.height),Ne.__version=Ce.version,Ce.onUpdate&&Ce.onUpdate(Ce)}}function ar(Ne,Ce,Ft,Ot){var Ar=o.convert(Ce.texture.format),Ke=o.convert(Ce.texture.type),qt=ve(Ce.texture.internalFormat,Ar,Ke);i.texImage2D(Ot,0,qt,Ce.width,Ce.height,0,Ar,Ke,null),a.bindFramebuffer(36160,Ne),a.framebufferTexture2D(36160,Ft,Ot,r.get(Ce.texture).__webglTexture,0),a.bindFramebuffer(36160,null)}function kt(Ne,Ce,Ft){if(a.bindRenderbuffer(36161,Ne),Ce.depthBuffer&&!Ce.stencilBuffer){var Ot=33189;if(Ft){var Ar=Ce.depthTexture;Ar&&Ar.isDepthTexture&&(Ar.type===jr?Ot=36012:Ar.type===$r&&(Ot=33190));var Ke=Qr(Ce);a.renderbufferStorageMultisample(36161,Ke,Ot,Ce.width,Ce.height)}else a.renderbufferStorage(36161,Ot,Ce.width,Ce.height);a.framebufferRenderbuffer(36160,36096,36161,Ne)}else if(Ce.depthBuffer&&Ce.stencilBuffer){if(Ft){var qt=Qr(Ce);a.renderbufferStorageMultisample(36161,qt,35056,Ce.width,Ce.height)}else a.renderbufferStorage(36161,34041,Ce.width,Ce.height);a.framebufferRenderbuffer(36160,33306,36161,Ne)}else{var Wt=o.convert(Ce.texture.format),ur=o.convert(Ce.texture.type),Ut=ve(Ce.texture.internalFormat,Wt,ur);if(Ft){var Pt=Qr(Ce);a.renderbufferStorageMultisample(36161,Pt,Ut,Ce.width,Ce.height)}else a.renderbufferStorage(36161,Ut,Ce.width,Ce.height)}a.bindRenderbuffer(36161,null)}function lr(Ne,Ce){var Ft=Ce&&Ce.isWebGLCubeRenderTarget;if(Ft)throw new Error("Depth Texture with cube render targets is not supported");if(a.bindFramebuffer(36160,Ne),!(Ce.depthTexture&&Ce.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Ce.depthTexture).__webglTexture||Ce.depthTexture.image.width!==Ce.width||Ce.depthTexture.image.height!==Ce.height)&&(Ce.depthTexture.image.width=Ce.width,Ce.depthTexture.image.height=Ce.height,Ce.depthTexture.needsUpdate=!0),De(Ce.depthTexture,0);var Ot=r.get(Ce.depthTexture).__webglTexture;if(Ce.depthTexture.format===st)a.framebufferTexture2D(36160,36096,3553,Ot,0);else if(Ce.depthTexture.format===et)a.framebufferTexture2D(36160,33306,3553,Ot,0);else throw new Error("Unknown depthTexture format")}function br(Ne){var Ce=r.get(Ne),Ft=Ne.isWebGLCubeRenderTarget===!0;if(Ne.depthTexture){if(Ft)throw new Error("target.depthTexture not supported in Cube render targets");lr(Ce.__webglFramebuffer,Ne)}else if(Ft){Ce.__webglDepthbuffer=[];for(var Ot=0;Ot<6;Ot++)a.bindFramebuffer(36160,Ce.__webglFramebuffer[Ot]),Ce.__webglDepthbuffer[Ot]=a.createRenderbuffer(),kt(Ce.__webglDepthbuffer[Ot],Ne,!1)}else a.bindFramebuffer(36160,Ce.__webglFramebuffer),Ce.__webglDepthbuffer=a.createRenderbuffer(),kt(Ce.__webglDepthbuffer,Ne,!1);a.bindFramebuffer(36160,null)}function Or(Ne){var Ce=r.get(Ne),Ft=r.get(Ne.texture);Ne.addEventListener("dispose",Ie),Ft.__webglTexture=a.createTexture(),s.memory.textures++;var Ot=Ne.isWebGLCubeRenderTarget===!0,Ar=Ne.isWebGLMultisampleRenderTarget===!0,Ke=he(Ne)||M;if(M&&Ne.texture.format===Qi&&(Ne.texture.type===jr||Ne.texture.type===dn)&&(Ne.texture.format=ri,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Ot){Ce.__webglFramebuffer=[];for(var qt=0;qt<6;qt++)Ce.__webglFramebuffer[qt]=a.createFramebuffer()}else if(Ce.__webglFramebuffer=a.createFramebuffer(),Ar)if(M){Ce.__webglMultisampledFramebuffer=a.createFramebuffer(),Ce.__webglColorRenderbuffer=a.createRenderbuffer(),a.bindRenderbuffer(36161,Ce.__webglColorRenderbuffer);var Wt=o.convert(Ne.texture.format),ur=o.convert(Ne.texture.type),Ut=ve(Ne.texture.internalFormat,Wt,ur),Pt=Qr(Ne);a.renderbufferStorageMultisample(36161,Pt,Ut,Ne.width,Ne.height),a.bindFramebuffer(36160,Ce.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(36160,36064,36161,Ce.__webglColorRenderbuffer),a.bindRenderbuffer(36161,null),Ne.depthBuffer&&(Ce.__webglDepthRenderbuffer=a.createRenderbuffer(),kt(Ce.__webglDepthRenderbuffer,Ne,!0)),a.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Ot){i.bindTexture(34067,Ft.__webglTexture),bt(34067,Ne.texture,Ke);for(var xr=0;xr<6;xr++)ar(Ce.__webglFramebuffer[xr],Ne,36064,34069+xr);ie(Ne.texture,Ke)&&ee(34067,Ne.texture,Ne.width,Ne.height),i.bindTexture(34067,null)}else i.bindTexture(3553,Ft.__webglTexture),bt(3553,Ne.texture,Ke),ar(Ce.__webglFramebuffer,Ne,36064,3553),ie(Ne.texture,Ke)&&ee(3553,Ne.texture,Ne.width,Ne.height),i.bindTexture(3553,null);Ne.depthBuffer&&br(Ne)}function wr(Ne){var Ce=Ne.texture,Ft=he(Ne)||M;if(ie(Ce,Ft)){var Ot=Ne.isWebGLCubeRenderTarget?34067:3553,Ar=r.get(Ce).__webglTexture;i.bindTexture(Ot,Ar),ee(Ot,Ce,Ne.width,Ne.height),i.bindTexture(Ot,null)}}function mn(Ne){if(Ne.isWebGLMultisampleRenderTarget)if(M){var Ce=r.get(Ne);a.bindFramebuffer(36008,Ce.__webglMultisampledFramebuffer),a.bindFramebuffer(36009,Ce.__webglFramebuffer);var Ft=Ne.width,Ot=Ne.height,Ar=16384;Ne.depthBuffer&&(Ar|=256),Ne.stencilBuffer&&(Ar|=1024),a.blitFramebuffer(0,0,Ft,Ot,0,0,Ft,Ot,Ar,9728),a.bindFramebuffer(36160,Ce.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Qr(Ne){return M&&Ne.isWebGLMultisampleRenderTarget?Math.min(N,Ne.samples):0}function hn(Ne){var Ce=s.render.frame;F.get(Ne)!==Ce&&(F.set(Ne,Ce),Ne.update())}var Vn=!1,vi=!1;function Jn(Ne,Ce){Ne&&Ne.isWebGLRenderTarget&&(Vn===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Vn=!0),Ne=Ne.texture),De(Ne,Ce)}function kn(Ne,Ce){Ne&&Ne.isWebGLCubeRenderTarget&&(vi===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),vi=!0),Ne=Ne.texture),Ye(Ne,Ce)}this.allocateTextureUnit=Oe,this.resetTextureUnits=We,this.setTexture2D=De,this.setTexture2DArray=Me,this.setTexture3D=Xe,this.setTextureCube=Ye,this.setupRenderTarget=Or,this.updateRenderTargetMipmap=wr,this.updateMultisampleRenderTarget=mn,this.safeSetTexture2D=Jn,this.safeSetTextureCube=kn}function yv(a,t,i){var r=i.isWebGL2;function n(o){var s;if(o===cr)return 5121;if(o===Ri)return 32819;if(o===si)return 32820;if(o===tn)return 33635;if(o===Cr)return 5120;if(o===Zr)return 5122;if(o===kr)return 5123;if(o===jn)return 5124;if(o===$r)return 5125;if(o===jr)return 5126;if(o===dn)return r?5131:(s=t.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(o===ti)return 6406;if(o===Qi)return 6407;if(o===ri)return 6408;if(o===pe)return 6409;if(o===_e)return 6410;if(o===st)return 6402;if(o===et)return 34041;if(o===gt)return 6403;if(o===Lt)return 36244;if(o===Xt)return 33319;if(o===Dt)return 33320;if(o===mt)return 36248;if(o===Jt)return 36249;if(o===tr||o===vr||o===An||o===Ur)if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(o===tr)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===vr)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===An)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===Ur)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===Tr||o===Yr||o===Sn||o===qn)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(o===Tr)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===Yr)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===Sn)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===qn)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===mr)return s=t.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if((o===Pr||o===Dr)&&(s=t.get("WEBGL_compressed_texture_etc"),s!==null)){if(o===Pr)return s.COMPRESSED_RGB8_ETC2;if(o===Dr)return s.COMPRESSED_RGBA8_ETC2_EAC}if(o===Ai||o===pn||o===bn||o===k||o===G||o===Z||o===re||o===Ae||o===He||o===it||o===At||o===yt||o===Ze||o===ut||o===zt||o===Zt||o===nr||o===Sr||o===yr||o===hr||o===un||o===On||o===Un||o===_n||o===Qn||o===li||o===ui||o===ci)return s=t.get("WEBGL_compressed_texture_astc"),s!==null?o:null;if(o===wt)return s=t.get("EXT_texture_compression_bptc"),s!==null?o:null;if(o===Yi)return r?34042:(s=t.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:n}}function Ka(){$t.call(this),this.type="Group"}Ka.prototype=Object.assign(Object.create($t.prototype),{constructor:Ka,isGroup:!0});function eu(a){a===void 0&&(a=[]),Fn.call(this),this.cameras=a}eu.prototype=Object.assign(Object.create(Fn.prototype),{constructor:eu,isArrayCamera:!0});var Av=new be,bv=new be;function JE(a,t,i){Av.setFromMatrixPosition(t.matrixWorld),bv.setFromMatrixPosition(i.matrixWorld);var r=Av.distanceTo(bv),n=t.projectionMatrix.elements,o=i.projectionMatrix.elements,s=n[14]/(n[10]-1),f=n[14]/(n[10]+1),w=(n[9]+1)/n[5],M=(n[9]-1)/n[5],O=(n[8]-1)/n[0],P=(o[8]+1)/o[0],R=s*O,N=s*P,F=r/(-O+P),j=F*-O;t.matrixWorld.decompose(a.position,a.quaternion,a.scale),a.translateX(j),a.translateZ(F),a.matrixWorld.compose(a.position,a.quaternion,a.scale),a.matrixWorldInverse.getInverse(a.matrixWorld);var q=s+F,X=f+F,H=R-j,he=N+(r-j),ye=w*f/X*q,ie=M*f/X*q;a.projectionMatrix.makePerspective(H,he,ye,ie,q,X)}function Ev(a){var t,i,r=this,n=null,o=null,s=null,f=[],w=new Br,M=new Br,O=1,P="local-floor";typeof window!="undefined"&&"VRFrameData"in window&&(o=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",ye,!1));var R=new Br,N=new ii,F=new be,j=new Fn;j.viewport=new cn,j.layers.enable(1);var q=new Fn;q.viewport=new cn,q.layers.enable(2);var X=new eu([j,q]);X.layers.enable(1),X.layers.enable(2);var H=new xt,he;function ye(){var Ue=r.isPresenting=n!==null&&n.isPresenting===!0;if(Ue){var Fe=n.getEyeParameters("left");t=2*Fe.renderWidth*O,i=Fe.renderHeight*O,he=a.getPixelRatio(),a.getSize(H),a.setDrawingBufferSize(t,i,1),j.viewport.set(0,0,t/2,i),q.viewport.set(t/2,0,t/2,i),Ie.start(),r.dispatchEvent({type:"sessionstart"})}else r.enabled&&a.setDrawingBufferSize(H.width,H.height,he),Ie.stop(),r.dispatchEvent({type:"sessionend"})}var ie=[],ee=[];function ve(Ue){for(var Fe=navigator.getGamepads&&navigator.getGamepads(),Se=0,We=Fe.length;Se<We;Se++){var Oe=Fe[Se];if(Oe&&(Oe.id==="Daydream Controller"||Oe.id==="Gear VR Controller"||Oe.id==="Oculus Go Controller"||Oe.id==="OpenVR Gamepad"||Oe.id.startsWith("Oculus Touch")||Oe.id.startsWith("HTC Vive Focus")||Oe.id.startsWith("Spatial Controller"))){var De=Oe.hand;if(Ue===0&&(De===""||De==="right")||Ue===1&&De==="left")return Oe}}}function Re(){for(var Ue=0;Ue<f.length;Ue++){var Fe=f[Ue],Se=ve(Ue);if(Se!==void 0&&Se.pose!==void 0){if(Se.pose===null)return;var We=Se.pose;We.hasPosition===!1&&Fe.position.set(.2,-.6,-.05),We.position!==null&&Fe.position.fromArray(We.position),We.orientation!==null&&Fe.quaternion.fromArray(We.orientation),Fe.matrix.compose(Fe.position,Fe.quaternion,Fe.scale),Fe.matrix.premultiply(w),Fe.matrix.decompose(Fe.position,Fe.quaternion,Fe.scale),Fe.matrixWorldNeedsUpdate=!0,Fe.visible=!0;var Oe=Se.id==="Daydream Controller"?0:1;ie[Ue]===void 0&&(ie[Ue]=!1),ie[Ue]!==Se.buttons[Oe].pressed&&(ie[Ue]=Se.buttons[Oe].pressed,ie[Ue]===!0?Fe.dispatchEvent({type:"selectstart"}):(Fe.dispatchEvent({type:"selectend"}),Fe.dispatchEvent({type:"select"}))),Oe=2,ee[Ue]===void 0&&(ee[Ue]=!1),Se.buttons[Oe]!==void 0&&ee[Ue]!==Se.buttons[Oe].pressed&&(ee[Ue]=Se.buttons[Oe].pressed,ee[Ue]===!0?Fe.dispatchEvent({type:"squeezestart"}):(Fe.dispatchEvent({type:"squeezeend"}),Fe.dispatchEvent({type:"squeeze"})))}else Fe.visible=!1}}function Le(Ue,Fe){Fe!==null&&Fe.length===4&&Ue.set(Fe[0]*t,Fe[1]*i,Fe[2]*t,Fe[3]*i)}this.enabled=!1,this.getController=function(Ue){var Fe=f[Ue];return Fe===void 0&&(Fe=new Ka,Fe.matrixAutoUpdate=!1,Fe.visible=!1,f[Ue]=Fe),Fe},this.getDevice=function(){return n},this.setDevice=function(Ue){Ue!==void 0&&(n=Ue),Ie.setContext(Ue)},this.setFramebufferScaleFactor=function(Ue){O=Ue},this.setReferenceSpaceType=function(Ue){P=Ue},this.setPoseTarget=function(Ue){Ue!==void 0&&(s=Ue)},this.getCamera=function(Ue){var Fe=P==="local-floor"?1.6:0;if(n.depthNear=Ue.near,n.depthFar=Ue.far,n.getFrameData(o),P==="local-floor"){var Se=n.stageParameters;Se?w.fromArray(Se.sittingToStandingTransform):w.makeTranslation(0,Fe,0)}var We=o.pose,Oe=s!==null?s:Ue;Oe.matrix.copy(w),Oe.matrix.decompose(Oe.position,Oe.quaternion,Oe.scale),We.orientation!==null&&(N.fromArray(We.orientation),Oe.quaternion.multiply(N)),We.position!==null&&(N.setFromRotationMatrix(w),F.fromArray(We.position),F.applyQuaternion(N),Oe.position.add(F)),Oe.updateMatrixWorld();for(var De=Oe.children,Me=0,Xe=De.length;Me<Xe;Me++)De[Me].updateMatrixWorld(!0);j.near=Ue.near,q.near=Ue.near,j.far=Ue.far,q.far=Ue.far,j.matrixWorldInverse.fromArray(o.leftViewMatrix),q.matrixWorldInverse.fromArray(o.rightViewMatrix),M.getInverse(w),P==="local-floor"&&(j.matrixWorldInverse.multiply(M),q.matrixWorldInverse.multiply(M));var Ye=Oe.parent;Ye!==null&&(R.getInverse(Ye.matrixWorld),j.matrixWorldInverse.multiply(R),q.matrixWorldInverse.multiply(R)),j.matrixWorld.getInverse(j.matrixWorldInverse),q.matrixWorld.getInverse(q.matrixWorldInverse),j.projectionMatrix.fromArray(o.leftProjectionMatrix),q.projectionMatrix.fromArray(o.rightProjectionMatrix),JE(X,j,q);var rt=n.getLayers();if(rt.length){var nt=rt[0];Le(j.viewport,nt.leftBounds),Le(q.viewport,nt.rightBounds)}return Re(),X},this.getStandingMatrix=function(){return w},this.isPresenting=!1;var Ie=new Sf;this.setAnimationLoop=function(Ue){Ie.setAnimationLoop(Ue),this.isPresenting&&Ie.start()},this.submitFrame=function(){this.isPresenting&&n.submitFrame()},this.dispose=function(){typeof window!="undefined"&&window.removeEventListener("vrdisplaypresentchange",ye)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}Object.assign(Ev.prototype,xa.prototype);function tu(){this._targetRay=null,this._grip=null,this._hand=null}Object.assign(tu.prototype,{constructor:tu,getHandSpace:function(){return this._hand===null&&(this._hand=new Ka,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Ka,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Ka,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(t,i,r){var n=null,o=null,s=null,f=this._targetRay,w=this._grip,M=this._hand;if(t&&i.session.visibilityState!=="visible-blurred")if(M&&t.hand){s=!0;for(var O=ky(t.hand.values()),P;!(P=O()).done;){var R=P.value,N=i.getJointPose(R,r);if(M.joints[R.jointName]===void 0){var F=new Ka;F.matrixAutoUpdate=!1,F.visible=!1,M.joints[R.jointName]=F,M.add(F)}var j=M.joints[R.jointName];N!==null&&(j.matrix.fromArray(N.transform.matrix),j.matrix.decompose(j.position,j.rotation,j.scale),j.jointRadius=N.radius),j.visible=N!==null}var q=M.joints["index-finger-tip"],X=M.joints["thumb-tip"],H=q.position.distanceTo(X.position),he=.02,ye=.005;M.inputState.pinching&&H>he+ye?(M.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!M.inputState.pinching&&H<=he-ye&&(M.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else f!==null&&(n=i.getPose(t.targetRaySpace,r),n!==null&&(f.matrix.fromArray(n.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale))),w!==null&&t.gripSpace&&(o=i.getPose(t.gripSpace,r),o!==null&&(w.matrix.fromArray(o.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale)));return f!==null&&(f.visible=n!==null),w!==null&&(w.visible=o!==null),M!==null&&(M.visible=s!==null),this}});function wv(a,t){var i=this,r=null,n=1,o=null,s="local-floor",f=null,w=null,M=[],O=new Map,P=[],R,N=new Fn;N.layers.enable(1),N.viewport=new cn;var F=new Fn;F.layers.enable(2),F.viewport=new cn;var j=[N,F],q=new eu;q.layers.enable(1),q.layers.enable(2);var X=null,H=null;this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.getCameraPose=function(){return f},this.getController=function(Se){var We=M[Se];return We===void 0&&(We=new tu,M[Se]=We),We.getTargetRaySpace()},this.getControllerGrip=function(Se){var We=M[Se];return We===void 0&&(We=new tu,M[Se]=We),We.getGripSpace()},this.getHand=function(Se){var We=M[Se];return We===void 0&&(We=new tu,M[Se]=We),We.getHandSpace()};function he(Se){var We=O.get(Se.inputSource);We&&We.dispatchEvent({type:Se.type,data:Se.inputSource})}function ye(){O.forEach(function(Se,We){Se.disconnect(We)}),O.clear(),X=null,H=null,a.setFramebuffer(null),a.setRenderTarget(a.getRenderTarget()),Fe.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Se){n=Se,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Se){s=Se,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return r},this.setSession=function(){var Se=Fy(regeneratorRuntime.mark(function We(Oe){var De,Me;return regeneratorRuntime.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(r=Oe,r===null){Ye.next=24;break}if(r.addEventListener("select",he),r.addEventListener("selectstart",he),r.addEventListener("selectend",he),r.addEventListener("squeeze",he),r.addEventListener("squeezestart",he),r.addEventListener("squeezeend",he),r.addEventListener("end",ye),r.addEventListener("inputsourceschange",ie),De=t.getContextAttributes(),De.xrCompatible===!0){Ye.next=14;break}return Ye.next=14,t.makeXRCompatible();case 14:return Me={antialias:De.antialias,alpha:De.alpha,depth:De.depth,stencil:De.stencil,framebufferScaleFactor:n},R=new XRWebGLLayer(r,t,Me),window.XRWebGLBinding&&this.layersEnabled?this.addLayer(R):r.updateRenderState({baseLayer:R}),Ye.next=19,r.requestReferenceSpace(s);case 19:o=Ye.sent,Fe.setContext(r),Fe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"});case 24:case"end":return Ye.stop()}},We,this)}));return function(We){return Se.apply(this,arguments)}}(),this.addLayer=function(Se){!window.XRWebGLBinding||!this.layersEnabled||!r||(P.push(Se),r.updateRenderState({layers:P}))},this.removeLayer=function(Se){!window.XRWebGLBinding||!this.layersEnabled||!r||(P.splice(P.indexOf(Se),1),r.updateRenderState({layers:P}))};function ie(Se){for(var We=r.inputSources,Oe=0;Oe<M.length;Oe++)O.set(We[Oe],M[Oe]);for(var De=0;De<Se.removed.length;De++){var Me=Se.removed[De],Xe=O.get(Me);Xe&&(Xe.dispatchEvent({type:"disconnected",data:Me}),O.delete(Me))}for(var Ye=0;Ye<Se.added.length;Ye++){var rt=Se.added[Ye],nt=O.get(rt);nt&&nt.dispatchEvent({type:"connected",data:rt})}}var ee=new be,ve=new be;function Re(Se,We,Oe){ee.setFromMatrixPosition(We.matrixWorld),ve.setFromMatrixPosition(Oe.matrixWorld);var De=ee.distanceTo(ve),Me=We.projectionMatrix.elements,Xe=Oe.projectionMatrix.elements,Ye=Me[14]/(Me[10]-1),rt=Me[14]/(Me[10]+1),nt=(Me[9]+1)/Me[5],bt=(Me[9]-1)/Me[5],Rt=(Me[8]-1)/Me[0],Yt=(Xe[8]+1)/Xe[0],at=Ye*Rt,ar=Ye*Yt,kt=De/(-Rt+Yt),lr=kt*-Rt;We.matrixWorld.decompose(Se.position,Se.quaternion,Se.scale),Se.translateX(lr),Se.translateZ(kt),Se.matrixWorld.compose(Se.position,Se.quaternion,Se.scale),Se.matrixWorldInverse.copy(Se.matrixWorld).invert();var br=Ye+kt,Or=rt+kt,wr=at-lr,mn=ar+(De-lr),Qr=nt*rt/Or*br,hn=bt*rt/Or*br;Se.projectionMatrix.makePerspective(wr,mn,Qr,hn,br,Or)}function Le(Se,We){We===null?Se.matrixWorld.copy(Se.matrix):Se.matrixWorld.multiplyMatrices(We.matrixWorld,Se.matrix),Se.matrixWorldInverse.copy(Se.matrixWorld).invert()}this.setPoseTarget=function(Se){Se!==void 0&&(w=Se)},this.getCamera=function(Se){q.near=F.near=N.near=Se.near,q.far=F.far=N.far=Se.far,(X!==q.near||H!==q.far)&&(r.updateRenderState({depthNear:q.near,depthFar:q.far}),X=q.near,H=q.far);var We=Se.parent,Oe=q.cameras,De=w||Se;Le(q,We);for(var Me=0;Me<Oe.length;Me++)Le(Oe[Me],We);De.matrixWorld.copy(q.matrixWorld);for(var Xe=De.children,Ye=0,rt=Xe.length;Ye<rt;Ye++)Xe[Ye].updateMatrixWorld(!0);return Oe.length===2?Re(q,N,F):q.projectionMatrix.copy(N.projectionMatrix),q};var Ie=null;function Ue(Se,We){if(f=We.getViewerPose(o),f!==null){var Oe=f.views;a.setFramebuffer(R.framebuffer);var De=!1;Oe.length!==q.cameras.length&&(q.cameras.length=0,De=!0);for(var Me=0;Me<Oe.length;Me++){var Xe=Oe[Me],Ye=R.getViewport(Xe),rt=j[Me];rt.matrix.fromArray(Xe.transform.matrix),rt.projectionMatrix.fromArray(Xe.projectionMatrix),rt.viewport.set(Ye.x,Ye.y,Ye.width,Ye.height),Me===0&&q.matrix.copy(rt.matrix),De===!0&&q.cameras.push(rt)}}for(var nt=r.inputSources,bt=0;bt<M.length;bt++){var Rt=M[bt],Yt=nt[bt];Rt.update(Yt,We,o)}Ie&&Ie(Se,We)}var Fe=new Sf;Fe.setAnimationLoop(Ue),this.setAnimationLoop=function(Se){Ie=Se},this.dispose=function(){}}Object.assign(wv.prototype,xa.prototype);function ZE(a){function t(X,H){X.fogColor.value.copy(H.color),H.isFog?(X.fogNear.value=H.near,X.fogFar.value=H.far):H.isFogExp2&&(X.fogDensity.value=H.density)}function i(X,H,he,ye){H.isMeshBasicMaterial?r(X,H):H.isMeshLambertMaterial?(r(X,H),w(X,H)):H.isMeshToonMaterial?(r(X,H),O(X,H)):H.isMeshPhongMaterial?(r(X,H),M(X,H)):H.isMeshStandardMaterial?(r(X,H),H.isMeshPhysicalMaterial?R(X,H):P(X,H)):H.isMeshMatcapMaterial?(r(X,H),N(X,H)):H.isMeshDepthMaterial?(r(X,H),F(X,H)):H.isMeshDistanceMaterial?(r(X,H),j(X,H)):H.isMeshNormalMaterial?(r(X,H),q(X,H)):H.isLineBasicMaterial?(n(X,H),H.isLineDashedMaterial&&o(X,H)):H.isPointsMaterial?s(X,H,he,ye):H.isSpriteMaterial?f(X,H):H.isShadowMaterial?(X.color.value.copy(H.color),X.opacity.value=H.opacity):H.isShaderMaterial&&(H.uniformsNeedUpdate=!1)}function r(X,H){X.opacity.value=H.opacity,H.color&&X.diffuse.value.copy(H.color),H.emissive&&X.emissive.value.copy(H.emissive).multiplyScalar(H.emissiveIntensity),H.map&&(X.map.value=H.map),H.alphaMap&&(X.alphaMap.value=H.alphaMap),H.specularMap&&(X.specularMap.value=H.specularMap);var he=a.get(H).envMap;if(he){X.envMap.value=he,X.flipEnvMap.value=he.isCubeTexture&&he._needsFlipEnvMap?-1:1,X.reflectivity.value=H.reflectivity,X.refractionRatio.value=H.refractionRatio;var ye=a.get(he).__maxMipLevel;ye!==void 0&&(X.maxMipLevel.value=ye)}H.lightMap&&(X.lightMap.value=H.lightMap,X.lightMapIntensity.value=H.lightMapIntensity),H.aoMap&&(X.aoMap.value=H.aoMap,X.aoMapIntensity.value=H.aoMapIntensity);var ie;H.map?ie=H.map:H.specularMap?ie=H.specularMap:H.displacementMap?ie=H.displacementMap:H.normalMap?ie=H.normalMap:H.bumpMap?ie=H.bumpMap:H.roughnessMap?ie=H.roughnessMap:H.metalnessMap?ie=H.metalnessMap:H.alphaMap?ie=H.alphaMap:H.emissiveMap?ie=H.emissiveMap:H.clearcoatMap?ie=H.clearcoatMap:H.clearcoatNormalMap?ie=H.clearcoatNormalMap:H.clearcoatRoughnessMap&&(ie=H.clearcoatRoughnessMap),ie!==void 0&&(ie.isWebGLRenderTarget&&(ie=ie.texture),ie.matrixAutoUpdate===!0&&ie.updateMatrix(),X.uvTransform.value.copy(ie.matrix));var ee;H.aoMap?ee=H.aoMap:H.lightMap&&(ee=H.lightMap),ee!==void 0&&(ee.isWebGLRenderTarget&&(ee=ee.texture),ee.matrixAutoUpdate===!0&&ee.updateMatrix(),X.uv2Transform.value.copy(ee.matrix))}function n(X,H){X.diffuse.value.copy(H.color),X.opacity.value=H.opacity}function o(X,H){X.dashSize.value=H.dashSize,X.totalSize.value=H.dashSize+H.gapSize,X.scale.value=H.scale}function s(X,H,he,ye){X.diffuse.value.copy(H.color),X.opacity.value=H.opacity,X.size.value=H.size*he,X.scale.value=ye*.5,H.map&&(X.map.value=H.map),H.alphaMap&&(X.alphaMap.value=H.alphaMap);var ie;H.map?ie=H.map:H.alphaMap&&(ie=H.alphaMap),ie!==void 0&&(ie.matrixAutoUpdate===!0&&ie.updateMatrix(),X.uvTransform.value.copy(ie.matrix))}function f(X,H){X.diffuse.value.copy(H.color),X.opacity.value=H.opacity,X.rotation.value=H.rotation,H.map&&(X.map.value=H.map),H.alphaMap&&(X.alphaMap.value=H.alphaMap);var he;H.map?he=H.map:H.alphaMap&&(he=H.alphaMap),he!==void 0&&(he.matrixAutoUpdate===!0&&he.updateMatrix(),X.uvTransform.value.copy(he.matrix))}function w(X,H){H.emissiveMap&&(X.emissiveMap.value=H.emissiveMap)}function M(X,H){X.specular.value.copy(H.specular),X.shininess.value=Math.max(H.shininess,1e-4),H.emissiveMap&&(X.emissiveMap.value=H.emissiveMap),H.bumpMap&&(X.bumpMap.value=H.bumpMap,X.bumpScale.value=H.bumpScale,H.side===C&&(X.bumpScale.value*=-1)),H.normalMap&&(X.normalMap.value=H.normalMap,X.normalScale.value.copy(H.normalScale),H.side===C&&X.normalScale.value.negate()),H.displacementMap&&(X.displacementMap.value=H.displacementMap,X.displacementScale.value=H.displacementScale,X.displacementBias.value=H.displacementBias)}function O(X,H){H.gradientMap&&(X.gradientMap.value=H.gradientMap),H.emissiveMap&&(X.emissiveMap.value=H.emissiveMap),H.bumpMap&&(X.bumpMap.value=H.bumpMap,X.bumpScale.value=H.bumpScale,H.side===C&&(X.bumpScale.value*=-1)),H.normalMap&&(X.normalMap.value=H.normalMap,X.normalScale.value.copy(H.normalScale),H.side===C&&X.normalScale.value.negate()),H.displacementMap&&(X.displacementMap.value=H.displacementMap,X.displacementScale.value=H.displacementScale,X.displacementBias.value=H.displacementBias)}function P(X,H){X.roughness.value=H.roughness,X.metalness.value=H.metalness,H.roughnessMap&&(X.roughnessMap.value=H.roughnessMap),H.metalnessMap&&(X.metalnessMap.value=H.metalnessMap),H.emissiveMap&&(X.emissiveMap.value=H.emissiveMap),H.bumpMap&&(X.bumpMap.value=H.bumpMap,X.bumpScale.value=H.bumpScale,H.side===C&&(X.bumpScale.value*=-1)),H.normalMap&&(X.normalMap.value=H.normalMap,X.normalScale.value.copy(H.normalScale),H.side===C&&X.normalScale.value.negate()),H.displacementMap&&(X.displacementMap.value=H.displacementMap,X.displacementScale.value=H.displacementScale,X.displacementBias.value=H.displacementBias);var he=a.get(H).envMap;he&&(X.envMapIntensity.value=H.envMapIntensity)}function R(X,H){P(X,H),X.reflectivity.value=H.reflectivity,X.clearcoat.value=H.clearcoat,X.clearcoatRoughness.value=H.clearcoatRoughness,H.sheen&&X.sheen.value.copy(H.sheen),H.clearcoatMap&&(X.clearcoatMap.value=H.clearcoatMap),H.clearcoatRoughnessMap&&(X.clearcoatRoughnessMap.value=H.clearcoatRoughnessMap),H.clearcoatNormalMap&&(X.clearcoatNormalScale.value.copy(H.clearcoatNormalScale),X.clearcoatNormalMap.value=H.clearcoatNormalMap,H.side===C&&X.clearcoatNormalScale.value.negate()),X.transmission.value=H.transmission,H.transmissionMap&&(X.transmissionMap.value=H.transmissionMap)}function N(X,H){H.matcap&&(X.matcap.value=H.matcap),H.bumpMap&&(X.bumpMap.value=H.bumpMap,X.bumpScale.value=H.bumpScale,H.side===C&&(X.bumpScale.value*=-1)),H.normalMap&&(X.normalMap.value=H.normalMap,X.normalScale.value.copy(H.normalScale),H.side===C&&X.normalScale.value.negate()),H.displacementMap&&(X.displacementMap.value=H.displacementMap,X.displacementScale.value=H.displacementScale,X.displacementBias.value=H.displacementBias)}function F(X,H){H.displacementMap&&(X.displacementMap.value=H.displacementMap,X.displacementScale.value=H.displacementScale,X.displacementBias.value=H.displacementBias)}function j(X,H){H.displacementMap&&(X.displacementMap.value=H.displacementMap,X.displacementScale.value=H.displacementScale,X.displacementBias.value=H.displacementBias),X.referencePosition.value.copy(H.referencePosition),X.nearDistance.value=H.nearDistance,X.farDistance.value=H.farDistance}function q(X,H){H.bumpMap&&(X.bumpMap.value=H.bumpMap,X.bumpScale.value=H.bumpScale,H.side===C&&(X.bumpScale.value*=-1)),H.normalMap&&(X.normalMap.value=H.normalMap,X.normalScale.value.copy(H.normalScale),H.side===C&&X.normalScale.value.negate()),H.displacementMap&&(X.displacementMap.value=H.displacementMap,X.displacementScale.value=H.displacementScale,X.displacementBias.value=H.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function $E(){var a=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return a.style.display="block",a}function ru(a){a=a||{};var t=a.canvas!==void 0?a.canvas:$E(),i=a.context!==void 0?a.context:null,r=a.alpha!==void 0?a.alpha:!1,n=a.depth!==void 0?a.depth:!0,o=a.stencil!==void 0?a.stencil:!0,s=a.antialias!==void 0?a.antialias:!1,f=a.premultipliedAlpha!==void 0?a.premultipliedAlpha:!0,w=a.preserveDrawingBuffer!==void 0?a.preserveDrawingBuffer:!1,M=a.powerPreference!==void 0?a.powerPreference:"default",O=a.failIfMajorPerformanceCaveat!==void 0?a.failIfMajorPerformanceCaveat:!1,P=null,R=null,N=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=bi,this.physicallyCorrectLights=!1,this.toneMapping=ke,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var F=this,j=!1,q=null,X=0,H=0,he=null,ye=null,ie=-1,ee=null,ve=new cn,Re=new cn,Le=null,Ie=t.width,Ue=t.height,Fe=1,Se=null,We=null,Oe=new cn(0,0,Ie,Ue),De=new cn(0,0,Ie,Ue),Me=!1,Xe=new Kl,Ye=!1,rt=!1,nt=new Br,bt=new be,Rt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Yt(){return he===null?Fe:1}var at=i;function ar(we,dt){for(var ot=0;ot<we.length;ot++){var vt=we[ot],Bt=t.getContext(vt,dt);if(Bt!==null)return Bt}return null}try{var kt={alpha:r,depth:n,stencil:o,antialias:s,premultipliedAlpha:f,preserveDrawingBuffer:w,powerPreference:M,failIfMajorPerformanceCaveat:O};if(t.addEventListener("webglcontextlost",gn,!1),t.addEventListener("webglcontextrestored",en,!1),at===null){var lr=["webgl2","webgl","experimental-webgl"];if(F.isWebGL1Renderer===!0&&lr.shift(),at=ar(lr,kt),at===null)throw ar(lr)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}at.getShaderPrecisionFormat===void 0&&(at.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(we){throw console.error("THREE.WebGLRenderer: "+we.message),we}var br,Or,wr,mn,Qr,hn,Vn,vi,Jn,kn,Ne,Ce,Ft,Ot,Ar,Ke,qt,Wt,ur,Ut,Pt;function xr(){br=new Rb(at),Or=new _b(at,br,a),br.init(Or),Ut=new yv(at,br,Or),wr=new qE(at,br,Or),wr.scissor(Re.copy(De).multiplyScalar(Fe).floor()),wr.viewport(ve.copy(Oe).multiplyScalar(Fe).floor()),mn=new Ob(at),Qr=new NE,hn=new KE(at,br,wr,Qr,Or,Ut,mn),Vn=new Lb(F),vi=new rA(at,Or),Pt=new Tb(at,br,vi,Or),Jn=new Pb(at,vi,mn,Pt),kn=new Nb(at,Jn,vi,mn),qt=new Fb(at),Ar=new Cb(Qr),Ne=new FE(F,Vn,br,Or,Pt,Ar),Ce=new ZE(Qr),Ft=new HE(Qr),Ot=new XE(br,Or),Ke=new Mb(F,Vn,wr,kn,f),Wt=new Sb(at,br,mn,Or),ur=new Db(at,br,mn,Or),mn.programs=Ne.programs,F.capabilities=Or,F.extensions=br,F.properties=Qr,F.renderLists=Ft,F.state=wr,F.info=mn}xr();var Ir=typeof navigator!="undefined"&&"xr"in navigator?new wv(F,at):new Ev(F);this.xr=Ir;var Bn=new gv(F,kn,Or.maxTextureSize);this.shadowMap=Bn,this.getContext=function(){return at},this.getContextAttributes=function(){return at.getContextAttributes()},this.forceContextLoss=function(){var we=br.get("WEBGL_lose_context");we&&we.loseContext()},this.forceContextRestore=function(){var we=br.get("WEBGL_lose_context");we&&we.restoreContext()},this.getPixelRatio=function(){return Fe},this.setPixelRatio=function(we){we!==void 0&&(Fe=we,this.setSize(Ie,Ue,!1))},this.getSize=function(we){return we===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),we=new xt),we.set(Ie,Ue)},this.setSize=function(we,dt,ot){if(Ir.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Ie=we,Ue=dt,t.width=Math.floor(we*Fe),t.height=Math.floor(dt*Fe),ot!==!1&&(t.style.width=we+"px",t.style.height=dt+"px"),this.setViewport(0,0,we,dt)},this.getDrawingBufferSize=function(we){return we===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),we=new xt),we.set(Ie*Fe,Ue*Fe).floor()},this.setDrawingBufferSize=function(we,dt,ot){Ie=we,Ue=dt,Fe=ot,t.width=Math.floor(we*ot),t.height=Math.floor(dt*ot),this.setViewport(0,0,we,dt)},this.getCurrentViewport=function(we){return we===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),we=new cn),we.copy(ve)},this.getViewport=function(we){return we.copy(Oe)},this.setViewport=function(we,dt,ot,vt){we.isVector4?Oe.set(we.x,we.y,we.z,we.w):Oe.set(we,dt,ot,vt),wr.viewport(ve.copy(Oe).multiplyScalar(Fe).floor())},this.getScissor=function(we){return we.copy(De)},this.setScissor=function(we,dt,ot,vt){we.isVector4?De.set(we.x,we.y,we.z,we.w):De.set(we,dt,ot,vt),wr.scissor(Re.copy(De).multiplyScalar(Fe).floor())},this.getScissorTest=function(){return Me},this.setScissorTest=function(we){wr.setScissorTest(Me=we)},this.setOpaqueSort=function(we){Se=we},this.setTransparentSort=function(we){We=we},this.getClearColor=function(we){return we===void 0&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),we=new Nt),we.copy(Ke.getClearColor())},this.setClearColor=function(){Ke.setClearColor.apply(Ke,arguments)},this.getClearAlpha=function(){return Ke.getClearAlpha()},this.setClearAlpha=function(){Ke.setClearAlpha.apply(Ke,arguments)},this.clear=function(we,dt,ot){var vt=0;(we===void 0||we)&&(vt|=16384),(dt===void 0||dt)&&(vt|=256),(ot===void 0||ot)&&(vt|=1024),at.clear(vt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",gn,!1),t.removeEventListener("webglcontextrestored",en,!1),Ft.dispose(),Ot.dispose(),Qr.dispose(),Vn.dispose(),kn.dispose(),Pt.dispose(),Ir.dispose(),Ia.stop()};function gn(we){we.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),j=!0}function en(){console.log("THREE.WebGLRenderer: Context Restored."),j=!1,xr()}function on(we){var dt=we.target;dt.removeEventListener("dispose",on),zn(dt)}function zn(we){fl(we),Qr.remove(we)}function fl(we){var dt=Qr.get(we).program;dt!==void 0&&Ne.releaseProgram(dt)}function Do(we,dt){we.render(function(ot){F.renderBufferImmediate(ot,dt)})}this.renderBufferImmediate=function(we,dt){Pt.initAttributes();var ot=Qr.get(we);we.hasPositions&&!ot.position&&(ot.position=at.createBuffer()),we.hasNormals&&!ot.normal&&(ot.normal=at.createBuffer()),we.hasUvs&&!ot.uv&&(ot.uv=at.createBuffer()),we.hasColors&&!ot.color&&(ot.color=at.createBuffer());var vt=dt.getAttributes();we.hasPositions&&(at.bindBuffer(34962,ot.position),at.bufferData(34962,we.positionArray,35048),Pt.enableAttribute(vt.position),at.vertexAttribPointer(vt.position,3,5126,!1,0,0)),we.hasNormals&&(at.bindBuffer(34962,ot.normal),at.bufferData(34962,we.normalArray,35048),Pt.enableAttribute(vt.normal),at.vertexAttribPointer(vt.normal,3,5126,!1,0,0)),we.hasUvs&&(at.bindBuffer(34962,ot.uv),at.bufferData(34962,we.uvArray,35048),Pt.enableAttribute(vt.uv),at.vertexAttribPointer(vt.uv,2,5126,!1,0,0)),we.hasColors&&(at.bindBuffer(34962,ot.color),at.bufferData(34962,we.colorArray,35048),Pt.enableAttribute(vt.color),at.vertexAttribPointer(vt.color,3,5126,!1,0,0)),Pt.disableUnusedAttributes(),at.drawArrays(4,0,we.count),we.count=0},this.renderBufferDirect=function(we,dt,ot,vt,Bt,qr){dt===null&&(dt=Rt);var Hr=Bt.isMesh&&Bt.matrixWorld.determinant()<0,sn=_u(we,dt,vt,Bt);wr.setMaterial(vt,Hr);var Er=ot.index,Wn=ot.attributes.position;if(Er===null){if(Wn===void 0||Wn.count===0)return}else if(Er.count===0)return;var Dn=1;vt.wireframe===!0&&(Er=Jn.getWireframeAttribute(ot),Dn=2),(vt.morphTargets||vt.morphNormals)&&qt.update(Bt,ot,vt,sn),Pt.setup(Bt,vt,sn,ot,Er);var Fr,Gr=Wt;Er!==null&&(Fr=vi.get(Er),Gr=ur,Gr.setIndex(Fr));var Zn=Er!==null?Er.count:Wn.count,mi=ot.drawRange.start*Dn,rn=ot.drawRange.count*Dn,Xn=qr!==null?qr.start*Dn:0,Jr=qr!==null?qr.count*Dn:1/0,_r=Math.max(mi,Xn),nn=Math.min(Zn,mi+rn,Xn+Jr)-1,Wr=Math.max(0,nn-_r+1);if(Wr!==0){if(Bt.isMesh)vt.wireframe===!0?(wr.setLineWidth(vt.wireframeLinewidth*Yt()),Gr.setMode(1)):Gr.setMode(4);else if(Bt.isLine){var Kr=vt.linewidth;Kr===void 0&&(Kr=1),wr.setLineWidth(Kr*Yt()),Bt.isLineSegments?Gr.setMode(1):Bt.isLineLoop?Gr.setMode(2):Gr.setMode(3)}else Bt.isPoints?Gr.setMode(0):Bt.isSprite&&Gr.setMode(4);if(Bt.isInstancedMesh)Gr.renderInstances(_r,Wr,Bt.count);else if(ot.isInstancedBufferGeometry){var Ln=Math.min(ot.instanceCount,ot._maxInstanceCount);Gr.renderInstances(_r,Wr,Ln)}else Gr.render(_r,Wr)}},this.compile=function(we,dt){R=Ot.get(we),R.init(),we.traverseVisible(function(vt){vt.isLight&&vt.layers.test(dt.layers)&&(R.pushLight(vt),vt.castShadow&&R.pushShadow(vt))}),R.setupLights();var ot=new WeakMap;we.traverse(function(vt){var Bt=vt.material;if(Bt)if(Array.isArray(Bt))for(var qr=0;qr<Bt.length;qr++){var Hr=Bt[qr];ot.has(Hr)===!1&&(Vi(Hr,we,vt),ot.set(Hr))}else ot.has(Bt)===!1&&(Vi(Bt,we,vt),ot.set(Bt))})};var ya=null;function to(we){Ir.isPresenting||ya&&ya(we)}var Ia=new Sf;Ia.setAnimationLoop(to),typeof window!="undefined"&&Ia.setContext(window),this.setAnimationLoop=function(we){ya=we,Ir.setAnimationLoop(we),we===null?Ia.stop():Ia.start()},this.render=function(we,dt){var ot,vt;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),ot=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),vt=arguments[3]),dt!==void 0&&dt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(j!==!0){Pt.resetDefaultState(),ie=-1,ee=null,we.autoUpdate===!0&&we.updateMatrixWorld(),dt.parent===null&&dt.updateMatrixWorld(),Ir.enabled===!0&&Ir.isPresenting===!0&&(dt=Ir.getCamera(dt)),we.isScene===!0&&we.onBeforeRender(F,we,dt,ot||he),R=Ot.get(we,N.length),R.init(),N.push(R),nt.multiplyMatrices(dt.projectionMatrix,dt.matrixWorldInverse),Xe.setFromProjectionMatrix(nt),rt=this.localClippingEnabled,Ye=Ar.init(this.clippingPlanes,rt,dt),P=Ft.get(we,dt),P.init(),ro(we,dt,0,F.sortObjects),P.finish(),F.sortObjects===!0&&P.sort(Se,We),Ye===!0&&Ar.beginShadows();var Bt=R.state.shadowsArray;Bn.render(Bt,we,dt),R.setupLights(),R.setupLightsView(dt),Ye===!0&&Ar.endShadows(),this.info.autoReset===!0&&this.info.reset(),ot!==void 0&&this.setRenderTarget(ot),Ke.render(P,we,dt,vt);var qr=P.opaque,Hr=P.transparent;qr.length>0&&Oo(qr,we,dt),Hr.length>0&&Oo(Hr,we,dt),we.isScene===!0&&we.onAfterRender(F,we,dt),he!==null&&(hn.updateRenderTargetMipmap(he),hn.updateMultisampleRenderTarget(he)),wr.buffers.depth.setTest(!0),wr.buffers.depth.setMask(!0),wr.buffers.color.setMask(!0),wr.setPolygonOffset(!1),Ir.enabled&&Ir.submitFrame&&Ir.submitFrame(),N.pop(),N.length>0?R=N[N.length-1]:R=null,P=null}};function ro(we,dt,ot,vt){if(we.visible!==!1){var Bt=we.layers.test(dt.layers);if(Bt){if(we.isGroup)ot=we.renderOrder;else if(we.isLOD)we.autoUpdate===!0&&we.update(dt);else if(we.isLight)R.pushLight(we),we.castShadow&&R.pushShadow(we);else if(we.isSprite){if(!we.frustumCulled||Xe.intersectsSprite(we)){vt&&bt.setFromMatrixPosition(we.matrixWorld).applyMatrix4(nt);var qr=kn.update(we),Hr=we.material;Hr.visible&&P.push(we,qr,Hr,ot,bt.z,null)}}else if(we.isImmediateRenderObject)vt&&bt.setFromMatrixPosition(we.matrixWorld).applyMatrix4(nt),P.push(we,null,we.material,ot,bt.z,null);else if((we.isMesh||we.isLine||we.isPoints)&&(we.isSkinnedMesh&&we.skeleton.frame!==mn.render.frame&&(we.skeleton.update(),we.skeleton.frame=mn.render.frame),!we.frustumCulled||Xe.intersectsObject(we))){vt&&bt.setFromMatrixPosition(we.matrixWorld).applyMatrix4(nt);var sn=kn.update(we),Er=we.material;if(Array.isArray(Er))for(var Wn=sn.groups,Dn=0,Fr=Wn.length;Dn<Fr;Dn++){var Gr=Wn[Dn],Zn=Er[Gr.materialIndex];Zn&&Zn.visible&&P.push(we,sn,Zn,ot,bt.z,Gr)}else Er.visible&&P.push(we,sn,Er,ot,bt.z,null)}}for(var mi=we.children,rn=0,Xn=mi.length;rn<Xn;rn++)ro(mi[rn],dt,ot,vt)}}function Oo(we,dt,ot){for(var vt=dt.isScene===!0?dt.overrideMaterial:null,Bt=0,qr=we.length;Bt<qr;Bt++){var Hr=we[Bt],sn=Hr.object,Er=Hr.geometry,Wn=vt===null?Hr.material:vt,Dn=Hr.group;if(ot.isArrayCamera)for(var Fr=ot.cameras,Gr=0,Zn=Fr.length;Gr<Zn;Gr++){var mi=Fr[Gr];sn.layers.test(mi.layers)&&(wr.viewport(ve.copy(mi.viewport)),R.setupLightsView(mi),ms(sn,dt,mi,Er,Wn,Dn))}else ms(sn,dt,ot,Er,Wn,Dn)}}function ms(we,dt,ot,vt,Bt,qr){if(we.onBeforeRender(F,dt,ot,vt,Bt,qr),we.modelViewMatrix.multiplyMatrices(ot.matrixWorldInverse,we.matrixWorld),we.normalMatrix.getNormalMatrix(we.modelViewMatrix),we.isImmediateRenderObject){var Hr=_u(ot,dt,Bt,we);wr.setMaterial(Bt),Pt.reset(),Do(we,Hr)}else F.renderBufferDirect(ot,dt,vt,Bt,we,qr);we.onAfterRender(F,dt,ot,vt,Bt,qr)}function Vi(we,dt,ot){dt.isScene!==!0&&(dt=Rt);var vt=Qr.get(we),Bt=R.state.lights,qr=R.state.shadowsArray,Hr=Bt.state.version,sn=Ne.getParameters(we,Bt.state,qr,dt,ot),Er=Ne.getProgramCacheKey(sn),Wn=vt.program,Dn=!0;if(vt.environment=we.isMeshStandardMaterial?dt.environment:null,vt.fog=dt.fog,vt.envMap=Vn.get(we.envMap||vt.environment),Wn===void 0)we.addEventListener("dispose",on);else if(Wn.cacheKey!==Er)fl(we);else if(vt.lightsStateVersion!==Hr)Dn=!1;else{if(sn.shaderID!==void 0)return;Dn=!1}Dn&&(sn.uniforms=Ne.getUniforms(we),we.onBeforeCompile(sn,F),Wn=Ne.acquireProgram(sn,Er),vt.program=Wn,vt.uniforms=sn.uniforms,vt.outputEncoding=sn.outputEncoding);var Fr=vt.uniforms;(!we.isShaderMaterial&&!we.isRawShaderMaterial||we.clipping===!0)&&(vt.numClippingPlanes=Ar.numPlanes,vt.numIntersection=Ar.numIntersection,Fr.clippingPlanes=Ar.uniform),vt.needsLights=ph(we),vt.lightsStateVersion=Hr,vt.needsLights&&(Fr.ambientLightColor.value=Bt.state.ambient,Fr.lightProbe.value=Bt.state.probe,Fr.directionalLights.value=Bt.state.directional,Fr.directionalLightShadows.value=Bt.state.directionalShadow,Fr.spotLights.value=Bt.state.spot,Fr.spotLightShadows.value=Bt.state.spotShadow,Fr.rectAreaLights.value=Bt.state.rectArea,Fr.ltc_1.value=Bt.state.rectAreaLTC1,Fr.ltc_2.value=Bt.state.rectAreaLTC2,Fr.pointLights.value=Bt.state.point,Fr.pointLightShadows.value=Bt.state.pointShadow,Fr.hemisphereLights.value=Bt.state.hemi,Fr.directionalShadowMap.value=Bt.state.directionalShadowMap,Fr.directionalShadowMatrix.value=Bt.state.directionalShadowMatrix,Fr.spotShadowMap.value=Bt.state.spotShadowMap,Fr.spotShadowMatrix.value=Bt.state.spotShadowMatrix,Fr.pointShadowMap.value=Bt.state.pointShadowMap,Fr.pointShadowMatrix.value=Bt.state.pointShadowMatrix);var Gr=vt.program.getUniforms(),Zn=Ao.seqWithValue(Gr.seq,Fr);vt.uniformsList=Zn}function _u(we,dt,ot,vt){dt.isScene!==!0&&(dt=Rt),hn.resetTextureUnits();var Bt=dt.fog,qr=ot.isMeshStandardMaterial?dt.environment:null,Hr=he===null?F.outputEncoding:he.texture.encoding,sn=Vn.get(ot.envMap||qr),Er=Qr.get(ot),Wn=R.state.lights;if(Ye===!0&&(rt===!0||we!==ee)){var Dn=we===ee&&ot.id===ie;Ar.setState(ot,we,Dn)}ot.version===Er.__version?(ot.fog&&Er.fog!==Bt||Er.environment!==qr||Er.needsLights&&Er.lightsStateVersion!==Wn.state.version||Er.numClippingPlanes!==void 0&&(Er.numClippingPlanes!==Ar.numPlanes||Er.numIntersection!==Ar.numIntersection)||Er.outputEncoding!==Hr||Er.envMap!==sn)&&Vi(ot,dt,vt):(Vi(ot,dt,vt),Er.__version=ot.version);var Fr=!1,Gr=!1,Zn=!1,mi=Er.program,rn=mi.getUniforms(),Xn=Er.uniforms;if(wr.useProgram(mi.program)&&(Fr=!0,Gr=!0,Zn=!0),ot.id!==ie&&(ie=ot.id,Gr=!0),Fr||ee!==we){if(rn.setValue(at,"projectionMatrix",we.projectionMatrix),Or.logarithmicDepthBuffer&&rn.setValue(at,"logDepthBufFC",2/(Math.log(we.far+1)/Math.LN2)),ee!==we&&(ee=we,Gr=!0,Zn=!0),ot.isShaderMaterial||ot.isMeshPhongMaterial||ot.isMeshToonMaterial||ot.isMeshStandardMaterial||ot.envMap){var Jr=rn.map.cameraPosition;Jr!==void 0&&Jr.setValue(at,bt.setFromMatrixPosition(we.matrixWorld))}(ot.isMeshPhongMaterial||ot.isMeshToonMaterial||ot.isMeshLambertMaterial||ot.isMeshBasicMaterial||ot.isMeshStandardMaterial||ot.isShaderMaterial)&&rn.setValue(at,"isOrthographic",we.isOrthographicCamera===!0),(ot.isMeshPhongMaterial||ot.isMeshToonMaterial||ot.isMeshLambertMaterial||ot.isMeshBasicMaterial||ot.isMeshStandardMaterial||ot.isShaderMaterial||ot.isShadowMaterial||ot.skinning)&&rn.setValue(at,"viewMatrix",we.matrixWorldInverse)}if(ot.skinning){rn.setOptional(at,vt,"bindMatrix"),rn.setOptional(at,vt,"bindMatrixInverse");var _r=vt.skeleton;if(_r){var nn=_r.bones;if(Or.floatVertexTextures){if(_r.boneTexture===null){var Wr=Math.sqrt(nn.length*4);Wr=gr.ceilPowerOfTwo(Wr),Wr=Math.max(Wr,4);var Kr=new Float32Array(Wr*Wr*4);Kr.set(_r.boneMatrices);var Ln=new qa(Kr,Wr,Wr,ri,jr);_r.boneMatrices=Kr,_r.boneTexture=Ln,_r.boneTextureSize=Wr}rn.setValue(at,"boneTexture",_r.boneTexture,hn),rn.setValue(at,"boneTextureSize",_r.boneTextureSize)}else rn.setOptional(at,_r,"boneMatrices")}}return(Gr||Er.receiveShadow!==vt.receiveShadow)&&(Er.receiveShadow=vt.receiveShadow,rn.setValue(at,"receiveShadow",vt.receiveShadow)),Gr&&(rn.setValue(at,"toneMappingExposure",F.toneMappingExposure),Er.needsLights&&Cu(Xn,Zn),Bt&&ot.fog&&Ce.refreshFogUniforms(Xn,Bt),Ce.refreshMaterialUniforms(Xn,ot,Fe,Ue),Ao.upload(at,Er.uniformsList,Xn,hn)),ot.isShaderMaterial&&ot.uniformsNeedUpdate===!0&&(Ao.upload(at,Er.uniformsList,Xn,hn),ot.uniformsNeedUpdate=!1),ot.isSpriteMaterial&&rn.setValue(at,"center",vt.center),rn.setValue(at,"modelViewMatrix",vt.modelViewMatrix),rn.setValue(at,"normalMatrix",vt.normalMatrix),rn.setValue(at,"modelMatrix",vt.matrixWorld),mi}function Cu(we,dt){we.ambientLightColor.needsUpdate=dt,we.lightProbe.needsUpdate=dt,we.directionalLights.needsUpdate=dt,we.directionalLightShadows.needsUpdate=dt,we.pointLights.needsUpdate=dt,we.pointLightShadows.needsUpdate=dt,we.spotLights.needsUpdate=dt,we.spotLightShadows.needsUpdate=dt,we.rectAreaLights.needsUpdate=dt,we.hemisphereLights.needsUpdate=dt}function ph(we){return we.isMeshLambertMaterial||we.isMeshToonMaterial||we.isMeshPhongMaterial||we.isMeshStandardMaterial||we.isShadowMaterial||we.isShaderMaterial&&we.lights===!0}this.setTexture2D=function(){var we=!1;return function(ot,vt){ot&&ot.isWebGLRenderTarget&&(we||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),we=!0),ot=ot.texture),hn.setTexture2D(ot,vt)}}(),this.setFramebuffer=function(we){q!==we&&he===null&&at.bindFramebuffer(36160,we),q=we},this.getActiveCubeFace=function(){return X},this.getActiveMipmapLevel=function(){return H},this.getRenderList=function(){return P},this.setRenderList=function(we){P=we},this.getRenderTarget=function(){return he},this.setRenderTarget=function(we,dt,ot){dt===void 0&&(dt=0),ot===void 0&&(ot=0),he=we,X=dt,H=ot,we&&Qr.get(we).__webglFramebuffer===void 0&&hn.setupRenderTarget(we);var vt=q,Bt=!1;if(we){var qr=Qr.get(we).__webglFramebuffer;we.isWebGLCubeRenderTarget?(vt=qr[dt],Bt=!0):we.isWebGLMultisampleRenderTarget?vt=Qr.get(we).__webglMultisampledFramebuffer:vt=qr,ve.copy(we.viewport),Re.copy(we.scissor),Le=we.scissorTest}else ve.copy(Oe).multiplyScalar(Fe).floor(),Re.copy(De).multiplyScalar(Fe).floor(),Le=Me;if(ye!==vt&&(at.bindFramebuffer(36160,vt),ye=vt),wr.viewport(ve),wr.scissor(Re),wr.setScissorTest(Le),Bt){var Hr=Qr.get(we.texture);at.framebufferTexture2D(36160,36064,34069+dt,Hr.__webglTexture,ot)}},this.readRenderTargetPixels=function(we,dt,ot,vt,Bt,qr,Hr){if(!(we&&we.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var sn=Qr.get(we).__webglFramebuffer;if(we.isWebGLCubeRenderTarget&&Hr!==void 0&&(sn=sn[Hr]),sn){var Er=!1;sn!==ye&&(at.bindFramebuffer(36160,sn),Er=!0);try{var Wn=we.texture,Dn=Wn.format,Fr=Wn.type;if(Dn!==ri&&Ut.convert(Dn)!==at.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}var Gr=Fr===dn&&(br.has("EXT_color_buffer_half_float")||Or.isWebGL2&&br.has("EXT_color_buffer_float"));if(Fr!==cr&&Ut.convert(Fr)!==at.getParameter(35738)&&!(Fr===jr&&(Or.isWebGL2||br.has("OES_texture_float")||br.has("WEBGL_color_buffer_float")))&&!Gr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}at.checkFramebufferStatus(36160)===36053?dt>=0&&dt<=we.width-vt&&ot>=0&&ot<=we.height-Bt&&at.readPixels(dt,ot,vt,Bt,Ut.convert(Dn),Ut.convert(Fr),qr):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Er&&at.bindFramebuffer(36160,ye)}}},this.copyFramebufferToTexture=function(we,dt,ot){ot===void 0&&(ot=0);var vt=Math.pow(2,-ot),Bt=Math.floor(dt.image.width*vt),qr=Math.floor(dt.image.height*vt),Hr=Ut.convert(dt.format);hn.setTexture2D(dt,0),at.copyTexImage2D(3553,ot,Hr,we.x,we.y,Bt,qr,0),wr.unbindTexture()},this.copyTextureToTexture=function(we,dt,ot,vt){vt===void 0&&(vt=0);var Bt=dt.image.width,qr=dt.image.height,Hr=Ut.convert(ot.format),sn=Ut.convert(ot.type);hn.setTexture2D(ot,0),at.pixelStorei(37440,ot.flipY),at.pixelStorei(37441,ot.premultiplyAlpha),at.pixelStorei(3317,ot.unpackAlignment),dt.isDataTexture?at.texSubImage2D(3553,vt,we.x,we.y,Bt,qr,Hr,sn,dt.image.data):dt.isCompressedTexture?at.compressedTexSubImage2D(3553,vt,we.x,we.y,dt.mipmaps[0].width,dt.mipmaps[0].height,Hr,dt.mipmaps[0].data):at.texSubImage2D(3553,vt,we.x,we.y,Hr,sn,dt.image),vt===0&&ot.generateMipmaps&&at.generateMipmap(3553),wr.unbindTexture()},this.initTexture=function(we){hn.setTexture2D(we,0),wr.unbindTexture()},this.resetState=function(){wr.reset(),Pt.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Lf(a){ru.call(this,a)}Lf.prototype=Object.assign(Object.create(ru.prototype),{constructor:Lf,isWebGL1Renderer:!0});var xv=function(){function a(i,r){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new Nt(i),this.density=r!==void 0?r:25e-5}var t=a.prototype;return t.clone=function(){return new a(this.color,this.density)},t.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},a}(),Mv=function(){function a(i,r,n){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new Nt(i),this.near=r!==void 0?r:1,this.far=n!==void 0?n:1e3}var t=a.prototype;return t.clone=function(){return new a(this.color,this.near,this.far)},t.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},a}(),Rf=function(a){Rr(t,a);function t(){var r;return r=a.call(this)||this,Object.defineProperty(oa(r),"isScene",{value:!0}),r.type="Scene",r.background=null,r.environment=null,r.fog=null,r.overrideMaterial=null,r.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:oa(r)})),r}var i=t.prototype;return i.copy=function(n,o){return a.prototype.copy.call(this,n,o),n.background!==null&&(this.background=n.background.clone()),n.environment!==null&&(this.environment=n.environment.clone()),n.fog!==null&&(this.fog=n.fog.clone()),n.overrideMaterial!==null&&(this.overrideMaterial=n.overrideMaterial.clone()),this.autoUpdate=n.autoUpdate,this.matrixAutoUpdate=n.matrixAutoUpdate,this},i.toJSON=function(n){var o=a.prototype.toJSON.call(this,n);return this.background!==null&&(o.object.background=this.background.toJSON(n)),this.environment!==null&&(o.object.environment=this.environment.toJSON(n)),this.fog!==null&&(o.object.fog=this.fog.toJSON()),o},t}($t);function ki(a,t){this.array=a,this.stride=t,this.count=a!==void 0?a.length/t:0,this.usage=Fl,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=gr.generateUUID()}Object.defineProperty(ki.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(ki.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,i,r){t*=this.stride,r*=i.stride;for(var n=0,o=this.stride;n<o;n++)this.array[t+n]=i.array[r+n];return this},set:function(t,i){return i===void 0&&(i=0),this.array.set(t,i),this},clone:function(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gr.generateUUID()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var i=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),r=new ki(i,this.stride);return r.setUsage(this.usage),r},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gr.generateUUID()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var es=new be;function wo(a,t,i,r){this.name="",this.data=a,this.itemSize=t,this.offset=i,this.normalized=r===!0}Object.defineProperties(wo.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(wo.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var i=0,r=this.data.count;i<r;i++)es.x=this.getX(i),es.y=this.getY(i),es.z=this.getZ(i),es.applyMatrix4(t),this.setXYZ(i,es.x,es.y,es.z);return this},setX:function(t,i){return this.data.array[t*this.data.stride+this.offset]=i,this},setY:function(t,i){return this.data.array[t*this.data.stride+this.offset+1]=i,this},setZ:function(t,i){return this.data.array[t*this.data.stride+this.offset+2]=i,this},setW:function(t,i){return this.data.array[t*this.data.stride+this.offset+3]=i,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=i,this.data.array[t+1]=r,this},setXYZ:function(t,i,r,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=i,this.data.array[t+1]=r,this.data.array[t+2]=n,this},setXYZW:function(t,i,r,n,o){return t=t*this.data.stride+this.offset,this.data.array[t+0]=i,this.data.array[t+1]=r,this.data.array[t+2]=n,this.data.array[t+3]=o,this},clone:function(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var i=[],r=0;r<this.count;r++)for(var n=r*this.data.stride+this.offset,o=0;o<this.itemSize;o++)i.push(this.data.array[n+o]);return new dr(new this.array.constructor(i),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new wo(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var i=[],r=0;r<this.count;r++)for(var n=r*this.data.stride+this.offset,o=0;o<this.itemSize;o++)i.push(this.data.array[n+o]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function xo(a){fr.call(this),this.type="SpriteMaterial",this.color=new Nt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(a)}xo.prototype=Object.create(fr.prototype),xo.prototype.constructor=xo,xo.prototype.isSpriteMaterial=!0,xo.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.rotation=a.rotation,this.sizeAttenuation=a.sizeAttenuation,this};var qs,nu=new be,Ks=new be,Js=new be,Zs=new xt,iu=new xt,Tv=new Br,dc=new be,au=new be,pc=new be,Sv=new xt,Pf=new xt,_v=new xt;function ou(a){if($t.call(this),this.type="Sprite",qs===void 0){qs=new ir;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new ki(t,5);qs.setIndex([0,1,2,0,2,3]),qs.setAttribute("position",new wo(i,3,0,!1)),qs.setAttribute("uv",new wo(i,2,3,!1))}this.geometry=qs,this.material=a!==void 0?a:new xo,this.center=new xt(.5,.5)}ou.prototype=Object.assign(Object.create($t.prototype),{constructor:ou,isSprite:!0,raycast:function(t,i){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ks.setFromMatrixScale(this.matrixWorld),Tv.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Js.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ks.multiplyScalar(-Js.z);var r=this.material.rotation,n,o;r!==0&&(o=Math.cos(r),n=Math.sin(r));var s=this.center;vc(dc.set(-.5,-.5,0),Js,s,Ks,n,o),vc(au.set(.5,-.5,0),Js,s,Ks,n,o),vc(pc.set(.5,.5,0),Js,s,Ks,n,o),Sv.set(0,0),Pf.set(1,0),_v.set(1,1);var f=t.ray.intersectTriangle(dc,au,pc,!1,nu);if(!(f===null&&(vc(au.set(-.5,.5,0),Js,s,Ks,n,o),Pf.set(0,1),f=t.ray.intersectTriangle(dc,pc,au,!1,nu),f===null))){var w=t.ray.origin.distanceTo(nu);w<t.near||w>t.far||i.push({distance:w,point:nu.clone(),uv:Ta.getUV(nu,dc,au,pc,Sv,Pf,_v,new xt),face:null,object:this})}},copy:function(t){return $t.prototype.copy.call(this,t),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}});function vc(a,t,i,r,n,o){Zs.subVectors(a,i).addScalar(.5).multiply(r),n!==void 0?(iu.x=o*Zs.x-n*Zs.y,iu.y=n*Zs.x+o*Zs.y):iu.copy(Zs),a.copy(t),a.x+=iu.x,a.y+=iu.y,a.applyMatrix4(Tv)}var mc=new be,Cv=new be;function su(){$t.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}su.prototype=Object.assign(Object.create($t.prototype),{constructor:su,isLOD:!0,copy:function(t){$t.prototype.copy.call(this,t,!1);for(var i=t.levels,r=0,n=i.length;r<n;r++){var o=i[r];this.addLevel(o.object.clone(),o.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,i){i===void 0&&(i=0),i=Math.abs(i);var r=this.levels,n;for(n=0;n<r.length&&!(i<r[n].distance);n++);return r.splice(n,0,{distance:i,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var i=this.levels;if(i.length>0){var r,n;for(r=1,n=i.length;r<n&&!(t<i[r].distance);r++);return i[r-1].object}return null},raycast:function(t,i){var r=this.levels;if(r.length>0){mc.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(mc);this.getObjectForDistance(n).raycast(t,i)}},update:function(t){var i=this.levels;if(i.length>1){mc.setFromMatrixPosition(t.matrixWorld),Cv.setFromMatrixPosition(this.matrixWorld);var r=mc.distanceTo(Cv)/t.zoom;i[0].object.visible=!0;var n,o;for(n=1,o=i.length;n<o&&r>=i[n].distance;n++)i[n-1].object.visible=!1,i[n].object.visible=!0;for(this._currentLevel=n-1;n<o;n++)i[n].object.visible=!1}},toJSON:function(t){var i=$t.prototype.toJSON.call(this,t);this.autoUpdate===!1&&(i.object.autoUpdate=!1),i.object.levels=[];for(var r=this.levels,n=0,o=r.length;n<o;n++){var s=r[n];i.object.levels.push({object:s.object.uuid,distance:s.distance})}return i}});var Lv=new be,Rv=new cn,Pv=new cn,ew=new be,Dv=new Br;function lu(a,t){a&&a.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mn.call(this,a,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Br,this.bindMatrixInverse=new Br}lu.prototype=Object.assign(Object.create(Mn.prototype),{constructor:lu,isSkinnedMesh:!0,copy:function(t){return Mn.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,i){this.skeleton=t,i===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.copy(i).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new cn,i=this.geometry.attributes.skinWeight,r=0,n=i.count;r<n;r++){t.x=i.getX(r),t.y=i.getY(r),t.z=i.getZ(r),t.w=i.getW(r);var o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),i.setXYZW(r,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Mn.prototype.updateMatrixWorld.call(this,t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(t,i){var r=this.skeleton,n=this.geometry;Rv.fromBufferAttribute(n.attributes.skinIndex,t),Pv.fromBufferAttribute(n.attributes.skinWeight,t),Lv.fromBufferAttribute(n.attributes.position,t).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(var o=0;o<4;o++){var s=Pv.getComponent(o);if(s!==0){var f=Rv.getComponent(o);Dv.multiplyMatrices(r.bones[f].matrixWorld,r.boneInverses[f]),i.addScaledVector(ew.copy(Lv).applyMatrix4(Dv),s)}}return i.applyMatrix4(this.bindMatrixInverse)}});function uu(){$t.call(this),this.type="Bone"}uu.prototype=Object.assign(Object.create($t.prototype),{constructor:uu,isBone:!0});var Ov=new Br,tw=new Br;function cu(a,t){a===void 0&&(a=[]),t===void 0&&(t=[]),this.uuid=gr.generateUUID(),this.bones=a.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(cu.prototype,{init:function(){var t=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),i.length===0)this.calculateInverses();else if(t.length!==i.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new Br)}},calculateInverses:function(){this.boneInverses.length=0;for(var t=0,i=this.bones.length;t<i;t++){var r=new Br;this.bones[t]&&r.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(r)}},pose:function(){for(var t=0,i=this.bones.length;t<i;t++){var r=this.bones[t];r&&r.matrixWorld.copy(this.boneInverses[t]).invert()}for(var n=0,o=this.bones.length;n<o;n++){var s=this.bones[n];s&&(s.parent&&s.parent.isBone?(s.matrix.copy(s.parent.matrixWorld).invert(),s.matrix.multiply(s.matrixWorld)):s.matrix.copy(s.matrixWorld),s.matrix.decompose(s.position,s.quaternion,s.scale))}},update:function(){for(var t=this.bones,i=this.boneInverses,r=this.boneMatrices,n=this.boneTexture,o=0,s=t.length;o<s;o++){var f=t[o]?t[o].matrixWorld:tw;Ov.multiplyMatrices(f,i[o]),Ov.toArray(r,o*16)}n!==null&&(n.needsUpdate=!0)},clone:function(){return new cu(this.bones,this.boneInverses)},getBoneByName:function(t){for(var i=0,r=this.bones.length;i<r;i++){var n=this.bones[i];if(n.name===t)return n}},dispose:function(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(t,i){this.uuid=t.uuid;for(var r=0,n=t.bones.length;r<n;r++){var o=t.bones[r],s=i[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new uu),this.bones.push(s),this.boneInverses.push(new Br().fromArray(t.boneInverses[r]))}return this.init(),this},toJSON:function(){var t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;for(var i=this.bones,r=this.boneInverses,n=0,o=i.length;n<o;n++){var s=i[n];t.bones.push(s.uuid);var f=r[n];t.boneInverses.push(f.toArray())}return t}});var Iv=new Br,Bv=new Br,gc=[],hu=new Mn;function yc(a,t,i){Mn.call(this,a,t),this.instanceMatrix=new dr(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}yc.prototype=Object.assign(Object.create(Mn.prototype),{constructor:yc,isInstancedMesh:!0,copy:function(t){return Mn.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this},getColorAt:function(t,i){i.fromArray(this.instanceColor.array,t*3)},getMatrixAt:function(t,i){i.fromArray(this.instanceMatrix.array,t*16)},raycast:function(t,i){var r=this.matrixWorld,n=this.count;if(hu.geometry=this.geometry,hu.material=this.material,hu.material!==void 0)for(var o=0;o<n;o++){this.getMatrixAt(o,Iv),Bv.multiplyMatrices(r,Iv),hu.matrixWorld=Bv,hu.raycast(t,gc);for(var s=0,f=gc.length;s<f;s++){var w=gc[s];w.instanceId=o,w.object=this,i.push(w)}gc.length=0}},setColorAt:function(t,i){this.instanceColor===null&&(this.instanceColor=new dr(new Float32Array(this.count*3),3)),i.toArray(this.instanceColor.array,t*3)},setMatrixAt:function(t,i){i.toArray(this.instanceMatrix.array,t*16)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Pn(a){fr.call(this),this.type="LineBasicMaterial",this.color=new Nt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(a)}Pn.prototype=Object.create(fr.prototype),Pn.prototype.constructor=Pn,Pn.prototype.isLineBasicMaterial=!0,Pn.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this.morphTargets=a.morphTargets,this};var Fv=new be,Nv=new be,kv=new Br,Df=new Bs,Ac=new fo;function Ki(a,t){a===void 0&&(a=new ir),t===void 0&&(t=new Pn),$t.call(this),this.type="Line",this.geometry=a,this.material=t,this.updateMorphTargets()}Ki.prototype=Object.assign(Object.create($t.prototype),{constructor:Ki,isLine:!0,copy:function(t){return $t.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(t.index===null){for(var i=t.attributes.position,r=[0],n=1,o=i.count;n<o;n++)Fv.fromBufferAttribute(i,n-1),Nv.fromBufferAttribute(i,n),r[n]=r[n-1],r[n]+=Fv.distanceTo(Nv);t.setAttribute("lineDistance",new Gt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(t,i){var r=this.geometry,n=this.matrixWorld,o=t.params.Line.threshold;if(r.boundingSphere===null&&r.computeBoundingSphere(),Ac.copy(r.boundingSphere),Ac.applyMatrix4(n),Ac.radius+=o,t.ray.intersectsSphere(Ac)!==!1){kv.copy(n).invert(),Df.copy(t.ray).applyMatrix4(kv);var s=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=s*s,w=new be,M=new be,O=new be,P=new be,R=this.isLineSegments?2:1;if(r.isBufferGeometry){var N=r.index,F=r.attributes,j=F.position;if(N!==null)for(var q=N.array,X=0,H=q.length-1;X<H;X+=R){var he=q[X],ye=q[X+1];w.fromBufferAttribute(j,he),M.fromBufferAttribute(j,ye);var ie=Df.distanceSqToSegment(w,M,P,O);if(!(ie>f)){P.applyMatrix4(this.matrixWorld);var ee=t.ray.origin.distanceTo(P);ee<t.near||ee>t.far||i.push({distance:ee,point:O.clone().applyMatrix4(this.matrixWorld),index:X,face:null,faceIndex:null,object:this})}}else for(var ve=0,Re=j.count-1;ve<Re;ve+=R){w.fromBufferAttribute(j,ve),M.fromBufferAttribute(j,ve+1);var Le=Df.distanceSqToSegment(w,M,P,O);if(!(Le>f)){P.applyMatrix4(this.matrixWorld);var Ie=t.ray.origin.distanceTo(P);Ie<t.near||Ie>t.far||i.push({distance:Ie,point:O.clone().applyMatrix4(this.matrixWorld),index:ve,face:null,faceIndex:null,object:this})}}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var i=t.morphAttributes,r=Object.keys(i);if(r.length>0){var n=i[r[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var o=0,s=n.length;o<s;o++){var f=n[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=o}}}}else{var w=t.morphTargets;w!==void 0&&w.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});var Uv=new be,Hv=new be;function wi(a,t){Ki.call(this,a,t),this.type="LineSegments"}wi.prototype=Object.assign(Object.create(Ki.prototype),{constructor:wi,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(t.index===null){for(var i=t.attributes.position,r=[],n=0,o=i.count;n<o;n+=2)Uv.fromBufferAttribute(i,n),Hv.fromBufferAttribute(i,n+1),r[n]=n===0?0:r[n-1],r[n+1]=r[n]+Uv.distanceTo(Hv);t.setAttribute("lineDistance",new Gt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});function bc(a,t){Ki.call(this,a,t),this.type="LineLoop"}bc.prototype=Object.assign(Object.create(Ki.prototype),{constructor:bc,isLineLoop:!0});function ha(a){fr.call(this),this.type="PointsMaterial",this.color=new Nt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(a)}ha.prototype=Object.create(fr.prototype),ha.prototype.constructor=ha,ha.prototype.isPointsMaterial=!0,ha.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this.morphTargets=a.morphTargets,this};var Gv=new Br,Of=new Bs,Ec=new fo,wc=new be;function $s(a,t){a===void 0&&(a=new ir),t===void 0&&(t=new ha),$t.call(this),this.type="Points",this.geometry=a,this.material=t,this.updateMorphTargets()}$s.prototype=Object.assign(Object.create($t.prototype),{constructor:$s,isPoints:!0,copy:function(t){return $t.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,i){var r=this.geometry,n=this.matrixWorld,o=t.params.Points.threshold;if(r.boundingSphere===null&&r.computeBoundingSphere(),Ec.copy(r.boundingSphere),Ec.applyMatrix4(n),Ec.radius+=o,t.ray.intersectsSphere(Ec)!==!1){Gv.copy(n).invert(),Of.copy(t.ray).applyMatrix4(Gv);var s=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=s*s;if(r.isBufferGeometry){var w=r.index,M=r.attributes,O=M.position;if(w!==null)for(var P=w.array,R=0,N=P.length;R<N;R++){var F=P[R];wc.fromBufferAttribute(O,F),Vv(wc,F,f,n,t,i,this)}else for(var j=0,q=O.count;j<q;j++)wc.fromBufferAttribute(O,j),Vv(wc,j,f,n,t,i,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var i=t.morphAttributes,r=Object.keys(i);if(r.length>0){var n=i[r[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var o=0,s=n.length;o<s;o++){var f=n[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=o}}}}else{var w=t.morphTargets;w!==void 0&&w.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function Vv(a,t,i,r,n,o,s){var f=Of.distanceSqToPoint(a);if(f<i){var w=new be;Of.closestPointToPoint(a,w),w.applyMatrix4(r);var M=n.ray.origin.distanceTo(w);if(M<n.near||M>n.far)return;o.push({distance:M,distanceToRay:Math.sqrt(f),point:w,index:t,face:null,object:s})}}function If(a,t,i,r,n,o,s,f,w){vn.call(this,a,t,i,r,n,o,s,f,w),this.format=s!==void 0?s:Qi,this.minFilter=o!==void 0?o:ht,this.magFilter=n!==void 0?n:ht,this.generateMipmaps=!1;var M=this;function O(){M.needsUpdate=!0,a.requestVideoFrameCallback(O)}"requestVideoFrameCallback"in a&&a.requestVideoFrameCallback(O)}If.prototype=Object.assign(Object.create(vn.prototype),{constructor:If,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){var t=this.image,i="requestVideoFrameCallback"in t;i===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function el(a,t,i,r,n,o,s,f,w,M,O,P){vn.call(this,null,o,s,f,w,M,r,n,O,P),this.image={width:t,height:i},this.mipmaps=a,this.flipY=!1,this.generateMipmaps=!1}el.prototype=Object.create(vn.prototype),el.prototype.constructor=el,el.prototype.isCompressedTexture=!0;function fu(a,t,i,r,n,o,s,f,w){vn.call(this,a,t,i,r,n,o,s,f,w),this.needsUpdate=!0}fu.prototype=Object.create(vn.prototype),fu.prototype.constructor=fu,fu.prototype.isCanvasTexture=!0;function du(a,t,i,r,n,o,s,f,w,M){if(M=M!==void 0?M:st,M!==st&&M!==et)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&M===st&&(i=kr),i===void 0&&M===et&&(i=Yi),vn.call(this,null,r,n,o,s,f,M,i,w),this.image={width:a,height:t},this.magFilter=s!==void 0?s:Qt,this.minFilter=f!==void 0?f:Qt,this.flipY=!1,this.generateMipmaps=!1}du.prototype=Object.create(vn.prototype),du.prototype.constructor=du,du.prototype.isDepthTexture=!0;var xc=function(a){Rr(t,a);function t(i,r,n,o){var s;i===void 0&&(i=1),r===void 0&&(r=8),n===void 0&&(n=0),o===void 0&&(o=Math.PI*2),s=a.call(this)||this,s.type="CircleGeometry",s.parameters={radius:i,segments:r,thetaStart:n,thetaLength:o},r=Math.max(3,r);var f=[],w=[],M=[],O=[],P=new be,R=new xt;w.push(0,0,0),M.push(0,0,1),O.push(.5,.5);for(var N=0,F=3;N<=r;N++,F+=3){var j=n+N/r*o;P.x=i*Math.cos(j),P.y=i*Math.sin(j),w.push(P.x,P.y,P.z),M.push(0,0,1),R.x=(w[F]/i+1)/2,R.y=(w[F+1]/i+1)/2,O.push(R.x,R.y)}for(var q=1;q<=r;q++)f.push(q,q+1,0);return s.setIndex(f),s.setAttribute("position",new Gt(w,3)),s.setAttribute("normal",new Gt(M,3)),s.setAttribute("uv",new Gt(O,2)),s}return t}(ir),tl=function(a){Rr(t,a);function t(i,r,n,o,s,f,w,M){var O;i===void 0&&(i=1),r===void 0&&(r=1),n===void 0&&(n=1),o===void 0&&(o=8),s===void 0&&(s=1),f===void 0&&(f=!1),w===void 0&&(w=0),M===void 0&&(M=Math.PI*2),O=a.call(this)||this,O.type="CylinderGeometry",O.parameters={radiusTop:i,radiusBottom:r,height:n,radialSegments:o,heightSegments:s,openEnded:f,thetaStart:w,thetaLength:M};var P=oa(O);o=Math.floor(o),s=Math.floor(s);var R=[],N=[],F=[],j=[],q=0,X=[],H=n/2,he=0;ye(),f===!1&&(i>0&&ie(!0),r>0&&ie(!1)),O.setIndex(R),O.setAttribute("position",new Gt(N,3)),O.setAttribute("normal",new Gt(F,3)),O.setAttribute("uv",new Gt(j,2));function ye(){for(var ee=new be,ve=new be,Re=0,Le=(r-i)/n,Ie=0;Ie<=s;Ie++){for(var Ue=[],Fe=Ie/s,Se=Fe*(r-i)+i,We=0;We<=o;We++){var Oe=We/o,De=Oe*M+w,Me=Math.sin(De),Xe=Math.cos(De);ve.x=Se*Me,ve.y=-Fe*n+H,ve.z=Se*Xe,N.push(ve.x,ve.y,ve.z),ee.set(Me,Le,Xe).normalize(),F.push(ee.x,ee.y,ee.z),j.push(Oe,1-Fe),Ue.push(q++)}X.push(Ue)}for(var Ye=0;Ye<o;Ye++)for(var rt=0;rt<s;rt++){var nt=X[rt][Ye],bt=X[rt+1][Ye],Rt=X[rt+1][Ye+1],Yt=X[rt][Ye+1];R.push(nt,bt,Yt),R.push(bt,Rt,Yt),Re+=6}P.addGroup(he,Re,0),he+=Re}function ie(ee){for(var ve=q,Re=new xt,Le=new be,Ie=0,Ue=ee===!0?i:r,Fe=ee===!0?1:-1,Se=1;Se<=o;Se++)N.push(0,H*Fe,0),F.push(0,Fe,0),j.push(.5,.5),q++;for(var We=q,Oe=0;Oe<=o;Oe++){var De=Oe/o,Me=De*M+w,Xe=Math.cos(Me),Ye=Math.sin(Me);Le.x=Ue*Ye,Le.y=H*Fe,Le.z=Ue*Xe,N.push(Le.x,Le.y,Le.z),F.push(0,Fe,0),Re.x=Xe*.5+.5,Re.y=Ye*.5*Fe+.5,j.push(Re.x,Re.y),q++}for(var rt=0;rt<o;rt++){var nt=ve+rt,bt=We+rt;ee===!0?R.push(bt,bt+1,nt):R.push(bt+1,bt,nt),Ie+=3}P.addGroup(he,Ie,ee===!0?1:2),he+=Ie}return O}return t}(ir),Mc=function(a){Rr(t,a);function t(i,r,n,o,s,f,w){var M;return i===void 0&&(i=1),r===void 0&&(r=1),n===void 0&&(n=8),o===void 0&&(o=1),s===void 0&&(s=!1),f===void 0&&(f=0),w===void 0&&(w=Math.PI*2),M=a.call(this,0,i,r,n,o,s,f,w)||this,M.type="ConeGeometry",M.parameters={radius:i,height:r,radialSegments:n,heightSegments:o,openEnded:s,thetaStart:f,thetaLength:w},M}return t}(tl),Mo=function(a){Rr(t,a);function t(i,r,n,o){var s;n===void 0&&(n=1),o===void 0&&(o=0),s=a.call(this)||this,s.type="PolyhedronGeometry",s.parameters={vertices:i,indices:r,radius:n,detail:o};var f=[],w=[];M(o),P(n),R(),s.setAttribute("position",new Gt(f,3)),s.setAttribute("normal",new Gt(f.slice(),3)),s.setAttribute("uv",new Gt(w,2)),o===0?s.computeVertexNormals():s.normalizeNormals();function M(ye){for(var ie=new be,ee=new be,ve=new be,Re=0;Re<r.length;Re+=3)j(r[Re+0],ie),j(r[Re+1],ee),j(r[Re+2],ve),O(ie,ee,ve,ye)}function O(ye,ie,ee,ve){for(var Re=ve+1,Le=[],Ie=0;Ie<=Re;Ie++){Le[Ie]=[];for(var Ue=ye.clone().lerp(ee,Ie/Re),Fe=ie.clone().lerp(ee,Ie/Re),Se=Re-Ie,We=0;We<=Se;We++)We===0&&Ie===Re?Le[Ie][We]=Ue:Le[Ie][We]=Ue.clone().lerp(Fe,We/Se)}for(var Oe=0;Oe<Re;Oe++)for(var De=0;De<2*(Re-Oe)-1;De++){var Me=Math.floor(De/2);De%2==0?(F(Le[Oe][Me+1]),F(Le[Oe+1][Me]),F(Le[Oe][Me])):(F(Le[Oe][Me+1]),F(Le[Oe+1][Me+1]),F(Le[Oe+1][Me]))}}function P(ye){for(var ie=new be,ee=0;ee<f.length;ee+=3)ie.x=f[ee+0],ie.y=f[ee+1],ie.z=f[ee+2],ie.normalize().multiplyScalar(ye),f[ee+0]=ie.x,f[ee+1]=ie.y,f[ee+2]=ie.z}function R(){for(var ye=new be,ie=0;ie<f.length;ie+=3){ye.x=f[ie+0],ye.y=f[ie+1],ye.z=f[ie+2];var ee=H(ye)/2/Math.PI+.5,ve=he(ye)/Math.PI+.5;w.push(ee,1-ve)}q(),N()}function N(){for(var ye=0;ye<w.length;ye+=6){var ie=w[ye+0],ee=w[ye+2],ve=w[ye+4],Re=Math.max(ie,ee,ve),Le=Math.min(ie,ee,ve);Re>.9&&Le<.1&&(ie<.2&&(w[ye+0]+=1),ee<.2&&(w[ye+2]+=1),ve<.2&&(w[ye+4]+=1))}}function F(ye){f.push(ye.x,ye.y,ye.z)}function j(ye,ie){var ee=ye*3;ie.x=i[ee+0],ie.y=i[ee+1],ie.z=i[ee+2]}function q(){for(var ye=new be,ie=new be,ee=new be,ve=new be,Re=new xt,Le=new xt,Ie=new xt,Ue=0,Fe=0;Ue<f.length;Ue+=9,Fe+=6){ye.set(f[Ue+0],f[Ue+1],f[Ue+2]),ie.set(f[Ue+3],f[Ue+4],f[Ue+5]),ee.set(f[Ue+6],f[Ue+7],f[Ue+8]),Re.set(w[Fe+0],w[Fe+1]),Le.set(w[Fe+2],w[Fe+3]),Ie.set(w[Fe+4],w[Fe+5]),ve.copy(ye).add(ie).add(ee).divideScalar(3);var Se=H(ve);X(Re,Fe+0,ye,Se),X(Le,Fe+2,ie,Se),X(Ie,Fe+4,ee,Se)}}function X(ye,ie,ee,ve){ve<0&&ye.x===1&&(w[ie]=ye.x-1),ee.x===0&&ee.z===0&&(w[ie]=ve/2/Math.PI+.5)}function H(ye){return Math.atan2(ye.z,-ye.x)}function he(ye){return Math.atan2(-ye.y,Math.sqrt(ye.x*ye.x+ye.z*ye.z))}return s}return t}(ir),Tc=function(a){Rr(t,a);function t(i,r){var n;i===void 0&&(i=1),r===void 0&&(r=0);var o=(1+Math.sqrt(5))/2,s=1/o,f=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-o,0,-s,o,0,s,-o,0,s,o,-s,-o,0,-s,o,0,s,-o,0,s,o,0,-o,0,-s,o,0,-s,-o,0,s,o,0,s],w=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return n=a.call(this,f,w,i,r)||this,n.type="DodecahedronGeometry",n.parameters={radius:i,detail:r},n}return t}(Mo),Sc=new be,_c=new be,Bf=new be,rl=new Ta,Ff=function(a){Rr(t,a);function t(i,r){var n;if(n=a.call(this)||this,n.type="EdgesGeometry",n.parameters={thresholdAngle:r},r=r!==void 0?r:1,i.isGeometry===!0)return console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),oa(n);for(var o=4,s=Math.pow(10,o),f=Math.cos(gr.DEG2RAD*r),w=i.getIndex(),M=i.getAttribute("position"),O=w?w.count:M.count,P=[0,0,0],R=["a","b","c"],N=new Array(3),F={},j=[],q=0;q<O;q+=3){w?(P[0]=w.getX(q),P[1]=w.getX(q+1),P[2]=w.getX(q+2)):(P[0]=q,P[1]=q+1,P[2]=q+2);var X=rl.a,H=rl.b,he=rl.c;if(X.fromBufferAttribute(M,P[0]),H.fromBufferAttribute(M,P[1]),he.fromBufferAttribute(M,P[2]),rl.getNormal(Bf),N[0]=Math.round(X.x*s)+","+Math.round(X.y*s)+","+Math.round(X.z*s),N[1]=Math.round(H.x*s)+","+Math.round(H.y*s)+","+Math.round(H.z*s),N[2]=Math.round(he.x*s)+","+Math.round(he.y*s)+","+Math.round(he.z*s),!(N[0]===N[1]||N[1]===N[2]||N[2]===N[0]))for(var ye=0;ye<3;ye++){var ie=(ye+1)%3,ee=N[ye],ve=N[ie],Re=rl[R[ye]],Le=rl[R[ie]],Ie=ee+"_"+ve,Ue=ve+"_"+ee;Ue in F&&F[Ue]?(Bf.dot(F[Ue].normal)<=f&&(j.push(Re.x,Re.y,Re.z),j.push(Le.x,Le.y,Le.z)),F[Ue]=null):Ie in F||(F[Ie]={index0:P[ye],index1:P[ie],normal:Bf.clone()})}}for(var Fe in F)if(F[Fe]){var Se=F[Fe],We=Se.index0,Oe=Se.index1;Sc.fromBufferAttribute(M,We),_c.fromBufferAttribute(M,Oe),j.push(Sc.x,Sc.y,Sc.z),j.push(_c.x,_c.y,_c.z)}return n.setAttribute("position",new Gt(j,3)),n}return t}(ir),rw={triangulate:function(t,i,r){r=r||2;var n=i&&i.length,o=n?i[0]*r:t.length,s=zv(t,0,o,r,!0),f=[];if(!s||s.next===s.prev)return f;var w,M,O,P,R,N,F;if(n&&(s=sw(t,i,s,r)),t.length>80*r){w=O=t[0],M=P=t[1];for(var j=r;j<o;j+=r)R=t[j],N=t[j+1],R<w&&(w=R),N<M&&(M=N),R>O&&(O=R),N>P&&(P=N);F=Math.max(O-w,P-M),F=F!==0?1/F:0}return pu(s,f,r,w,M,F),f}};function zv(a,t,i,r,n){var o,s;if(n===yw(a,t,i,r)>0)for(o=t;o<i;o+=r)s=Xv(o,a[o],a[o+1],s);else for(o=i-r;o>=t;o-=r)s=Xv(o,a[o],a[o+1],s);return s&&Cc(s,s.next)&&(mu(s),s=s.next),s}function To(a,t){if(!a)return a;t||(t=a);var i=a,r;do if(r=!1,!i.steiner&&(Cc(i,i.next)||In(i.prev,i,i.next)===0)){if(mu(i),i=t=i.prev,i===i.next)break;r=!0}else i=i.next;while(r||i!==t);return t}function pu(a,t,i,r,n,o,s){if(!!a){!s&&o&&fw(a,r,n,o);for(var f=a,w,M;a.prev!==a.next;){if(w=a.prev,M=a.next,o?iw(a,r,n,o):nw(a)){t.push(w.i/i),t.push(a.i/i),t.push(M.i/i),mu(a),a=M.next,f=M.next;continue}if(a=M,a===f){s?s===1?(a=aw(To(a),t,i),pu(a,t,i,r,n,o,2)):s===2&&ow(a,t,i,r,n,o):pu(To(a),t,i,r,n,o,1);break}}}}function nw(a){var t=a.prev,i=a,r=a.next;if(In(t,i,r)>=0)return!1;for(var n=a.next.next;n!==a.prev;){if(nl(t.x,t.y,i.x,i.y,r.x,r.y,n.x,n.y)&&In(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function iw(a,t,i,r){var n=a.prev,o=a,s=a.next;if(In(n,o,s)>=0)return!1;for(var f=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,w=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,M=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,O=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,P=Nf(f,w,t,i,r),R=Nf(M,O,t,i,r),N=a.prevZ,F=a.nextZ;N&&N.z>=P&&F&&F.z<=R;){if(N!==a.prev&&N!==a.next&&nl(n.x,n.y,o.x,o.y,s.x,s.y,N.x,N.y)&&In(N.prev,N,N.next)>=0||(N=N.prevZ,F!==a.prev&&F!==a.next&&nl(n.x,n.y,o.x,o.y,s.x,s.y,F.x,F.y)&&In(F.prev,F,F.next)>=0))return!1;F=F.nextZ}for(;N&&N.z>=P;){if(N!==a.prev&&N!==a.next&&nl(n.x,n.y,o.x,o.y,s.x,s.y,N.x,N.y)&&In(N.prev,N,N.next)>=0)return!1;N=N.prevZ}for(;F&&F.z<=R;){if(F!==a.prev&&F!==a.next&&nl(n.x,n.y,o.x,o.y,s.x,s.y,F.x,F.y)&&In(F.prev,F,F.next)>=0)return!1;F=F.nextZ}return!0}function aw(a,t,i){var r=a;do{var n=r.prev,o=r.next.next;!Cc(n,o)&&Wv(n,r,r.next,o)&&vu(n,o)&&vu(o,n)&&(t.push(n.i/i),t.push(r.i/i),t.push(o.i/i),mu(r),mu(r.next),r=a=o),r=r.next}while(r!==a);return To(r)}function ow(a,t,i,r,n,o){var s=a;do{for(var f=s.next.next;f!==s.prev;){if(s.i!==f.i&&vw(s,f)){var w=jv(s,f);s=To(s,s.next),w=To(w,w.next),pu(s,t,i,r,n,o),pu(w,t,i,r,n,o);return}f=f.next}s=s.next}while(s!==a)}function sw(a,t,i,r){var n=[],o,s,f,w,M;for(o=0,s=t.length;o<s;o++)f=t[o]*r,w=o<s-1?t[o+1]*r:a.length,M=zv(a,f,w,r,!1),M===M.next&&(M.steiner=!0),n.push(pw(M));for(n.sort(lw),o=0;o<n.length;o++)uw(n[o],i),i=To(i,i.next);return i}function lw(a,t){return a.x-t.x}function uw(a,t){if(t=cw(a,t),t){var i=jv(t,a);To(t,t.next),To(i,i.next)}}function cw(a,t){var i=t,r=a.x,n=a.y,o=-1/0,s;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){var f=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(f<=r&&f>o){if(o=f,f===r){if(n===i.y)return i;if(n===i.next.y)return i.next}s=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!s)return null;if(r===o)return s;var w=s,M=s.x,O=s.y,P=1/0,R;i=s;do r>=i.x&&i.x>=M&&r!==i.x&&nl(n<O?r:o,n,M,O,n<O?o:r,n,i.x,i.y)&&(R=Math.abs(n-i.y)/(r-i.x),vu(i,a)&&(R<P||R===P&&(i.x>s.x||i.x===s.x&&hw(s,i)))&&(s=i,P=R)),i=i.next;while(i!==w);return s}function hw(a,t){return In(a.prev,a,t.prev)<0&&In(t.next,a,a.next)<0}function fw(a,t,i,r){var n=a;do n.z===null&&(n.z=Nf(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==a);n.prevZ.nextZ=null,n.prevZ=null,dw(n)}function dw(a){var t,i,r,n,o,s,f,w,M=1;do{for(i=a,a=null,o=null,s=0;i;){for(s++,r=i,f=0,t=0;t<M&&(f++,r=r.nextZ,!!r);t++);for(w=M;f>0||w>0&&r;)f!==0&&(w===0||!r||i.z<=r.z)?(n=i,i=i.nextZ,f--):(n=r,r=r.nextZ,w--),o?o.nextZ=n:a=n,n.prevZ=o,o=n;i=r}o.nextZ=null,M*=2}while(s>1);return a}function Nf(a,t,i,r,n){return a=32767*(a-i)*n,t=32767*(t-r)*n,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,a|t<<1}function pw(a){var t=a,i=a;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==a);return i}function nl(a,t,i,r,n,o,s,f){return(n-s)*(t-f)-(a-s)*(o-f)>=0&&(a-s)*(r-f)-(i-s)*(t-f)>=0&&(i-s)*(o-f)-(n-s)*(r-f)>=0}function vw(a,t){return a.next.i!==t.i&&a.prev.i!==t.i&&!mw(a,t)&&(vu(a,t)&&vu(t,a)&&gw(a,t)&&(In(a.prev,a,t.prev)||In(a,t.prev,t))||Cc(a,t)&&In(a.prev,a,a.next)>0&&In(t.prev,t,t.next)>0)}function In(a,t,i){return(t.y-a.y)*(i.x-t.x)-(t.x-a.x)*(i.y-t.y)}function Cc(a,t){return a.x===t.x&&a.y===t.y}function Wv(a,t,i,r){var n=Rc(In(a,t,i)),o=Rc(In(a,t,r)),s=Rc(In(i,r,a)),f=Rc(In(i,r,t));return!!(n!==o&&s!==f||n===0&&Lc(a,i,t)||o===0&&Lc(a,r,t)||s===0&&Lc(i,a,r)||f===0&&Lc(i,t,r))}function Lc(a,t,i){return t.x<=Math.max(a.x,i.x)&&t.x>=Math.min(a.x,i.x)&&t.y<=Math.max(a.y,i.y)&&t.y>=Math.min(a.y,i.y)}function Rc(a){return a>0?1:a<0?-1:0}function mw(a,t){var i=a;do{if(i.i!==a.i&&i.next.i!==a.i&&i.i!==t.i&&i.next.i!==t.i&&Wv(i,i.next,a,t))return!0;i=i.next}while(i!==a);return!1}function vu(a,t){return In(a.prev,a,a.next)<0?In(a,t,a.next)>=0&&In(a,a.prev,t)>=0:In(a,t,a.prev)<0||In(a,a.next,t)<0}function gw(a,t){var i=a,r=!1,n=(a.x+t.x)/2,o=(a.y+t.y)/2;do i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==a);return r}function jv(a,t){var i=new kf(a.i,a.x,a.y),r=new kf(t.i,t.x,t.y),n=a.next,o=t.prev;return a.next=t,t.prev=a,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function Xv(a,t,i,r){var n=new kf(a,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function mu(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function kf(a,t,i){this.i=a,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yw(a,t,i,r){for(var n=0,o=t,s=i-r;o<i;o+=r)n+=(a[s]-a[o])*(a[o+1]+a[s+1]),s=o;return n}var Ja={area:function(t){for(var i=t.length,r=0,n=i-1,o=0;o<i;n=o++)r+=t[n].x*t[o].y-t[o].x*t[n].y;return r*.5},isClockWise:function(t){return Ja.area(t)<0},triangulateShape:function(t,i){var r=[],n=[],o=[];Yv(t),Qv(r,t);var s=t.length;i.forEach(Yv);for(var f=0;f<i.length;f++)n.push(s),s+=i[f].length,Qv(r,i[f]);for(var w=rw.triangulate(r,n),M=0;M<w.length;M+=3)o.push(w.slice(M,M+3));return o}};function Yv(a){var t=a.length;t>2&&a[t-1].equals(a[0])&&a.pop()}function Qv(a,t){for(var i=0;i<t.length;i++)a.push(t[i].x),a.push(t[i].y)}var ts=function(a){Rr(t,a);function t(r,n){var o;o=a.call(this)||this,o.type="ExtrudeGeometry",o.parameters={shapes:r,options:n},r=Array.isArray(r)?r:[r];for(var s=oa(o),f=[],w=[],M=0,O=r.length;M<O;M++){var P=r[M];R(P)}o.setAttribute("position",new Gt(f,3)),o.setAttribute("uv",new Gt(w,2)),o.computeVertexNormals();function R(N){var F=[],j=n.curveSegments!==void 0?n.curveSegments:12,q=n.steps!==void 0?n.steps:1,X=n.depth!==void 0?n.depth:100,H=n.bevelEnabled!==void 0?n.bevelEnabled:!0,he=n.bevelThickness!==void 0?n.bevelThickness:6,ye=n.bevelSize!==void 0?n.bevelSize:he-2,ie=n.bevelOffset!==void 0?n.bevelOffset:0,ee=n.bevelSegments!==void 0?n.bevelSegments:3,ve=n.extrudePath,Re=n.UVGenerator!==void 0?n.UVGenerator:Aw;n.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),X=n.amount);var Le,Ie=!1,Ue,Fe,Se,We;ve&&(Le=ve.getSpacedPoints(q),Ie=!0,H=!1,Ue=ve.computeFrenetFrames(q,!1),Fe=new be,Se=new be,We=new be),H||(ee=0,he=0,ye=0,ie=0);var Oe=N.extractPoints(j),De=Oe.shape,Me=Oe.holes,Xe=!Ja.isClockWise(De);if(Xe){De=De.reverse();for(var Ye=0,rt=Me.length;Ye<rt;Ye++){var nt=Me[Ye];Ja.isClockWise(nt)&&(Me[Ye]=nt.reverse())}}for(var bt=Ja.triangulateShape(De,Me),Rt=De,Yt=0,at=Me.length;Yt<at;Yt++){var ar=Me[Yt];De=De.concat(ar)}function kt(Jr,_r,nn){return _r||console.error("THREE.ExtrudeGeometry: vec does not exist"),_r.clone().multiplyScalar(nn).add(Jr)}var lr=De.length,br=bt.length;function Or(Jr,_r,nn){var Wr,Kr,Ln,gi=Jr.x-_r.x,yi=Jr.y-_r.y,Mi=nn.x-Jr.x,zi=nn.y-Jr.y,no=gi*gi+yi*yi,Ed=gi*zi-yi*Mi;if(Math.abs(Ed)>Number.EPSILON){var vh=Math.sqrt(no),Hm=Math.sqrt(Mi*Mi+zi*zi),Gm=_r.x-yi/vh,Vm=_r.y+gi/vh,Jx=nn.x-zi/Hm,Zx=nn.y+Mi/Hm,zm=((Jx-Gm)*zi-(Zx-Vm)*Mi)/(gi*zi-yi*Mi);Wr=Gm+gi*zm-Jr.x,Kr=Vm+yi*zm-Jr.y;var Wm=Wr*Wr+Kr*Kr;if(Wm<=2)return new xt(Wr,Kr);Ln=Math.sqrt(Wm/2)}else{var mh=!1;gi>Number.EPSILON?Mi>Number.EPSILON&&(mh=!0):gi<-Number.EPSILON?Mi<-Number.EPSILON&&(mh=!0):Math.sign(yi)===Math.sign(zi)&&(mh=!0),mh?(Wr=-yi,Kr=gi,Ln=Math.sqrt(no)):(Wr=gi,Kr=yi,Ln=Math.sqrt(no/2))}return new xt(Wr/Ln,Kr/Ln)}for(var wr=[],mn=0,Qr=Rt.length,hn=Qr-1,Vn=mn+1;mn<Qr;mn++,hn++,Vn++)hn===Qr&&(hn=0),Vn===Qr&&(Vn=0),wr[mn]=Or(Rt[mn],Rt[hn],Rt[Vn]);for(var vi=[],Jn,kn=wr.concat(),Ne=0,Ce=Me.length;Ne<Ce;Ne++){var Ft=Me[Ne];Jn=[];for(var Ot=0,Ar=Ft.length,Ke=Ar-1,qt=Ot+1;Ot<Ar;Ot++,Ke++,qt++)Ke===Ar&&(Ke=0),qt===Ar&&(qt=0),Jn[Ot]=Or(Ft[Ot],Ft[Ke],Ft[qt]);vi.push(Jn),kn=kn.concat(Jn)}for(var Wt=0;Wt<ee;Wt++){for(var ur=Wt/ee,Ut=he*Math.cos(ur*Math.PI/2),Pt=ye*Math.sin(ur*Math.PI/2)+ie,xr=0,Ir=Rt.length;xr<Ir;xr++){var Bn=kt(Rt[xr],wr[xr],Pt);Gr(Bn.x,Bn.y,-Ut)}for(var gn=0,en=Me.length;gn<en;gn++){var on=Me[gn];Jn=vi[gn];for(var zn=0,fl=on.length;zn<fl;zn++){var Do=kt(on[zn],Jn[zn],Pt);Gr(Do.x,Do.y,-Ut)}}}for(var ya=ye+ie,to=0;to<lr;to++){var Ia=H?kt(De[to],kn[to],ya):De[to];Ie?(Se.copy(Ue.normals[0]).multiplyScalar(Ia.x),Fe.copy(Ue.binormals[0]).multiplyScalar(Ia.y),We.copy(Le[0]).add(Se).add(Fe),Gr(We.x,We.y,We.z)):Gr(Ia.x,Ia.y,0)}for(var ro=1;ro<=q;ro++)for(var Oo=0;Oo<lr;Oo++){var ms=H?kt(De[Oo],kn[Oo],ya):De[Oo];Ie?(Se.copy(Ue.normals[ro]).multiplyScalar(ms.x),Fe.copy(Ue.binormals[ro]).multiplyScalar(ms.y),We.copy(Le[ro]).add(Se).add(Fe),Gr(We.x,We.y,We.z)):Gr(ms.x,ms.y,X/q*ro)}for(var Vi=ee-1;Vi>=0;Vi--){for(var _u=Vi/ee,Cu=he*Math.cos(_u*Math.PI/2),ph=ye*Math.sin(_u*Math.PI/2)+ie,we=0,dt=Rt.length;we<dt;we++){var ot=kt(Rt[we],wr[we],ph);Gr(ot.x,ot.y,X+Cu)}for(var vt=0,Bt=Me.length;vt<Bt;vt++){var qr=Me[vt];Jn=vi[vt];for(var Hr=0,sn=qr.length;Hr<sn;Hr++){var Er=kt(qr[Hr],Jn[Hr],ph);Ie?Gr(Er.x,Er.y+Le[q-1].y,Le[q-1].x+Cu):Gr(Er.x,Er.y,X+Cu)}}}Wn(),Dn();function Wn(){var Jr=f.length/3;if(H){for(var _r=0,nn=lr*_r,Wr=0;Wr<br;Wr++){var Kr=bt[Wr];Zn(Kr[2]+nn,Kr[1]+nn,Kr[0]+nn)}_r=q+ee*2,nn=lr*_r;for(var Ln=0;Ln<br;Ln++){var gi=bt[Ln];Zn(gi[0]+nn,gi[1]+nn,gi[2]+nn)}}else{for(var yi=0;yi<br;yi++){var Mi=bt[yi];Zn(Mi[2],Mi[1],Mi[0])}for(var zi=0;zi<br;zi++){var no=bt[zi];Zn(no[0]+lr*q,no[1]+lr*q,no[2]+lr*q)}}s.addGroup(Jr,f.length/3-Jr,0)}function Dn(){var Jr=f.length/3,_r=0;Fr(Rt,_r),_r+=Rt.length;for(var nn=0,Wr=Me.length;nn<Wr;nn++){var Kr=Me[nn];Fr(Kr,_r),_r+=Kr.length}s.addGroup(Jr,f.length/3-Jr,1)}function Fr(Jr,_r){for(var nn=Jr.length;--nn>=0;){var Wr=nn,Kr=nn-1;Kr<0&&(Kr=Jr.length-1);for(var Ln=0,gi=q+ee*2;Ln<gi;Ln++){var yi=lr*Ln,Mi=lr*(Ln+1),zi=_r+Wr+yi,no=_r+Kr+yi,Ed=_r+Kr+Mi,vh=_r+Wr+Mi;mi(zi,no,Ed,vh)}}}function Gr(Jr,_r,nn){F.push(Jr),F.push(_r),F.push(nn)}function Zn(Jr,_r,nn){rn(Jr),rn(_r),rn(nn);var Wr=f.length/3,Kr=Re.generateTopUV(s,f,Wr-3,Wr-2,Wr-1);Xn(Kr[0]),Xn(Kr[1]),Xn(Kr[2])}function mi(Jr,_r,nn,Wr){rn(Jr),rn(_r),rn(Wr),rn(_r),rn(nn),rn(Wr);var Kr=f.length/3,Ln=Re.generateSideWallUV(s,f,Kr-6,Kr-3,Kr-2,Kr-1);Xn(Ln[0]),Xn(Ln[1]),Xn(Ln[3]),Xn(Ln[1]),Xn(Ln[2]),Xn(Ln[3])}function rn(Jr){f.push(F[Jr*3+0]),f.push(F[Jr*3+1]),f.push(F[Jr*3+2])}function Xn(Jr){w.push(Jr.x),w.push(Jr.y)}}return o}var i=t.prototype;return i.toJSON=function(){var n=ir.prototype.toJSON.call(this),o=this.parameters.shapes,s=this.parameters.options;return bw(o,s,n)},t}(ir),Aw={generateTopUV:function(t,i,r,n,o){var s=i[r*3],f=i[r*3+1],w=i[n*3],M=i[n*3+1],O=i[o*3],P=i[o*3+1];return[new xt(s,f),new xt(w,M),new xt(O,P)]},generateSideWallUV:function(t,i,r,n,o,s){var f=i[r*3],w=i[r*3+1],M=i[r*3+2],O=i[n*3],P=i[n*3+1],R=i[n*3+2],N=i[o*3],F=i[o*3+1],j=i[o*3+2],q=i[s*3],X=i[s*3+1],H=i[s*3+2];return Math.abs(w-P)<.01?[new xt(f,1-M),new xt(O,1-R),new xt(N,1-j),new xt(q,1-H)]:[new xt(w,1-M),new xt(P,1-R),new xt(F,1-j),new xt(X,1-H)]}};function bw(a,t,i){if(i.shapes=[],Array.isArray(a))for(var r=0,n=a.length;r<n;r++){var o=a[r];i.shapes.push(o.uuid)}else i.shapes.push(a.uuid);return t.extrudePath!==void 0&&(i.options.extrudePath=t.extrudePath.toJSON()),i}var Pc=function(a){Rr(t,a);function t(i,r){var n;i===void 0&&(i=1),r===void 0&&(r=0);var o=(1+Math.sqrt(5))/2,s=[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],f=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return n=a.call(this,s,f,i,r)||this,n.type="IcosahedronGeometry",n.parameters={radius:i,detail:r},n}return t}(Mo),Dc=function(a){Rr(t,a);function t(i,r,n,o){var s;r===void 0&&(r=12),n===void 0&&(n=0),o===void 0&&(o=Math.PI*2),s=a.call(this)||this,s.type="LatheGeometry",s.parameters={points:i,segments:r,phiStart:n,phiLength:o},r=Math.floor(r),o=gr.clamp(o,0,Math.PI*2);for(var f=[],w=[],M=[],O=1/r,P=new be,R=new xt,N=0;N<=r;N++)for(var F=n+N*O*o,j=Math.sin(F),q=Math.cos(F),X=0;X<=i.length-1;X++)P.x=i[X].x*j,P.y=i[X].y,P.z=i[X].x*q,w.push(P.x,P.y,P.z),R.x=N/r,R.y=X/(i.length-1),M.push(R.x,R.y);for(var H=0;H<r;H++)for(var he=0;he<i.length-1;he++){var ye=he+H*i.length,ie=ye,ee=ye+i.length,ve=ye+i.length+1,Re=ye+1;f.push(ie,ee,Re),f.push(ee,ve,Re)}if(s.setIndex(f),s.setAttribute("position",new Gt(w,3)),s.setAttribute("uv",new Gt(M,2)),s.computeVertexNormals(),o===Math.PI*2)for(var Le=s.attributes.normal.array,Ie=new be,Ue=new be,Fe=new be,Se=r*i.length*3,We=0,Oe=0;We<i.length;We++,Oe+=3)Ie.x=Le[Oe+0],Ie.y=Le[Oe+1],Ie.z=Le[Oe+2],Ue.x=Le[Se+Oe+0],Ue.y=Le[Se+Oe+1],Ue.z=Le[Se+Oe+2],Fe.addVectors(Ie,Ue).normalize(),Le[Oe+0]=Le[Se+Oe+0]=Fe.x,Le[Oe+1]=Le[Se+Oe+1]=Fe.y,Le[Oe+2]=Le[Se+Oe+2]=Fe.z;return s}return t}(ir),gu=function(a){Rr(t,a);function t(i,r){var n;i===void 0&&(i=1),r===void 0&&(r=0);var o=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return n=a.call(this,o,s,i,r)||this,n.type="OctahedronGeometry",n.parameters={radius:i,detail:r},n}return t}(Mo);function rs(a,t,i){ir.call(this),this.type="ParametricGeometry",this.parameters={func:a,slices:t,stacks:i};var r=[],n=[],o=[],s=[],f=1e-5,w=new be,M=new be,O=new be,P=new be,R=new be;a.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");for(var N=t+1,F=0;F<=i;F++)for(var j=F/i,q=0;q<=t;q++){var X=q/t;a(X,j,M),n.push(M.x,M.y,M.z),X-f>=0?(a(X-f,j,O),P.subVectors(M,O)):(a(X+f,j,O),P.subVectors(O,M)),j-f>=0?(a(X,j-f,O),R.subVectors(M,O)):(a(X,j+f,O),R.subVectors(O,M)),w.crossVectors(P,R).normalize(),o.push(w.x,w.y,w.z),s.push(X,j)}for(var H=0;H<i;H++)for(var he=0;he<t;he++){var ye=H*N+he,ie=H*N+he+1,ee=(H+1)*N+he+1,ve=(H+1)*N+he;r.push(ye,ie,ve),r.push(ie,ee,ve)}this.setIndex(r),this.setAttribute("position",new Gt(n,3)),this.setAttribute("normal",new Gt(o,3)),this.setAttribute("uv",new Gt(s,2))}rs.prototype=Object.create(ir.prototype),rs.prototype.constructor=rs;var Oc=function(a){Rr(t,a);function t(i,r,n,o,s,f){var w;i===void 0&&(i=.5),r===void 0&&(r=1),n===void 0&&(n=8),o===void 0&&(o=1),s===void 0&&(s=0),f===void 0&&(f=Math.PI*2),w=a.call(this)||this,w.type="RingGeometry",w.parameters={innerRadius:i,outerRadius:r,thetaSegments:n,phiSegments:o,thetaStart:s,thetaLength:f},n=Math.max(3,n),o=Math.max(1,o);for(var M=[],O=[],P=[],R=[],N=i,F=(r-i)/o,j=new be,q=new xt,X=0;X<=o;X++){for(var H=0;H<=n;H++){var he=s+H/n*f;j.x=N*Math.cos(he),j.y=N*Math.sin(he),O.push(j.x,j.y,j.z),P.push(0,0,1),q.x=(j.x/r+1)/2,q.y=(j.y/r+1)/2,R.push(q.x,q.y)}N+=F}for(var ye=0;ye<o;ye++)for(var ie=ye*(n+1),ee=0;ee<n;ee++){var ve=ee+ie,Re=ve,Le=ve+n+1,Ie=ve+n+2,Ue=ve+1;M.push(Re,Le,Ue),M.push(Le,Ie,Ue)}return w.setIndex(M),w.setAttribute("position",new Gt(O,3)),w.setAttribute("normal",new Gt(P,3)),w.setAttribute("uv",new Gt(R,2)),w}return t}(ir),yu=function(a){Rr(t,a);function t(r,n){var o;n===void 0&&(n=12),o=a.call(this)||this,o.type="ShapeGeometry",o.parameters={shapes:r,curveSegments:n};var s=[],f=[],w=[],M=[],O=0,P=0;if(Array.isArray(r)===!1)N(r);else for(var R=0;R<r.length;R++)N(r[R]),o.addGroup(O,P,R),O+=P,P=0;o.setIndex(s),o.setAttribute("position",new Gt(f,3)),o.setAttribute("normal",new Gt(w,3)),o.setAttribute("uv",new Gt(M,2));function N(F){var j=f.length/3,q=F.extractPoints(n),X=q.shape,H=q.holes;Ja.isClockWise(X)===!1&&(X=X.reverse());for(var he=0,ye=H.length;he<ye;he++){var ie=H[he];Ja.isClockWise(ie)===!0&&(H[he]=ie.reverse())}for(var ee=Ja.triangulateShape(X,H),ve=0,Re=H.length;ve<Re;ve++){var Le=H[ve];X=X.concat(Le)}for(var Ie=0,Ue=X.length;Ie<Ue;Ie++){var Fe=X[Ie];f.push(Fe.x,Fe.y,0),w.push(0,0,1),M.push(Fe.x,Fe.y)}for(var Se=0,We=ee.length;Se<We;Se++){var Oe=ee[Se],De=Oe[0]+j,Me=Oe[1]+j,Xe=Oe[2]+j;s.push(De,Me,Xe),P+=3}}return o}var i=t.prototype;return i.toJSON=function(){var n=ir.prototype.toJSON.call(this),o=this.parameters.shapes;return Ew(o,n)},t}(ir);function Ew(a,t){if(t.shapes=[],Array.isArray(a))for(var i=0,r=a.length;i<r;i++){var n=a[i];t.shapes.push(n.uuid)}else t.shapes.push(a.uuid);return t}var Au=function(a){Rr(t,a);function t(i,r,n,o,s,f,w){var M;i===void 0&&(i=1),r===void 0&&(r=8),n===void 0&&(n=6),o===void 0&&(o=0),s===void 0&&(s=Math.PI*2),f===void 0&&(f=0),w===void 0&&(w=Math.PI),M=a.call(this)||this,M.type="SphereGeometry",M.parameters={radius:i,widthSegments:r,heightSegments:n,phiStart:o,phiLength:s,thetaStart:f,thetaLength:w},r=Math.max(3,Math.floor(r)),n=Math.max(2,Math.floor(n));for(var O=Math.min(f+w,Math.PI),P=0,R=[],N=new be,F=new be,j=[],q=[],X=[],H=[],he=0;he<=n;he++){var ye=[],ie=he/n,ee=0;he==0&&f==0?ee=.5/r:he==n&&O==Math.PI&&(ee=-.5/r);for(var ve=0;ve<=r;ve++){var Re=ve/r;N.x=-i*Math.cos(o+Re*s)*Math.sin(f+ie*w),N.y=i*Math.cos(f+ie*w),N.z=i*Math.sin(o+Re*s)*Math.sin(f+ie*w),q.push(N.x,N.y,N.z),F.copy(N).normalize(),X.push(F.x,F.y,F.z),H.push(Re+ee,1-ie),ye.push(P++)}R.push(ye)}for(var Le=0;Le<n;Le++)for(var Ie=0;Ie<r;Ie++){var Ue=R[Le][Ie+1],Fe=R[Le][Ie],Se=R[Le+1][Ie],We=R[Le+1][Ie+1];(Le!==0||f>0)&&j.push(Ue,Fe,We),(Le!==n-1||O<Math.PI)&&j.push(Fe,Se,We)}return M.setIndex(j),M.setAttribute("position",new Gt(q,3)),M.setAttribute("normal",new Gt(X,3)),M.setAttribute("uv",new Gt(H,2)),M}return t}(ir),Ic=function(a){Rr(t,a);function t(i,r){var n;i===void 0&&(i=1),r===void 0&&(r=0);var o=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];return n=a.call(this,o,s,i,r)||this,n.type="TetrahedronGeometry",n.parameters={radius:i,detail:r},n}return t}(Mo),Bc=function(a){Rr(t,a);function t(i,r){var n;r===void 0&&(r={});var o=r.font;if(!(o&&o.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ir||oa(n);var s=o.generateShapes(i,r.size);return r.depth=r.height!==void 0?r.height:50,r.bevelThickness===void 0&&(r.bevelThickness=10),r.bevelSize===void 0&&(r.bevelSize=8),r.bevelEnabled===void 0&&(r.bevelEnabled=!1),n=a.call(this,s,r)||this,n.type="TextGeometry",n}return t}(ts),Fc=function(a){Rr(t,a);function t(i,r,n,o,s){var f;i===void 0&&(i=1),r===void 0&&(r=.4),n===void 0&&(n=8),o===void 0&&(o=6),s===void 0&&(s=Math.PI*2),f=a.call(this)||this,f.type="TorusGeometry",f.parameters={radius:i,tube:r,radialSegments:n,tubularSegments:o,arc:s},n=Math.floor(n),o=Math.floor(o);for(var w=[],M=[],O=[],P=[],R=new be,N=new be,F=new be,j=0;j<=n;j++)for(var q=0;q<=o;q++){var X=q/o*s,H=j/n*Math.PI*2;N.x=(i+r*Math.cos(H))*Math.cos(X),N.y=(i+r*Math.cos(H))*Math.sin(X),N.z=r*Math.sin(H),M.push(N.x,N.y,N.z),R.x=i*Math.cos(X),R.y=i*Math.sin(X),F.subVectors(N,R).normalize(),O.push(F.x,F.y,F.z),P.push(q/o),P.push(j/n)}for(var he=1;he<=n;he++)for(var ye=1;ye<=o;ye++){var ie=(o+1)*he+ye-1,ee=(o+1)*(he-1)+ye-1,ve=(o+1)*(he-1)+ye,Re=(o+1)*he+ye;w.push(ie,ee,Re),w.push(ee,ve,Re)}return f.setIndex(w),f.setAttribute("position",new Gt(M,3)),f.setAttribute("normal",new Gt(O,3)),f.setAttribute("uv",new Gt(P,2)),f}return t}(ir),Nc=function(a){Rr(t,a);function t(i,r,n,o,s,f){var w;i===void 0&&(i=1),r===void 0&&(r=.4),n===void 0&&(n=64),o===void 0&&(o=8),s===void 0&&(s=2),f===void 0&&(f=3),w=a.call(this)||this,w.type="TorusKnotGeometry",w.parameters={radius:i,tube:r,tubularSegments:n,radialSegments:o,p:s,q:f},n=Math.floor(n),o=Math.floor(o);for(var M=[],O=[],P=[],R=[],N=new be,F=new be,j=new be,q=new be,X=new be,H=new be,he=new be,ye=0;ye<=n;++ye){var ie=ye/n*s*Math.PI*2;De(ie,s,f,i,j),De(ie+.01,s,f,i,q),H.subVectors(q,j),he.addVectors(q,j),X.crossVectors(H,he),he.crossVectors(X,H),X.normalize(),he.normalize();for(var ee=0;ee<=o;++ee){var ve=ee/o*Math.PI*2,Re=-r*Math.cos(ve),Le=r*Math.sin(ve);N.x=j.x+(Re*he.x+Le*X.x),N.y=j.y+(Re*he.y+Le*X.y),N.z=j.z+(Re*he.z+Le*X.z),O.push(N.x,N.y,N.z),F.subVectors(N,j).normalize(),P.push(F.x,F.y,F.z),R.push(ye/n),R.push(ee/o)}}for(var Ie=1;Ie<=n;Ie++)for(var Ue=1;Ue<=o;Ue++){var Fe=(o+1)*(Ie-1)+(Ue-1),Se=(o+1)*Ie+(Ue-1),We=(o+1)*Ie+Ue,Oe=(o+1)*(Ie-1)+Ue;M.push(Fe,Se,Oe),M.push(Se,We,Oe)}w.setIndex(M),w.setAttribute("position",new Gt(O,3)),w.setAttribute("normal",new Gt(P,3)),w.setAttribute("uv",new Gt(R,2));function De(Me,Xe,Ye,rt,nt){var bt=Math.cos(Me),Rt=Math.sin(Me),Yt=Ye/Xe*Me,at=Math.cos(Yt);nt.x=rt*(2+at)*.5*bt,nt.y=rt*(2+at)*Rt*.5,nt.z=rt*Math.sin(Yt)*.5}return w}return t}(ir),kc=function(a){Rr(t,a);function t(r,n,o,s,f){var w;n===void 0&&(n=64),o===void 0&&(o=1),s===void 0&&(s=8),f===void 0&&(f=!1),w=a.call(this)||this,w.type="TubeGeometry",w.parameters={path:r,tubularSegments:n,radius:o,radialSegments:s,closed:f};var M=r.computeFrenetFrames(n,f);w.tangents=M.tangents,w.normals=M.normals,w.binormals=M.binormals;var O=new be,P=new be,R=new xt,N=new be,F=[],j=[],q=[],X=[];H(),w.setIndex(X),w.setAttribute("position",new Gt(F,3)),w.setAttribute("normal",new Gt(j,3)),w.setAttribute("uv",new Gt(q,2));function H(){for(var ee=0;ee<n;ee++)he(ee);he(f===!1?n:0),ie(),ye()}function he(ee){N=r.getPointAt(ee/n,N);for(var ve=M.normals[ee],Re=M.binormals[ee],Le=0;Le<=s;Le++){var Ie=Le/s*Math.PI*2,Ue=Math.sin(Ie),Fe=-Math.cos(Ie);P.x=Fe*ve.x+Ue*Re.x,P.y=Fe*ve.y+Ue*Re.y,P.z=Fe*ve.z+Ue*Re.z,P.normalize(),j.push(P.x,P.y,P.z),O.x=N.x+o*P.x,O.y=N.y+o*P.y,O.z=N.z+o*P.z,F.push(O.x,O.y,O.z)}}function ye(){for(var ee=1;ee<=n;ee++)for(var ve=1;ve<=s;ve++){var Re=(s+1)*(ee-1)+(ve-1),Le=(s+1)*ee+(ve-1),Ie=(s+1)*ee+ve,Ue=(s+1)*(ee-1)+ve;X.push(Re,Le,Ue),X.push(Le,Ie,Ue)}}function ie(){for(var ee=0;ee<=n;ee++)for(var ve=0;ve<=s;ve++)R.x=ee/n,R.y=ve/s,q.push(R.x,R.y)}return w}var i=t.prototype;return i.toJSON=function(){var n=ir.prototype.toJSON.call(this);return n.path=this.parameters.path.toJSON(),n},t}(ir),Uf=function(a){Rr(t,a);function t(i){var r;if(r=a.call(this)||this,r.type="WireframeGeometry",i.isGeometry===!0)return console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),oa(r);var n=[],o=[0,0],s={},f=new be;if(i.index!==null){var w=i.attributes.position,M=i.index,O=i.groups;O.length===0&&(O=[{start:0,count:M.count,materialIndex:0}]);for(var P=0,R=O.length;P<R;++P)for(var N=O[P],F=N.start,j=N.count,q=F,X=F+j;q<X;q+=3)for(var H=0;H<3;H++){var he=M.getX(q+H),ye=M.getX(q+(H+1)%3);o[0]=Math.min(he,ye),o[1]=Math.max(he,ye);var ie=o[0]+","+o[1];s[ie]===void 0&&(s[ie]={index1:o[0],index2:o[1]})}for(var ee in s){var ve=s[ee];f.fromBufferAttribute(w,ve.index1),n.push(f.x,f.y,f.z),f.fromBufferAttribute(w,ve.index2),n.push(f.x,f.y,f.z)}}else for(var Re=i.attributes.position,Le=0,Ie=Re.count/3;Le<Ie;Le++)for(var Ue=0;Ue<3;Ue++){var Fe=3*Le+Ue;f.fromBufferAttribute(Re,Fe),n.push(f.x,f.y,f.z);var Se=3*Le+(Ue+1)%3;f.fromBufferAttribute(Re,Se),n.push(f.x,f.y,f.z)}return r.setAttribute("position",new Gt(n,3)),r}return t}(ir),xi=Object.freeze({__proto__:null,BoxGeometry:Zo,BoxBufferGeometry:Zo,CircleGeometry:xc,CircleBufferGeometry:xc,ConeGeometry:Mc,ConeBufferGeometry:Mc,CylinderGeometry:tl,CylinderBufferGeometry:tl,DodecahedronGeometry:Tc,DodecahedronBufferGeometry:Tc,EdgesGeometry:Ff,ExtrudeGeometry:ts,ExtrudeBufferGeometry:ts,IcosahedronGeometry:Pc,IcosahedronBufferGeometry:Pc,LatheGeometry:Dc,LatheBufferGeometry:Dc,OctahedronGeometry:gu,OctahedronBufferGeometry:gu,ParametricGeometry:rs,ParametricBufferGeometry:rs,PlaneGeometry:Jl,PlaneBufferGeometry:Jl,PolyhedronGeometry:Mo,PolyhedronBufferGeometry:Mo,RingGeometry:Oc,RingBufferGeometry:Oc,ShapeGeometry:yu,ShapeBufferGeometry:yu,SphereGeometry:Au,SphereBufferGeometry:Au,TetrahedronGeometry:Ic,TetrahedronBufferGeometry:Ic,TextGeometry:Bc,TextBufferGeometry:Bc,TorusGeometry:Fc,TorusBufferGeometry:Fc,TorusKnotGeometry:Nc,TorusKnotBufferGeometry:Nc,TubeGeometry:kc,TubeBufferGeometry:kc,WireframeGeometry:Uf});function ns(a){fr.call(this),this.type="ShadowMaterial",this.color=new Nt(0),this.transparent=!0,this.setValues(a)}ns.prototype=Object.create(fr.prototype),ns.prototype.constructor=ns,ns.prototype.isShadowMaterial=!0,ns.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.color.copy(a.color),this};function Za(a){Ei.call(this,a),this.type="RawShaderMaterial"}Za.prototype=Object.create(Ei.prototype),Za.prototype.constructor=Za,Za.prototype.isRawShaderMaterial=!0;function La(a){fr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Nt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jo,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(a)}La.prototype=Object.create(fr.prototype),La.prototype.constructor=La,La.prototype.isMeshStandardMaterial=!0,La.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.vertexTangents=a.vertexTangents,this};function So(a){La.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new xt(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(i){this.reflectivity=gr.clamp(2.5*(i-1)/(i+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(a)}So.prototype=Object.create(La.prototype),So.prototype.constructor=So,So.prototype.isMeshPhysicalMaterial=!0,So.prototype.copy=function(a){return La.prototype.copy.call(this,a),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=a.clearcoat,this.clearcoatMap=a.clearcoatMap,this.clearcoatRoughness=a.clearcoatRoughness,this.clearcoatRoughnessMap=a.clearcoatRoughnessMap,this.clearcoatNormalMap=a.clearcoatNormalMap,this.clearcoatNormalScale.copy(a.clearcoatNormalScale),this.reflectivity=a.reflectivity,a.sheen?this.sheen=(this.sheen||new Nt).copy(a.sheen):this.sheen=null,this.transmission=a.transmission,this.transmissionMap=a.transmissionMap,this};function _o(a){fr.call(this),this.type="MeshPhongMaterial",this.color=new Nt(16777215),this.specular=new Nt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jo,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=me,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}_o.prototype=Object.create(fr.prototype),_o.prototype.constructor=_o,_o.prototype.isMeshPhongMaterial=!0,_o.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this};function is(a){fr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Nt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jo,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}is.prototype=Object.create(fr.prototype),is.prototype.constructor=is,is.prototype.isMeshToonMaterial=!0,is.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.gradientMap=a.gradientMap,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this};function as(a){fr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jo,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}as.prototype=Object.create(fr.prototype),as.prototype.constructor=as,as.prototype.isMeshNormalMaterial=!0,as.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this};function os(a){fr.call(this),this.type="MeshLambertMaterial",this.color=new Nt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Nt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=me,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}os.prototype=Object.create(fr.prototype),os.prototype.constructor=os,os.prototype.isMeshLambertMaterial=!0,os.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this};function ss(a){fr.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Nt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jo,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}ss.prototype=Object.create(fr.prototype),ss.prototype.constructor=ss,ss.prototype.isMeshMatcapMaterial=!0,ss.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.defines={MATCAP:""},this.color.copy(a.color),this.matcap=a.matcap,this.map=a.map,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this};function ls(a){Pn.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(a)}ls.prototype=Object.create(Pn.prototype),ls.prototype.constructor=ls,ls.prototype.isLineDashedMaterial=!0,ls.prototype.copy=function(a){return Pn.prototype.copy.call(this,a),this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this};var ww=Object.freeze({__proto__:null,ShadowMaterial:ns,SpriteMaterial:xo,RawShaderMaterial:Za,ShaderMaterial:Ei,PointsMaterial:ha,MeshPhysicalMaterial:So,MeshStandardMaterial:La,MeshPhongMaterial:_o,MeshToonMaterial:is,MeshNormalMaterial:as,MeshLambertMaterial:os,MeshDepthMaterial:bo,MeshDistanceMaterial:Eo,MeshBasicMaterial:Bi,MeshMatcapMaterial:ss,LineDashedMaterial:ls,LineBasicMaterial:Pn,Material:fr}),Cn={arraySlice:function(t,i,r){return Cn.isTypedArray(t)?new t.constructor(t.subarray(i,r!==void 0?r:t.length)):t.slice(i,r)},convertArray:function(t,i,r){return!t||!r&&t.constructor===i?t:typeof i.BYTES_PER_ELEMENT=="number"?new i(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function i(s,f){return t[s]-t[f]}for(var r=t.length,n=new Array(r),o=0;o!==r;++o)n[o]=o;return n.sort(i),n},sortedArray:function(t,i,r){for(var n=t.length,o=new t.constructor(n),s=0,f=0;f!==n;++s)for(var w=r[s]*i,M=0;M!==i;++M)o[f++]=t[w+M];return o},flattenJSON:function(t,i,r,n){for(var o=1,s=t[0];s!==void 0&&s[n]===void 0;)s=t[o++];if(s!==void 0){var f=s[n];if(f!==void 0)if(Array.isArray(f))do f=s[n],f!==void 0&&(i.push(s.time),r.push.apply(r,f)),s=t[o++];while(s!==void 0);else if(f.toArray!==void 0)do f=s[n],f!==void 0&&(i.push(s.time),f.toArray(r,r.length)),s=t[o++];while(s!==void 0);else do f=s[n],f!==void 0&&(i.push(s.time),r.push(f)),s=t[o++];while(s!==void 0)}},subclip:function(t,i,r,n,o){o===void 0&&(o=30);var s=t.clone();s.name=i;for(var f=[],w=0;w<s.tracks.length;++w){for(var M=s.tracks[w],O=M.getValueSize(),P=[],R=[],N=0;N<M.times.length;++N){var F=M.times[N]*o;if(!(F<r||F>=n)){P.push(M.times[N]);for(var j=0;j<O;++j)R.push(M.values[N*O+j])}}P.length!==0&&(M.times=Cn.convertArray(P,M.times.constructor),M.values=Cn.convertArray(R,M.values.constructor),f.push(M))}s.tracks=f;for(var q=1/0,X=0;X<s.tracks.length;++X)q>s.tracks[X].times[0]&&(q=s.tracks[X].times[0]);for(var H=0;H<s.tracks.length;++H)s.tracks[H].shift(-1*q);return s.resetDuration(),s},makeClipAdditive:function(t,i,r,n){i===void 0&&(i=0),r===void 0&&(r=t),n===void 0&&(n=30),n<=0&&(n=30);for(var o=r.tracks.length,s=i/n,f=function(P){var R=r.tracks[P],N=R.ValueTypeName;if(N==="bool"||N==="string")return"continue";var F=t.tracks.find(function(Xe){return Xe.name===R.name&&Xe.ValueTypeName===N});if(F===void 0)return"continue";var j=0,q=R.getValueSize();R.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(j=q/3);var X=0,H=F.getValueSize();F.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(X=H/3);var he=R.times.length-1,ye=void 0;if(s<=R.times[0]){var ie=j,ee=q-j;ye=Cn.arraySlice(R.values,ie,ee)}else if(s>=R.times[he]){var ve=he*q+j,Re=ve+q-j;ye=Cn.arraySlice(R.values,ve,Re)}else{var Le=R.createInterpolant(),Ie=j,Ue=q-j;Le.evaluate(s),ye=Cn.arraySlice(Le.resultBuffer,Ie,Ue)}if(N==="quaternion"){var Fe=new ii().fromArray(ye).normalize().conjugate();Fe.toArray(ye)}for(var Se=F.times.length,We=0;We<Se;++We){var Oe=We*H+X;if(N==="quaternion")ii.multiplyQuaternionsFlat(F.values,Oe,ye,0,F.values,Oe);else for(var De=H-X*2,Me=0;Me<De;++Me)F.values[Oe+Me]-=ye[Me]}},w=0;w<o;++w)var M=f(w);return t.blendMode=Va,t}};function Ui(a,t,i,r){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i}Object.assign(Ui.prototype,{evaluate:function(t){var i=this.parameterPositions,r=this._cachedIndex,n=i[r],o=i[r-1];e:{t:{var s;r:{n:if(!(t<n)){for(var f=r+2;;){if(n===void 0){if(t<o)break n;return r=i.length,this._cachedIndex=r,this.afterEnd_(r-1,t,o)}if(r===f)break;if(o=n,n=i[++r],t<n)break t}s=i.length;break r}if(!(t>=o)){var w=i[1];t<w&&(r=2,o=w);for(var M=r-2;;){if(o===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(r===M)break;if(n=o,o=i[--r-1],t>=o)break t}s=r,r=0;break r}break e}for(;r<s;){var O=r+s>>>1;t<i[O]?s=O:r=O+1}if(n=i[r],o=i[r-1],o===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(n===void 0)return r=i.length,this._cachedIndex=r,this.afterEnd_(r-1,o,t)}this._cachedIndex=r,this.intervalChanged_(r,o,n)}return this.interpolate_(r,o,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var i=this.resultBuffer,r=this.sampleValues,n=this.valueSize,o=t*n,s=0;s!==n;++s)i[s]=r[o+s];return i},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Ui.prototype,{beforeStart_:Ui.prototype.copySampleValue_,afterEnd_:Ui.prototype.copySampleValue_});function Uc(a,t,i,r){Ui.call(this,a,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}Uc.prototype=Object.assign(Object.create(Ui.prototype),{constructor:Uc,DefaultSettings_:{endingStart:Pi,endingEnd:Pi},intervalChanged_:function(t,i,r){var n=this.parameterPositions,o=t-2,s=t+1,f=n[o],w=n[s];if(f===void 0)switch(this.getSettings_().endingStart){case Di:o=t,f=2*i-r;break;case aa:o=n.length-2,f=i+n[o]-n[o+1];break;default:o=t,f=r}if(w===void 0)switch(this.getSettings_().endingEnd){case Di:s=t,w=2*r-i;break;case aa:s=1,w=r+n[1]-n[0];break;default:s=t-1,w=i}var M=(r-i)*.5,O=this.valueSize;this._weightPrev=M/(i-f),this._weightNext=M/(w-r),this._offsetPrev=o*O,this._offsetNext=s*O},interpolate_:function(t,i,r,n){for(var o=this.resultBuffer,s=this.sampleValues,f=this.valueSize,w=t*f,M=w-f,O=this._offsetPrev,P=this._offsetNext,R=this._weightPrev,N=this._weightNext,F=(r-i)/(n-i),j=F*F,q=j*F,X=-R*q+2*R*j-R*F,H=(1+R)*q+(-1.5-2*R)*j+(-.5+R)*F+1,he=(-1-N)*q+(1.5+N)*j+.5*F,ye=N*q-N*j,ie=0;ie!==f;++ie)o[ie]=X*s[O+ie]+H*s[M+ie]+he*s[w+ie]+ye*s[P+ie];return o}});function bu(a,t,i,r){Ui.call(this,a,t,i,r)}bu.prototype=Object.assign(Object.create(Ui.prototype),{constructor:bu,interpolate_:function(t,i,r,n){for(var o=this.resultBuffer,s=this.sampleValues,f=this.valueSize,w=t*f,M=w-f,O=(r-i)/(n-i),P=1-O,R=0;R!==f;++R)o[R]=s[M+R]*P+s[w+R]*O;return o}});function Hc(a,t,i,r){Ui.call(this,a,t,i,r)}Hc.prototype=Object.assign(Object.create(Ui.prototype),{constructor:Hc,interpolate_:function(t){return this.copySampleValue_(t-1)}});function ai(a,t,i,r){if(a===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=Cn.convertArray(t,this.TimeBufferType),this.values=Cn.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}Object.assign(ai,{toJSON:function(t){var i=t.constructor,r;if(i.toJSON!==void 0)r=i.toJSON(t);else{r={name:t.name,times:Cn.convertArray(t.times,Array),values:Cn.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(r.interpolation=n)}return r.type=t.ValueTypeName,r}}),Object.assign(ai.prototype,{constructor:ai,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:ia,InterpolantFactoryMethodDiscrete:function(t){return new Hc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new bu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Uc(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var i;switch(t){case na:i=this.InterpolantFactoryMethodDiscrete;break;case ia:i=this.InterpolantFactoryMethodLinear;break;case Ea:i=this.InterpolantFactoryMethodSmooth;break}if(i===void 0){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=i,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return na;case this.InterpolantFactoryMethodLinear:return ia;case this.InterpolantFactoryMethodSmooth:return Ea}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(t!==0)for(var i=this.times,r=0,n=i.length;r!==n;++r)i[r]+=t;return this},scale:function(t){if(t!==1)for(var i=this.times,r=0,n=i.length;r!==n;++r)i[r]*=t;return this},trim:function(t,i){for(var r=this.times,n=r.length,o=0,s=n-1;o!==n&&r[o]<t;)++o;for(;s!==-1&&r[s]>i;)--s;if(++s,o!==0||s!==n){o>=s&&(s=Math.max(s,1),o=s-1);var f=this.getValueSize();this.times=Cn.arraySlice(r,o,s),this.values=Cn.arraySlice(this.values,o*f,s*f)}return this},validate:function(){var t=!0,i=this.getValueSize();i-Math.floor(i)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var r=this.times,n=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var s=null,f=0;f!==o;f++){var w=r[f];if(typeof w=="number"&&isNaN(w)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,w),t=!1;break}if(s!==null&&s>w){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,w,s),t=!1;break}s=w}if(n!==void 0&&Cn.isTypedArray(n))for(var M=0,O=n.length;M!==O;++M){var P=n[M];if(isNaN(P)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,M,P),t=!1;break}}return t},optimize:function(){for(var t=Cn.arraySlice(this.times),i=Cn.arraySlice(this.values),r=this.getValueSize(),n=this.getInterpolation()===Ea,o=t.length-1,s=1,f=1;f<o;++f){var w=!1,M=t[f],O=t[f+1];if(M!==O&&(f!==1||M!==t[0]))if(n)w=!0;else for(var P=f*r,R=P-r,N=P+r,F=0;F!==r;++F){var j=i[P+F];if(j!==i[R+F]||j!==i[N+F]){w=!0;break}}if(w){if(f!==s){t[s]=t[f];for(var q=f*r,X=s*r,H=0;H!==r;++H)i[X+H]=i[q+H]}++s}}if(o>0){t[s]=t[o];for(var he=o*r,ye=s*r,ie=0;ie!==r;++ie)i[ye+ie]=i[he+ie];++s}return s!==t.length?(this.times=Cn.arraySlice(t,0,s),this.values=Cn.arraySlice(i,0,s*r)):(this.times=t,this.values=i),this},clone:function(){var t=Cn.arraySlice(this.times,0),i=Cn.arraySlice(this.values,0),r=this.constructor,n=new r(this.name,t,i);return n.createInterpolant=this.createInterpolant,n}});function Gc(a,t,i){ai.call(this,a,t,i)}Gc.prototype=Object.assign(Object.create(ai.prototype),{constructor:Gc,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:na,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function Vc(a,t,i,r){ai.call(this,a,t,i,r)}Vc.prototype=Object.assign(Object.create(ai.prototype),{constructor:Vc,ValueTypeName:"color"});function il(a,t,i,r){ai.call(this,a,t,i,r)}il.prototype=Object.assign(Object.create(ai.prototype),{constructor:il,ValueTypeName:"number"});function zc(a,t,i,r){Ui.call(this,a,t,i,r)}zc.prototype=Object.assign(Object.create(Ui.prototype),{constructor:zc,interpolate_:function(t,i,r,n){for(var o=this.resultBuffer,s=this.sampleValues,f=this.valueSize,w=(r-i)/(n-i),M=t*f,O=M+f;M!==O;M+=4)ii.slerpFlat(o,0,s,M-f,s,M,w);return o}});function Eu(a,t,i,r){ai.call(this,a,t,i,r)}Eu.prototype=Object.assign(Object.create(ai.prototype),{constructor:Eu,ValueTypeName:"quaternion",DefaultInterpolation:ia,InterpolantFactoryMethodLinear:function(t){return new zc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0});function Wc(a,t,i,r){ai.call(this,a,t,i,r)}Wc.prototype=Object.assign(Object.create(ai.prototype),{constructor:Wc,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:na,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function al(a,t,i,r){ai.call(this,a,t,i,r)}al.prototype=Object.assign(Object.create(ai.prototype),{constructor:al,ValueTypeName:"vector"});function Hi(a,t,i,r){t===void 0&&(t=-1),r===void 0&&(r=wa),this.name=a,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=gr.generateUUID(),this.duration<0&&this.resetDuration()}function xw(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return il;case"vector":case"vector2":case"vector3":case"vector4":return al;case"color":return Vc;case"quaternion":return Eu;case"bool":case"boolean":return Gc;case"string":return Wc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+a)}function Mw(a){if(a.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=xw(a.type);if(a.times===void 0){var i=[],r=[];Cn.flattenJSON(a.keys,i,r,"value"),a.times=i,a.values=r}return t.parse!==void 0?t.parse(a):new t(a.name,a.times,a.values,a.interpolation)}Object.assign(Hi,{parse:function(t){for(var i=[],r=t.tracks,n=1/(t.fps||1),o=0,s=r.length;o!==s;++o)i.push(Mw(r[o]).scale(n));var f=new Hi(t.name,t.duration,i,t.blendMode);return f.uuid=t.uuid,f},toJSON:function(t){for(var i=[],r=t.tracks,n={name:t.name,duration:t.duration,tracks:i,uuid:t.uuid,blendMode:t.blendMode},o=0,s=r.length;o!==s;++o)i.push(ai.toJSON(r[o]));return n},CreateFromMorphTargetSequence:function(t,i,r,n){for(var o=i.length,s=[],f=0;f<o;f++){var w=[],M=[];w.push((f+o-1)%o,f,(f+1)%o),M.push(0,1,0);var O=Cn.getKeyframeOrder(w);w=Cn.sortedArray(w,1,O),M=Cn.sortedArray(M,1,O),!n&&w[0]===0&&(w.push(o),M.push(M[0])),s.push(new il(".morphTargetInfluences["+i[f].name+"]",w,M).scale(1/r))}return new Hi(t,-1,s)},findByName:function(t,i){var r=t;if(!Array.isArray(t)){var n=t;r=n.geometry&&n.geometry.animations||n.animations}for(var o=0;o<r.length;o++)if(r[o].name===i)return r[o];return null},CreateClipsFromMorphTargetSequences:function(t,i,r){for(var n={},o=/^([\w-]*?)([\d]+)$/,s=0,f=t.length;s<f;s++){var w=t[s],M=w.name.match(o);if(M&&M.length>1){var O=M[1],P=n[O];P||(n[O]=P=[]),P.push(w)}}var R=[];for(var N in n)R.push(Hi.CreateFromMorphTargetSequence(N,n[N],i,r));return R},parseAnimation:function(t,i){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var r=function(ve,Re,Le,Ie,Ue){if(Le.length!==0){var Fe=[],Se=[];Cn.flattenJSON(Le,Fe,Se,Ie),Fe.length!==0&&Ue.push(new ve(Re,Fe,Se))}},n=[],o=t.name||"default",s=t.fps||30,f=t.blendMode,w=t.length||-1,M=t.hierarchy||[],O=0;O<M.length;O++){var P=M[O].keys;if(!(!P||P.length===0))if(P[0].morphTargets){var R={},N=void 0;for(N=0;N<P.length;N++)if(P[N].morphTargets)for(var F=0;F<P[N].morphTargets.length;F++)R[P[N].morphTargets[F]]=-1;for(var j in R){for(var q=[],X=[],H=0;H!==P[N].morphTargets.length;++H){var he=P[N];q.push(he.time),X.push(he.morphTarget===j?1:0)}n.push(new il(".morphTargetInfluence["+j+"]",q,X))}w=R.length*(s||1)}else{var ye=".bones["+i[O].name+"]";r(al,ye+".position",P,"pos",n),r(Eu,ye+".quaternion",P,"rot",n),r(al,ye+".scale",P,"scl",n)}}if(n.length===0)return null;var ie=new Hi(o,w,n,f);return ie}}),Object.assign(Hi.prototype,{resetDuration:function(){for(var t=this.tracks,i=0,r=0,n=t.length;r!==n;++r){var o=this.tracks[r];i=Math.max(i,o.times[o.times.length-1])}return this.duration=i,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,i=0;i<this.tracks.length;i++)t=t&&this.tracks[i].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],i=0;i<this.tracks.length;i++)t.push(this.tracks[i].clone());return new Hi(this.name,this.duration,t,this.blendMode)},toJSON:function(){return Hi.toJSON(this)}});var us={enabled:!1,files:{},add:function(t,i){this.enabled!==!1&&(this.files[t]=i)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Hf(a,t,i){var r=this,n=!1,o=0,s=0,f=void 0,w=[];this.onStart=void 0,this.onLoad=a,this.onProgress=t,this.onError=i,this.itemStart=function(M){s++,n===!1&&r.onStart!==void 0&&r.onStart(M,o,s),n=!0},this.itemEnd=function(M){o++,r.onProgress!==void 0&&r.onProgress(M,o,s),o===s&&(n=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(M){r.onError!==void 0&&r.onError(M)},this.resolveURL=function(M){return f?f(M):M},this.setURLModifier=function(M){return f=M,this},this.addHandler=function(M,O){return w.push(M,O),this},this.removeHandler=function(M){var O=w.indexOf(M);return O!==-1&&w.splice(O,2),this},this.getHandler=function(M){for(var O=0,P=w.length;O<P;O+=2){var R=w[O],N=w[O+1];if(R.global&&(R.lastIndex=0),R.test(M))return N}return null}}var qv=new Hf;function fn(a){this.manager=a!==void 0?a:qv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(fn.prototype,{load:function(){},loadAsync:function(t,i){var r=this;return new Promise(function(n,o){r.load(t,n,i,o)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var fa={};function Ji(a){fn.call(this,a)}Ji.prototype=Object.assign(Object.create(fn.prototype),{constructor:Ji,load:function(t,i,r,n){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,s=us.get(t);if(s!==void 0)return o.manager.itemStart(t),setTimeout(function(){i&&i(s),o.manager.itemEnd(t)},0),s;if(fa[t]!==void 0){fa[t].push({onLoad:i,onProgress:r,onError:n});return}var f=/^data:(.*?)(;base64)?,(.*)$/,w=t.match(f),M;if(w){var O=w[1],P=!!w[2],R=w[3];R=decodeURIComponent(R),P&&(R=atob(R));try{var N,F=(this.responseType||"").toLowerCase();switch(F){case"arraybuffer":case"blob":for(var j=new Uint8Array(R.length),q=0;q<R.length;q++)j[q]=R.charCodeAt(q);F==="blob"?N=new Blob([j.buffer],{type:O}):N=j.buffer;break;case"document":var X=new DOMParser;N=X.parseFromString(R,O);break;case"json":N=JSON.parse(R);break;default:N=R;break}setTimeout(function(){i&&i(N),o.manager.itemEnd(t)},0)}catch(he){setTimeout(function(){n&&n(he),o.manager.itemError(t),o.manager.itemEnd(t)},0)}}else{fa[t]=[],fa[t].push({onLoad:i,onProgress:r,onError:n}),M=new XMLHttpRequest,M.open("GET",t,!0),M.addEventListener("load",function(he){var ye=this.response,ie=fa[t];if(delete fa[t],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),us.add(t,ye);for(var ee=0,ve=ie.length;ee<ve;ee++){var Re=ie[ee];Re.onLoad&&Re.onLoad(ye)}o.manager.itemEnd(t)}else{for(var Le=0,Ie=ie.length;Le<Ie;Le++){var Ue=ie[Le];Ue.onError&&Ue.onError(he)}o.manager.itemError(t),o.manager.itemEnd(t)}},!1),M.addEventListener("progress",function(he){for(var ye=fa[t],ie=0,ee=ye.length;ie<ee;ie++){var ve=ye[ie];ve.onProgress&&ve.onProgress(he)}},!1),M.addEventListener("error",function(he){var ye=fa[t];delete fa[t];for(var ie=0,ee=ye.length;ie<ee;ie++){var ve=ye[ie];ve.onError&&ve.onError(he)}o.manager.itemError(t),o.manager.itemEnd(t)},!1),M.addEventListener("abort",function(he){var ye=fa[t];delete fa[t];for(var ie=0,ee=ye.length;ie<ee;ie++){var ve=ye[ie];ve.onError&&ve.onError(he)}o.manager.itemError(t),o.manager.itemEnd(t)},!1),this.responseType!==void 0&&(M.responseType=this.responseType),this.withCredentials!==void 0&&(M.withCredentials=this.withCredentials),M.overrideMimeType&&M.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var H in this.requestHeader)M.setRequestHeader(H,this.requestHeader[H]);M.send(null)}return o.manager.itemStart(t),M},setResponseType:function(t){return this.responseType=t,this},setMimeType:function(t){return this.mimeType=t,this}});function Gf(a){fn.call(this,a)}Gf.prototype=Object.assign(Object.create(fn.prototype),{constructor:Gf,load:function(t,i,r,n){var o=this,s=new Ji(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,function(f){try{i(o.parse(JSON.parse(f)))}catch(w){n?n(w):console.error(w),o.manager.itemError(t)}},r,n)},parse:function(t){for(var i=[],r=0;r<t.length;r++){var n=Hi.parse(t[r]);i.push(n)}return i}});function Vf(a){fn.call(this,a)}Vf.prototype=Object.assign(Object.create(fn.prototype),{constructor:Vf,load:function(t,i,r,n){var o=this,s=[],f=new el,w=new Ji(this.manager);w.setPath(this.path),w.setResponseType("arraybuffer"),w.setRequestHeader(this.requestHeader),w.setWithCredentials(o.withCredentials);var M=0;function O(N){w.load(t[N],function(F){var j=o.parse(F,!0);s[N]={width:j.width,height:j.height,format:j.format,mipmaps:j.mipmaps},M+=1,M===6&&(j.mipmapCount===1&&(f.minFilter=ht),f.image=s,f.format=j.format,f.needsUpdate=!0,i&&i(f))},r,n)}if(Array.isArray(t))for(var P=0,R=t.length;P<R;++P)O(P);else w.load(t,function(N){var F=o.parse(N,!0);if(F.isCubemap){for(var j=F.mipmaps.length/F.mipmapCount,q=0;q<j;q++){s[q]={mipmaps:[]};for(var X=0;X<F.mipmapCount;X++)s[q].mipmaps.push(F.mipmaps[q*F.mipmapCount+X]),s[q].format=F.format,s[q].width=F.width,s[q].height=F.height}f.image=s}else f.image.width=F.width,f.image.height=F.height,f.mipmaps=F.mipmaps;F.mipmapCount===1&&(f.minFilter=ht),f.format=F.format,f.needsUpdate=!0,i&&i(f)},r,n);return f}});function ol(a){fn.call(this,a)}ol.prototype=Object.assign(Object.create(fn.prototype),{constructor:ol,load:function(t,i,r,n){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,s=us.get(t);if(s!==void 0)return o.manager.itemStart(t),setTimeout(function(){i&&i(s),o.manager.itemEnd(t)},0),s;var f=document.createElementNS("http://www.w3.org/1999/xhtml","img");function w(){f.removeEventListener("load",w,!1),f.removeEventListener("error",M,!1),us.add(t,this),i&&i(this),o.manager.itemEnd(t)}function M(O){f.removeEventListener("load",w,!1),f.removeEventListener("error",M,!1),n&&n(O),o.manager.itemError(t),o.manager.itemEnd(t)}return f.addEventListener("load",w,!1),f.addEventListener("error",M,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(f.crossOrigin=this.crossOrigin),o.manager.itemStart(t),f.src=t,f}});function jc(a){fn.call(this,a)}jc.prototype=Object.assign(Object.create(fn.prototype),{constructor:jc,load:function(t,i,r,n){var o=new Ca,s=new ol(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var f=0;function w(O){s.load(t[O],function(P){o.images[O]=P,f++,f===6&&(o.needsUpdate=!0,i&&i(o))},void 0,n)}for(var M=0;M<t.length;++M)w(M);return o}});function Xc(a){fn.call(this,a)}Xc.prototype=Object.assign(Object.create(fn.prototype),{constructor:Xc,load:function(t,i,r,n){var o=this,s=new qa,f=new Ji(this.manager);return f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setPath(this.path),f.setWithCredentials(o.withCredentials),f.load(t,function(w){var M=o.parse(w);!M||(M.image!==void 0?s.image=M.image:M.data!==void 0&&(s.image.width=M.width,s.image.height=M.height,s.image.data=M.data),s.wrapS=M.wrapS!==void 0?M.wrapS:Ht,s.wrapT=M.wrapT!==void 0?M.wrapT:Ht,s.magFilter=M.magFilter!==void 0?M.magFilter:ht,s.minFilter=M.minFilter!==void 0?M.minFilter:ht,s.anisotropy=M.anisotropy!==void 0?M.anisotropy:1,M.encoding!==void 0&&(s.encoding=M.encoding),M.flipY!==void 0&&(s.flipY=M.flipY),M.format!==void 0&&(s.format=M.format),M.type!==void 0&&(s.type=M.type),M.mipmaps!==void 0&&(s.mipmaps=M.mipmaps,s.minFilter=sr),M.mipmapCount===1&&(s.minFilter=ht),s.needsUpdate=!0,i&&i(s,M))},r,n),s}});function Yc(a){fn.call(this,a)}Yc.prototype=Object.assign(Object.create(fn.prototype),{constructor:Yc,load:function(t,i,r,n){var o=new vn,s=new ol(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(f){o.image=f;var w=t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0;o.format=w?Qi:ri,o.needsUpdate=!0,i!==void 0&&i(o)},r,n),o}});function er(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(er.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,i){var r=this.getUtoTmapping(t);return this.getPoint(r,i)},getPoints:function(t){t===void 0&&(t=5);for(var i=[],r=0;r<=t;r++)i.push(this.getPoint(r/t));return i},getSpacedPoints:function(t){t===void 0&&(t=5);for(var i=[],r=0;r<=t;r++)i.push(this.getPointAt(r/t));return i},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t===void 0&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var i=[],r,n=this.getPoint(0),o=0;i.push(0);for(var s=1;s<=t;s++)r=this.getPoint(s/t),o+=r.distanceTo(n),i.push(o),n=r;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,i){var r=this.getLengths(),n=0,o=r.length,s;i?s=i:s=t*r[o-1];for(var f=0,w=o-1,M;f<=w;)if(n=Math.floor(f+(w-f)/2),M=r[n]-s,M<0)f=n+1;else if(M>0)w=n-1;else{w=n;break}if(n=w,r[n]===s)return n/(o-1);var O=r[n],P=r[n+1],R=P-O,N=(s-O)/R,F=(n+N)/(o-1);return F},getTangent:function(t,i){var r=1e-4,n=t-r,o=t+r;n<0&&(n=0),o>1&&(o=1);var s=this.getPoint(n),f=this.getPoint(o),w=i||(s.isVector2?new xt:new be);return w.copy(f).sub(s).normalize(),w},getTangentAt:function(t,i){var r=this.getUtoTmapping(t);return this.getTangent(r,i)},computeFrenetFrames:function(t,i){for(var r=new be,n=[],o=[],s=[],f=new be,w=new Br,M=0;M<=t;M++){var O=M/t;n[M]=this.getTangentAt(O,new be),n[M].normalize()}o[0]=new be,s[0]=new be;var P=Number.MAX_VALUE,R=Math.abs(n[0].x),N=Math.abs(n[0].y),F=Math.abs(n[0].z);R<=P&&(P=R,r.set(1,0,0)),N<=P&&(P=N,r.set(0,1,0)),F<=P&&r.set(0,0,1),f.crossVectors(n[0],r).normalize(),o[0].crossVectors(n[0],f),s[0].crossVectors(n[0],o[0]);for(var j=1;j<=t;j++){if(o[j]=o[j-1].clone(),s[j]=s[j-1].clone(),f.crossVectors(n[j-1],n[j]),f.length()>Number.EPSILON){f.normalize();var q=Math.acos(gr.clamp(n[j-1].dot(n[j]),-1,1));o[j].applyMatrix4(w.makeRotationAxis(f,q))}s[j].crossVectors(n[j],o[j])}if(i===!0){var X=Math.acos(gr.clamp(o[0].dot(o[t]),-1,1));X/=t,n[0].dot(f.crossVectors(o[0],o[t]))>0&&(X=-X);for(var H=1;H<=t;H++)o[H].applyMatrix4(w.makeRotationAxis(n[H],X*H)),s[H].crossVectors(n[H],o[H])}return{tangents:n,normals:o,binormals:s}},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}});function Gi(a,t,i,r,n,o,s,f){er.call(this),this.type="EllipseCurve",this.aX=a||0,this.aY=t||0,this.xRadius=i||1,this.yRadius=r||1,this.aStartAngle=n||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=f||0}Gi.prototype=Object.create(er.prototype),Gi.prototype.constructor=Gi,Gi.prototype.isEllipseCurve=!0,Gi.prototype.getPoint=function(a,t){for(var i=t||new xt,r=Math.PI*2,n=this.aEndAngle-this.aStartAngle,o=Math.abs(n)<Number.EPSILON;n<0;)n+=r;for(;n>r;)n-=r;n<Number.EPSILON&&(o?n=0:n=r),this.aClockwise===!0&&!o&&(n===r?n=-r:n=n-r);var s=this.aStartAngle+a*n,f=this.aX+this.xRadius*Math.cos(s),w=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){var M=Math.cos(this.aRotation),O=Math.sin(this.aRotation),P=f-this.aX,R=w-this.aY;f=P*M-R*O+this.aX,w=P*O+R*M+this.aY}return i.set(f,w)},Gi.prototype.copy=function(a){return er.prototype.copy.call(this,a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this},Gi.prototype.toJSON=function(){var a=er.prototype.toJSON.call(this);return a.aX=this.aX,a.aY=this.aY,a.xRadius=this.xRadius,a.yRadius=this.yRadius,a.aStartAngle=this.aStartAngle,a.aEndAngle=this.aEndAngle,a.aClockwise=this.aClockwise,a.aRotation=this.aRotation,a},Gi.prototype.fromJSON=function(a){return er.prototype.fromJSON.call(this,a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this};function sl(a,t,i,r,n,o){Gi.call(this,a,t,i,i,r,n,o),this.type="ArcCurve"}sl.prototype=Object.create(Gi.prototype),sl.prototype.constructor=sl,sl.prototype.isArcCurve=!0;function zf(){var a=0,t=0,i=0,r=0;function n(o,s,f,w){a=o,t=f,i=-3*o+3*s-2*f-w,r=2*o-2*s+f+w}return{initCatmullRom:function(s,f,w,M,O){n(f,w,O*(w-s),O*(M-f))},initNonuniformCatmullRom:function(s,f,w,M,O,P,R){var N=(f-s)/O-(w-s)/(O+P)+(w-f)/P,F=(w-f)/P-(M-f)/(P+R)+(M-w)/R;N*=P,F*=P,n(f,w,N,F)},calc:function(s){var f=s*s,w=f*s;return a+t*s+i*f+r*w}}}var Qc=new be,Wf=new zf,jf=new zf,Xf=new zf;function di(a,t,i,r){a===void 0&&(a=[]),t===void 0&&(t=!1),i===void 0&&(i="centripetal"),r===void 0&&(r=.5),er.call(this),this.type="CatmullRomCurve3",this.points=a,this.closed=t,this.curveType=i,this.tension=r}di.prototype=Object.create(er.prototype),di.prototype.constructor=di,di.prototype.isCatmullRomCurve3=!0,di.prototype.getPoint=function(a,t){t===void 0&&(t=new be);var i=t,r=this.points,n=r.length,o=(n-(this.closed?0:1))*a,s=Math.floor(o),f=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/n)+1)*n:f===0&&s===n-1&&(s=n-2,f=1);var w,M;this.closed||s>0?w=r[(s-1)%n]:(Qc.subVectors(r[0],r[1]).add(r[0]),w=Qc);var O=r[s%n],P=r[(s+1)%n];if(this.closed||s+2<n?M=r[(s+2)%n]:(Qc.subVectors(r[n-1],r[n-2]).add(r[n-1]),M=Qc),this.curveType==="centripetal"||this.curveType==="chordal"){var R=this.curveType==="chordal"?.5:.25,N=Math.pow(w.distanceToSquared(O),R),F=Math.pow(O.distanceToSquared(P),R),j=Math.pow(P.distanceToSquared(M),R);F<1e-4&&(F=1),N<1e-4&&(N=F),j<1e-4&&(j=F),Wf.initNonuniformCatmullRom(w.x,O.x,P.x,M.x,N,F,j),jf.initNonuniformCatmullRom(w.y,O.y,P.y,M.y,N,F,j),Xf.initNonuniformCatmullRom(w.z,O.z,P.z,M.z,N,F,j)}else this.curveType==="catmullrom"&&(Wf.initCatmullRom(w.x,O.x,P.x,M.x,this.tension),jf.initCatmullRom(w.y,O.y,P.y,M.y,this.tension),Xf.initCatmullRom(w.z,O.z,P.z,M.z,this.tension));return i.set(Wf.calc(f),jf.calc(f),Xf.calc(f)),i},di.prototype.copy=function(a){er.prototype.copy.call(this,a),this.points=[];for(var t=0,i=a.points.length;t<i;t++){var r=a.points[t];this.points.push(r.clone())}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this},di.prototype.toJSON=function(){var a=er.prototype.toJSON.call(this);a.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];a.points.push(r.toArray())}return a.closed=this.closed,a.curveType=this.curveType,a.tension=this.tension,a},di.prototype.fromJSON=function(a){er.prototype.fromJSON.call(this,a),this.points=[];for(var t=0,i=a.points.length;t<i;t++){var r=a.points[t];this.points.push(new be().fromArray(r))}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this};function Kv(a,t,i,r,n){var o=(r-t)*.5,s=(n-i)*.5,f=a*a,w=a*f;return(2*i-2*r+o+s)*w+(-3*i+3*r-2*o-s)*f+o*a+i}function Tw(a,t){var i=1-a;return i*i*t}function Sw(a,t){return 2*(1-a)*a*t}function _w(a,t){return a*a*t}function wu(a,t,i,r){return Tw(a,t)+Sw(a,i)+_w(a,r)}function Cw(a,t){var i=1-a;return i*i*i*t}function Lw(a,t){var i=1-a;return 3*i*i*a*t}function Rw(a,t){return 3*(1-a)*a*a*t}function Pw(a,t){return a*a*a*t}function xu(a,t,i,r,n){return Cw(a,t)+Lw(a,i)+Rw(a,r)+Pw(a,n)}function da(a,t,i,r){a===void 0&&(a=new xt),t===void 0&&(t=new xt),i===void 0&&(i=new xt),r===void 0&&(r=new xt),er.call(this),this.type="CubicBezierCurve",this.v0=a,this.v1=t,this.v2=i,this.v3=r}da.prototype=Object.create(er.prototype),da.prototype.constructor=da,da.prototype.isCubicBezierCurve=!0,da.prototype.getPoint=function(a,t){t===void 0&&(t=new xt);var i=t,r=this.v0,n=this.v1,o=this.v2,s=this.v3;return i.set(xu(a,r.x,n.x,o.x,s.x),xu(a,r.y,n.y,o.y,s.y)),i},da.prototype.copy=function(a){return er.prototype.copy.call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this},da.prototype.toJSON=function(){var a=er.prototype.toJSON.call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a},da.prototype.fromJSON=function(a){return er.prototype.fromJSON.call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this};function Ra(a,t,i,r){a===void 0&&(a=new be),t===void 0&&(t=new be),i===void 0&&(i=new be),r===void 0&&(r=new be),er.call(this),this.type="CubicBezierCurve3",this.v0=a,this.v1=t,this.v2=i,this.v3=r}Ra.prototype=Object.create(er.prototype),Ra.prototype.constructor=Ra,Ra.prototype.isCubicBezierCurve3=!0,Ra.prototype.getPoint=function(a,t){t===void 0&&(t=new be);var i=t,r=this.v0,n=this.v1,o=this.v2,s=this.v3;return i.set(xu(a,r.x,n.x,o.x,s.x),xu(a,r.y,n.y,o.y,s.y),xu(a,r.z,n.z,o.z,s.z)),i},Ra.prototype.copy=function(a){return er.prototype.copy.call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this},Ra.prototype.toJSON=function(){var a=er.prototype.toJSON.call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a},Ra.prototype.fromJSON=function(a){return er.prototype.fromJSON.call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this};function _i(a,t){a===void 0&&(a=new xt),t===void 0&&(t=new xt),er.call(this),this.type="LineCurve",this.v1=a,this.v2=t}_i.prototype=Object.create(er.prototype),_i.prototype.constructor=_i,_i.prototype.isLineCurve=!0,_i.prototype.getPoint=function(a,t){t===void 0&&(t=new xt);var i=t;return a===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(a).add(this.v1)),i},_i.prototype.getPointAt=function(a,t){return this.getPoint(a,t)},_i.prototype.getTangent=function(a,t){var i=t||new xt;return i.copy(this.v2).sub(this.v1).normalize(),i},_i.prototype.copy=function(a){return er.prototype.copy.call(this,a),this.v1.copy(a.v1),this.v2.copy(a.v2),this},_i.prototype.toJSON=function(){var a=er.prototype.toJSON.call(this);return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a},_i.prototype.fromJSON=function(a){return er.prototype.fromJSON.call(this,a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this};function pa(a,t){a===void 0&&(a=new be),t===void 0&&(t=new be),er.call(this),this.type="LineCurve3",this.v1=a,this.v2=t}pa.prototype=Object.create(er.prototype),pa.prototype.constructor=pa,pa.prototype.isLineCurve3=!0,pa.prototype.getPoint=function(a,t){t===void 0&&(t=new be);var i=t;return a===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(a).add(this.v1)),i},pa.prototype.getPointAt=function(a,t){return this.getPoint(a,t)},pa.prototype.copy=function(a){return er.prototype.copy.call(this,a),this.v1.copy(a.v1),this.v2.copy(a.v2),this},pa.prototype.toJSON=function(){var a=er.prototype.toJSON.call(this);return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a},pa.prototype.fromJSON=function(a){return er.prototype.fromJSON.call(this,a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this};function va(a,t,i){a===void 0&&(a=new xt),t===void 0&&(t=new xt),i===void 0&&(i=new xt),er.call(this),this.type="QuadraticBezierCurve",this.v0=a,this.v1=t,this.v2=i}va.prototype=Object.create(er.prototype),va.prototype.constructor=va,va.prototype.isQuadraticBezierCurve=!0,va.prototype.getPoint=function(a,t){t===void 0&&(t=new xt);var i=t,r=this.v0,n=this.v1,o=this.v2;return i.set(wu(a,r.x,n.x,o.x),wu(a,r.y,n.y,o.y)),i},va.prototype.copy=function(a){return er.prototype.copy.call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this},va.prototype.toJSON=function(){var a=er.prototype.toJSON.call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a},va.prototype.fromJSON=function(a){return er.prototype.fromJSON.call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this};function Pa(a,t,i){a===void 0&&(a=new be),t===void 0&&(t=new be),i===void 0&&(i=new be),er.call(this),this.type="QuadraticBezierCurve3",this.v0=a,this.v1=t,this.v2=i}Pa.prototype=Object.create(er.prototype),Pa.prototype.constructor=Pa,Pa.prototype.isQuadraticBezierCurve3=!0,Pa.prototype.getPoint=function(a,t){t===void 0&&(t=new be);var i=t,r=this.v0,n=this.v1,o=this.v2;return i.set(wu(a,r.x,n.x,o.x),wu(a,r.y,n.y,o.y),wu(a,r.z,n.z,o.z)),i},Pa.prototype.copy=function(a){return er.prototype.copy.call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this},Pa.prototype.toJSON=function(){var a=er.prototype.toJSON.call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a},Pa.prototype.fromJSON=function(a){return er.prototype.fromJSON.call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this};function ma(a){a===void 0&&(a=[]),er.call(this),this.type="SplineCurve",this.points=a}ma.prototype=Object.create(er.prototype),ma.prototype.constructor=ma,ma.prototype.isSplineCurve=!0,ma.prototype.getPoint=function(a,t){t===void 0&&(t=new xt);var i=t,r=this.points,n=(r.length-1)*a,o=Math.floor(n),s=n-o,f=r[o===0?o:o-1],w=r[o],M=r[o>r.length-2?r.length-1:o+1],O=r[o>r.length-3?r.length-1:o+2];return i.set(Kv(s,f.x,w.x,M.x,O.x),Kv(s,f.y,w.y,M.y,O.y)),i},ma.prototype.copy=function(a){er.prototype.copy.call(this,a),this.points=[];for(var t=0,i=a.points.length;t<i;t++){var r=a.points[t];this.points.push(r.clone())}return this},ma.prototype.toJSON=function(){var a=er.prototype.toJSON.call(this);a.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];a.points.push(r.toArray())}return a},ma.prototype.fromJSON=function(a){er.prototype.fromJSON.call(this,a),this.points=[];for(var t=0,i=a.points.length;t<i;t++){var r=a.points[t];this.points.push(new xt().fromArray(r))}return this};var Yf=Object.freeze({__proto__:null,ArcCurve:sl,CatmullRomCurve3:di,CubicBezierCurve:da,CubicBezierCurve3:Ra,EllipseCurve:Gi,LineCurve:_i,LineCurve3:pa,QuadraticBezierCurve:va,QuadraticBezierCurve3:Pa,SplineCurve:ma});function Co(){er.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}Co.prototype=Object.assign(Object.create(er.prototype),{constructor:Co,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);t.equals(i)||this.curves.push(new _i(i,t))},getPoint:function(t){for(var i=t*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=i){var o=r[n]-i,s=this.curves[n],f=s.getLength(),w=f===0?0:1-o/f;return s.getPointAt(w)}n++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],i=0,r=0,n=this.curves.length;r<n;r++)i+=this.curves[r].getLength(),t.push(i);return this.cacheLengths=t,t},getSpacedPoints:function(t){t===void 0&&(t=40);for(var i=[],r=0;r<=t;r++)i.push(this.getPoint(r/t));return this.autoClose&&i.push(i[0]),i},getPoints:function(t){t===void 0&&(t=12);for(var i=[],r,n=0,o=this.curves;n<o.length;n++)for(var s=o[n],f=s&&s.isEllipseCurve?t*2:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?t*s.points.length:t,w=s.getPoints(f),M=0;M<w.length;M++){var O=w[M];r&&r.equals(O)||(i.push(O),r=O)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(t){er.prototype.copy.call(this,t),this.curves=[];for(var i=0,r=t.curves.length;i<r;i++){var n=t.curves[i];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=er.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var i=0,r=this.curves.length;i<r;i++){var n=this.curves[i];t.curves.push(n.toJSON())}return t},fromJSON:function(t){er.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var i=0,r=t.curves.length;i<r;i++){var n=t.curves[i];this.curves.push(new Yf[n.type]().fromJSON(n))}return this}});function ga(a){Co.call(this),this.type="Path",this.currentPoint=new xt,a&&this.setFromPoints(a)}ga.prototype=Object.assign(Object.create(Co.prototype),{constructor:ga,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var i=1,r=t.length;i<r;i++)this.lineTo(t[i].x,t[i].y);return this},moveTo:function(t,i){return this.currentPoint.set(t,i),this},lineTo:function(t,i){var r=new _i(this.currentPoint.clone(),new xt(t,i));return this.curves.push(r),this.currentPoint.set(t,i),this},quadraticCurveTo:function(t,i,r,n){var o=new va(this.currentPoint.clone(),new xt(t,i),new xt(r,n));return this.curves.push(o),this.currentPoint.set(r,n),this},bezierCurveTo:function(t,i,r,n,o,s){var f=new da(this.currentPoint.clone(),new xt(t,i),new xt(r,n),new xt(o,s));return this.curves.push(f),this.currentPoint.set(o,s),this},splineThru:function(t){var i=[this.currentPoint.clone()].concat(t),r=new ma(i);return this.curves.push(r),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,i,r,n,o,s){var f=this.currentPoint.x,w=this.currentPoint.y;return this.absarc(t+f,i+w,r,n,o,s),this},absarc:function(t,i,r,n,o,s){return this.absellipse(t,i,r,r,n,o,s),this},ellipse:function(t,i,r,n,o,s,f,w){var M=this.currentPoint.x,O=this.currentPoint.y;return this.absellipse(t+M,i+O,r,n,o,s,f,w),this},absellipse:function(t,i,r,n,o,s,f,w){var M=new Gi(t,i,r,n,o,s,f,w);if(this.curves.length>0){var O=M.getPoint(0);O.equals(this.currentPoint)||this.lineTo(O.x,O.y)}this.curves.push(M);var P=M.getPoint(1);return this.currentPoint.copy(P),this},copy:function(t){return Co.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Co.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Co.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}});function Lo(a){ga.call(this,a),this.uuid=gr.generateUUID(),this.type="Shape",this.holes=[]}Lo.prototype=Object.assign(Object.create(ga.prototype),{constructor:Lo,getPointsHoles:function(t){for(var i=[],r=0,n=this.holes.length;r<n;r++)i[r]=this.holes[r].getPoints(t);return i},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){ga.prototype.copy.call(this,t),this.holes=[];for(var i=0,r=t.holes.length;i<r;i++){var n=t.holes[i];this.holes.push(n.clone())}return this},toJSON:function(){var t=ga.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var i=0,r=this.holes.length;i<r;i++){var n=this.holes[i];t.holes.push(n.toJSON())}return t},fromJSON:function(t){ga.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var i=0,r=t.holes.length;i<r;i++){var n=t.holes[i];this.holes.push(new ga().fromJSON(n))}return this}});function Tn(a,t){t===void 0&&(t=1),$t.call(this),this.type="Light",this.color=new Nt(a),this.intensity=t}Tn.prototype=Object.assign(Object.create($t.prototype),{constructor:Tn,isLight:!0,copy:function(t){return $t.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var i=$t.prototype.toJSON.call(this,t);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),i}});function qc(a,t,i){Tn.call(this,a,i),this.type="HemisphereLight",this.position.copy($t.DefaultUp),this.updateMatrix(),this.groundColor=new Nt(t)}qc.prototype=Object.assign(Object.create(Tn.prototype),{constructor:qc,isHemisphereLight:!0,copy:function(t){return Tn.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}});function $a(a){this.camera=a,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new xt(512,512),this.map=null,this.mapPass=null,this.matrix=new Br,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Kl,this._frameExtents=new xt(1,1),this._viewportCount=1,this._viewports=[new cn(0,0,1,1)]}Object.assign($a.prototype,{_projScreenMatrix:new Br,_lightPositionWorld:new be,_lookTarget:new be,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var i=this.camera,r=this.matrix,n=this._projScreenMatrix,o=this._lookTarget,s=this._lightPositionWorld;s.setFromMatrixPosition(t.matrixWorld),i.position.copy(s),o.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(o),i.updateMatrixWorld(),n.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(i.projectionMatrix),r.multiply(i.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}});function Qf(){$a.call(this,new Fn(50,1,.5,500)),this.focus=1}Qf.prototype=Object.assign(Object.create($a.prototype),{constructor:Qf,isSpotLightShadow:!0,updateMatrices:function(t){var i=this.camera,r=gr.RAD2DEG*2*t.angle*this.focus,n=this.mapSize.width/this.mapSize.height,o=t.distance||i.far;(r!==i.fov||n!==i.aspect||o!==i.far)&&(i.fov=r,i.aspect=n,i.far=o,i.updateProjectionMatrix()),$a.prototype.updateMatrices.call(this,t)}});function Kc(a,t,i,r,n,o){Tn.call(this,a,t),this.type="SpotLight",this.position.copy($t.DefaultUp),this.updateMatrix(),this.target=new $t,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(f){this.intensity=f/Math.PI}}),this.distance=i!==void 0?i:0,this.angle=r!==void 0?r:Math.PI/3,this.penumbra=n!==void 0?n:0,this.decay=o!==void 0?o:1,this.shadow=new Qf}Kc.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Kc,isSpotLight:!0,copy:function(t){return Tn.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function qf(){$a.call(this,new Fn(90,1,.5,500)),this._frameExtents=new xt(4,2),this._viewportCount=6,this._viewports=[new cn(2,1,1,1),new cn(0,1,1,1),new cn(3,1,1,1),new cn(1,1,1,1),new cn(3,0,1,1),new cn(1,0,1,1)],this._cubeDirections=[new be(1,0,0),new be(-1,0,0),new be(0,0,1),new be(0,0,-1),new be(0,1,0),new be(0,-1,0)],this._cubeUps=[new be(0,1,0),new be(0,1,0),new be(0,1,0),new be(0,1,0),new be(0,0,1),new be(0,0,-1)]}qf.prototype=Object.assign(Object.create($a.prototype),{constructor:qf,isPointLightShadow:!0,updateMatrices:function(t,i){i===void 0&&(i=0);var r=this.camera,n=this.matrix,o=this._lightPositionWorld,s=this._lookTarget,f=this._projScreenMatrix;o.setFromMatrixPosition(t.matrixWorld),r.position.copy(o),s.copy(r.position),s.add(this._cubeDirections[i]),r.up.copy(this._cubeUps[i]),r.lookAt(s),r.updateMatrixWorld(),n.makeTranslation(-o.x,-o.y,-o.z),f.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(f)}});function Jc(a,t,i,r){Tn.call(this,a,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(o){this.intensity=o/(4*Math.PI)}}),this.distance=i!==void 0?i:0,this.decay=r!==void 0?r:1,this.shadow=new qf}Jc.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Jc,isPointLight:!0,copy:function(t){return Tn.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}});function ll(a,t,i,r,n,o){a===void 0&&(a=-1),t===void 0&&(t=1),i===void 0&&(i=1),r===void 0&&(r=-1),n===void 0&&(n=.1),o===void 0&&(o=2e3),_a.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=t,this.top=i,this.bottom=r,this.near=n,this.far=o,this.updateProjectionMatrix()}ll.prototype=Object.assign(Object.create(_a.prototype),{constructor:ll,isOrthographicCamera:!0,copy:function(t,i){return _a.prototype.copy.call(this,t,i),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this},setViewOffset:function(t,i,r,n,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=r,this.view.offsetY=n,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,o=r-t,s=r+t,f=n+i,w=n-i;if(this.view!==null&&this.view.enabled){var M=(this.right-this.left)/this.view.fullWidth/this.zoom,O=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=M*this.view.offsetX,s=o+M*this.view.width,f-=O*this.view.offsetY,w=f-O*this.view.height}this.projectionMatrix.makeOrthographic(o,s,f,w,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){var i=$t.prototype.toJSON.call(this,t);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}});function Kf(){$a.call(this,new ll(-5,5,5,-5,.5,500))}Kf.prototype=Object.assign(Object.create($a.prototype),{constructor:Kf,isDirectionalLightShadow:!0,updateMatrices:function(t){$a.prototype.updateMatrices.call(this,t)}});function Zc(a,t){Tn.call(this,a,t),this.type="DirectionalLight",this.position.copy($t.DefaultUp),this.updateMatrix(),this.target=new $t,this.shadow=new Kf}Zc.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Zc,isDirectionalLight:!0,copy:function(t){return Tn.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function $c(a,t){Tn.call(this,a,t),this.type="AmbientLight"}$c.prototype=Object.assign(Object.create(Tn.prototype),{constructor:$c,isAmbientLight:!0});function eh(a,t,i,r){Tn.call(this,a,t),this.type="RectAreaLight",this.width=i!==void 0?i:10,this.height=r!==void 0?r:10}eh.prototype=Object.assign(Object.create(Tn.prototype),{constructor:eh,isRectAreaLight:!0,copy:function(t){return Tn.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var i=Tn.prototype.toJSON.call(this,t);return i.object.width=this.width,i.object.height=this.height,i}});var Jv=function(){function a(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(var i=0;i<9;i++)this.coefficients.push(new be)}var t=a.prototype;return t.set=function(r){for(var n=0;n<9;n++)this.coefficients[n].copy(r[n]);return this},t.zero=function(){for(var r=0;r<9;r++)this.coefficients[r].set(0,0,0);return this},t.getAt=function(r,n){var o=r.x,s=r.y,f=r.z,w=this.coefficients;return n.copy(w[0]).multiplyScalar(.282095),n.addScaledVector(w[1],.488603*s),n.addScaledVector(w[2],.488603*f),n.addScaledVector(w[3],.488603*o),n.addScaledVector(w[4],1.092548*(o*s)),n.addScaledVector(w[5],1.092548*(s*f)),n.addScaledVector(w[6],.315392*(3*f*f-1)),n.addScaledVector(w[7],1.092548*(o*f)),n.addScaledVector(w[8],.546274*(o*o-s*s)),n},t.getIrradianceAt=function(r,n){var o=r.x,s=r.y,f=r.z,w=this.coefficients;return n.copy(w[0]).multiplyScalar(.886227),n.addScaledVector(w[1],2*.511664*s),n.addScaledVector(w[2],2*.511664*f),n.addScaledVector(w[3],2*.511664*o),n.addScaledVector(w[4],2*.429043*o*s),n.addScaledVector(w[5],2*.429043*s*f),n.addScaledVector(w[6],.743125*f*f-.247708),n.addScaledVector(w[7],2*.429043*o*f),n.addScaledVector(w[8],.429043*(o*o-s*s)),n},t.add=function(r){for(var n=0;n<9;n++)this.coefficients[n].add(r.coefficients[n]);return this},t.addScaledSH=function(r,n){for(var o=0;o<9;o++)this.coefficients[o].addScaledVector(r.coefficients[o],n);return this},t.scale=function(r){for(var n=0;n<9;n++)this.coefficients[n].multiplyScalar(r);return this},t.lerp=function(r,n){for(var o=0;o<9;o++)this.coefficients[o].lerp(r.coefficients[o],n);return this},t.equals=function(r){for(var n=0;n<9;n++)if(!this.coefficients[n].equals(r.coefficients[n]))return!1;return!0},t.copy=function(r){return this.set(r.coefficients)},t.clone=function(){return new this.constructor().copy(this)},t.fromArray=function(r,n){n===void 0&&(n=0);for(var o=this.coefficients,s=0;s<9;s++)o[s].fromArray(r,n+s*3);return this},t.toArray=function(r,n){r===void 0&&(r=[]),n===void 0&&(n=0);for(var o=this.coefficients,s=0;s<9;s++)o[s].toArray(r,n+s*3);return r},a.getBasisAt=function(r,n){var o=r.x,s=r.y,f=r.z;n[0]=.282095,n[1]=.488603*s,n[2]=.488603*f,n[3]=.488603*o,n[4]=1.092548*o*s,n[5]=1.092548*s*f,n[6]=.315392*(3*f*f-1),n[7]=1.092548*o*f,n[8]=.546274*(o*o-s*s)},a}();function Zi(a,t){Tn.call(this,void 0,t),this.type="LightProbe",this.sh=a!==void 0?a:new Jv}Zi.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Zi,isLightProbe:!0,copy:function(t){return Tn.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){var i=Tn.prototype.toJSON.call(this,t);return i.object.sh=this.sh.toArray(),i}});function th(a){fn.call(this,a),this.textures={}}th.prototype=Object.assign(Object.create(fn.prototype),{constructor:th,load:function(t,i,r,n){var o=this,s=new Ji(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,function(f){try{i(o.parse(JSON.parse(f)))}catch(w){n?n(w):console.error(w),o.manager.itemError(t)}},r,n)},parse:function(t){var i=this.textures;function r(M){return i[M]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",M),i[M]}var n=new ww[t.type];if(t.uuid!==void 0&&(n.uuid=t.uuid),t.name!==void 0&&(n.name=t.name),t.color!==void 0&&n.color!==void 0&&n.color.setHex(t.color),t.roughness!==void 0&&(n.roughness=t.roughness),t.metalness!==void 0&&(n.metalness=t.metalness),t.sheen!==void 0&&(n.sheen=new Nt().setHex(t.sheen)),t.emissive!==void 0&&n.emissive!==void 0&&n.emissive.setHex(t.emissive),t.specular!==void 0&&n.specular!==void 0&&n.specular.setHex(t.specular),t.shininess!==void 0&&(n.shininess=t.shininess),t.clearcoat!==void 0&&(n.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=t.clearcoatRoughness),t.fog!==void 0&&(n.fog=t.fog),t.flatShading!==void 0&&(n.flatShading=t.flatShading),t.blending!==void 0&&(n.blending=t.blending),t.combine!==void 0&&(n.combine=t.combine),t.side!==void 0&&(n.side=t.side),t.opacity!==void 0&&(n.opacity=t.opacity),t.transparent!==void 0&&(n.transparent=t.transparent),t.alphaTest!==void 0&&(n.alphaTest=t.alphaTest),t.depthTest!==void 0&&(n.depthTest=t.depthTest),t.depthWrite!==void 0&&(n.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(n.colorWrite=t.colorWrite),t.stencilWrite!==void 0&&(n.stencilWrite=t.stencilWrite),t.stencilWriteMask!==void 0&&(n.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(n.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(n.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(n.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(n.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(n.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(n.stencilZPass=t.stencilZPass),t.wireframe!==void 0&&(n.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(n.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(n.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(n.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(n.rotation=t.rotation),t.linewidth!==1&&(n.linewidth=t.linewidth),t.dashSize!==void 0&&(n.dashSize=t.dashSize),t.gapSize!==void 0&&(n.gapSize=t.gapSize),t.scale!==void 0&&(n.scale=t.scale),t.polygonOffset!==void 0&&(n.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(n.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(n.polygonOffsetUnits=t.polygonOffsetUnits),t.skinning!==void 0&&(n.skinning=t.skinning),t.morphTargets!==void 0&&(n.morphTargets=t.morphTargets),t.morphNormals!==void 0&&(n.morphNormals=t.morphNormals),t.dithering!==void 0&&(n.dithering=t.dithering),t.vertexTangents!==void 0&&(n.vertexTangents=t.vertexTangents),t.visible!==void 0&&(n.visible=t.visible),t.toneMapped!==void 0&&(n.toneMapped=t.toneMapped),t.userData!==void 0&&(n.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?n.vertexColors=t.vertexColors>0:n.vertexColors=t.vertexColors),t.uniforms!==void 0)for(var o in t.uniforms){var s=t.uniforms[o];switch(n.uniforms[o]={},s.type){case"t":n.uniforms[o].value=r(s.value);break;case"c":n.uniforms[o].value=new Nt().setHex(s.value);break;case"v2":n.uniforms[o].value=new xt().fromArray(s.value);break;case"v3":n.uniforms[o].value=new be().fromArray(s.value);break;case"v4":n.uniforms[o].value=new cn().fromArray(s.value);break;case"m3":n.uniforms[o].value=new Oi().fromArray(s.value);break;case"m4":n.uniforms[o].value=new Br().fromArray(s.value);break;default:n.uniforms[o].value=s.value}}if(t.defines!==void 0&&(n.defines=t.defines),t.vertexShader!==void 0&&(n.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(n.fragmentShader=t.fragmentShader),t.extensions!==void 0)for(var f in t.extensions)n.extensions[f]=t.extensions[f];if(t.shading!==void 0&&(n.flatShading=t.shading===1),t.size!==void 0&&(n.size=t.size),t.sizeAttenuation!==void 0&&(n.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(n.map=r(t.map)),t.matcap!==void 0&&(n.matcap=r(t.matcap)),t.alphaMap!==void 0&&(n.alphaMap=r(t.alphaMap)),t.bumpMap!==void 0&&(n.bumpMap=r(t.bumpMap)),t.bumpScale!==void 0&&(n.bumpScale=t.bumpScale),t.normalMap!==void 0&&(n.normalMap=r(t.normalMap)),t.normalMapType!==void 0&&(n.normalMapType=t.normalMapType),t.normalScale!==void 0){var w=t.normalScale;Array.isArray(w)===!1&&(w=[w,w]),n.normalScale=new xt().fromArray(w)}return t.displacementMap!==void 0&&(n.displacementMap=r(t.displacementMap)),t.displacementScale!==void 0&&(n.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(n.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(n.roughnessMap=r(t.roughnessMap)),t.metalnessMap!==void 0&&(n.metalnessMap=r(t.metalnessMap)),t.emissiveMap!==void 0&&(n.emissiveMap=r(t.emissiveMap)),t.emissiveIntensity!==void 0&&(n.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(n.specularMap=r(t.specularMap)),t.envMap!==void 0&&(n.envMap=r(t.envMap)),t.envMapIntensity!==void 0&&(n.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(n.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(n.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(n.lightMap=r(t.lightMap)),t.lightMapIntensity!==void 0&&(n.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(n.aoMap=r(t.aoMap)),t.aoMapIntensity!==void 0&&(n.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(n.gradientMap=r(t.gradientMap)),t.clearcoatMap!==void 0&&(n.clearcoatMap=r(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(n.clearcoatRoughnessMap=r(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(n.clearcoatNormalMap=r(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(n.clearcoatNormalScale=new xt().fromArray(t.clearcoatNormalScale)),t.transmission!==void 0&&(n.transmission=t.transmission),t.transmissionMap!==void 0&&(n.transmissionMap=r(t.transmissionMap)),n},setTextures:function(t){return this.textures=t,this}});var Jf={decodeText:function(t){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(t);for(var i="",r=0,n=t.length;r<n;r++)i+=String.fromCharCode(t[r]);try{return decodeURIComponent(escape(i))}catch{return i}},extractUrlBase:function(t){var i=t.lastIndexOf("/");return i===-1?"./":t.substr(0,i+1)}};function Mu(){ir.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}Mu.prototype=Object.assign(Object.create(ir.prototype),{constructor:Mu,isInstancedBufferGeometry:!0,copy:function(t){return ir.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var t=ir.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}});function rh(a,t,i,r){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),dr.call(this,a,t,i),this.meshPerAttribute=r||1}rh.prototype=Object.assign(Object.create(dr.prototype),{constructor:rh,isInstancedBufferAttribute:!0,copy:function(t){return dr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=dr.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}});function nh(a){fn.call(this,a)}nh.prototype=Object.assign(Object.create(fn.prototype),{constructor:nh,load:function(t,i,r,n){var o=this,s=new Ji(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,function(f){try{i(o.parse(JSON.parse(f)))}catch(w){n?n(w):console.error(w),o.manager.itemError(t)}},r,n)},parse:function(t){var i={},r={};function n(Me,Xe){if(i[Xe]!==void 0)return i[Xe];var Ye=Me.interleavedBuffers,rt=Ye[Xe],nt=o(Me,rt.buffer),bt=Ql(rt.type,nt),Rt=new ki(bt,rt.stride);return Rt.uuid=rt.uuid,i[Xe]=Rt,Rt}function o(Me,Xe){if(r[Xe]!==void 0)return r[Xe];var Ye=Me.arrayBuffers,rt=Ye[Xe],nt=new Uint32Array(rt).buffer;return r[Xe]=nt,nt}var s=t.isInstancedBufferGeometry?new Mu:new ir,f=t.data.index;if(f!==void 0){var w=Ql(f.type,f.array);s.setIndex(new dr(w,1))}var M=t.data.attributes;for(var O in M){var P=M[O],R=void 0;if(P.isInterleavedBufferAttribute){var N=n(t.data,P.data);R=new wo(N,P.itemSize,P.offset,P.normalized)}else{var F=Ql(P.type,P.array),j=P.isInstancedBufferAttribute?rh:dr;R=new j(F,P.itemSize,P.normalized)}P.name!==void 0&&(R.name=P.name),s.setAttribute(O,R)}var q=t.data.morphAttributes;if(q)for(var X in q){for(var H=q[X],he=[],ye=0,ie=H.length;ye<ie;ye++){var ee=H[ye],ve=void 0;if(ee.isInterleavedBufferAttribute){var Re=n(t.data,ee.data);ve=new wo(Re,ee.itemSize,ee.offset,ee.normalized)}else{var Le=Ql(ee.type,ee.array);ve=new dr(Le,ee.itemSize,ee.normalized)}ee.name!==void 0&&(ve.name=ee.name),he.push(ve)}s.morphAttributes[X]=he}var Ie=t.data.morphTargetsRelative;Ie&&(s.morphTargetsRelative=!0);var Ue=t.data.groups||t.data.drawcalls||t.data.offsets;if(Ue!==void 0)for(var Fe=0,Se=Ue.length;Fe!==Se;++Fe){var We=Ue[Fe];s.addGroup(We.start,We.count,We.materialIndex)}var Oe=t.data.boundingSphere;if(Oe!==void 0){var De=new be;Oe.center!==void 0&&De.fromArray(Oe.center),s.boundingSphere=new fo(De,Oe.radius)}return t.name&&(s.name=t.name),t.userData&&(s.userData=t.userData),s}});var Dw=function(a){Rr(t,a);function t(r){return a.call(this,r)||this}var i=t.prototype;return i.load=function(n,o,s,f){var w=this,M=this.path===""?Jf.extractUrlBase(n):this.path;this.resourcePath=this.resourcePath||M;var O=new Ji(this.manager);O.setPath(this.path),O.setRequestHeader(this.requestHeader),O.setWithCredentials(this.withCredentials),O.load(n,function(P){var R=null;try{R=JSON.parse(P)}catch(F){f!==void 0&&f(F),console.error("THREE:ObjectLoader: Can't parse "+n+".",F.message);return}var N=R.metadata;if(N===void 0||N.type===void 0||N.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+n);return}w.parse(R,o)},s,f)},i.parse=function(n,o){var s=this.parseAnimations(n.animations),f=this.parseShapes(n.shapes),w=this.parseGeometries(n.geometries,f),M=this.parseImages(n.images,function(){o!==void 0&&o(R)}),O=this.parseTextures(n.textures,M),P=this.parseMaterials(n.materials,O),R=this.parseObject(n.object,w,P,s),N=this.parseSkeletons(n.skeletons,R);if(this.bindSkeletons(R,N),o!==void 0){var F=!1;for(var j in M)if(M[j]instanceof HTMLImageElement){F=!0;break}F===!1&&o(R)}return R},i.parseShapes=function(n){var o={};if(n!==void 0)for(var s=0,f=n.length;s<f;s++){var w=new Lo().fromJSON(n[s]);o[w.uuid]=w}return o},i.parseSkeletons=function(n,o){var s={},f={};if(o.traverse(function(P){P.isBone&&(f[P.uuid]=P)}),n!==void 0)for(var w=0,M=n.length;w<M;w++){var O=new cu().fromJSON(n[w],f);s[O.uuid]=O}return s},i.parseGeometries=function(n,o){var s={},f;if(n!==void 0)for(var w=new nh,M=0,O=n.length;M<O;M++){var P=void 0,R=n[M];switch(R.type){case"PlaneGeometry":case"PlaneBufferGeometry":P=new xi[R.type](R.width,R.height,R.widthSegments,R.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":P=new xi[R.type](R.width,R.height,R.depth,R.widthSegments,R.heightSegments,R.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":P=new xi[R.type](R.radius,R.segments,R.thetaStart,R.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":P=new xi[R.type](R.radiusTop,R.radiusBottom,R.height,R.radialSegments,R.heightSegments,R.openEnded,R.thetaStart,R.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":P=new xi[R.type](R.radius,R.height,R.radialSegments,R.heightSegments,R.openEnded,R.thetaStart,R.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":P=new xi[R.type](R.radius,R.widthSegments,R.heightSegments,R.phiStart,R.phiLength,R.thetaStart,R.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":P=new xi[R.type](R.radius,R.detail);break;case"RingGeometry":case"RingBufferGeometry":P=new xi[R.type](R.innerRadius,R.outerRadius,R.thetaSegments,R.phiSegments,R.thetaStart,R.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":P=new xi[R.type](R.radius,R.tube,R.radialSegments,R.tubularSegments,R.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":P=new xi[R.type](R.radius,R.tube,R.tubularSegments,R.radialSegments,R.p,R.q);break;case"TubeGeometry":case"TubeBufferGeometry":P=new xi[R.type](new Yf[R.path.type]().fromJSON(R.path),R.tubularSegments,R.radius,R.radialSegments,R.closed);break;case"LatheGeometry":case"LatheBufferGeometry":P=new xi[R.type](R.points,R.segments,R.phiStart,R.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":P=new xi[R.type](R.vertices,R.indices,R.radius,R.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":f=[];for(var N=0,F=R.shapes.length;N<F;N++){var j=o[R.shapes[N]];f.push(j)}P=new xi[R.type](f,R.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":f=[];for(var q=0,X=R.shapes.length;q<X;q++){var H=o[R.shapes[q]];f.push(H)}var he=R.options.extrudePath;he!==void 0&&(R.options.extrudePath=new Yf[he.type]().fromJSON(he)),P=new xi[R.type](f,R.options);break;case"BufferGeometry":case"InstancedBufferGeometry":P=w.parse(R);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var ye=new THREE.LegacyJSONLoader;P=ye.parse(R,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+R.type+'"');continue}P.uuid=R.uuid,R.name!==void 0&&(P.name=R.name),P.isBufferGeometry===!0&&R.userData!==void 0&&(P.userData=R.userData),s[R.uuid]=P}return s},i.parseMaterials=function(n,o){var s={},f={};if(n!==void 0){var w=new th;w.setTextures(o);for(var M=0,O=n.length;M<O;M++){var P=n[M];if(P.type==="MultiMaterial"){for(var R=[],N=0;N<P.materials.length;N++){var F=P.materials[N];s[F.uuid]===void 0&&(s[F.uuid]=w.parse(F)),R.push(s[F.uuid])}f[P.uuid]=R}else s[P.uuid]===void 0&&(s[P.uuid]=w.parse(P)),f[P.uuid]=s[P.uuid]}}return f},i.parseAnimations=function(n){var o={};if(n!==void 0)for(var s=0;s<n.length;s++){var f=n[s],w=Hi.parse(f);o[w.uuid]=w}return o},i.parseImages=function(n,o){var s=this,f={},w;function M(ie){return s.manager.itemStart(ie),w.load(ie,function(){s.manager.itemEnd(ie)},void 0,function(){s.manager.itemError(ie),s.manager.itemEnd(ie)})}function O(ie){if(typeof ie=="string"){var ee=ie,ve=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(ee)?ee:s.resourcePath+ee;return M(ve)}else return ie.data?{data:Ql(ie.type,ie.data),width:ie.width,height:ie.height}:null}if(n!==void 0&&n.length>0){var P=new Hf(o);w=new ol(P),w.setCrossOrigin(this.crossOrigin);for(var R=0,N=n.length;R<N;R++){var F=n[R],j=F.url;if(Array.isArray(j)){f[F.uuid]=[];for(var q=0,X=j.length;q<X;q++){var H=j[q],he=O(H);he!==null&&(he instanceof HTMLImageElement?f[F.uuid].push(he):f[F.uuid].push(new qa(he.data,he.width,he.height)))}}else{var ye=O(F.url);ye!==null&&(f[F.uuid]=ye)}}}return f},i.parseTextures=function(n,o){function s(N,F){return typeof N=="number"?N:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",N),F[N])}var f={};if(n!==void 0)for(var w=0,M=n.length;w<M;w++){var O=n[w];O.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',O.uuid),o[O.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",O.image);var P=void 0,R=o[O.image];Array.isArray(R)?(P=new Ca(R),R.length===6&&(P.needsUpdate=!0)):(R&&R.data?P=new qa(R.data,R.width,R.height):P=new vn(R),R&&(P.needsUpdate=!0)),P.uuid=O.uuid,O.name!==void 0&&(P.name=O.name),O.mapping!==void 0&&(P.mapping=s(O.mapping,Ow)),O.offset!==void 0&&P.offset.fromArray(O.offset),O.repeat!==void 0&&P.repeat.fromArray(O.repeat),O.center!==void 0&&P.center.fromArray(O.center),O.rotation!==void 0&&(P.rotation=O.rotation),O.wrap!==void 0&&(P.wrapS=s(O.wrap[0],Zv),P.wrapT=s(O.wrap[1],Zv)),O.format!==void 0&&(P.format=O.format),O.type!==void 0&&(P.type=O.type),O.encoding!==void 0&&(P.encoding=O.encoding),O.minFilter!==void 0&&(P.minFilter=s(O.minFilter,$v)),O.magFilter!==void 0&&(P.magFilter=s(O.magFilter,$v)),O.anisotropy!==void 0&&(P.anisotropy=O.anisotropy),O.flipY!==void 0&&(P.flipY=O.flipY),O.premultiplyAlpha!==void 0&&(P.premultiplyAlpha=O.premultiplyAlpha),O.unpackAlignment!==void 0&&(P.unpackAlignment=O.unpackAlignment),f[O.uuid]=P}return f},i.parseObject=function(n,o,s,f){var w;function M(Re){return o[Re]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Re),o[Re]}function O(Re){if(Re!==void 0){if(Array.isArray(Re)){for(var Le=[],Ie=0,Ue=Re.length;Ie<Ue;Ie++){var Fe=Re[Ie];s[Fe]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Fe),Le.push(s[Fe])}return Le}return s[Re]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Re),s[Re]}}var P,R;switch(n.type){case"Scene":w=new Rf,n.background!==void 0&&Number.isInteger(n.background)&&(w.background=new Nt(n.background)),n.fog!==void 0&&(n.fog.type==="Fog"?w.fog=new Mv(n.fog.color,n.fog.near,n.fog.far):n.fog.type==="FogExp2"&&(w.fog=new xv(n.fog.color,n.fog.density)));break;case"PerspectiveCamera":w=new Fn(n.fov,n.aspect,n.near,n.far),n.focus!==void 0&&(w.focus=n.focus),n.zoom!==void 0&&(w.zoom=n.zoom),n.filmGauge!==void 0&&(w.filmGauge=n.filmGauge),n.filmOffset!==void 0&&(w.filmOffset=n.filmOffset),n.view!==void 0&&(w.view=Object.assign({},n.view));break;case"OrthographicCamera":w=new ll(n.left,n.right,n.top,n.bottom,n.near,n.far),n.zoom!==void 0&&(w.zoom=n.zoom),n.view!==void 0&&(w.view=Object.assign({},n.view));break;case"AmbientLight":w=new $c(n.color,n.intensity);break;case"DirectionalLight":w=new Zc(n.color,n.intensity);break;case"PointLight":w=new Jc(n.color,n.intensity,n.distance,n.decay);break;case"RectAreaLight":w=new eh(n.color,n.intensity,n.width,n.height);break;case"SpotLight":w=new Kc(n.color,n.intensity,n.distance,n.angle,n.penumbra,n.decay);break;case"HemisphereLight":w=new qc(n.color,n.groundColor,n.intensity);break;case"LightProbe":w=new Zi().fromJSON(n);break;case"SkinnedMesh":P=M(n.geometry),R=O(n.material),w=new lu(P,R),n.bindMode!==void 0&&(w.bindMode=n.bindMode),n.bindMatrix!==void 0&&w.bindMatrix.fromArray(n.bindMatrix),n.skeleton!==void 0&&(w.skeleton=n.skeleton);break;case"Mesh":P=M(n.geometry),R=O(n.material),w=new Mn(P,R);break;case"InstancedMesh":P=M(n.geometry),R=O(n.material);var N=n.count,F=n.instanceMatrix;w=new yc(P,R,N),w.instanceMatrix=new dr(new Float32Array(F.array),16);break;case"LOD":w=new su;break;case"Line":w=new Ki(M(n.geometry),O(n.material));break;case"LineLoop":w=new bc(M(n.geometry),O(n.material));break;case"LineSegments":w=new wi(M(n.geometry),O(n.material));break;case"PointCloud":case"Points":w=new $s(M(n.geometry),O(n.material));break;case"Sprite":w=new ou(O(n.material));break;case"Group":w=new Ka;break;case"Bone":w=new uu;break;default:w=new $t}if(w.uuid=n.uuid,n.name!==void 0&&(w.name=n.name),n.matrix!==void 0?(w.matrix.fromArray(n.matrix),n.matrixAutoUpdate!==void 0&&(w.matrixAutoUpdate=n.matrixAutoUpdate),w.matrixAutoUpdate&&w.matrix.decompose(w.position,w.quaternion,w.scale)):(n.position!==void 0&&w.position.fromArray(n.position),n.rotation!==void 0&&w.rotation.fromArray(n.rotation),n.quaternion!==void 0&&w.quaternion.fromArray(n.quaternion),n.scale!==void 0&&w.scale.fromArray(n.scale)),n.castShadow!==void 0&&(w.castShadow=n.castShadow),n.receiveShadow!==void 0&&(w.receiveShadow=n.receiveShadow),n.shadow&&(n.shadow.bias!==void 0&&(w.shadow.bias=n.shadow.bias),n.shadow.normalBias!==void 0&&(w.shadow.normalBias=n.shadow.normalBias),n.shadow.radius!==void 0&&(w.shadow.radius=n.shadow.radius),n.shadow.mapSize!==void 0&&w.shadow.mapSize.fromArray(n.shadow.mapSize),n.shadow.camera!==void 0&&(w.shadow.camera=this.parseObject(n.shadow.camera))),n.visible!==void 0&&(w.visible=n.visible),n.frustumCulled!==void 0&&(w.frustumCulled=n.frustumCulled),n.renderOrder!==void 0&&(w.renderOrder=n.renderOrder),n.userData!==void 0&&(w.userData=n.userData),n.layers!==void 0&&(w.layers.mask=n.layers),n.children!==void 0)for(var j=n.children,q=0;q<j.length;q++)w.add(this.parseObject(j[q],o,s,f));if(n.animations!==void 0)for(var X=n.animations,H=0;H<X.length;H++){var he=X[H];w.animations.push(f[he])}if(n.type==="LOD"){n.autoUpdate!==void 0&&(w.autoUpdate=n.autoUpdate);for(var ye=n.levels,ie=0;ie<ye.length;ie++){var ee=ye[ie],ve=w.getObjectByProperty("uuid",ee.object);ve!==void 0&&w.addLevel(ve,ee.distance)}}return w},i.bindSkeletons=function(n,o){Object.keys(o).length!==0&&n.traverse(function(s){if(s.isSkinnedMesh===!0&&s.skeleton!==void 0){var f=o[s.skeleton];f===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",s.skeleton):s.bind(f,s.bindMatrix)}})},i.setTexturePath=function(n){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(n)},t}(fn),Ow={UVMapping:fe,CubeReflectionMapping:Te,CubeRefractionMapping:Qe,EquirectangularReflectionMapping:Je,EquirectangularRefractionMapping:Mt,CubeUVReflectionMapping:Vt,CubeUVRefractionMapping:or},Zv={RepeatWrapping:Lr,ClampToEdgeWrapping:Ht,MirroredRepeatWrapping:Xr},$v={NearestFilter:Qt,NearestMipmapNearestFilter:Vr,NearestMipmapLinearFilter:yn,LinearFilter:ht,LinearMipmapNearestFilter:St,LinearMipmapLinearFilter:sr};function Zf(a){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),fn.call(this,a),this.options={premultiplyAlpha:"none"}}Zf.prototype=Object.assign(Object.create(fn.prototype),{constructor:Zf,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,i,r,n){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,s=us.get(t);if(s!==void 0)return o.manager.itemStart(t),setTimeout(function(){i&&i(s),o.manager.itemEnd(t)},0),s;var f={};f.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",fetch(t,f).then(function(w){return w.blob()}).then(function(w){return createImageBitmap(w,o.options)}).then(function(w){us.add(t,w),i&&i(w),o.manager.itemEnd(t)}).catch(function(w){n&&n(w),o.manager.itemError(t),o.manager.itemEnd(t)}),o.manager.itemStart(t)}});function $f(){this.type="ShapePath",this.color=new Nt,this.subPaths=[],this.currentPath=null}Object.assign($f.prototype,{moveTo:function(t,i){return this.currentPath=new ga,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,i),this},lineTo:function(t,i){return this.currentPath.lineTo(t,i),this},quadraticCurveTo:function(t,i,r,n){return this.currentPath.quadraticCurveTo(t,i,r,n),this},bezierCurveTo:function(t,i,r,n,o,s){return this.currentPath.bezierCurveTo(t,i,r,n,o,s),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,i){function r(Ye){for(var rt=[],nt=0,bt=Ye.length;nt<bt;nt++){var Rt=Ye[nt],Yt=new Lo;Yt.curves=Rt.curves,rt.push(Yt)}return rt}function n(Ye,rt){for(var nt=rt.length,bt=!1,Rt=nt-1,Yt=0;Yt<nt;Rt=Yt++){var at=rt[Rt],ar=rt[Yt],kt=ar.x-at.x,lr=ar.y-at.y;if(Math.abs(lr)>Number.EPSILON){if(lr<0&&(at=rt[Yt],kt=-kt,ar=rt[Rt],lr=-lr),Ye.y<at.y||Ye.y>ar.y)continue;if(Ye.y===at.y){if(Ye.x===at.x)return!0}else{var br=lr*(Ye.x-at.x)-kt*(Ye.y-at.y);if(br===0)return!0;if(br<0)continue;bt=!bt}}else{if(Ye.y!==at.y)continue;if(ar.x<=Ye.x&&Ye.x<=at.x||at.x<=Ye.x&&Ye.x<=ar.x)return!0}}return bt}var o=Ja.isClockWise,s=this.subPaths;if(s.length===0)return[];if(i===!0)return r(s);var f,w,M,O=[];if(s.length===1)return w=s[0],M=new Lo,M.curves=w.curves,O.push(M),O;var P=!o(s[0].getPoints());P=t?!P:P;var R=[],N=[],F=[],j=0,q;N[j]=void 0,F[j]=[];for(var X=0,H=s.length;X<H;X++)w=s[X],q=w.getPoints(),f=o(q),f=t?!f:f,f?(!P&&N[j]&&j++,N[j]={s:new Lo,p:q},N[j].s.curves=w.curves,P&&j++,F[j]=[]):F[j].push({h:w,p:q[0]});if(!N[0])return r(s);if(N.length>1){for(var he=!1,ye=[],ie=0,ee=N.length;ie<ee;ie++)R[ie]=[];for(var ve=0,Re=N.length;ve<Re;ve++)for(var Le=F[ve],Ie=0;Ie<Le.length;Ie++){for(var Ue=Le[Ie],Fe=!0,Se=0;Se<N.length;Se++)n(Ue.p,N[Se].p)&&(ve!==Se&&ye.push({froms:ve,tos:Se,hole:Ie}),Fe?(Fe=!1,R[Se].push(Ue)):he=!0);Fe&&R[ve].push(Ue)}ye.length>0&&(he||(F=R))}for(var We,Oe=0,De=N.length;Oe<De;Oe++){M=N[Oe].s,O.push(M),We=F[Oe];for(var Me=0,Xe=We.length;Me<Xe;Me++)M.holes.push(We[Me].h)}return O}});var em=function(){function a(i){Object.defineProperty(this,"isFont",{value:!0}),this.type="Font",this.data=i}var t=a.prototype;return t.generateShapes=function(r,n){n===void 0&&(n=100);for(var o=[],s=Iw(r,n,this.data),f=0,w=s.length;f<w;f++)Array.prototype.push.apply(o,s[f].toShapes());return o},a}();function Iw(a,t,i){for(var r=Array.from?Array.from(a):String(a).split(""),n=t/i.resolution,o=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*n,s=[],f=0,w=0,M=0;M<r.length;M++){var O=r[M];if(O===`
`)f=0,w-=o;else{var P=Bw(O,n,f,w,i);f+=P.offsetX,s.push(P.path)}}return s}function Bw(a,t,i,r,n){var o=n.glyphs[a]||n.glyphs["?"];if(!o){console.error('THREE.Font: character "'+a+'" does not exists in font family '+n.familyName+".");return}var s=new $f,f,w,M,O,P,R,N,F;if(o.o)for(var j=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),q=0,X=j.length;q<X;){var H=j[q++];switch(H){case"m":f=j[q++]*t+i,w=j[q++]*t+r,s.moveTo(f,w);break;case"l":f=j[q++]*t+i,w=j[q++]*t+r,s.lineTo(f,w);break;case"q":M=j[q++]*t+i,O=j[q++]*t+r,P=j[q++]*t+i,R=j[q++]*t+r,s.quadraticCurveTo(P,R,M,O);break;case"b":M=j[q++]*t+i,O=j[q++]*t+r,P=j[q++]*t+i,R=j[q++]*t+r,N=j[q++]*t+i,F=j[q++]*t+r,s.bezierCurveTo(P,R,N,F,M,O);break}}return{offsetX:o.ha*t,path:s}}function ed(a){fn.call(this,a)}ed.prototype=Object.assign(Object.create(fn.prototype),{constructor:ed,load:function(t,i,r,n){var o=this,s=new Ji(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,function(f){var w;try{w=JSON.parse(f)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),w=JSON.parse(f.substring(65,f.length-2))}var M=o.parse(w);i&&i(M)},r,n)},parse:function(t){return new em(t)}});var ih,td={getContext:function(){return ih===void 0&&(ih=new(window.AudioContext||window.webkitAudioContext)),ih},setContext:function(t){ih=t}};function ah(a){fn.call(this,a)}ah.prototype=Object.assign(Object.create(fn.prototype),{constructor:ah,load:function(t,i,r,n){var o=this,s=new Ji(o.manager);s.setResponseType("arraybuffer"),s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(t,function(f){try{var w=f.slice(0),M=td.getContext();M.decodeAudioData(w,function(O){i(O)})}catch(O){n?n(O):console.error(O),o.manager.itemError(t)}},r,n)}});function rd(a,t,i){Zi.call(this,void 0,i);var r=new Nt().set(a),n=new Nt().set(t),o=new be(r.r,r.g,r.b),s=new be(n.r,n.g,n.b),f=Math.sqrt(Math.PI),w=f*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(f),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(w)}rd.prototype=Object.assign(Object.create(Zi.prototype),{constructor:rd,isHemisphereLightProbe:!0,copy:function(t){return Zi.prototype.copy.call(this,t),this},toJSON:function(t){var i=Zi.prototype.toJSON.call(this,t);return i}});function nd(a,t){Zi.call(this,void 0,t);var i=new Nt().set(a);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}nd.prototype=Object.assign(Object.create(Zi.prototype),{constructor:nd,isAmbientLightProbe:!0,copy:function(t){return Zi.prototype.copy.call(this,t),this},toJSON:function(t){var i=Zi.prototype.toJSON.call(this,t);return i}});var tm=new Br,rm=new Br;function nm(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Fn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Fn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(nm.prototype,{update:function(t){var i=this._cache,r=i.focus!==t.focus||i.fov!==t.fov||i.aspect!==t.aspect*this.aspect||i.near!==t.near||i.far!==t.far||i.zoom!==t.zoom||i.eyeSep!==this.eyeSep;if(r){i.focus=t.focus,i.fov=t.fov,i.aspect=t.aspect*this.aspect,i.near=t.near,i.far=t.far,i.zoom=t.zoom,i.eyeSep=this.eyeSep;var n=t.projectionMatrix.clone(),o=i.eyeSep/2,s=o*i.near/i.focus,f=i.near*Math.tan(gr.DEG2RAD*i.fov*.5)/i.zoom,w,M;rm.elements[12]=-o,tm.elements[12]=o,w=-f*i.aspect+s,M=f*i.aspect+s,n.elements[0]=2*i.near/(M-w),n.elements[8]=(M+w)/(M-w),this.cameraL.projectionMatrix.copy(n),w=-f*i.aspect-s,M=f*i.aspect-s,n.elements[0]=2*i.near/(M-w),n.elements[8]=(M+w)/(M-w),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(rm),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(tm)}});var im=function(){function a(i){this.autoStart=i!==void 0?i:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}var t=a.prototype;return t.start=function(){this.startTime=am(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},t.stop=function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},t.getElapsedTime=function(){return this.getDelta(),this.elapsedTime},t.getDelta=function(){var r=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var n=am();r=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=r}return r},a}();function am(){return(typeof performance=="undefined"?Date:performance).now()}var cs=new be,om=new ii,Fw=new be,hs=new be,Nw=function(a){Rr(t,a);function t(){var r;return r=a.call(this)||this,r.type="AudioListener",r.context=td.getContext(),r.gain=r.context.createGain(),r.gain.connect(r.context.destination),r.filter=null,r.timeDelta=0,r._clock=new im,r}var i=t.prototype;return i.getInput=function(){return this.gain},i.removeFilter=function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},i.getFilter=function(){return this.filter},i.setFilter=function(n){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=n,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},i.getMasterVolume=function(){return this.gain.gain.value},i.setMasterVolume=function(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this},i.updateMatrixWorld=function(n){a.prototype.updateMatrixWorld.call(this,n);var o=this.context.listener,s=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(cs,om,Fw),hs.set(0,0,-1).applyQuaternion(om),o.positionX){var f=this.context.currentTime+this.timeDelta;o.positionX.linearRampToValueAtTime(cs.x,f),o.positionY.linearRampToValueAtTime(cs.y,f),o.positionZ.linearRampToValueAtTime(cs.z,f),o.forwardX.linearRampToValueAtTime(hs.x,f),o.forwardY.linearRampToValueAtTime(hs.y,f),o.forwardZ.linearRampToValueAtTime(hs.z,f),o.upX.linearRampToValueAtTime(s.x,f),o.upY.linearRampToValueAtTime(s.y,f),o.upZ.linearRampToValueAtTime(s.z,f)}else o.setPosition(cs.x,cs.y,cs.z),o.setOrientation(hs.x,hs.y,hs.z,s.x,s.y,s.z)},t}($t),id=function(a){Rr(t,a);function t(r){var n;return n=a.call(this)||this,n.type="Audio",n.listener=r,n.context=r.context,n.gain=n.context.createGain(),n.gain.connect(r.getInput()),n.autoplay=!1,n.buffer=null,n.detune=0,n.loop=!1,n.loopStart=0,n.loopEnd=0,n.offset=0,n.duration=void 0,n.playbackRate=1,n.isPlaying=!1,n.hasPlaybackControl=!0,n.source=null,n.sourceType="empty",n._startedAt=0,n._progress=0,n._connected=!1,n.filters=[],n}var i=t.prototype;return i.getOutput=function(){return this.gain},i.setNodeSource=function(n){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=n,this.connect(),this},i.setMediaElementSource=function(n){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(n),this.connect(),this},i.setMediaStreamSource=function(n){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(n),this.connect(),this},i.setBuffer=function(n){return this.buffer=n,this.sourceType="buffer",this.autoplay&&this.play(),this},i.play=function(n){if(n===void 0&&(n=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+n;var o=this.context.createBufferSource();return o.buffer=this.buffer,o.loop=this.loop,o.loopStart=this.loopStart,o.loopEnd=this.loopEnd,o.onended=this.onEnded.bind(this),o.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=o,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},i.pause=function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},i.stop=function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},i.connect=function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var n=1,o=this.filters.length;n<o;n++)this.filters[n-1].connect(this.filters[n]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this},i.disconnect=function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var n=1,o=this.filters.length;n<o;n++)this.filters[n-1].disconnect(this.filters[n]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this},i.getFilters=function(){return this.filters},i.setFilters=function(n){return n||(n=[]),this._connected===!0?(this.disconnect(),this.filters=n.slice(),this.connect()):this.filters=n.slice(),this},i.setDetune=function(n){if(this.detune=n,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},i.getDetune=function(){return this.detune},i.getFilter=function(){return this.getFilters()[0]},i.setFilter=function(n){return this.setFilters(n?[n]:[])},i.setPlaybackRate=function(n){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=n,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},i.getPlaybackRate=function(){return this.playbackRate},i.onEnded=function(){this.isPlaying=!1},i.getLoop=function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},i.setLoop=function(n){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=n,this.isPlaying===!0&&(this.source.loop=this.loop),this},i.setLoopStart=function(n){return this.loopStart=n,this},i.setLoopEnd=function(n){return this.loopEnd=n,this},i.getVolume=function(){return this.gain.gain.value},i.setVolume=function(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this},t}($t),fs=new be,sm=new ii,kw=new be,ds=new be,Uw=function(a){Rr(t,a);function t(r){var n;return n=a.call(this,r)||this,n.panner=n.context.createPanner(),n.panner.panningModel="HRTF",n.panner.connect(n.gain),n}var i=t.prototype;return i.getOutput=function(){return this.panner},i.getRefDistance=function(){return this.panner.refDistance},i.setRefDistance=function(n){return this.panner.refDistance=n,this},i.getRolloffFactor=function(){return this.panner.rolloffFactor},i.setRolloffFactor=function(n){return this.panner.rolloffFactor=n,this},i.getDistanceModel=function(){return this.panner.distanceModel},i.setDistanceModel=function(n){return this.panner.distanceModel=n,this},i.getMaxDistance=function(){return this.panner.maxDistance},i.setMaxDistance=function(n){return this.panner.maxDistance=n,this},i.setDirectionalCone=function(n,o,s){return this.panner.coneInnerAngle=n,this.panner.coneOuterAngle=o,this.panner.coneOuterGain=s,this},i.updateMatrixWorld=function(n){if(a.prototype.updateMatrixWorld.call(this,n),!(this.hasPlaybackControl===!0&&this.isPlaying===!1)){this.matrixWorld.decompose(fs,sm,kw),ds.set(0,0,1).applyQuaternion(sm);var o=this.panner;if(o.positionX){var s=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(fs.x,s),o.positionY.linearRampToValueAtTime(fs.y,s),o.positionZ.linearRampToValueAtTime(fs.z,s),o.orientationX.linearRampToValueAtTime(ds.x,s),o.orientationY.linearRampToValueAtTime(ds.y,s),o.orientationZ.linearRampToValueAtTime(ds.z,s)}else o.setPosition(fs.x,fs.y,fs.z),o.setOrientation(ds.x,ds.y,ds.z)}},t}(id),lm=function(){function a(i,r){r===void 0&&(r=2048),this.analyser=i.context.createAnalyser(),this.analyser.fftSize=r,this.data=new Uint8Array(this.analyser.frequencyBinCount),i.getOutput().connect(this.analyser)}var t=a.prototype;return t.getFrequencyData=function(){return this.analyser.getByteFrequencyData(this.data),this.data},t.getAverageFrequency=function(){for(var r=0,n=this.getFrequencyData(),o=0;o<n.length;o++)r+=n[o];return r/n.length},a}();function ad(a,t,i){this.binding=a,this.valueSize=i;var r,n,o;switch(t){case"quaternion":r=this._slerp,n=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,n=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,n=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=n,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(ad.prototype,{accumulate:function(t,i){var r=this.buffer,n=this.valueSize,o=t*n+n,s=this.cumulativeWeight;if(s===0){for(var f=0;f!==n;++f)r[o+f]=r[f];s=i}else{s+=i;var w=i/s;this._mixBufferRegion(r,o,0,w,n)}this.cumulativeWeight=s},accumulateAdditive:function(t){var i=this.buffer,r=this.valueSize,n=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(i,n,0,t,r),this.cumulativeWeightAdditive+=t},apply:function(t){var i=this.valueSize,r=this.buffer,n=t*i+i,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,f=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){var w=i*this._origIndex;this._mixBufferRegion(r,n,w,1-o,i)}s>0&&this._mixBufferRegionAdditive(r,n,this._addIndex*i,1,i);for(var M=i,O=i+i;M!==O;++M)if(r[M]!==r[M+i]){f.setValue(r,n);break}},saveOriginalState:function(){var t=this.binding,i=this.buffer,r=this.valueSize,n=r*this._origIndex;t.getValue(i,n);for(var o=r,s=n;o!==s;++o)i[o]=i[n+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var t=this.valueSize*3;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){for(var t=this._addIndex*this.valueSize,i=t+this.valueSize,r=t;r<i;r++)this.buffer[r]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){for(var t=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize,r=0;r<this.valueSize;r++)this.buffer[i+r]=this.buffer[t+r]},_select:function(t,i,r,n,o){if(n>=.5)for(var s=0;s!==o;++s)t[i+s]=t[r+s]},_slerp:function(t,i,r,n){ii.slerpFlat(t,i,t,i,t,r,n)},_slerpAdditive:function(t,i,r,n,o){var s=this._workIndex*o;ii.multiplyQuaternionsFlat(t,s,t,i,t,r),ii.slerpFlat(t,i,t,i,t,s,n)},_lerp:function(t,i,r,n,o){for(var s=1-n,f=0;f!==o;++f){var w=i+f;t[w]=t[w]*s+t[r+f]*n}},_lerpAdditive:function(t,i,r,n,o){for(var s=0;s!==o;++s){var f=i+s;t[f]=t[f]+t[r+s]*n}}});var od="\\[\\]\\.:\\/",Hw=new RegExp("["+od+"]","g"),sd="[^"+od+"]",Gw="[^"+od.replace("\\.","")+"]",Vw=/((?:WC+[\/:])*)/.source.replace("WC",sd),zw=/(WCOD+)?/.source.replace("WCOD",Gw),Ww=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",sd),jw=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",sd),Xw=new RegExp("^"+Vw+zw+Ww+jw+"$"),Yw=["material","materials","bones"];function um(a,t,i){var r=i||pi.parseTrackName(t);this._targetGroup=a,this._bindings=a.subscribe_(t,r)}Object.assign(um.prototype,{getValue:function(t,i){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];n!==void 0&&n.getValue(t,i)},setValue:function(t,i){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,o=r.length;n!==o;++n)r[n].setValue(t,i)},bind:function(){for(var t=this._bindings,i=this._targetGroup.nCachedObjects_,r=t.length;i!==r;++i)t[i].bind()},unbind:function(){for(var t=this._bindings,i=this._targetGroup.nCachedObjects_,r=t.length;i!==r;++i)t[i].unbind()}});function pi(a,t,i){this.path=t,this.parsedPath=i||pi.parseTrackName(t),this.node=pi.findNode(a,this.parsedPath.nodeName)||a,this.rootNode=a}Object.assign(pi,{Composite:um,create:function(t,i,r){return t&&t.isAnimationObjectGroup?new pi.Composite(t,i,r):new pi(t,i,r)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(Hw,"")},parseTrackName:function(t){var i=Xw.exec(t);if(!i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){var o=r.nodeName.substring(n+1);Yw.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r},findNode:function(t,i){if(!i||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){var r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){var n=function s(f){for(var w=0;w<f.length;w++){var M=f[w];if(M.name===i||M.uuid===i)return M;var O=s(M.children);if(O)return O}return null},o=n(t.children);if(o)return o}return null}}),Object.assign(pi.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,i){t[i]=this.node[this.propertyName]},function(t,i){for(var r=this.resolvedProperty,n=0,o=r.length;n!==o;++n)t[i++]=r[n]},function(t,i){t[i]=this.resolvedProperty[this.propertyIndex]},function(t,i){this.resolvedProperty.toArray(t,i)}],SetterByBindingTypeAndVersioning:[[function(t,i){this.targetObject[this.propertyName]=t[i]},function(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0},function(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,i){for(var r=this.resolvedProperty,n=0,o=r.length;n!==o;++n)r[n]=t[i++]},function(t,i){for(var r=this.resolvedProperty,n=0,o=r.length;n!==o;++n)r[n]=t[i++];this.targetObject.needsUpdate=!0},function(t,i){for(var r=this.resolvedProperty,n=0,o=r.length;n!==o;++n)r[n]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,i){this.resolvedProperty[this.propertyIndex]=t[i]},function(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0},function(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,i){this.resolvedProperty.fromArray(t,i)},function(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0},function(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,i){this.bind(),this.getValue(t,i)},setValue:function(t,i){this.bind(),this.setValue(t,i)},bind:function(){var t=this.node,i=this.parsedPath,r=i.objectName,n=i.propertyName,o=i.propertyIndex;if(t||(t=pi.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){var s=i.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(var f=0;f<t.length;f++)if(t[f].name===s){s=f;break}break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(s!==void 0){if(t[s]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[s]}}var w=t[n];if(w===void 0){var M=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+M+"."+n+" but it wasn't found.",t);return}var O=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?O=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(O=this.Versioning.MatrixWorldNeedsUpdate);var P=this.BindingType.Direct;if(o!==void 0){if(n==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}P=this.BindingType.ArrayElement,this.resolvedProperty=w,this.propertyIndex=o}else w.fromArray!==void 0&&w.toArray!==void 0?(P=this.BindingType.HasFromToArray,this.resolvedProperty=w):Array.isArray(w)?(P=this.BindingType.EntireArray,this.resolvedProperty=w):this.propertyName=n;this.getValue=this.GetterByBindingType[P],this.setValue=this.SetterByBindingTypeAndVersioning[P][O]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(pi.prototype,{_getValue_unbound:pi.prototype.getValue,_setValue_unbound:pi.prototype.setValue});function cm(){this.uuid=gr.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var a={};this._indicesByUUID=a;for(var t=0,i=arguments.length;t!==i;++t)a[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}Object.assign(cm.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,i=this._indicesByUUID,r=this._paths,n=this._parsedPaths,o=this._bindings,s=o.length,f=void 0,w=t.length,M=this.nCachedObjects_,O=0,P=arguments.length;O!==P;++O){var R=arguments[O],N=R.uuid,F=i[N];if(F===void 0){F=w++,i[N]=F,t.push(R);for(var j=0,q=s;j!==q;++j)o[j].push(new pi(R,r[j],n[j]))}else if(F<M){f=t[F];var X=--M,H=t[X];i[H.uuid]=F,t[F]=H,i[N]=X,t[X]=R;for(var he=0,ye=s;he!==ye;++he){var ie=o[he],ee=ie[X],ve=ie[F];ie[F]=ee,ve===void 0&&(ve=new pi(R,r[he],n[he])),ie[X]=ve}}else t[F]!==f&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=M},remove:function(){for(var t=this._objects,i=this._indicesByUUID,r=this._bindings,n=r.length,o=this.nCachedObjects_,s=0,f=arguments.length;s!==f;++s){var w=arguments[s],M=w.uuid,O=i[M];if(O!==void 0&&O>=o){var P=o++,R=t[P];i[R.uuid]=O,t[O]=R,i[M]=P,t[P]=w;for(var N=0,F=n;N!==F;++N){var j=r[N],q=j[P],X=j[O];j[O]=q,j[P]=X}}}this.nCachedObjects_=o},uncache:function(){for(var t=this._objects,i=this._indicesByUUID,r=this._bindings,n=r.length,o=this.nCachedObjects_,s=t.length,f=0,w=arguments.length;f!==w;++f){var M=arguments[f],O=M.uuid,P=i[O];if(P!==void 0)if(delete i[O],P<o){var R=--o,N=t[R],F=--s,j=t[F];i[N.uuid]=P,t[P]=N,i[j.uuid]=R,t[R]=j,t.pop();for(var q=0,X=n;q!==X;++q){var H=r[q],he=H[R],ye=H[F];H[P]=he,H[R]=ye,H.pop()}}else{var ie=--s,ee=t[ie];ie>0&&(i[ee.uuid]=P),t[P]=ee,t.pop();for(var ve=0,Re=n;ve!==Re;++ve){var Le=r[ve];Le[P]=Le[ie],Le.pop()}}}this.nCachedObjects_=o},subscribe_:function(t,i){var r=this._bindingsIndicesByPath,n=r[t],o=this._bindings;if(n!==void 0)return o[n];var s=this._paths,f=this._parsedPaths,w=this._objects,M=w.length,O=this.nCachedObjects_,P=new Array(M);n=o.length,r[t]=n,s.push(t),f.push(i),o.push(P);for(var R=O,N=w.length;R!==N;++R){var F=w[R];P[R]=new pi(F,t,i)}return P},unsubscribe_:function(t){var i=this._bindingsIndicesByPath,r=i[t];if(r!==void 0){var n=this._paths,o=this._parsedPaths,s=this._bindings,f=s.length-1,w=s[f],M=t[f];i[M]=r,s[r]=w,s.pop(),o[r]=o[f],o.pop(),n[r]=n[f],n.pop()}}});var Qw=function(){function a(i,r,n,o){n===void 0&&(n=null),o===void 0&&(o=r.blendMode),this._mixer=i,this._clip=r,this._localRoot=n,this.blendMode=o;for(var s=r.tracks,f=s.length,w=new Array(f),M={endingStart:Pi,endingEnd:Pi},O=0;O!==f;++O){var P=s[O].createInterpolant(null);w[O]=P,P.settings=M}this._interpolantSettings=M,this._interpolants=w,this._propertyBindings=new Array(f),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ra,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}var t=a.prototype;return t.play=function(){return this._mixer._activateAction(this),this},t.stop=function(){return this._mixer._deactivateAction(this),this.reset()},t.reset=function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},t.isRunning=function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},t.isScheduled=function(){return this._mixer._isActiveAction(this)},t.startAt=function(r){return this._startTime=r,this},t.setLoop=function(r,n){return this.loop=r,this.repetitions=n,this},t.setEffectiveWeight=function(r){return this.weight=r,this._effectiveWeight=this.enabled?r:0,this.stopFading()},t.getEffectiveWeight=function(){return this._effectiveWeight},t.fadeIn=function(r){return this._scheduleFading(r,0,1)},t.fadeOut=function(r){return this._scheduleFading(r,1,0)},t.crossFadeFrom=function(r,n,o){if(r.fadeOut(n),this.fadeIn(n),o){var s=this._clip.duration,f=r._clip.duration,w=f/s,M=s/f;r.warp(1,w,n),this.warp(M,1,n)}return this},t.crossFadeTo=function(r,n,o){return r.crossFadeFrom(this,n,o)},t.stopFading=function(){var r=this._weightInterpolant;return r!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this},t.setEffectiveTimeScale=function(r){return this.timeScale=r,this._effectiveTimeScale=this.paused?0:r,this.stopWarping()},t.getEffectiveTimeScale=function(){return this._effectiveTimeScale},t.setDuration=function(r){return this.timeScale=this._clip.duration/r,this.stopWarping()},t.syncWith=function(r){return this.time=r.time,this.timeScale=r.timeScale,this.stopWarping()},t.halt=function(r){return this.warp(this._effectiveTimeScale,0,r)},t.warp=function(r,n,o){var s=this._mixer,f=s.time,w=this.timeScale,M=this._timeScaleInterpolant;M===null&&(M=s._lendControlInterpolant(),this._timeScaleInterpolant=M);var O=M.parameterPositions,P=M.sampleValues;return O[0]=f,O[1]=f+o,P[0]=r/w,P[1]=n/w,this},t.stopWarping=function(){var r=this._timeScaleInterpolant;return r!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this},t.getMixer=function(){return this._mixer},t.getClip=function(){return this._clip},t.getRoot=function(){return this._localRoot||this._mixer._root},t._update=function(r,n,o,s){if(!this.enabled){this._updateWeight(r);return}var f=this._startTime;if(f!==null){var w=(r-f)*o;if(w<0||o===0)return;this._startTime=null,n=o*w}n*=this._updateTimeScale(r);var M=this._updateTime(n),O=this._updateWeight(r);if(O>0){var P=this._interpolants,R=this._propertyBindings;switch(this.blendMode){case Va:for(var N=0,F=P.length;N!==F;++N)P[N].evaluate(M),R[N].accumulateAdditive(O);break;case wa:default:for(var j=0,q=P.length;j!==q;++j)P[j].evaluate(M),R[j].accumulate(s,O)}}},t._updateWeight=function(r){var n=0;if(this.enabled){n=this.weight;var o=this._weightInterpolant;if(o!==null){var s=o.evaluate(r)[0];n*=s,r>o.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n},t._updateTimeScale=function(r){var n=0;if(!this.paused){n=this.timeScale;var o=this._timeScaleInterpolant;if(o!==null){var s=o.evaluate(r)[0];n*=s,r>o.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n},t._updateTime=function(r){var n=this._clip.duration,o=this.loop,s=this.time+r,f=this._loopCount,w=o===so;if(r===0)return f===-1?s:w&&(f&1)==1?n-s:s;if(o===hi){f===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=n)s=n;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:r<0?-1:1})}}else{if(f===-1&&(r>=0?(f=0,this._setEndings(!0,this.repetitions===0,w)):this._setEndings(this.repetitions===0,!0,w)),s>=n||s<0){var M=Math.floor(s/n);s-=n*M,f+=Math.abs(M);var O=this.repetitions-f;if(O<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=r>0?n:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:r>0?1:-1});else{if(O===1){var P=r<0;this._setEndings(P,!P,w)}else this._setEndings(!1,!1,w);this._loopCount=f,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:M})}}else this.time=s;if(w&&(f&1)==1)return n-s}return s},t._setEndings=function(r,n,o){var s=this._interpolantSettings;o?(s.endingStart=Di,s.endingEnd=Di):(r?s.endingStart=this.zeroSlopeAtStart?Di:Pi:s.endingStart=aa,n?s.endingEnd=this.zeroSlopeAtEnd?Di:Pi:s.endingEnd=aa)},t._scheduleFading=function(r,n,o){var s=this._mixer,f=s.time,w=this._weightInterpolant;w===null&&(w=s._lendControlInterpolant(),this._weightInterpolant=w);var M=w.parameterPositions,O=w.sampleValues;return M[0]=f,O[0]=n,M[1]=f+r,O[1]=o,this},a}();function ld(a){this._root=a,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}ld.prototype=Object.assign(Object.create(xa.prototype),{constructor:ld,_bindAction:function(t,i){var r=t._localRoot||this._root,n=t._clip.tracks,o=n.length,s=t._propertyBindings,f=t._interpolants,w=r.uuid,M=this._bindingsByRootAndName,O=M[w];O===void 0&&(O={},M[w]=O);for(var P=0;P!==o;++P){var R=n[P],N=R.name,F=O[N];if(F!==void 0)s[P]=F;else{if(F=s[P],F!==void 0){F._cacheIndex===null&&(++F.referenceCount,this._addInactiveBinding(F,w,N));continue}var j=i&&i._propertyBindings[P].binding.parsedPath;F=new ad(pi.create(r,N,j),R.ValueTypeName,R.getValueSize()),++F.referenceCount,this._addInactiveBinding(F,w,N),s[P]=F}f[P].resultBuffer=F.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){var i=(t._localRoot||this._root).uuid,r=t._clip.uuid,n=this._actionsByClip[r];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,r,i)}for(var o=t._propertyBindings,s=0,f=o.length;s!==f;++s){var w=o[s];w.useCount++==0&&(this._lendBinding(w),w.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var i=t._propertyBindings,r=0,n=i.length;r!==n;++r){var o=i[r];--o.useCount==0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var i=t._cacheIndex;return i!==null&&i<this._nActiveActions},_addInactiveAction:function(t,i,r){var n=this._actions,o=this._actionsByClip,s=o[i];if(s===void 0)s={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[i]=s;else{var f=s.knownActions;t._byClipCacheIndex=f.length,f.push(t)}t._cacheIndex=n.length,n.push(t),s.actionByRoot[r]=t},_removeInactiveAction:function(t){var i=this._actions,r=i[i.length-1],n=t._cacheIndex;r._cacheIndex=n,i[n]=r,i.pop(),t._cacheIndex=null;var o=t._clip.uuid,s=this._actionsByClip,f=s[o],w=f.knownActions,M=w[w.length-1],O=t._byClipCacheIndex;M._byClipCacheIndex=O,w[O]=M,w.pop(),t._byClipCacheIndex=null;var P=f.actionByRoot,R=(t._localRoot||this._root).uuid;delete P[R],w.length===0&&delete s[o],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var i=t._propertyBindings,r=0,n=i.length;r!==n;++r){var o=i[r];--o.referenceCount==0&&this._removeInactiveBinding(o)}},_lendAction:function(t){var i=this._actions,r=t._cacheIndex,n=this._nActiveActions++,o=i[n];t._cacheIndex=n,i[n]=t,o._cacheIndex=r,i[r]=o},_takeBackAction:function(t){var i=this._actions,r=t._cacheIndex,n=--this._nActiveActions,o=i[n];t._cacheIndex=n,i[n]=t,o._cacheIndex=r,i[r]=o},_addInactiveBinding:function(t,i,r){var n=this._bindingsByRootAndName,o=this._bindings,s=n[i];s===void 0&&(s={},n[i]=s),s[r]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var i=this._bindings,r=t.binding,n=r.rootNode.uuid,o=r.path,s=this._bindingsByRootAndName,f=s[n],w=i[i.length-1],M=t._cacheIndex;w._cacheIndex=M,i[M]=w,i.pop(),delete f[o],Object.keys(f).length===0&&delete s[n]},_lendBinding:function(t){var i=this._bindings,r=t._cacheIndex,n=this._nActiveBindings++,o=i[n];t._cacheIndex=n,i[n]=t,o._cacheIndex=r,i[r]=o},_takeBackBinding:function(t){var i=this._bindings,r=t._cacheIndex,n=--this._nActiveBindings,o=i[n];t._cacheIndex=n,i[n]=t,o._cacheIndex=r,i[r]=o},_lendControlInterpolant:function(){var t=this._controlInterpolants,i=this._nActiveControlInterpolants++,r=t[i];return r===void 0&&(r=new bu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=i,t[i]=r),r},_takeBackControlInterpolant:function(t){var i=this._controlInterpolants,r=t.__cacheIndex,n=--this._nActiveControlInterpolants,o=i[n];t.__cacheIndex=n,i[n]=t,o.__cacheIndex=r,i[r]=o},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,i,r){var n=i||this._root,o=n.uuid,s=typeof t=="string"?Hi.findByName(n,t):t,f=s!==null?s.uuid:t,w=this._actionsByClip[f],M=null;if(r===void 0&&(s!==null?r=s.blendMode:r=wa),w!==void 0){var O=w.actionByRoot[o];if(O!==void 0&&O.blendMode===r)return O;M=w.knownActions[0],s===null&&(s=M._clip)}if(s===null)return null;var P=new Qw(this,s,i,r);return this._bindAction(P,M),this._addInactiveAction(P,f,o),P},existingAction:function(t,i){var r=i||this._root,n=r.uuid,o=typeof t=="string"?Hi.findByName(r,t):t,s=o?o.uuid:t,f=this._actionsByClip[s];return f!==void 0&&f.actionByRoot[n]||null},stopAllAction:function(){for(var t=this._actions,i=this._nActiveActions,r=i-1;r>=0;--r)t[r].stop();return this},update:function(t){t*=this.timeScale;for(var i=this._actions,r=this._nActiveActions,n=this.time+=t,o=Math.sign(t),s=this._accuIndex^=1,f=0;f!==r;++f){var w=i[f];w._update(n,t,o,s)}for(var M=this._bindings,O=this._nActiveBindings,P=0;P!==O;++P)M[P].apply(s);return this},setTime:function(t){this.time=0;for(var i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var i=this._actions,r=t.uuid,n=this._actionsByClip,o=n[r];if(o!==void 0){for(var s=o.knownActions,f=0,w=s.length;f!==w;++f){var M=s[f];this._deactivateAction(M);var O=M._cacheIndex,P=i[i.length-1];M._cacheIndex=null,M._byClipCacheIndex=null,P._cacheIndex=O,i[O]=P,i.pop(),this._removeInactiveBindingsForAction(M)}delete n[r]}},uncacheRoot:function(t){var i=t.uuid,r=this._actionsByClip;for(var n in r){var o=r[n].actionByRoot,s=o[i];s!==void 0&&(this._deactivateAction(s),this._removeInactiveAction(s))}var f=this._bindingsByRootAndName,w=f[i];if(w!==void 0)for(var M in w){var O=w[M];O.restoreOriginalState(),this._removeInactiveBinding(O)}},uncacheAction:function(t,i){var r=this.existingAction(t,i);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}});var hm=function(){function a(i){typeof i=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),i=arguments[1]),this.value=i}var t=a.prototype;return t.clone=function(){return new a(this.value.clone===void 0?this.value:this.value.clone())},a}();function ud(a,t,i){ki.call(this,a,t),this.meshPerAttribute=i||1}ud.prototype=Object.assign(Object.create(ki.prototype),{constructor:ud,isInstancedInterleavedBuffer:!0,copy:function(t){return ki.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){var i=ki.prototype.clone.call(this,t);return i.meshPerAttribute=this.meshPerAttribute,i},toJSON:function(t){var i=ki.prototype.toJSON.call(this,t);return i.isInstancedInterleavedBuffer=!0,i.meshPerAttribute=this.meshPerAttribute,i}});function cd(a,t,i,r,n){this.buffer=a,this.type=t,this.itemSize=i,this.elementSize=r,this.count=n,this.version=0}Object.defineProperty(cd.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}}),Object.assign(cd.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,i){return this.type=t,this.elementSize=i,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}});function hd(a,t,i,r){this.ray=new Bs(a,t),this.near=i||0,this.far=r||1/0,this.camera=null,this.layers=new uf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function fm(a,t){return a.distance-t.distance}function fd(a,t,i,r){if(a.layers.test(t.layers)&&a.raycast(t,i),r===!0)for(var n=a.children,o=0,s=n.length;o<s;o++)fd(n[o],t,i,!0)}Object.assign(hd.prototype,{set:function(t,i){this.ray.set(t,i)},setFromCamera:function(t,i){i&&i.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(i.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):i&&i.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(i.near+i.far)/(i.near-i.far)).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i):console.error("THREE.Raycaster: Unsupported camera type: "+i.type)},intersectObject:function(t,i,r){var n=r||[];return fd(t,this,n,i),n.sort(fm),n},intersectObjects:function(t,i,r){var n=r||[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var o=0,s=t.length;o<s;o++)fd(t[o],this,n,i);return n.sort(fm),n}});var qw=function(){function a(i,r,n){return i===void 0&&(i=1),r===void 0&&(r=0),n===void 0&&(n=0),this.radius=i,this.phi=r,this.theta=n,this}var t=a.prototype;return t.set=function(r,n,o){return this.radius=r,this.phi=n,this.theta=o,this},t.clone=function(){return new this.constructor().copy(this)},t.copy=function(r){return this.radius=r.radius,this.phi=r.phi,this.theta=r.theta,this},t.makeSafe=function(){var r=1e-6;return this.phi=Math.max(r,Math.min(Math.PI-r,this.phi)),this},t.setFromVector3=function(r){return this.setFromCartesianCoords(r.x,r.y,r.z)},t.setFromCartesianCoords=function(r,n,o){return this.radius=Math.sqrt(r*r+n*n+o*o),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(r,o),this.phi=Math.acos(gr.clamp(n/this.radius,-1,1))),this},a}(),Kw=function(){function a(i,r,n){return this.radius=i!==void 0?i:1,this.theta=r!==void 0?r:0,this.y=n!==void 0?n:0,this}var t=a.prototype;return t.set=function(r,n,o){return this.radius=r,this.theta=n,this.y=o,this},t.clone=function(){return new this.constructor().copy(this)},t.copy=function(r){return this.radius=r.radius,this.theta=r.theta,this.y=r.y,this},t.setFromVector3=function(r){return this.setFromCartesianCoords(r.x,r.y,r.z)},t.setFromCartesianCoords=function(r,n,o){return this.radius=Math.sqrt(r*r+o*o),this.theta=Math.atan2(r,o),this.y=n,this},a}(),dm=new xt,pm=function(){function a(i,r){Object.defineProperty(this,"isBox2",{value:!0}),this.min=i!==void 0?i:new xt(1/0,1/0),this.max=r!==void 0?r:new xt(-1/0,-1/0)}var t=a.prototype;return t.set=function(r,n){return this.min.copy(r),this.max.copy(n),this},t.setFromPoints=function(r){this.makeEmpty();for(var n=0,o=r.length;n<o;n++)this.expandByPoint(r[n]);return this},t.setFromCenterAndSize=function(r,n){var o=dm.copy(n).multiplyScalar(.5);return this.min.copy(r).sub(o),this.max.copy(r).add(o),this},t.clone=function(){return new this.constructor().copy(this)},t.copy=function(r){return this.min.copy(r.min),this.max.copy(r.max),this},t.makeEmpty=function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},t.isEmpty=function(){return this.max.x<this.min.x||this.max.y<this.min.y},t.getCenter=function(r){return r===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),r=new xt),this.isEmpty()?r.set(0,0):r.addVectors(this.min,this.max).multiplyScalar(.5)},t.getSize=function(r){return r===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),r=new xt),this.isEmpty()?r.set(0,0):r.subVectors(this.max,this.min)},t.expandByPoint=function(r){return this.min.min(r),this.max.max(r),this},t.expandByVector=function(r){return this.min.sub(r),this.max.add(r),this},t.expandByScalar=function(r){return this.min.addScalar(-r),this.max.addScalar(r),this},t.containsPoint=function(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y)},t.containsBox=function(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y},t.getParameter=function(r,n){return n===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),n=new xt),n.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y))},t.intersectsBox=function(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y)},t.clampPoint=function(r,n){return n===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),n=new xt),n.copy(r).clamp(this.min,this.max)},t.distanceToPoint=function(r){var n=dm.copy(r).clamp(this.min,this.max);return n.sub(r).length()},t.intersect=function(r){return this.min.max(r.min),this.max.min(r.max),this},t.union=function(r){return this.min.min(r.min),this.max.max(r.max),this},t.translate=function(r){return this.min.add(r),this.max.add(r),this},t.equals=function(r){return r.min.equals(this.min)&&r.max.equals(this.max)},a}(),vm=new be,oh=new be,mm=function(){function a(i,r){this.start=i!==void 0?i:new be,this.end=r!==void 0?r:new be}var t=a.prototype;return t.set=function(r,n){return this.start.copy(r),this.end.copy(n),this},t.clone=function(){return new this.constructor().copy(this)},t.copy=function(r){return this.start.copy(r.start),this.end.copy(r.end),this},t.getCenter=function(r){return r===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),r=new be),r.addVectors(this.start,this.end).multiplyScalar(.5)},t.delta=function(r){return r===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),r=new be),r.subVectors(this.end,this.start)},t.distanceSq=function(){return this.start.distanceToSquared(this.end)},t.distance=function(){return this.start.distanceTo(this.end)},t.at=function(r,n){return n===void 0&&(console.warn("THREE.Line3: .at() target is now required"),n=new be),this.delta(n).multiplyScalar(r).add(this.start)},t.closestPointToPointParameter=function(r,n){vm.subVectors(r,this.start),oh.subVectors(this.end,this.start);var o=oh.dot(oh),s=oh.dot(vm),f=s/o;return n&&(f=gr.clamp(f,0,1)),f},t.closestPointToPoint=function(r,n,o){var s=this.closestPointToPointParameter(r,n);return o===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),o=new be),this.delta(o).multiplyScalar(s).add(this.start)},t.applyMatrix4=function(r){return this.start.applyMatrix4(r),this.end.applyMatrix4(r),this},t.equals=function(r){return r.start.equals(this.start)&&r.end.equals(this.end)},a}();function Tu(a){$t.call(this),this.material=a,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Tu.prototype=Object.create($t.prototype),Tu.prototype.constructor=Tu,Tu.prototype.isImmediateRenderObject=!0;var gm=new be,Jw=function(a){Rr(t,a);function t(r,n){var o;o=a.call(this)||this,o.light=r,o.light.updateMatrixWorld(),o.matrix=r.matrixWorld,o.matrixAutoUpdate=!1,o.color=n;for(var s=new ir,f=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],w=0,M=1,O=32;w<O;w++,M++){var P=w/O*Math.PI*2,R=M/O*Math.PI*2;f.push(Math.cos(P),Math.sin(P),1,Math.cos(R),Math.sin(R),1)}s.setAttribute("position",new Gt(f,3));var N=new Pn({fog:!1,toneMapped:!1});return o.cone=new wi(s,N),o.add(o.cone),o.update(),o}var i=t.prototype;return i.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},i.update=function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,o=n*Math.tan(this.light.angle);this.cone.scale.set(o,o,n),gm.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(gm),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)},t}($t),Ro=new be,sh=new Br,dd=new Br,ym=function(a){Rr(t,a);function t(r){for(var n,o=Am(r),s=new ir,f=[],w=[],M=new Nt(0,0,1),O=new Nt(0,1,0),P=0;P<o.length;P++){var R=o[P];R.parent&&R.parent.isBone&&(f.push(0,0,0),f.push(0,0,0),w.push(M.r,M.g,M.b),w.push(O.r,O.g,O.b))}s.setAttribute("position",new Gt(f,3)),s.setAttribute("color",new Gt(w,3));var N=new Pn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return n=a.call(this,s,N)||this,n.type="SkeletonHelper",n.isSkeletonHelper=!0,n.root=r,n.bones=o,n.matrix=r.matrixWorld,n.matrixAutoUpdate=!1,n}var i=t.prototype;return i.updateMatrixWorld=function(n){var o=this.bones,s=this.geometry,f=s.getAttribute("position");dd.copy(this.root.matrixWorld).invert();for(var w=0,M=0;w<o.length;w++){var O=o[w];O.parent&&O.parent.isBone&&(sh.multiplyMatrices(dd,O.matrixWorld),Ro.setFromMatrixPosition(sh),f.setXYZ(M,Ro.x,Ro.y,Ro.z),sh.multiplyMatrices(dd,O.parent.matrixWorld),Ro.setFromMatrixPosition(sh),f.setXYZ(M+1,Ro.x,Ro.y,Ro.z),M+=2)}s.getAttribute("position").needsUpdate=!0,a.prototype.updateMatrixWorld.call(this,n)},t}(wi);function Am(a){var t=[];a&&a.isBone&&t.push(a);for(var i=0;i<a.children.length;i++)t.push.apply(t,Am(a.children[i]));return t}var Zw=function(a){Rr(t,a);function t(r,n,o){var s,f=new Au(n,4,2),w=new Bi({wireframe:!0,fog:!1,toneMapped:!1});return s=a.call(this,f,w)||this,s.light=r,s.light.updateMatrixWorld(),s.color=o,s.type="PointLightHelper",s.matrix=s.light.matrixWorld,s.matrixAutoUpdate=!1,s.update(),s}var i=t.prototype;return i.dispose=function(){this.geometry.dispose(),this.material.dispose()},i.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)},t}(Mn),$w=new be,bm=new Nt,Em=new Nt,ex=function(a){Rr(t,a);function t(r,n,o){var s;s=a.call(this)||this,s.light=r,s.light.updateMatrixWorld(),s.matrix=r.matrixWorld,s.matrixAutoUpdate=!1,s.color=o;var f=new gu(n);f.rotateY(Math.PI*.5),s.material=new Bi({wireframe:!0,fog:!1,toneMapped:!1}),s.color===void 0&&(s.material.vertexColors=!0);var w=f.getAttribute("position"),M=new Float32Array(w.count*3);return f.setAttribute("color",new dr(M,3)),s.add(new Mn(f,s.material)),s.update(),s}var i=t.prototype;return i.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},i.update=function(){var n=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var o=n.geometry.getAttribute("color");bm.copy(this.light.color),Em.copy(this.light.groundColor);for(var s=0,f=o.count;s<f;s++){var w=s<f/2?bm:Em;o.setXYZ(s,w.r,w.g,w.b)}o.needsUpdate=!0}n.lookAt($w.setFromMatrixPosition(this.light.matrixWorld).negate())},t}($t),wm=function(a){Rr(t,a);function t(i,r,n,o){var s;i===void 0&&(i=10),r===void 0&&(r=10),n===void 0&&(n=4473924),o===void 0&&(o=8947848),n=new Nt(n),o=new Nt(o);for(var f=r/2,w=i/r,M=i/2,O=[],P=[],R=0,N=0,F=-M;R<=r;R++,F+=w){O.push(-M,0,F,M,0,F),O.push(F,0,-M,F,0,M);var j=R===f?n:o;j.toArray(P,N),N+=3,j.toArray(P,N),N+=3,j.toArray(P,N),N+=3,j.toArray(P,N),N+=3}var q=new ir;q.setAttribute("position",new Gt(O,3)),q.setAttribute("color",new Gt(P,3));var X=new Pn({vertexColors:!0,toneMapped:!1});return s=a.call(this,q,X)||this,s.type="GridHelper",s}return t}(wi),tx=function(a){Rr(t,a);function t(i,r,n,o,s,f){var w;i===void 0&&(i=10),r===void 0&&(r=16),n===void 0&&(n=8),o===void 0&&(o=64),s===void 0&&(s=4473924),f===void 0&&(f=8947848),s=new Nt(s),f=new Nt(f);for(var M=[],O=[],P=0;P<=r;P++){var R=P/r*(Math.PI*2),N=Math.sin(R)*i,F=Math.cos(R)*i;M.push(0,0,0),M.push(N,0,F);var j=P&1?s:f;O.push(j.r,j.g,j.b),O.push(j.r,j.g,j.b)}for(var q=0;q<=n;q++)for(var X=q&1?s:f,H=i-i/n*q,he=0;he<o;he++){var ye=he/o*(Math.PI*2),ie=Math.sin(ye)*H,ee=Math.cos(ye)*H;M.push(ie,0,ee),O.push(X.r,X.g,X.b),ye=(he+1)/o*(Math.PI*2),ie=Math.sin(ye)*H,ee=Math.cos(ye)*H,M.push(ie,0,ee),O.push(X.r,X.g,X.b)}var ve=new ir;ve.setAttribute("position",new Gt(M,3)),ve.setAttribute("color",new Gt(O,3));var Re=new Pn({vertexColors:!0,toneMapped:!1});return w=a.call(this,ve,Re)||this,w.type="PolarGridHelper",w}return t}(wi),xm=new be,lh=new be,Mm=new be,rx=function(a){Rr(t,a);function t(r,n,o){var s;s=a.call(this)||this,s.light=r,s.light.updateMatrixWorld(),s.matrix=r.matrixWorld,s.matrixAutoUpdate=!1,s.color=o,n===void 0&&(n=1);var f=new ir;f.setAttribute("position",new Gt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));var w=new Pn({fog:!1,toneMapped:!1});return s.lightPlane=new Ki(f,w),s.add(s.lightPlane),f=new ir,f.setAttribute("position",new Gt([0,0,0,0,0,1],3)),s.targetLine=new Ki(f,w),s.add(s.targetLine),s.update(),s}var i=t.prototype;return i.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},i.update=function(){xm.setFromMatrixPosition(this.light.matrixWorld),lh.setFromMatrixPosition(this.light.target.matrixWorld),Mm.subVectors(lh,xm),this.lightPlane.lookAt(lh),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(lh),this.targetLine.scale.z=Mm.length()},t}($t),uh=new be,Nn=new _a,nx=function(a){Rr(t,a);function t(r){var n,o=new ir,s=new Pn({color:16777215,vertexColors:!0,toneMapped:!1}),f=[],w=[],M={},O=new Nt(16755200),P=new Nt(16711680),R=new Nt(43775),N=new Nt(16777215),F=new Nt(3355443);j("n1","n2",O),j("n2","n4",O),j("n4","n3",O),j("n3","n1",O),j("f1","f2",O),j("f2","f4",O),j("f4","f3",O),j("f3","f1",O),j("n1","f1",O),j("n2","f2",O),j("n3","f3",O),j("n4","f4",O),j("p","n1",P),j("p","n2",P),j("p","n3",P),j("p","n4",P),j("u1","u2",R),j("u2","u3",R),j("u3","u1",R),j("c","t",N),j("p","c",F),j("cn1","cn2",F),j("cn3","cn4",F),j("cf1","cf2",F),j("cf3","cf4",F);function j(X,H,he){q(X,he),q(H,he)}function q(X,H){f.push(0,0,0),w.push(H.r,H.g,H.b),M[X]===void 0&&(M[X]=[]),M[X].push(f.length/3-1)}return o.setAttribute("position",new Gt(f,3)),o.setAttribute("color",new Gt(w,3)),n=a.call(this,o,s)||this,n.type="CameraHelper",n.camera=r,n.camera.updateProjectionMatrix&&n.camera.updateProjectionMatrix(),n.matrix=r.matrixWorld,n.matrixAutoUpdate=!1,n.pointMap=M,n.update(),n}var i=t.prototype;return i.update=function(){var n=this.geometry,o=this.pointMap,s=1,f=1;Nn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Gn("c",o,n,Nn,0,0,-1),Gn("t",o,n,Nn,0,0,1),Gn("n1",o,n,Nn,-s,-f,-1),Gn("n2",o,n,Nn,s,-f,-1),Gn("n3",o,n,Nn,-s,f,-1),Gn("n4",o,n,Nn,s,f,-1),Gn("f1",o,n,Nn,-s,-f,1),Gn("f2",o,n,Nn,s,-f,1),Gn("f3",o,n,Nn,-s,f,1),Gn("f4",o,n,Nn,s,f,1),Gn("u1",o,n,Nn,s*.7,f*1.1,-1),Gn("u2",o,n,Nn,-s*.7,f*1.1,-1),Gn("u3",o,n,Nn,0,f*2,-1),Gn("cf1",o,n,Nn,-s,0,1),Gn("cf2",o,n,Nn,s,0,1),Gn("cf3",o,n,Nn,0,-f,1),Gn("cf4",o,n,Nn,0,f,1),Gn("cn1",o,n,Nn,-s,0,-1),Gn("cn2",o,n,Nn,s,0,-1),Gn("cn3",o,n,Nn,0,-f,-1),Gn("cn4",o,n,Nn,0,f,-1),n.getAttribute("position").needsUpdate=!0},t}(wi);function Gn(a,t,i,r,n,o,s){uh.set(n,o,s).unproject(r);var f=t[a];if(f!==void 0)for(var w=i.getAttribute("position"),M=0,O=f.length;M<O;M++)w.setXYZ(f[M],uh.x,uh.y,uh.z)}var ch=new za,Tm=function(a){Rr(t,a);function t(r,n){var o;n===void 0&&(n=16776960);var s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),f=new Float32Array(8*3),w=new ir;return w.setIndex(new dr(s,1)),w.setAttribute("position",new dr(f,3)),o=a.call(this,w,new Pn({color:n,toneMapped:!1}))||this,o.object=r,o.type="BoxHelper",o.matrixAutoUpdate=!1,o.update(),o}var i=t.prototype;return i.update=function(n){if(n!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&ch.setFromObject(this.object),!ch.isEmpty()){var o=ch.min,s=ch.max,f=this.geometry.attributes.position,w=f.array;w[0]=s.x,w[1]=s.y,w[2]=s.z,w[3]=o.x,w[4]=s.y,w[5]=s.z,w[6]=o.x,w[7]=o.y,w[8]=s.z,w[9]=s.x,w[10]=o.y,w[11]=s.z,w[12]=s.x,w[13]=s.y,w[14]=o.z,w[15]=o.x,w[16]=s.y,w[17]=o.z,w[18]=o.x,w[19]=o.y,w[20]=o.z,w[21]=s.x,w[22]=o.y,w[23]=o.z,f.needsUpdate=!0,this.geometry.computeBoundingSphere()}},i.setFromObject=function(n){return this.object=n,this.update(),this},i.copy=function(n){return wi.prototype.copy.call(this,n),this.object=n.object,this},t}(wi),ix=function(a){Rr(t,a);function t(r,n){var o;n===void 0&&(n=16776960);var s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),f=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],w=new ir;return w.setIndex(new dr(s,1)),w.setAttribute("position",new Gt(f,3)),o=a.call(this,w,new Pn({color:n,toneMapped:!1}))||this,o.box=r,o.type="Box3Helper",o.geometry.computeBoundingSphere(),o}var i=t.prototype;return i.updateMatrixWorld=function(n){var o=this.box;o.isEmpty()||(o.getCenter(this.position),o.getSize(this.scale),this.scale.multiplyScalar(.5),a.prototype.updateMatrixWorld.call(this,n))},t}(wi),ax=function(a){Rr(t,a);function t(r,n,o){var s;n===void 0&&(n=1),o===void 0&&(o=16776960);var f=o,w=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],M=new ir;M.setAttribute("position",new Gt(w,3)),M.computeBoundingSphere(),s=a.call(this,M,new Pn({color:f,toneMapped:!1}))||this,s.type="PlaneHelper",s.plane=r,s.size=n;var O=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],P=new ir;return P.setAttribute("position",new Gt(O,3)),P.computeBoundingSphere(),s.add(new Mn(P,new Bi({color:f,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),s}var i=t.prototype;return i.updateMatrixWorld=function(n){var o=-this.plane.constant;Math.abs(o)<1e-8&&(o=1e-8),this.scale.set(.5*this.size,.5*this.size,o),this.children[0].material.side=o<0?C:D,this.lookAt(this.plane.normal),a.prototype.updateMatrixWorld.call(this,n)},t}(Ki),Sm=new be,hh,pd,ox=function(a){Rr(t,a);function t(r,n,o,s,f,w){var M;return M=a.call(this)||this,M.type="ArrowHelper",r===void 0&&(r=new be(0,0,1)),n===void 0&&(n=new be(0,0,0)),o===void 0&&(o=1),s===void 0&&(s=16776960),f===void 0&&(f=.2*o),w===void 0&&(w=.2*f),hh===void 0&&(hh=new ir,hh.setAttribute("position",new Gt([0,0,0,0,1,0],3)),pd=new tl(0,.5,1,5,1),pd.translate(0,-.5,0)),M.position.copy(n),M.line=new Ki(hh,new Pn({color:s,toneMapped:!1})),M.line.matrixAutoUpdate=!1,M.add(M.line),M.cone=new Mn(pd,new Bi({color:s,toneMapped:!1})),M.cone.matrixAutoUpdate=!1,M.add(M.cone),M.setDirection(r),M.setLength(o,f,w),M}var i=t.prototype;return i.setDirection=function(n){if(n.y>.99999)this.quaternion.set(0,0,0,1);else if(n.y<-.99999)this.quaternion.set(1,0,0,0);else{Sm.set(n.z,0,-n.x).normalize();var o=Math.acos(n.y);this.quaternion.setFromAxisAngle(Sm,o)}},i.setLength=function(n,o,s){o===void 0&&(o=.2*n),s===void 0&&(s=.2*o),this.line.scale.set(1,Math.max(1e-4,n-o),1),this.line.updateMatrix(),this.cone.scale.set(s,o,s),this.cone.position.y=n,this.cone.updateMatrix()},i.setColor=function(n){this.line.material.color.set(n),this.cone.material.color.set(n)},i.copy=function(n){return a.prototype.copy.call(this,n,!1),this.line.copy(n.line),this.cone.copy(n.cone),this},t}($t),_m=function(a){Rr(t,a);function t(i){var r;i===void 0&&(i=1);var n=[0,0,0,i,0,0,0,0,0,0,i,0,0,0,0,0,0,i],o=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new ir;s.setAttribute("position",new Gt(n,3)),s.setAttribute("color",new Gt(o,3));var f=new Pn({vertexColors:!0,toneMapped:!1});return r=a.call(this,s,f)||this,r.type="AxesHelper",r}return t}(wi),Cm=new Float32Array(1),sx=new Int32Array(Cm.buffer),lx={toHalfFloat:function(t){Cm[0]=t;var i=sx[0],r=i>>16&32768,n=i>>12&2047,o=i>>23&255;return o<103?r:o>142?(r|=31744,r|=(o==255?0:1)&&i&8388607,r):o<113?(n|=2048,r|=(n>>114-o)+(n>>113-o&1),r):(r|=o-112<<10|n>>1,r+=n&1,r)}},eo,ul=4,Po=8,Da=Math.pow(2,Po),Lm=[.125,.215,.35,.446,.526,.582],Rm=Po-ul+1+Lm.length,cl=20,Oa=(eo={},eo[bi]=0,eo[Bl]=1,eo[ju]=2,eo[Jh]=3,eo[Zh]=4,eo[$h]=5,eo[Wu]=6,eo),ps=new Bi({side:C,depthWrite:!1,depthTest:!1}),ux=new Mn(new Zo,ps),vd=new ll,md=fx(),Su=md._lodPlanes,Pm=md._sizeLods,fh=md._sigmas,Dm=new Nt,gd=null,vs=(1+Math.sqrt(5))/2,hl=1/vs,Om=[new be(1,1,1),new be(-1,1,1),new be(1,1,-1),new be(-1,1,-1),new be(0,vs,hl),new be(0,vs,-hl),new be(hl,0,vs),new be(-hl,0,vs),new be(vs,hl,0),new be(-vs,hl,0)];function Im(a){var t=Math.max(a.r,a.g,a.b),i=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);a.multiplyScalar(Math.pow(2,-i));var r=(i+128)/255;return r}var cx=function(){function a(i){this._renderer=i,this._pingPongRenderTarget=null,this._blurMaterial=dx(cl),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}var t=a.prototype;return t.fromScene=function(r,n,o,s){n===void 0&&(n=0),o===void 0&&(o=.1),s===void 0&&(s=100),gd=this._renderer.getRenderTarget();var f=this._allocateTargets();return this._sceneToCubeUV(r,o,s,f),n>0&&this._blur(f,0,0,n),this._applyPMREM(f),this._cleanup(f),f},t.fromEquirectangular=function(r){return this._fromTexture(r)},t.fromCubemap=function(r){return this._fromTexture(r)},t.compileCubemapShader=function(){this._cubemapShader===null&&(this._cubemapShader=Nm(),this._compileMaterial(this._cubemapShader))},t.compileEquirectangularShader=function(){this._equirectShader===null&&(this._equirectShader=Fm(),this._compileMaterial(this._equirectShader))},t.dispose=function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(var r=0;r<Su.length;r++)Su[r].dispose()},t._cleanup=function(r){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(gd),r.scissorTest=!1,dh(r,0,0,r.width,r.height)},t._fromTexture=function(r){gd=this._renderer.getRenderTarget();var n=this._allocateTargets(r);return this._textureToCubeUV(r,n),this._applyPMREM(n),this._cleanup(n),n},t._allocateTargets=function(r){var n={magFilter:Qt,minFilter:Qt,generateMipmaps:!1,type:cr,format:qe,encoding:hx(r)?r.encoding:ju,depthBuffer:!1},o=Bm(n);return o.depthBuffer=!r,this._pingPongRenderTarget=Bm(n),o},t._compileMaterial=function(r){var n=new Mn(Su[0],r);this._renderer.compile(n,vd)},t._sceneToCubeUV=function(r,n,o,s){var f=90,w=1,M=new Fn(f,w,n,o),O=[1,-1,1,1,1,1],P=[1,1,1,-1,-1,-1],R=this._renderer,N=R.autoClear,F=R.outputEncoding,j=R.toneMapping;R.getClearColor(Dm),R.toneMapping=ke,R.outputEncoding=bi,R.autoClear=!1;var q=!1,X=r.background;if(X){if(X.isColor){ps.color.copy(X).convertSRGBToLinear(),r.background=null;var H=Im(ps.color);ps.opacity=H,q=!0}}else{ps.color.copy(Dm).convertSRGBToLinear();var he=Im(ps.color);ps.opacity=he,q=!0}for(var ye=0;ye<6;ye++){var ie=ye%3;ie==0?(M.up.set(0,O[ye],0),M.lookAt(P[ye],0,0)):ie==1?(M.up.set(0,0,O[ye]),M.lookAt(0,P[ye],0)):(M.up.set(0,O[ye],0),M.lookAt(0,0,P[ye])),dh(s,ie*Da,ye>2?Da:0,Da,Da),R.setRenderTarget(s),q&&R.render(ux,M),R.render(r,M)}R.toneMapping=j,R.outputEncoding=F,R.autoClear=N},t._textureToCubeUV=function(r,n){var o=this._renderer;r.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=Nm()):this._equirectShader==null&&(this._equirectShader=Fm());var s=r.isCubeTexture?this._cubemapShader:this._equirectShader,f=new Mn(Su[0],s),w=s.uniforms;w.envMap.value=r,r.isCubeTexture||w.texelSize.value.set(1/r.image.width,1/r.image.height),w.inputEncoding.value=Oa[r.encoding],w.outputEncoding.value=Oa[n.texture.encoding],dh(n,0,0,3*Da,2*Da),o.setRenderTarget(n),o.render(f,vd)},t._applyPMREM=function(r){var n=this._renderer,o=n.autoClear;n.autoClear=!1;for(var s=1;s<Rm;s++){var f=Math.sqrt(fh[s]*fh[s]-fh[s-1]*fh[s-1]),w=Om[(s-1)%Om.length];this._blur(r,s-1,s,f,w)}n.autoClear=o},t._blur=function(r,n,o,s,f){var w=this._pingPongRenderTarget;this._halfBlur(r,w,n,o,s,"latitudinal",f),this._halfBlur(w,r,o,o,s,"longitudinal",f)},t._halfBlur=function(r,n,o,s,f,w,M){var O=this._renderer,P=this._blurMaterial;w!=="latitudinal"&&w!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");var R=3,N=new Mn(Su[s],P),F=P.uniforms,j=Pm[o]-1,q=isFinite(f)?Math.PI/(2*j):2*Math.PI/(2*cl-1),X=f/q,H=isFinite(f)?1+Math.floor(R*X):cl;H>cl&&console.warn("sigmaRadians, "+f+", is too large and will clip, as it requested "+H+" samples when the maximum is set to "+cl);for(var he=[],ye=0,ie=0;ie<cl;++ie){var ee=ie/X,ve=Math.exp(-ee*ee/2);he.push(ve),ie==0?ye+=ve:ie<H&&(ye+=2*ve)}for(var Re=0;Re<he.length;Re++)he[Re]=he[Re]/ye;F.envMap.value=r.texture,F.samples.value=H,F.weights.value=he,F.latitudinal.value=w==="latitudinal",M&&(F.poleAxis.value=M),F.dTheta.value=q,F.mipInt.value=Po-o,F.inputEncoding.value=Oa[r.texture.encoding],F.outputEncoding.value=Oa[r.texture.encoding];var Le=Pm[s],Ie=3*Math.max(0,Da-2*Le),Ue=(s===0?0:2*Da)+2*Le*(s>Po-ul?s-Po+ul:0);dh(n,Ie,Ue,3*Le,2*Le),O.setRenderTarget(n),O.render(N,vd)},a}();function hx(a){return a===void 0||a.type!==cr?!1:a.encoding===bi||a.encoding===Bl||a.encoding===Wu}function fx(){for(var a=[],t=[],i=[],r=Po,n=0;n<Rm;n++){var o=Math.pow(2,r);t.push(o);var s=1/o;n>Po-ul?s=Lm[n-Po+ul-1]:n==0&&(s=0),i.push(s);for(var f=1/(o-1),w=-f/2,M=1+f/2,O=[w,w,M,w,M,M,w,w,M,M,w,M],P=6,R=6,N=3,F=2,j=1,q=new Float32Array(N*R*P),X=new Float32Array(F*R*P),H=new Float32Array(j*R*P),he=0;he<P;he++){var ye=he%3*2/3-1,ie=he>2?0:-1,ee=[ye,ie,0,ye+2/3,ie,0,ye+2/3,ie+1,0,ye,ie,0,ye+2/3,ie+1,0,ye,ie+1,0];q.set(ee,N*R*he),X.set(O,F*R*he);var ve=[he,he,he,he,he,he];H.set(ve,j*R*he)}var Re=new ir;Re.setAttribute("position",new dr(q,N)),Re.setAttribute("uv",new dr(X,F)),Re.setAttribute("faceIndex",new dr(H,j)),a.push(Re),r>ul&&r--}return{_lodPlanes:a,_sizeLods:t,_sigmas:i}}function Bm(a){var t=new uo(3*Da,3*Da,a);return t.texture.mapping=Vt,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function dh(a,t,i,r,n){a.viewport.set(t,i,r,n),a.scissor.set(t,i,r,n)}function dx(a){var t=new Float32Array(a),i=new be(0,1,0),r=new Za({name:"SphericalGaussianBlur",defines:{n:a},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i},inputEncoding:{value:Oa[bi]},outputEncoding:{value:Oa[bi]}},vertexShader:yd(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			`+Ad()+`

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:W,depthTest:!1,depthWrite:!1});return r}function Fm(){var a=new xt(1,1),t=new Za({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:a},inputEncoding:{value:Oa[bi]},outputEncoding:{value:Oa[bi]}},vertexShader:yd(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			`+Ad()+`

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:W,depthTest:!1,depthWrite:!1});return t}function Nm(){var a=new Za({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Oa[bi]},outputEncoding:{value:Oa[bi]}},vertexShader:yd(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			`+Ad()+`

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:W,depthTest:!1,depthWrite:!1});return a}function yd(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Ad(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function px(a,t,i,r,n,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new yf(a,t,i,n,o,s)}var vx=0,mx=1,gx=0,yx=1,Ax=2;function bx(a){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),a}function Ex(a){return a===void 0&&(a=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),a.isMultiMaterial=!0,a.materials=a,a.clone=function(){return a.slice()},a}function wx(a,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new $s(a,t)}function xx(a){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ou(a)}function Mx(a,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new $s(a,t)}function Tx(a){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ha(a)}function Sx(a){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ha(a)}function _x(a){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ha(a)}function Cx(a,t,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new be(a,t,i)}function Lx(a,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new dr(a,t).setUsage(Xo)}function Rx(a,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Gl(a,t)}function Px(a,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Vl(a,t)}function Dx(a,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new zl(a,t)}function Ox(a,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Wl(a,t)}function Ix(a,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Ko(a,t)}function Bx(a,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new jl(a,t)}function Fx(a,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Jo(a,t)}function Nx(a,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Gt(a,t)}function kx(a,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Yl(a,t)}er.create=function(a,t){return console.log("THREE.Curve.create() has been deprecated"),a.prototype=Object.create(er.prototype),a.prototype.constructor=a,a.prototype.getPoint=t,a},Object.assign(ga.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}});function km(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),di.call(this,a),this.type="catmullrom",this.closed=!0}km.prototype=Object.create(di.prototype);function Um(a){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),di.call(this,a),this.type="catmullrom"}Um.prototype=Object.create(di.prototype);function bd(a){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),di.call(this,a),this.type="catmullrom"}bd.prototype=Object.create(di.prototype),Object.assign(bd.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});function Ux(a){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new _m(a)}function Hx(a,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Tm(a,t)}function Gx(a,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new wi(new Ff(a.geometry),new Pn({color:t!==void 0?t:16777215}))}wm.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ym.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function Vx(a,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new wi(new Uf(a.geometry),new Pn({color:t!==void 0?t:16777215}))}Object.assign(fn.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Jf.extractUrlBase(t)}}),fn.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function zx(a){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Ji(a)}function Wx(a){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Xc(a)}Object.assign(pm.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(za.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(fo.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Kl.prototype.setFromMatrix=function(a){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(a)},mm.prototype.center=function(a){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(a)},Object.assign(gr,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),gr.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),gr.ceilPowerOfTwo(t)}}),Object.assign(Oi.prototype,{flattenToArrayOffset:function(t,i){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,i)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),Object.assign(Br.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,i){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,i)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new be().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,i,r,n,o,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,i,n,r,o,s)},getInverse:function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),Ma.prototype.isIntersectionLine=function(a){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(a)},Object.assign(ii.prototype,{multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}}),Object.assign(Bs.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Ta.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,i)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Ta,{barycoordFromPoint:function(t,i,r,n,o){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ta.getBarycoord(t,i,r,n,o)},normal:function(t,i,r,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ta.getNormal(t,i,r,n)}}),Object.assign(Lo.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ts(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new yu(this,t)}}),Object.assign(xt.prototype,{fromAttribute:function(t,i,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,i,r)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(be.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,i){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(i,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,i,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,i,r)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(cn.prototype,{fromAttribute:function(t,i,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,i,r)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign($t.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,i){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(i,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties($t.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(Mn.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(Mn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),lo},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(su.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(cu.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),lu.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(er.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Fn.prototype.setLens=function(a,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(a)},Object.defineProperties(Tn.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(dr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Xo},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Xo)}}}),Object.assign(dr.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?Xo:Fl),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(ir.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,i){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(i&&i.isBufferAttribute)&&!(i&&i.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new dr(arguments[1],arguments[2]))):t==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(i),this):this.setAttribute(t,i)},addDrawCall:function(t,i,r){r!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,i)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(ir.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Mu.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(hd.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(ki.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Xo},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(ki.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?Xo:Fl),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(ts.prototype,{getArrays:function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")}}),Object.assign(Rf.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(hm.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(fr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Nt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===B}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(_o.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(So.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(Ei.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(ru.prototype,{clearTarget:function(t,i,r,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(i,r,n)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(ru.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=t===!0?Bl:bi}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(gv.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function jx(a,t,i){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Tf(a,i)}Object.defineProperties(uo.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(id.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var i=this,r=new ah;return r.load(t,function(n){i.setBuffer(n)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),lm.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},$o.prototype.updateCubeMap=function(a,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(a,t)},$o.prototype.clear=function(a,t,i,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(a,t,i,r)};var Xx={merge:function(t,i,r){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;i.isMesh&&(i.matrixAutoUpdate&&i.updateMatrix(),n=i.matrix,i=i.geometry),t.merge(i,n,r)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};Yo.crossOrigin=void 0,Yo.loadTexture=function(a,t,i,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var n=new Yc;n.setCrossOrigin(this.crossOrigin);var o=n.load(a,i,void 0,r);return t&&(o.mapping=t),o},Yo.loadTextureCube=function(a,t,i,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var n=new jc;n.setCrossOrigin(this.crossOrigin);var o=n.load(a,i,void 0,r);return t&&(o.mapping=t),o},Yo.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Yo.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function Yx(){console.error("THREE.CanvasRenderer has been removed")}function Qx(){console.error("THREE.JSONLoader has been removed.")}var qx={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function Kx(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:m}})),typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=m),l.ACESFilmicToneMapping=V,l.AddEquation=Y,l.AddOperation=Pe,l.AdditiveAnimationBlendMode=Va,l.AdditiveBlending=J,l.AlphaFormat=ti,l.AlwaysDepth=_t,l.AlwaysStencilFunc=Op,l.AmbientLight=$c,l.AmbientLightProbe=nd,l.AnimationClip=Hi,l.AnimationLoader=Gf,l.AnimationMixer=ld,l.AnimationObjectGroup=cm,l.AnimationUtils=Cn,l.ArcCurve=sl,l.ArrayCamera=eu,l.ArrowHelper=ox,l.Audio=id,l.AudioAnalyser=lm,l.AudioContext=td,l.AudioListener=Nw,l.AudioLoader=ah,l.AxesHelper=_m,l.AxisHelper=Ux,l.BackSide=C,l.BasicDepthPacking=Rp,l.BasicShadowMap=S,l.BinaryTextureLoader=Wx,l.Bone=uu,l.BooleanKeyframeTrack=Gc,l.BoundingBoxHelper=Hx,l.Box2=pm,l.Box3=za,l.Box3Helper=ix,l.BoxBufferGeometry=Zo,l.BoxGeometry=Zo,l.BoxHelper=Tm,l.BufferAttribute=dr,l.BufferGeometry=ir,l.BufferGeometryLoader=nh,l.ByteType=Cr,l.Cache=us,l.Camera=_a,l.CameraHelper=nx,l.CanvasRenderer=Yx,l.CanvasTexture=fu,l.CatmullRomCurve3=di,l.CineonToneMapping=$,l.CircleBufferGeometry=xc,l.CircleGeometry=xc,l.ClampToEdgeWrapping=Ht,l.Clock=im,l.ClosedSplineCurve3=km,l.Color=Nt,l.ColorKeyframeTrack=Vc,l.CompressedTexture=el,l.CompressedTextureLoader=Vf,l.ConeBufferGeometry=Mc,l.ConeGeometry=Mc,l.CubeCamera=$o,l.CubeReflectionMapping=Te,l.CubeRefractionMapping=Qe,l.CubeTexture=Ca,l.CubeTextureLoader=jc,l.CubeUVReflectionMapping=Vt,l.CubeUVRefractionMapping=or,l.CubicBezierCurve=da,l.CubicBezierCurve3=Ra,l.CubicInterpolant=Uc,l.CullFaceBack=v,l.CullFaceFront=b,l.CullFaceFrontBack=E,l.CullFaceNone=p,l.Curve=er,l.CurvePath=Co,l.CustomBlending=ue,l.CustomToneMapping=z,l.CylinderBufferGeometry=tl,l.CylinderGeometry=tl,l.Cylindrical=Kw,l.DataTexture=qa,l.DataTexture2DArray=Xs,l.DataTexture3D=Ys,l.DataTextureLoader=Xc,l.DataUtils=lx,l.DecrementStencilOp=gy,l.DecrementWrapStencilOp=Ay,l.DefaultLoadingManager=qv,l.DepthFormat=st,l.DepthStencilFormat=et,l.DepthTexture=du,l.DirectionalLight=Zc,l.DirectionalLightHelper=rx,l.DiscreteInterpolant=Hc,l.DodecahedronBufferGeometry=Tc,l.DodecahedronGeometry=Tc,l.DoubleSide=I,l.DstAlphaFactor=jt,l.DstColorFactor=pt,l.DynamicBufferAttribute=Lx,l.DynamicCopyUsage=Oy,l.DynamicDrawUsage=Xo,l.DynamicReadUsage=Ry,l.EdgesGeometry=Ff,l.EdgesHelper=Gx,l.EllipseCurve=Gi,l.EqualDepth=Q,l.EqualStencilFunc=xy,l.EquirectangularReflectionMapping=Je,l.EquirectangularRefractionMapping=Mt,l.Euler=ec,l.EventDispatcher=xa,l.ExtrudeBufferGeometry=ts,l.ExtrudeGeometry=ts,l.Face3=yf,l.Face4=px,l.FaceColors=yx,l.FileLoader=Ji,l.FlatShading=B,l.Float16BufferAttribute=Xl,l.Float32Attribute=Nx,l.Float32BufferAttribute=Gt,l.Float64Attribute=kx,l.Float64BufferAttribute=Yl,l.FloatType=jr,l.Fog=Mv,l.FogExp2=xv,l.Font=em,l.FontLoader=ed,l.FrontSide=D,l.Frustum=Kl,l.GLBufferAttribute=cd,l.GLSL1=By,l.GLSL3=ef,l.GammaEncoding=Wu,l.GeometryUtils=Xx,l.GreaterDepth=ae,l.GreaterEqualDepth=K,l.GreaterEqualStencilFunc=_y,l.GreaterStencilFunc=Ty,l.GridHelper=wm,l.Group=Ka,l.HalfFloatType=dn,l.HemisphereLight=qc,l.HemisphereLightHelper=ex,l.HemisphereLightProbe=rd,l.IcosahedronBufferGeometry=Pc,l.IcosahedronGeometry=Pc,l.ImageBitmapLoader=Zf,l.ImageLoader=ol,l.ImageUtils=Yo,l.ImmediateRenderObject=Tu,l.IncrementStencilOp=my,l.IncrementWrapStencilOp=yy,l.InstancedBufferAttribute=rh,l.InstancedBufferGeometry=Mu,l.InstancedInterleavedBuffer=ud,l.InstancedMesh=yc,l.Int16Attribute=Ox,l.Int16BufferAttribute=Wl,l.Int32Attribute=Bx,l.Int32BufferAttribute=jl,l.Int8Attribute=Rx,l.Int8BufferAttribute=Gl,l.IntType=jn,l.InterleavedBuffer=ki,l.InterleavedBufferAttribute=wo,l.Interpolant=Ui,l.InterpolateDiscrete=na,l.InterpolateLinear=ia,l.InterpolateSmooth=Ea,l.InvertStencilOp=by,l.JSONLoader=Qx,l.KeepStencilOp=Xu,l.KeyframeTrack=ai,l.LOD=su,l.LatheBufferGeometry=Dc,l.LatheGeometry=Dc,l.Layers=uf,l.LensFlare=Kx,l.LessDepth=se,l.LessEqualDepth=ce,l.LessEqualStencilFunc=My,l.LessStencilFunc=wy,l.Light=Tn,l.LightProbe=Zi,l.Line=Ki,l.Line3=mm,l.LineBasicMaterial=Pn,l.LineCurve=_i,l.LineCurve3=pa,l.LineDashedMaterial=ls,l.LineLoop=bc,l.LinePieces=mx,l.LineSegments=wi,l.LineStrip=vx,l.LinearEncoding=bi,l.LinearFilter=ht,l.LinearInterpolant=bu,l.LinearMipMapLinearFilter=pr,l.LinearMipMapNearestFilter=rr,l.LinearMipmapLinearFilter=sr,l.LinearMipmapNearestFilter=St,l.LinearToneMapping=Ve,l.Loader=fn,l.LoaderUtils=Jf,l.LoadingManager=Hf,l.LogLuvEncoding=Lp,l.LoopOnce=hi,l.LoopPingPong=so,l.LoopRepeat=ra,l.LuminanceAlphaFormat=_e,l.LuminanceFormat=pe,l.MOUSE=y,l.Material=fr,l.MaterialLoader=th,l.Math=gr,l.MathUtils=gr,l.Matrix3=Oi,l.Matrix4=Br,l.MaxEquation=Be,l.Mesh=Mn,l.MeshBasicMaterial=Bi,l.MeshDepthMaterial=bo,l.MeshDistanceMaterial=Eo,l.MeshFaceMaterial=bx,l.MeshLambertMaterial=os,l.MeshMatcapMaterial=ss,l.MeshNormalMaterial=as,l.MeshPhongMaterial=_o,l.MeshPhysicalMaterial=So,l.MeshStandardMaterial=La,l.MeshToonMaterial=is,l.MinEquation=xe,l.MirroredRepeatWrapping=Xr,l.MixOperation=Ee,l.MultiMaterial=Ex,l.MultiplyBlending=te,l.MultiplyOperation=me,l.NearestFilter=Qt,l.NearestMipMapLinearFilter=ft,l.NearestMipMapNearestFilter=Rn,l.NearestMipmapLinearFilter=yn,l.NearestMipmapNearestFilter=Vr,l.NeverDepth=Kt,l.NeverStencilFunc=Ey,l.NoBlending=W,l.NoColors=gx,l.NoToneMapping=ke,l.NormalAnimationBlendMode=wa,l.NormalBlending=oe,l.NotEqualDepth=ge,l.NotEqualStencilFunc=Sy,l.NumberKeyframeTrack=il,l.Object3D=$t,l.ObjectLoader=Dw,l.ObjectSpaceNormalMap=Dp,l.OctahedronBufferGeometry=gu,l.OctahedronGeometry=gu,l.OneFactor=Ge,l.OneMinusDstAlphaFactor=tt,l.OneMinusDstColorFactor=$e,l.OneMinusSrcAlphaFactor=Ct,l.OneMinusSrcColorFactor=lt,l.OrthographicCamera=ll,l.PCFShadowMap=x,l.PCFSoftShadowMap=T,l.PMREMGenerator=cx,l.ParametricBufferGeometry=rs,l.ParametricGeometry=rs,l.Particle=xx,l.ParticleBasicMaterial=Sx,l.ParticleSystem=Mx,l.ParticleSystemMaterial=_x,l.Path=ga,l.PerspectiveCamera=Fn,l.Plane=Ma,l.PlaneBufferGeometry=Jl,l.PlaneGeometry=Jl,l.PlaneHelper=ax,l.PointCloud=wx,l.PointCloudMaterial=Tx,l.PointLight=Jc,l.PointLightHelper=Zw,l.Points=$s,l.PointsMaterial=ha,l.PolarGridHelper=tx,l.PolyhedronBufferGeometry=Mo,l.PolyhedronGeometry=Mo,l.PositionalAudio=Uw,l.PropertyBinding=pi,l.PropertyMixer=ad,l.QuadraticBezierCurve=va,l.QuadraticBezierCurve3=Pa,l.Quaternion=ii,l.QuaternionKeyframeTrack=Eu,l.QuaternionLinearInterpolant=zc,l.REVISION=m,l.RGBADepthPacking=Pp,l.RGBAFormat=ri,l.RGBAIntegerFormat=Jt,l.RGBA_ASTC_10x10_Format=yt,l.RGBA_ASTC_10x5_Format=He,l.RGBA_ASTC_10x6_Format=it,l.RGBA_ASTC_10x8_Format=At,l.RGBA_ASTC_12x10_Format=Ze,l.RGBA_ASTC_12x12_Format=ut,l.RGBA_ASTC_4x4_Format=Ai,l.RGBA_ASTC_5x4_Format=pn,l.RGBA_ASTC_5x5_Format=bn,l.RGBA_ASTC_6x5_Format=k,l.RGBA_ASTC_6x6_Format=G,l.RGBA_ASTC_8x5_Format=Z,l.RGBA_ASTC_8x6_Format=re,l.RGBA_ASTC_8x8_Format=Ae,l.RGBA_BPTC_Format=wt,l.RGBA_ETC2_EAC_Format=Dr,l.RGBA_PVRTC_2BPPV1_Format=qn,l.RGBA_PVRTC_4BPPV1_Format=Sn,l.RGBA_S3TC_DXT1_Format=vr,l.RGBA_S3TC_DXT3_Format=An,l.RGBA_S3TC_DXT5_Format=Ur,l.RGBDEncoding=$h,l.RGBEEncoding=ju,l.RGBEFormat=qe,l.RGBFormat=Qi,l.RGBIntegerFormat=mt,l.RGBM16Encoding=Zh,l.RGBM7Encoding=Jh,l.RGB_ETC1_Format=mr,l.RGB_ETC2_Format=Pr,l.RGB_PVRTC_2BPPV1_Format=Yr,l.RGB_PVRTC_4BPPV1_Format=Tr,l.RGB_S3TC_DXT1_Format=tr,l.RGFormat=Xt,l.RGIntegerFormat=Dt,l.RawShaderMaterial=Za,l.Ray=Bs,l.Raycaster=hd,l.RectAreaLight=eh,l.RedFormat=gt,l.RedIntegerFormat=Lt,l.ReinhardToneMapping=ze,l.RepeatWrapping=Lr,l.ReplaceStencilOp=vy,l.ReverseSubtractEquation=ne,l.RingBufferGeometry=Oc,l.RingGeometry=Oc,l.SRGB8_ALPHA8_ASTC_10x10_Format=li,l.SRGB8_ALPHA8_ASTC_10x5_Format=Un,l.SRGB8_ALPHA8_ASTC_10x6_Format=_n,l.SRGB8_ALPHA8_ASTC_10x8_Format=Qn,l.SRGB8_ALPHA8_ASTC_12x10_Format=ui,l.SRGB8_ALPHA8_ASTC_12x12_Format=ci,l.SRGB8_ALPHA8_ASTC_4x4_Format=zt,l.SRGB8_ALPHA8_ASTC_5x4_Format=Zt,l.SRGB8_ALPHA8_ASTC_5x5_Format=nr,l.SRGB8_ALPHA8_ASTC_6x5_Format=Sr,l.SRGB8_ALPHA8_ASTC_6x6_Format=yr,l.SRGB8_ALPHA8_ASTC_8x5_Format=hr,l.SRGB8_ALPHA8_ASTC_8x6_Format=un,l.SRGB8_ALPHA8_ASTC_8x8_Format=On,l.Scene=Rf,l.SceneUtils=qx,l.ShaderChunk=zr,l.ShaderLib=ca,l.ShaderMaterial=Ei,l.ShadowMaterial=ns,l.Shape=Lo,l.ShapeBufferGeometry=yu,l.ShapeGeometry=yu,l.ShapePath=$f,l.ShapeUtils=Ja,l.ShortType=Zr,l.Skeleton=cu,l.SkeletonHelper=ym,l.SkinnedMesh=lu,l.SmoothShading=U,l.Sphere=fo,l.SphereBufferGeometry=Au,l.SphereGeometry=Au,l.Spherical=qw,l.SphericalHarmonics3=Jv,l.Spline=bd,l.SplineCurve=ma,l.SplineCurve3=Um,l.SpotLight=Kc,l.SpotLightHelper=Jw,l.Sprite=ou,l.SpriteMaterial=xo,l.SrcAlphaFactor=Et,l.SrcAlphaSaturateFactor=Tt,l.SrcColorFactor=ct,l.StaticCopyUsage=Dy,l.StaticDrawUsage=Fl,l.StaticReadUsage=Ly,l.StereoCamera=nm,l.StreamCopyUsage=Iy,l.StreamDrawUsage=Cy,l.StreamReadUsage=Py,l.StringKeyframeTrack=Wc,l.SubtractEquation=de,l.SubtractiveBlending=le,l.TOUCH=d,l.TangentSpaceNormalMap=jo,l.TetrahedronBufferGeometry=Ic,l.TetrahedronGeometry=Ic,l.TextBufferGeometry=Bc,l.TextGeometry=Bc,l.Texture=vn,l.TextureLoader=Yc,l.TorusBufferGeometry=Fc,l.TorusGeometry=Fc,l.TorusKnotBufferGeometry=Nc,l.TorusKnotGeometry=Nc,l.Triangle=Ta,l.TriangleFanDrawMode=Hn,l.TriangleStripDrawMode=Wo,l.TrianglesDrawMode=lo,l.TubeBufferGeometry=kc,l.TubeGeometry=kc,l.UVMapping=fe,l.Uint16Attribute=Ix,l.Uint16BufferAttribute=Ko,l.Uint32Attribute=Fx,l.Uint32BufferAttribute=Jo,l.Uint8Attribute=Px,l.Uint8BufferAttribute=Vl,l.Uint8ClampedAttribute=Dx,l.Uint8ClampedBufferAttribute=zl,l.Uniform=hm,l.UniformsLib=It,l.UniformsUtils=qp,l.UnsignedByteType=cr,l.UnsignedInt248Type=Yi,l.UnsignedIntType=$r,l.UnsignedShort4444Type=Ri,l.UnsignedShort5551Type=si,l.UnsignedShort565Type=tn,l.UnsignedShortType=kr,l.VSMShadowMap=_,l.Vector2=xt,l.Vector3=be,l.Vector4=cn,l.VectorKeyframeTrack=al,l.Vertex=Cx,l.VertexColors=Ax,l.VideoTexture=If,l.WebGL1Renderer=Lf,l.WebGLCubeRenderTarget=Tf,l.WebGLMultisampleRenderTarget=Hy,l.WebGLRenderTarget=uo,l.WebGLRenderTargetCube=jx,l.WebGLRenderer=ru,l.WebGLUtils=yv,l.WireframeGeometry=Uf,l.WireframeHelper=Vx,l.WrapAroundEnding=aa,l.XHRLoader=zx,l.ZeroCurvatureEnding=Pi,l.ZeroFactor=je,l.ZeroSlopeEnding=Di,l.ZeroStencilOp=py,l.sRGBEncoding=Bl,Object.defineProperty(l,"__esModule",{value:!0})})},{}],58:[function(c,g,L){THREE.DRACOLoader=function(l){THREE.Loader.call(this,l),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}},THREE.DRACOLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:THREE.DRACOLoader,setDecoderPath:function(l){return this.decoderPath=l,this},setDecoderConfig:function(l){return this.decoderConfig=l,this},setWorkerLimit:function(l){return this.workerLimit=l,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(l,h,m,y){var d=new THREE.FileLoader(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(l,p=>{var v={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(p,v).then(h).catch(y)},m,y)},decodeDracoFile:function(l,h,m,y){var d={attributeIDs:m||this.defaultAttributeIDs,attributeTypes:y||this.defaultAttributeTypes,useUniqueIDs:!!m};this.decodeGeometry(l,d).then(h)},decodeGeometry:function(l,h){for(var m in h.attributeTypes){var y=h.attributeTypes[m];y.BYTES_PER_ELEMENT!==void 0&&(h.attributeTypes[m]=y.name)}var d=JSON.stringify(h);if(THREE.DRACOLoader.taskCache.has(l)){var p=THREE.DRACOLoader.taskCache.get(l);if(p.key===d)return p.promise;if(l.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var v,b=this.workerNextTaskID++,E=l.byteLength,S=this._getWorker(b,E).then(x=>(v=x,new Promise((T,_)=>{v._callbacks[b]={resolve:T,reject:_},v.postMessage({type:"decode",id:b,taskConfig:h,buffer:l},[l])}))).then(x=>this._createGeometry(x.geometry));return S.catch(()=>!0).then(()=>{v&&b&&this._releaseTask(v,b)}),THREE.DRACOLoader.taskCache.set(l,{key:d,promise:S}),S},_createGeometry:function(l){var h=new THREE.BufferGeometry;l.index&&h.setIndex(new THREE.BufferAttribute(l.index.array,1));for(var m=0;m<l.attributes.length;m++){var y=l.attributes[m],d=y.name,p=y.array,v=y.itemSize;h.setAttribute(d,new THREE.BufferAttribute(p,v))}return h},_loadLibrary:function(l,h){var m=new THREE.FileLoader(this.manager);return m.setPath(this.decoderPath),m.setResponseType(h),m.setWithCredentials(this.withCredentials),new Promise((y,d)=>{m.load(l,y,void 0,d)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var l=typeof WebAssembly!="object"||this.decoderConfig.type==="js",h=[];return l?h.push(this._loadLibrary("draco_decoder.js","text")):(h.push(this._loadLibrary("draco_wasm_wrapper.js","text")),h.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(h).then(m=>{var y=m[0];l||(this.decoderConfig.wasmBinary=m[1]);var d=THREE.DRACOLoader.DRACOWorker.toString(),p=["/* draco decoder */",y,"","/* worker */",d.substring(d.indexOf("{")+1,d.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([p]))}),this.decoderPending},_getWorker:function(l,h){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){var m=new Worker(this.workerSourceURL);m._callbacks={},m._taskCosts={},m._taskLoad=0,m.postMessage({type:"init",decoderConfig:this.decoderConfig}),m.onmessage=function(d){var p=d.data;switch(p.type){case"decode":m._callbacks[p.id].resolve(p);break;case"error":m._callbacks[p.id].reject(p);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+p.type+'"')}},this.workerPool.push(m)}else this.workerPool.sort(function(y,d){return y._taskLoad>d._taskLoad?-1:1});var m=this.workerPool[this.workerPool.length-1];return m._taskCosts[l]=h,m._taskLoad+=h,m})},_releaseTask:function(l,h){l._taskLoad-=l._taskCosts[h],delete l._callbacks[h],delete l._taskCosts[h]},debug:function(){console.log("Task load: ",this.workerPool.map(l=>l._taskLoad))},dispose:function(){for(var l=0;l<this.workerPool.length;++l)this.workerPool[l].terminate();return this.workerPool.length=0,this}}),THREE.DRACOLoader.DRACOWorker=function(){var l,h;onmessage=function(v){var b=v.data;switch(b.type){case"init":l=b.decoderConfig,h=new Promise(function(x){l.onModuleLoaded=function(T){x({draco:T})},DracoDecoderModule(l)});break;case"decode":var E=b.buffer,S=b.taskConfig;h.then(x=>{var T=x.draco,_=new T.Decoder,D=new T.DecoderBuffer;D.Init(new Int8Array(E),E.byteLength);try{var C=m(T,_,D,S),I=C.attributes.map(B=>B.array.buffer);C.index&&I.push(C.index.array.buffer),self.postMessage({type:"decode",id:b.id,geometry:C},I)}catch(B){console.error(B),self.postMessage({type:"error",id:b.id,error:B.message})}finally{T.destroy(D),T.destroy(_)}});break}};function m(v,b,E,S){var x=S.attributeIDs,T=S.attributeTypes,_,D,C=b.GetEncodedGeometryType(E);if(C===v.TRIANGULAR_MESH)_=new v.Mesh,D=b.DecodeBufferToMesh(E,_);else if(C===v.POINT_CLOUD)_=new v.PointCloud,D=b.DecodeBufferToPointCloud(E,_);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!D.ok()||_.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+D.error_msg());var I={index:null,attributes:[]};for(var B in x){var U=self[T[B]],W,oe;if(S.useUniqueIDs)oe=x[B],W=b.GetAttributeByUniqueId(_,oe);else{if(oe=b.GetAttributeId(_,v[x[B]]),oe===-1)continue;W=b.GetAttribute(_,oe)}I.attributes.push(d(v,b,_,B,U,W))}return C===v.TRIANGULAR_MESH&&(I.index=y(v,b,_)),v.destroy(_),I}function y(v,b,E){var S=E.num_faces(),x=S*3,T=x*4,_=v._malloc(T);b.GetTrianglesUInt32Array(E,T,_);var D=new Uint32Array(v.HEAPF32.buffer,_,x).slice();return v._free(_),{array:D,itemSize:1}}function d(v,b,E,S,x,T){var _=T.num_components(),D=E.num_points(),C=D*_,I=C*x.BYTES_PER_ELEMENT,B=p(v,x),U=v._malloc(I);b.GetAttributeDataArrayForAllPoints(E,T,B,I,U);var W=new x(v.HEAPF32.buffer,U,C).slice();return v._free(U),{name:S,array:W,itemSize:_}}function p(v,b){switch(b){case Float32Array:return v.DT_FLOAT32;case Int8Array:return v.DT_INT8;case Int16Array:return v.DT_INT16;case Int32Array:return v.DT_INT32;case Uint8Array:return v.DT_UINT8;case Uint16Array:return v.DT_UINT16;case Uint32Array:return v.DT_UINT32}}},THREE.DRACOLoader.taskCache=new WeakMap,THREE.DRACOLoader.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},THREE.DRACOLoader.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},THREE.DRACOLoader.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},THREE.DRACOLoader.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")}},{}],59:[function(c,g,L){THREE.GLTFLoader=function(){function l(se){THREE.Loader.call(this,se),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(ce){return new v(ce)}),this.register(function(ce){return new E(ce)}),this.register(function(ce){return new S(ce)}),this.register(function(ce){return new b(ce)}),this.register(function(ce){return new d(ce)}),this.register(function(ce){return new x(ce)})}l.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:l,load:function(se,ce,Q,K){var ae=this,ge;this.resourcePath!==""?ge=this.resourcePath:this.path!==""?ge=this.path:ge=THREE.LoaderUtils.extractUrlBase(se),this.manager.itemStart(se);var me=function(Pe){K?K(Pe):console.error(Pe),ae.manager.itemError(se),ae.manager.itemEnd(se)},Ee=new THREE.FileLoader(this.manager);Ee.setPath(this.path),Ee.setResponseType("arraybuffer"),Ee.setRequestHeader(this.requestHeader),Ee.setWithCredentials(this.withCredentials),Ee.load(se,function(Pe){try{ae.parse(Pe,ge,function(ke){ce(ke),ae.manager.itemEnd(se)},me)}catch(ke){me(ke)}},Q,me)},setDRACOLoader:function(se){return this.dracoLoader=se,this},setDDSLoader:function(se){return this.ddsLoader=se,this},setKTX2Loader:function(se){return this.ktx2Loader=se,this},setMeshoptDecoder:function(se){return this.meshoptDecoder=se,this},register:function(se){return this.pluginCallbacks.indexOf(se)===-1&&this.pluginCallbacks.push(se),this},unregister:function(se){return this.pluginCallbacks.indexOf(se)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(se),1),this},parse:function(se,ce,Q,K){var ae,ge={},me={};if(typeof se=="string")ae=se;else{var Ee=THREE.LoaderUtils.decodeText(new Uint8Array(se,0,4));if(Ee===T){try{ge[m.KHR_BINARY_GLTF]=new C(se)}catch(z){K&&K(z);return}ae=ge[m.KHR_BINARY_GLTF].content}else ae=THREE.LoaderUtils.decodeText(new Uint8Array(se))}var Pe=JSON.parse(ae);if(Pe.asset===void 0||Pe.asset.version[0]<2){K&&K(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}var ke=new $e(Pe,{path:ce||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});ke.fileLoader.setRequestHeader(this.requestHeader);for(var Ve=0;Ve<this.pluginCallbacks.length;Ve++){var ze=this.pluginCallbacks[Ve](ke);me[ze.name]=ze,ge[ze.name]=!0}if(Pe.extensionsUsed)for(var Ve=0;Ve<Pe.extensionsUsed.length;++Ve){var $=Pe.extensionsUsed[Ve],V=Pe.extensionsRequired||[];switch($){case m.KHR_MATERIALS_UNLIT:ge[$]=new p;break;case m.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:ge[$]=new W;break;case m.KHR_DRACO_MESH_COMPRESSION:ge[$]=new I(Pe,this.dracoLoader);break;case m.MSFT_TEXTURE_DDS:ge[$]=new y(this.ddsLoader);break;case m.KHR_TEXTURE_TRANSFORM:ge[$]=new B;break;case m.KHR_MESH_QUANTIZATION:ge[$]=new oe;break;default:V.indexOf($)>=0&&me[$]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+$+'".')}}ke.setExtensions(ge),ke.setPlugins(me),ke.parse(Q,K)}});function h(){var se={};return{get:function(ce){return se[ce]},add:function(ce,Q){se[ce]=Q},remove:function(ce){delete se[ce]},removeAll:function(){se={}}}}var m={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function y(se){if(!se)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=m.MSFT_TEXTURE_DDS,this.ddsLoader=se}function d(se){this.parser=se,this.name=m.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}d.prototype._markDefs=function(){for(var se=this.parser,ce=this.parser.json.nodes||[],Q=0,K=ce.length;Q<K;Q++){var ae=ce[Q];ae.extensions&&ae.extensions[this.name]&&ae.extensions[this.name].light!==void 0&&se._addNodeRef(this.cache,ae.extensions[this.name].light)}},d.prototype._loadLight=function(se){var ce=this.parser,Q="light:"+se,K=ce.cache.get(Q);if(K)return K;var ae=ce.json,ge=ae.extensions&&ae.extensions[this.name]||{},me=ge.lights||[],Ee=me[se],Pe,ke=new THREE.Color(16777215);Ee.color!==void 0&&ke.fromArray(Ee.color);var Ve=Ee.range!==void 0?Ee.range:0;switch(Ee.type){case"directional":Pe=new THREE.DirectionalLight(ke),Pe.target.position.set(0,0,-1),Pe.add(Pe.target);break;case"point":Pe=new THREE.PointLight(ke),Pe.distance=Ve;break;case"spot":Pe=new THREE.SpotLight(ke),Pe.distance=Ve,Ee.spot=Ee.spot||{},Ee.spot.innerConeAngle=Ee.spot.innerConeAngle!==void 0?Ee.spot.innerConeAngle:0,Ee.spot.outerConeAngle=Ee.spot.outerConeAngle!==void 0?Ee.spot.outerConeAngle:Math.PI/4,Pe.angle=Ee.spot.outerConeAngle,Pe.penumbra=1-Ee.spot.innerConeAngle/Ee.spot.outerConeAngle,Pe.target.position.set(0,0,-1),Pe.add(Pe.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+Ee.type)}return Pe.position.set(0,0,0),Pe.decay=2,Ee.intensity!==void 0&&(Pe.intensity=Ee.intensity),Pe.name=ce.createUniqueName(Ee.name||"light_"+se),K=Promise.resolve(Pe),ce.cache.add(Q,K),K},d.prototype.createNodeAttachment=function(se){var ce=this,Q=this.parser,K=Q.json,ae=K.nodes[se],ge=ae.extensions&&ae.extensions[this.name]||{},me=ge.light;return me===void 0?null:this._loadLight(me).then(function(Ee){return Q._getNodeRef(ce.cache,me,Ee)})};function p(){this.name=m.KHR_MATERIALS_UNLIT}p.prototype.getMaterialType=function(){return THREE.MeshBasicMaterial},p.prototype.extendParams=function(se,ce,Q){var K=[];se.color=new THREE.Color(1,1,1),se.opacity=1;var ae=ce.pbrMetallicRoughness;if(ae){if(Array.isArray(ae.baseColorFactor)){var ge=ae.baseColorFactor;se.color.fromArray(ge),se.opacity=ge[3]}ae.baseColorTexture!==void 0&&K.push(Q.assignTexture(se,"map",ae.baseColorTexture))}return Promise.all(K)};function v(se){this.parser=se,this.name=m.KHR_MATERIALS_CLEARCOAT}v.prototype.getMaterialType=function(se){var ce=this.parser,Q=ce.json.materials[se];return!Q.extensions||!Q.extensions[this.name]?null:THREE.MeshPhysicalMaterial},v.prototype.extendMaterialParams=function(se,ce){var Q=this.parser,K=Q.json.materials[se];if(!K.extensions||!K.extensions[this.name])return Promise.resolve();var ae=[],ge=K.extensions[this.name];if(ge.clearcoatFactor!==void 0&&(ce.clearcoat=ge.clearcoatFactor),ge.clearcoatTexture!==void 0&&ae.push(Q.assignTexture(ce,"clearcoatMap",ge.clearcoatTexture)),ge.clearcoatRoughnessFactor!==void 0&&(ce.clearcoatRoughness=ge.clearcoatRoughnessFactor),ge.clearcoatRoughnessTexture!==void 0&&ae.push(Q.assignTexture(ce,"clearcoatRoughnessMap",ge.clearcoatRoughnessTexture)),ge.clearcoatNormalTexture!==void 0&&(ae.push(Q.assignTexture(ce,"clearcoatNormalMap",ge.clearcoatNormalTexture)),ge.clearcoatNormalTexture.scale!==void 0)){var me=ge.clearcoatNormalTexture.scale;ce.clearcoatNormalScale=new THREE.Vector2(me,-me)}return Promise.all(ae)};function b(se){this.parser=se,this.name=m.KHR_MATERIALS_TRANSMISSION}b.prototype.getMaterialType=function(se){var ce=this.parser,Q=ce.json.materials[se];return!Q.extensions||!Q.extensions[this.name]?null:THREE.MeshPhysicalMaterial},b.prototype.extendMaterialParams=function(se,ce){var Q=this.parser,K=Q.json.materials[se];if(!K.extensions||!K.extensions[this.name])return Promise.resolve();var ae=[],ge=K.extensions[this.name];return ge.transmissionFactor!==void 0&&(ce.transmission=ge.transmissionFactor),ge.transmissionTexture!==void 0&&ae.push(Q.assignTexture(ce,"transmissionMap",ge.transmissionTexture)),Promise.all(ae)};function E(se){this.parser=se,this.name=m.KHR_TEXTURE_BASISU}E.prototype.loadTexture=function(se){var ce=this.parser,Q=ce.json,K=Q.textures[se];if(!K.extensions||!K.extensions[this.name])return null;var ae=K.extensions[this.name],ge=Q.images[ae.source],me=ce.options.ktx2Loader;if(!me){if(Q.extensionsRequired&&Q.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return ce.loadTextureImage(se,ge,me)};function S(se){this.parser=se,this.name=m.EXT_TEXTURE_WEBP,this.isSupported=null}S.prototype.loadTexture=function(se){var ce=this.name,Q=this.parser,K=Q.json,ae=K.textures[se];if(!ae.extensions||!ae.extensions[ce])return null;var ge=ae.extensions[ce],me=K.images[ge.source],Ee=me.uri?Q.options.manager.getHandler(me.uri):Q.textureLoader;return this.detectSupport().then(function(Pe){if(Pe)return Q.loadTextureImage(se,me,Ee);if(K.extensionsRequired&&K.extensionsRequired.indexOf(ce)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return Q.loadTexture(se)})},S.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise(function(se){var ce=new Image;ce.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",ce.onload=ce.onerror=function(){se(ce.height===1)}})),this.isSupported};function x(se){this.name=m.EXT_MESHOPT_COMPRESSION,this.parser=se}x.prototype.loadBufferView=function(se){var ce=this.parser.json,Q=ce.bufferViews[se];if(Q.extensions&&Q.extensions[this.name]){var K=Q.extensions[this.name],ae=this.parser.getDependency("buffer",K.buffer),ge=this.parser.options.meshoptDecoder;if(!ge||!ge.supported){if(ce.extensionsRequired&&ce.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([ae,ge.ready]).then(function(me){var Ee=K.byteOffset||0,Pe=K.byteLength||0,ke=K.count,Ve=K.byteStride,ze=new ArrayBuffer(ke*Ve),$=new Uint8Array(me[0],Ee,Pe);return ge.decodeGltfBuffer(new Uint8Array(ze),ke,Ve,$,K.mode,K.filter),ze})}else return null};var T="glTF",_=12,D={JSON:1313821514,BIN:5130562};function C(se){this.name=m.KHR_BINARY_GLTF,this.content=null,this.body=null;var ce=new DataView(se,0,_);if(this.header={magic:THREE.LoaderUtils.decodeText(new Uint8Array(se.slice(0,4))),version:ce.getUint32(4,!0),length:ce.getUint32(8,!0)},this.header.magic!==T)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var Q=this.header.length-_,K=new DataView(se,_),ae=0;ae<Q;){var ge=K.getUint32(ae,!0);ae+=4;var me=K.getUint32(ae,!0);if(ae+=4,me===D.JSON){var Ee=new Uint8Array(se,_+ae,ge);this.content=THREE.LoaderUtils.decodeText(Ee)}else if(me===D.BIN){var Pe=_+ae;this.body=se.slice(Pe,Pe+ge)}ae+=ge}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function I(se,ce){if(!ce)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=m.KHR_DRACO_MESH_COMPRESSION,this.json=se,this.dracoLoader=ce,this.dracoLoader.preload()}I.prototype.decodePrimitive=function(se,ce){var Q=this.json,K=this.dracoLoader,ae=se.extensions[this.name].bufferView,ge=se.extensions[this.name].attributes,me={},Ee={},Pe={};for(var ke in ge){var Ve=ne[ke]||ke.toLowerCase();me[Ve]=ge[ke]}for(ke in se.attributes){var Ve=ne[ke]||ke.toLowerCase();if(ge[ke]!==void 0){var ze=Q.accessors[se.attributes[ke]],$=te[ze.componentType];Pe[Ve]=$,Ee[Ve]=ze.normalized===!0}}return ce.getDependency("bufferView",ae).then(function(V){return new Promise(function(z){K.decodeDracoFile(V,function(fe){for(var Te in fe.attributes){var Qe=fe.attributes[Te],Je=Ee[Te];Je!==void 0&&(Qe.normalized=Je)}z(fe)},me,Pe)})})};function B(){this.name=m.KHR_TEXTURE_TRANSFORM}B.prototype.extendTexture=function(se,ce){return se=se.clone(),ce.offset!==void 0&&se.offset.fromArray(ce.offset),ce.rotation!==void 0&&(se.rotation=ce.rotation),ce.scale!==void 0&&se.repeat.fromArray(ce.scale),ce.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),se.needsUpdate=!0,se};function U(se){THREE.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var ce=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),Q=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),K=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),ae=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),ge=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),me={specular:{value:new THREE.Color().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=me,this.onBeforeCompile=function(Ee){for(var Pe in me)Ee.uniforms[Pe]=me[Pe];Ee.fragmentShader=Ee.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",ce).replace("#include <metalnessmap_pars_fragment>",Q).replace("#include <roughnessmap_fragment>",K).replace("#include <metalnessmap_fragment>",ae).replace("#include <lights_physical_fragment>",ge)},Object.defineProperties(this,{specular:{get:function(){return me.specular.value},set:function(Ee){me.specular.value=Ee}},specularMap:{get:function(){return me.specularMap.value},set:function(Ee){me.specularMap.value=Ee,Ee?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return me.glossiness.value},set:function(Ee){me.glossiness.value=Ee}},glossinessMap:{get:function(){return me.glossinessMap.value},set:function(Ee){me.glossinessMap.value=Ee,Ee?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(se)}U.prototype=Object.create(THREE.MeshStandardMaterial.prototype),U.prototype.constructor=U,U.prototype.copy=function(se){return THREE.MeshStandardMaterial.prototype.copy.call(this,se),this.specularMap=se.specularMap,this.specular.copy(se.specular),this.glossinessMap=se.glossinessMap,this.glossiness=se.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this};function W(){return{name:m.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return U},extendParams:function(se,ce,Q){var K=ce.extensions[this.name];se.color=new THREE.Color(1,1,1),se.opacity=1;var ae=[];if(Array.isArray(K.diffuseFactor)){var ge=K.diffuseFactor;se.color.fromArray(ge),se.opacity=ge[3]}if(K.diffuseTexture!==void 0&&ae.push(Q.assignTexture(se,"map",K.diffuseTexture)),se.emissive=new THREE.Color(0,0,0),se.glossiness=K.glossinessFactor!==void 0?K.glossinessFactor:1,se.specular=new THREE.Color(1,1,1),Array.isArray(K.specularFactor)&&se.specular.fromArray(K.specularFactor),K.specularGlossinessTexture!==void 0){var me=K.specularGlossinessTexture;ae.push(Q.assignTexture(se,"glossinessMap",me)),ae.push(Q.assignTexture(se,"specularMap",me))}return Promise.all(ae)},createMaterial:function(se){var ce=new U(se);return ce.fog=!0,ce.color=se.color,ce.map=se.map===void 0?null:se.map,ce.lightMap=null,ce.lightMapIntensity=1,ce.aoMap=se.aoMap===void 0?null:se.aoMap,ce.aoMapIntensity=1,ce.emissive=se.emissive,ce.emissiveIntensity=1,ce.emissiveMap=se.emissiveMap===void 0?null:se.emissiveMap,ce.bumpMap=se.bumpMap===void 0?null:se.bumpMap,ce.bumpScale=1,ce.normalMap=se.normalMap===void 0?null:se.normalMap,ce.normalMapType=THREE.TangentSpaceNormalMap,se.normalScale&&(ce.normalScale=se.normalScale),ce.displacementMap=null,ce.displacementScale=1,ce.displacementBias=0,ce.specularMap=se.specularMap===void 0?null:se.specularMap,ce.specular=se.specular,ce.glossinessMap=se.glossinessMap===void 0?null:se.glossinessMap,ce.glossiness=se.glossiness,ce.alphaMap=null,ce.envMap=se.envMap===void 0?null:se.envMap,ce.envMapIntensity=1,ce.refractionRatio=.98,ce}}}function oe(){this.name=m.KHR_MESH_QUANTIZATION}function J(se,ce,Q,K){THREE.Interpolant.call(this,se,ce,Q,K)}J.prototype=Object.create(THREE.Interpolant.prototype),J.prototype.constructor=J,J.prototype.copySampleValue_=function(se){for(var ce=this.resultBuffer,Q=this.sampleValues,K=this.valueSize,ae=se*K*3+K,ge=0;ge!==K;ge++)ce[ge]=Q[ae+ge];return ce},J.prototype.beforeStart_=J.prototype.copySampleValue_,J.prototype.afterEnd_=J.prototype.copySampleValue_,J.prototype.interpolate_=function(se,ce,Q,K){for(var ae=this.resultBuffer,ge=this.sampleValues,me=this.valueSize,Ee=me*2,Pe=me*3,ke=K-ce,Ve=(Q-ce)/ke,ze=Ve*Ve,$=ze*Ve,V=se*Pe,z=V-Pe,fe=-2*$+3*ze,Te=$-ze,Qe=1-fe,Je=Te-ze+Ve,Mt=0;Mt!==me;Mt++){var Vt=ge[z+Mt+me],or=ge[z+Mt+Ee]*ke,Lr=ge[V+Mt+me],Ht=ge[V+Mt]*ke;ae[Mt]=Qe*Vt+Je*or+fe*Lr+Te*Ht}return ae};var le={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},te={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ue={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipmapNearestFilter,9985:THREE.LinearMipmapNearestFilter,9986:THREE.NearestMipmapLinearFilter,9987:THREE.LinearMipmapLinearFilter},Y={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},de={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ne={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},xe={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Be={CUBICSPLINE:void 0,LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete},je={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Ge(se,ce){return typeof se!="string"||se===""?"":(/^https?:\/\//i.test(ce)&&/^\//.test(se)&&(ce=ce.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(se)||/^data:.*,.*$/i.test(se)||/^blob:.*$/i.test(se)?se:ce+se)}function ct(se){return se.DefaultMaterial===void 0&&(se.DefaultMaterial=new THREE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:THREE.FrontSide})),se.DefaultMaterial}function lt(se,ce,Q){for(var K in Q.extensions)se[K]===void 0&&(ce.userData.gltfExtensions=ce.userData.gltfExtensions||{},ce.userData.gltfExtensions[K]=Q.extensions[K])}function Et(se,ce){ce.extras!==void 0&&(typeof ce.extras=="object"?Object.assign(se.userData,ce.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+ce.extras))}function Ct(se,ce,Q){for(var K=!1,ae=!1,ge=0,me=ce.length;ge<me;ge++){var Ee=ce[ge];if(Ee.POSITION!==void 0&&(K=!0),Ee.NORMAL!==void 0&&(ae=!0),K&&ae)break}if(!K&&!ae)return Promise.resolve(se);for(var Pe=[],ke=[],ge=0,me=ce.length;ge<me;ge++){var Ee=ce[ge];if(K){var Ve=Ee.POSITION!==void 0?Q.getDependency("accessor",Ee.POSITION):se.attributes.position;Pe.push(Ve)}if(ae){var Ve=Ee.NORMAL!==void 0?Q.getDependency("accessor",Ee.NORMAL):se.attributes.normal;ke.push(Ve)}}return Promise.all([Promise.all(Pe),Promise.all(ke)]).then(function(ze){var $=ze[0],V=ze[1];return K&&(se.morphAttributes.position=$),ae&&(se.morphAttributes.normal=V),se.morphTargetsRelative=!0,se})}function jt(se,ce){if(se.updateMorphTargets(),ce.weights!==void 0)for(var Q=0,K=ce.weights.length;Q<K;Q++)se.morphTargetInfluences[Q]=ce.weights[Q];if(ce.extras&&Array.isArray(ce.extras.targetNames)){var ae=ce.extras.targetNames;if(se.morphTargetInfluences.length===ae.length){se.morphTargetDictionary={};for(var Q=0,K=ae.length;Q<K;Q++)se.morphTargetDictionary[ae[Q]]=Q}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function tt(se){var ce=se.extensions&&se.extensions[m.KHR_DRACO_MESH_COMPRESSION],Q;return ce?Q="draco:"+ce.bufferView+":"+ce.indices+":"+pt(ce.attributes):Q=se.indices+":"+pt(se.attributes)+":"+se.mode,Q}function pt(se){for(var ce="",Q=Object.keys(se).sort(),K=0,ae=Q.length;K<ae;K++)ce+=Q[K]+":"+se[Q[K]]+";";return ce}function $e(se,ce){this.json=se||{},this.extensions={},this.plugins={},this.options=ce||{},this.cache=new h,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new THREE.ImageBitmapLoader(this.options.manager):this.textureLoader=new THREE.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new THREE.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}$e.prototype.setExtensions=function(se){this.extensions=se},$e.prototype.setPlugins=function(se){this.plugins=se},$e.prototype.parse=function(se,ce){var Q=this,K=this.json,ae=this.extensions;this.cache.removeAll(),this._invokeAll(function(ge){return ge._markDefs&&ge._markDefs()}),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(ge){var me={scene:ge[0][K.scene||0],scenes:ge[0],animations:ge[1],cameras:ge[2],asset:K.asset,parser:Q,userData:{}};lt(ae,me,K),Et(me,K),se(me)}).catch(ce)},$e.prototype._markDefs=function(){for(var se=this.json.nodes||[],ce=this.json.skins||[],Q=this.json.meshes||[],K=0,ae=ce.length;K<ae;K++)for(var ge=ce[K].joints,me=0,Ee=ge.length;me<Ee;me++)se[ge[me]].isBone=!0;for(var Pe=0,ke=se.length;Pe<ke;Pe++){var Ve=se[Pe];Ve.mesh!==void 0&&(this._addNodeRef(this.meshCache,Ve.mesh),Ve.skin!==void 0&&(Q[Ve.mesh].isSkinnedMesh=!0)),Ve.camera!==void 0&&this._addNodeRef(this.cameraCache,Ve.camera)}},$e.prototype._addNodeRef=function(se,ce){ce!==void 0&&(se.refs[ce]===void 0&&(se.refs[ce]=se.uses[ce]=0),se.refs[ce]++)},$e.prototype._getNodeRef=function(se,ce,Q){if(se.refs[ce]<=1)return Q;var K=Q.clone();return K.name+="_instance_"+se.uses[ce]++,K},$e.prototype._invokeOne=function(se){var ce=Object.values(this.plugins);ce.push(this);for(var Q=0;Q<ce.length;Q++){var K=se(ce[Q]);if(K)return K}},$e.prototype._invokeAll=function(se){var ce=Object.values(this.plugins);ce.unshift(this);for(var Q=[],K=0;K<ce.length;K++){var ae=se(ce[K]);ae&&Q.push(ae)}return Q},$e.prototype.getDependency=function(se,ce){var Q=se+":"+ce,K=this.cache.get(Q);if(!K){switch(se){case"scene":K=this.loadScene(ce);break;case"node":K=this.loadNode(ce);break;case"mesh":K=this._invokeOne(function(ae){return ae.loadMesh&&ae.loadMesh(ce)});break;case"accessor":K=this.loadAccessor(ce);break;case"bufferView":K=this._invokeOne(function(ae){return ae.loadBufferView&&ae.loadBufferView(ce)});break;case"buffer":K=this.loadBuffer(ce);break;case"material":K=this._invokeOne(function(ae){return ae.loadMaterial&&ae.loadMaterial(ce)});break;case"texture":K=this._invokeOne(function(ae){return ae.loadTexture&&ae.loadTexture(ce)});break;case"skin":K=this.loadSkin(ce);break;case"animation":K=this.loadAnimation(ce);break;case"camera":K=this.loadCamera(ce);break;default:throw new Error("Unknown type: "+se)}this.cache.add(Q,K)}return K},$e.prototype.getDependencies=function(se){var ce=this.cache.get(se);if(!ce){var Q=this,K=this.json[se+(se==="mesh"?"es":"s")]||[];ce=Promise.all(K.map(function(ae,ge){return Q.getDependency(se,ge)})),this.cache.add(se,ce)}return ce},$e.prototype.loadBuffer=function(se){var ce=this.json.buffers[se],Q=this.fileLoader;if(ce.type&&ce.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+ce.type+" buffer type is not supported.");if(ce.uri===void 0&&se===0)return Promise.resolve(this.extensions[m.KHR_BINARY_GLTF].body);var K=this.options;return new Promise(function(ae,ge){Q.load(Ge(ce.uri,K.path),ae,void 0,function(){ge(new Error('THREE.GLTFLoader: Failed to load buffer "'+ce.uri+'".'))})})},$e.prototype.loadBufferView=function(se){var ce=this.json.bufferViews[se];return this.getDependency("buffer",ce.buffer).then(function(Q){var K=ce.byteLength||0,ae=ce.byteOffset||0;return Q.slice(ae,ae+K)})},$e.prototype.loadAccessor=function(se){var ce=this,Q=this.json,K=this.json.accessors[se];if(K.bufferView===void 0&&K.sparse===void 0)return Promise.resolve(null);var ae=[];return K.bufferView!==void 0?ae.push(this.getDependency("bufferView",K.bufferView)):ae.push(null),K.sparse!==void 0&&(ae.push(this.getDependency("bufferView",K.sparse.indices.bufferView)),ae.push(this.getDependency("bufferView",K.sparse.values.bufferView))),Promise.all(ae).then(function(ge){var me=ge[0],Ee=de[K.type],Pe=te[K.componentType],ke=Pe.BYTES_PER_ELEMENT,Ve=ke*Ee,ze=K.byteOffset||0,$=K.bufferView!==void 0?Q.bufferViews[K.bufferView].byteStride:void 0,V=K.normalized===!0,z,fe;if($&&$!==Ve){var Te=Math.floor(ze/$),Qe="InterleavedBuffer:"+K.bufferView+":"+K.componentType+":"+Te+":"+K.count,Je=ce.cache.get(Qe);Je||(z=new Pe(me,Te*$,K.count*$/ke),Je=new THREE.InterleavedBuffer(z,$/ke),ce.cache.add(Qe,Je)),fe=new THREE.InterleavedBufferAttribute(Je,Ee,ze%$/ke,V)}else me===null?z=new Pe(K.count*Ee):z=new Pe(me,ze,K.count*Ee),fe=new THREE.BufferAttribute(z,Ee,V);if(K.sparse!==void 0){var Mt=de.SCALAR,Vt=te[K.sparse.indices.componentType],or=K.sparse.indices.byteOffset||0,Lr=K.sparse.values.byteOffset||0,Ht=new Vt(ge[1],or,K.sparse.count*Mt),Xr=new Pe(ge[2],Lr,K.sparse.count*Ee);me!==null&&(fe=new THREE.BufferAttribute(fe.array.slice(),fe.itemSize,fe.normalized));for(var Qt=0,Vr=Ht.length;Qt<Vr;Qt++){var Rn=Ht[Qt];if(fe.setX(Rn,Xr[Qt*Ee]),Ee>=2&&fe.setY(Rn,Xr[Qt*Ee+1]),Ee>=3&&fe.setZ(Rn,Xr[Qt*Ee+2]),Ee>=4&&fe.setW(Rn,Xr[Qt*Ee+3]),Ee>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return fe})},$e.prototype.loadTexture=function(se){var ce=this,Q=this.json,K=this.options,ae=Q.textures[se],ge=ae.extensions||{},me;ge[m.MSFT_TEXTURE_DDS]?me=Q.images[ge[m.MSFT_TEXTURE_DDS].source]:me=Q.images[ae.source];var Ee;return me.uri&&(Ee=K.manager.getHandler(me.uri)),Ee||(Ee=ge[m.MSFT_TEXTURE_DDS]?ce.extensions[m.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(se,me,Ee)},$e.prototype.loadTextureImage=function(se,ce,Q){var K=this,ae=this.json,ge=this.options,me=ae.textures[se],Ee=self.URL||self.webkitURL,Pe=ce.uri,ke=!1,Ve=!0;return ce.mimeType==="image/jpeg"&&(Ve=!1),ce.bufferView!==void 0&&(Pe=K.getDependency("bufferView",ce.bufferView).then(function(ze){if(ce.mimeType==="image/png"){var $=new DataView(ze,25,1).getUint8(0,!1);Ve=$===6||$===4||$===3}ke=!0;var V=new Blob([ze],{type:ce.mimeType});return Pe=Ee.createObjectURL(V),Pe})),Promise.resolve(Pe).then(function(ze){return new Promise(function($,V){var z=$;Q.isImageBitmapLoader===!0&&(z=function(fe){$(new THREE.CanvasTexture(fe))}),Q.load(Ge(ze,ge.path),z,void 0,V)})}).then(function(ze){ke===!0&&Ee.revokeObjectURL(Pe),ze.flipY=!1,me.name&&(ze.name=me.name),Ve||(ze.format=THREE.RGBFormat);var $=ae.samplers||{},V=$[me.sampler]||{};return ze.magFilter=ue[V.magFilter]||THREE.LinearFilter,ze.minFilter=ue[V.minFilter]||THREE.LinearMipmapLinearFilter,ze.wrapS=Y[V.wrapS]||THREE.RepeatWrapping,ze.wrapT=Y[V.wrapT]||THREE.RepeatWrapping,K.associations.set(ze,{type:"textures",index:se}),ze})},$e.prototype.assignTexture=function(se,ce,Q){var K=this;return this.getDependency("texture",Q.index).then(function(ae){if(Q.texCoord!==void 0&&Q.texCoord!=0&&!(ce==="aoMap"&&Q.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+Q.texCoord+" for texture "+ce+" not yet supported."),K.extensions[m.KHR_TEXTURE_TRANSFORM]){var ge=Q.extensions!==void 0?Q.extensions[m.KHR_TEXTURE_TRANSFORM]:void 0;if(ge){var me=K.associations.get(ae);ae=K.extensions[m.KHR_TEXTURE_TRANSFORM].extendTexture(ae,ge),K.associations.set(ae,me)}}se[ce]=ae})},$e.prototype.assignFinalMaterial=function(se){var ce=se.geometry,Q=se.material,K=ce.attributes.tangent!==void 0,ae=ce.attributes.color!==void 0,ge=ce.attributes.normal===void 0,me=se.isSkinnedMesh===!0,Ee=Object.keys(ce.morphAttributes).length>0,Pe=Ee&&ce.morphAttributes.normal!==void 0;if(se.isPoints){var ke="PointsMaterial:"+Q.uuid,Ve=this.cache.get(ke);Ve||(Ve=new THREE.PointsMaterial,THREE.Material.prototype.copy.call(Ve,Q),Ve.color.copy(Q.color),Ve.map=Q.map,Ve.sizeAttenuation=!1,this.cache.add(ke,Ve)),Q=Ve}else if(se.isLine){var ke="LineBasicMaterial:"+Q.uuid,ze=this.cache.get(ke);ze||(ze=new THREE.LineBasicMaterial,THREE.Material.prototype.copy.call(ze,Q),ze.color.copy(Q.color),this.cache.add(ke,ze)),Q=ze}if(K||ae||ge||me||Ee){var ke="ClonedMaterial:"+Q.uuid+":";Q.isGLTFSpecularGlossinessMaterial&&(ke+="specular-glossiness:"),me&&(ke+="skinning:"),K&&(ke+="vertex-tangents:"),ae&&(ke+="vertex-colors:"),ge&&(ke+="flat-shading:"),Ee&&(ke+="morph-targets:"),Pe&&(ke+="morph-normals:");var $=this.cache.get(ke);$||($=Q.clone(),me&&($.skinning=!0),ae&&($.vertexColors=!0),ge&&($.flatShading=!0),Ee&&($.morphTargets=!0),Pe&&($.morphNormals=!0),K&&($.vertexTangents=!0,Q.normalScale&&(Q.normalScale.y*=-1),Q.clearcoatNormalScale&&(Q.clearcoatNormalScale.y*=-1)),this.cache.add(ke,$),this.associations.set($,this.associations.get(Q))),Q=$}Q.aoMap&&ce.attributes.uv2===void 0&&ce.attributes.uv!==void 0&&ce.setAttribute("uv2",ce.attributes.uv),se.material=Q},$e.prototype.getMaterialType=function(){return THREE.MeshStandardMaterial},$e.prototype.loadMaterial=function(se){var ce=this,Q=this.json,K=this.extensions,ae=Q.materials[se],ge,me={},Ee=ae.extensions||{},Pe=[];if(Ee[m.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var ke=K[m.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];ge=ke.getMaterialType(),Pe.push(ke.extendParams(me,ae,ce))}else if(Ee[m.KHR_MATERIALS_UNLIT]){var Ve=K[m.KHR_MATERIALS_UNLIT];ge=Ve.getMaterialType(),Pe.push(Ve.extendParams(me,ae,ce))}else{var ze=ae.pbrMetallicRoughness||{};if(me.color=new THREE.Color(1,1,1),me.opacity=1,Array.isArray(ze.baseColorFactor)){var $=ze.baseColorFactor;me.color.fromArray($),me.opacity=$[3]}ze.baseColorTexture!==void 0&&Pe.push(ce.assignTexture(me,"map",ze.baseColorTexture)),me.metalness=ze.metallicFactor!==void 0?ze.metallicFactor:1,me.roughness=ze.roughnessFactor!==void 0?ze.roughnessFactor:1,ze.metallicRoughnessTexture!==void 0&&(Pe.push(ce.assignTexture(me,"metalnessMap",ze.metallicRoughnessTexture)),Pe.push(ce.assignTexture(me,"roughnessMap",ze.metallicRoughnessTexture))),ge=this._invokeOne(function(z){return z.getMaterialType&&z.getMaterialType(se)}),Pe.push(Promise.all(this._invokeAll(function(z){return z.extendMaterialParams&&z.extendMaterialParams(se,me)})))}ae.doubleSided===!0&&(me.side=THREE.DoubleSide);var V=ae.alphaMode||je.OPAQUE;return V===je.BLEND?(me.transparent=!0,me.depthWrite=!1):(me.transparent=!1,V===je.MASK&&(me.alphaTest=ae.alphaCutoff!==void 0?ae.alphaCutoff:.5)),ae.normalTexture!==void 0&&ge!==THREE.MeshBasicMaterial&&(Pe.push(ce.assignTexture(me,"normalMap",ae.normalTexture)),me.normalScale=new THREE.Vector2(1,-1),ae.normalTexture.scale!==void 0&&me.normalScale.set(ae.normalTexture.scale,-ae.normalTexture.scale)),ae.occlusionTexture!==void 0&&ge!==THREE.MeshBasicMaterial&&(Pe.push(ce.assignTexture(me,"aoMap",ae.occlusionTexture)),ae.occlusionTexture.strength!==void 0&&(me.aoMapIntensity=ae.occlusionTexture.strength)),ae.emissiveFactor!==void 0&&ge!==THREE.MeshBasicMaterial&&(me.emissive=new THREE.Color().fromArray(ae.emissiveFactor)),ae.emissiveTexture!==void 0&&ge!==THREE.MeshBasicMaterial&&Pe.push(ce.assignTexture(me,"emissiveMap",ae.emissiveTexture)),Promise.all(Pe).then(function(){var z;return ge===U?z=K[m.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(me):z=new ge(me),ae.name&&(z.name=ae.name),z.map&&(z.map.encoding=THREE.sRGBEncoding),z.emissiveMap&&(z.emissiveMap.encoding=THREE.sRGBEncoding),Et(z,ae),ce.associations.set(z,{type:"materials",index:se}),ae.extensions&&lt(K,z,ae),z})},$e.prototype.createUniqueName=function(se){for(var ce=THREE.PropertyBinding.sanitizeNodeName(se||""),Q=ce,K=1;this.nodeNamesUsed[Q];++K)Q=ce+"_"+K;return this.nodeNamesUsed[Q]=!0,Q};function Tt(se,ce,Q){var K=ce.attributes,ae=new THREE.Box3;if(K.POSITION!==void 0){var ge=Q.json.accessors[K.POSITION],me=ge.min,Ee=ge.max;if(me!==void 0&&Ee!==void 0)ae.set(new THREE.Vector3(me[0],me[1],me[2]),new THREE.Vector3(Ee[0],Ee[1],Ee[2]));else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;var Pe=ce.targets;if(Pe!==void 0){for(var ke=new THREE.Vector3,Ve=new THREE.Vector3,ze=0,$=Pe.length;ze<$;ze++){var V=Pe[ze];if(V.POSITION!==void 0){var ge=Q.json.accessors[V.POSITION],me=ge.min,Ee=ge.max;me!==void 0&&Ee!==void 0?(Ve.setX(Math.max(Math.abs(me[0]),Math.abs(Ee[0]))),Ve.setY(Math.max(Math.abs(me[1]),Math.abs(Ee[1]))),Ve.setZ(Math.max(Math.abs(me[2]),Math.abs(Ee[2]))),ke.max(Ve)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}ae.expandByVector(ke)}se.boundingBox=ae;var z=new THREE.Sphere;ae.getCenter(z.center),z.radius=ae.min.distanceTo(ae.max)/2,se.boundingSphere=z}function Kt(se,ce,Q){var K=ce.attributes,ae=[];function ge(ke,Ve){return Q.getDependency("accessor",ke).then(function(ze){se.setAttribute(Ve,ze)})}for(var me in K){var Ee=ne[me]||me.toLowerCase();Ee in se.attributes||ae.push(ge(K[me],Ee))}if(ce.indices!==void 0&&!se.index){var Pe=Q.getDependency("accessor",ce.indices).then(function(ke){se.setIndex(ke)});ae.push(Pe)}return Et(se,ce),Tt(se,ce,Q),Promise.all(ae).then(function(){return ce.targets!==void 0?Ct(se,ce.targets,Q):se})}function _t(se,ce){var Q=se.getIndex();if(Q===null){var K=[],ae=se.getAttribute("position");if(ae!==void 0){for(var ge=0;ge<ae.count;ge++)K.push(ge);se.setIndex(K),Q=se.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),se}var me=Q.count-2,Ee=[];if(ce===THREE.TriangleFanDrawMode)for(var ge=1;ge<=me;ge++)Ee.push(Q.getX(0)),Ee.push(Q.getX(ge)),Ee.push(Q.getX(ge+1));else for(var ge=0;ge<me;ge++)ge%2==0?(Ee.push(Q.getX(ge)),Ee.push(Q.getX(ge+1)),Ee.push(Q.getX(ge+2))):(Ee.push(Q.getX(ge+2)),Ee.push(Q.getX(ge+1)),Ee.push(Q.getX(ge)));Ee.length/3!==me&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var Pe=se.clone();return Pe.setIndex(Ee),Pe}return $e.prototype.loadGeometries=function(se){var ce=this,Q=this.extensions,K=this.primitiveCache;function ae($){return Q[m.KHR_DRACO_MESH_COMPRESSION].decodePrimitive($,ce).then(function(V){return Kt(V,$,ce)})}for(var ge=[],me=0,Ee=se.length;me<Ee;me++){var Pe=se[me],ke=tt(Pe),Ve=K[ke];if(Ve)ge.push(Ve.promise);else{var ze;Pe.extensions&&Pe.extensions[m.KHR_DRACO_MESH_COMPRESSION]?ze=ae(Pe):ze=Kt(new THREE.BufferGeometry,Pe,ce),K[ke]={primitive:Pe,promise:ze},ge.push(ze)}}return Promise.all(ge)},$e.prototype.loadMesh=function(se){for(var ce=this,Q=this.json,K=this.extensions,ae=Q.meshes[se],ge=ae.primitives,me=[],Ee=0,Pe=ge.length;Ee<Pe;Ee++){var ke=ge[Ee].material===void 0?ct(this.cache):this.getDependency("material",ge[Ee].material);me.push(ke)}return me.push(ce.loadGeometries(ge)),Promise.all(me).then(function(Ve){for(var ze=Ve.slice(0,Ve.length-1),$=Ve[Ve.length-1],V=[],z=0,fe=$.length;z<fe;z++){var Te=$[z],Qe=ge[z],Je,Mt=ze[z];if(Qe.mode===le.TRIANGLES||Qe.mode===le.TRIANGLE_STRIP||Qe.mode===le.TRIANGLE_FAN||Qe.mode===void 0)Je=ae.isSkinnedMesh===!0?new THREE.SkinnedMesh(Te,Mt):new THREE.Mesh(Te,Mt),Mt.isMeshStandardMaterial===!0&&Mt.side===THREE.DoubleSide&&Te.getIndex()!==null&&Te.hasAttribute("position")===!0&&Te.hasAttribute("normal")===!0&&Te.hasAttribute("uv")===!0&&Te.hasAttribute("tangent")===!1&&(Te.computeTangents(),Mt.vertexTangents=!0),Je.isSkinnedMesh===!0&&!Je.geometry.attributes.skinWeight.normalized&&Je.normalizeSkinWeights(),Qe.mode===le.TRIANGLE_STRIP?Je.geometry=_t(Je.geometry,THREE.TriangleStripDrawMode):Qe.mode===le.TRIANGLE_FAN&&(Je.geometry=_t(Je.geometry,THREE.TriangleFanDrawMode));else if(Qe.mode===le.LINES)Je=new THREE.LineSegments(Te,Mt);else if(Qe.mode===le.LINE_STRIP)Je=new THREE.Line(Te,Mt);else if(Qe.mode===le.LINE_LOOP)Je=new THREE.LineLoop(Te,Mt);else if(Qe.mode===le.POINTS)Je=new THREE.Points(Te,Mt);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Qe.mode);Object.keys(Je.geometry.morphAttributes).length>0&&jt(Je,ae),Je.name=ce.createUniqueName(ae.name||"mesh_"+se),Et(Je,ae),Qe.extensions&&lt(K,Je,Qe),ce.assignFinalMaterial(Je),V.push(Je)}if(V.length===1)return V[0];for(var Vt=new THREE.Group,z=0,fe=V.length;z<fe;z++)Vt.add(V[z]);return Vt})},$e.prototype.loadCamera=function(se){var ce,Q=this.json.cameras[se],K=Q[Q.type];if(!K){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return Q.type==="perspective"?ce=new THREE.PerspectiveCamera(THREE.MathUtils.radToDeg(K.yfov),K.aspectRatio||1,K.znear||1,K.zfar||2e6):Q.type==="orthographic"&&(ce=new THREE.OrthographicCamera(-K.xmag,K.xmag,K.ymag,-K.ymag,K.znear,K.zfar)),Q.name&&(ce.name=this.createUniqueName(Q.name)),Et(ce,Q),Promise.resolve(ce)},$e.prototype.loadSkin=function(se){var ce=this.json.skins[se],Q={joints:ce.joints};return ce.inverseBindMatrices===void 0?Promise.resolve(Q):this.getDependency("accessor",ce.inverseBindMatrices).then(function(K){return Q.inverseBindMatrices=K,Q})},$e.prototype.loadAnimation=function(se){for(var ce=this.json,Q=ce.animations[se],K=[],ae=[],ge=[],me=[],Ee=[],Pe=0,ke=Q.channels.length;Pe<ke;Pe++){var Ve=Q.channels[Pe],ze=Q.samplers[Ve.sampler],$=Ve.target,V=$.node!==void 0?$.node:$.id,z=Q.parameters!==void 0?Q.parameters[ze.input]:ze.input,fe=Q.parameters!==void 0?Q.parameters[ze.output]:ze.output;K.push(this.getDependency("node",V)),ae.push(this.getDependency("accessor",z)),ge.push(this.getDependency("accessor",fe)),me.push(ze),Ee.push($)}return Promise.all([Promise.all(K),Promise.all(ae),Promise.all(ge),Promise.all(me),Promise.all(Ee)]).then(function(Te){for(var Qe=Te[0],Je=Te[1],Mt=Te[2],Vt=Te[3],or=Te[4],Lr=[],Ht=0,Xr=Qe.length;Ht<Xr;Ht++){var Qt=Qe[Ht],Vr=Je[Ht],Rn=Mt[Ht],yn=Vt[Ht],ft=or[Ht];if(Qt!==void 0){Qt.updateMatrix(),Qt.matrixAutoUpdate=!0;var ht;switch(xe[ft.path]){case xe.weights:ht=THREE.NumberKeyframeTrack;break;case xe.rotation:ht=THREE.QuaternionKeyframeTrack;break;case xe.position:case xe.scale:default:ht=THREE.VectorKeyframeTrack;break}var St=Qt.name?Qt.name:Qt.uuid,rr=yn.interpolation!==void 0?Be[yn.interpolation]:THREE.InterpolateLinear,sr=[];xe[ft.path]===xe.weights?Qt.traverse(function(jr){jr.isMesh===!0&&jr.morphTargetInfluences&&sr.push(jr.name?jr.name:jr.uuid)}):sr.push(St);var pr=Rn.array;if(Rn.normalized){var cr;if(pr.constructor===Int8Array)cr=1/127;else if(pr.constructor===Uint8Array)cr=1/255;else if(pr.constructor==Int16Array)cr=1/32767;else if(pr.constructor===Uint16Array)cr=1/65535;else throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");for(var Cr=new Float32Array(pr.length),Zr=0,kr=pr.length;Zr<kr;Zr++)Cr[Zr]=pr[Zr]*cr;pr=Cr}for(var Zr=0,kr=sr.length;Zr<kr;Zr++){var jn=new ht(sr[Zr]+"."+xe[ft.path],Vr.array,pr,rr);yn.interpolation==="CUBICSPLINE"&&(jn.createInterpolant=function(si){return new J(this.times,this.values,this.getValueSize()/3,si)},jn.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),Lr.push(jn)}}}var $r=Q.name?Q.name:"animation_"+se;return new THREE.AnimationClip($r,void 0,Lr)})},$e.prototype.loadNode=function(se){var ce=this.json,Q=this.extensions,K=this,ae=ce.nodes[se],ge=ae.name?K.createUniqueName(ae.name):"";return function(){var me=[];return ae.mesh!==void 0&&me.push(K.getDependency("mesh",ae.mesh).then(function(Ee){var Pe=K._getNodeRef(K.meshCache,ae.mesh,Ee);return ae.weights!==void 0&&Pe.traverse(function(ke){if(!!ke.isMesh)for(var Ve=0,ze=ae.weights.length;Ve<ze;Ve++)ke.morphTargetInfluences[Ve]=ae.weights[Ve]}),Pe})),ae.camera!==void 0&&me.push(K.getDependency("camera",ae.camera).then(function(Ee){return K._getNodeRef(K.cameraCache,ae.camera,Ee)})),K._invokeAll(function(Ee){return Ee.createNodeAttachment&&Ee.createNodeAttachment(se)}).forEach(function(Ee){me.push(Ee)}),Promise.all(me)}().then(function(me){var Ee;if(ae.isBone===!0?Ee=new THREE.Bone:me.length>1?Ee=new THREE.Group:me.length===1?Ee=me[0]:Ee=new THREE.Object3D,Ee!==me[0])for(var Pe=0,ke=me.length;Pe<ke;Pe++)Ee.add(me[Pe]);if(ae.name&&(Ee.userData.name=ae.name,Ee.name=ge),Et(Ee,ae),ae.extensions&&lt(Q,Ee,ae),ae.matrix!==void 0){var Ve=new THREE.Matrix4;Ve.fromArray(ae.matrix),Ee.applyMatrix4(Ve)}else ae.translation!==void 0&&Ee.position.fromArray(ae.translation),ae.rotation!==void 0&&Ee.quaternion.fromArray(ae.rotation),ae.scale!==void 0&&Ee.scale.fromArray(ae.scale);return K.associations.set(Ee,{type:"nodes",index:se}),Ee})},$e.prototype.loadScene=function(){function se(ce,Q,K,ae){var ge=K.nodes[ce];return ae.getDependency("node",ce).then(function(me){if(ge.skin===void 0)return me;var Ee;return ae.getDependency("skin",ge.skin).then(function(Pe){Ee=Pe;for(var ke=[],Ve=0,ze=Ee.joints.length;Ve<ze;Ve++)ke.push(ae.getDependency("node",Ee.joints[Ve]));return Promise.all(ke)}).then(function(Pe){return me.traverse(function(ke){if(!!ke.isMesh){for(var Ve=[],ze=[],$=0,V=Pe.length;$<V;$++){var z=Pe[$];if(z){Ve.push(z);var fe=new THREE.Matrix4;Ee.inverseBindMatrices!==void 0&&fe.fromArray(Ee.inverseBindMatrices.array,$*16),ze.push(fe)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Ee.joints[$])}ke.bind(new THREE.Skeleton(Ve,ze),ke.matrixWorld)}}),me})}).then(function(me){Q.add(me);var Ee=[];if(ge.children)for(var Pe=ge.children,ke=0,Ve=Pe.length;ke<Ve;ke++){var ze=Pe[ke];Ee.push(se(ze,me,K,ae))}return Promise.all(Ee)})}return function(Q){var K=this.json,ae=this.extensions,ge=this.json.scenes[Q],me=this,Ee=new THREE.Group;ge.name&&(Ee.name=me.createUniqueName(ge.name)),Et(Ee,ge),ge.extensions&&lt(ae,Ee,ge);for(var Pe=ge.nodes||[],ke=[],Ve=0,ze=Pe.length;Ve<ze;Ve++)ke.push(se(Pe[Ve],Ee,K,me));return Promise.all(ke).then(function(){return Ee})}}(),l}()},{}],60:[function(c,g,L){THREE.MTLLoader=function(l){THREE.Loader.call(this,l)},THREE.MTLLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:THREE.MTLLoader,load:function(l,h,m,y){var d=this,p=this.path===""?THREE.LoaderUtils.extractUrlBase(l):this.path,v=new THREE.FileLoader(this.manager);v.setPath(this.path),v.setRequestHeader(this.requestHeader),v.setWithCredentials(this.withCredentials),v.load(l,function(b){try{h(d.parse(b,p))}catch(E){y?y(E):console.error(E),d.manager.itemError(l)}},m,y)},setMaterialOptions:function(l){return this.materialOptions=l,this},parse:function(l,h){for(var m=l.split(`
`),y={},d=/\s+/,p={},v=0;v<m.length;v++){var b=m[v];if(b=b.trim(),!(b.length===0||b.charAt(0)==="#")){var E=b.indexOf(" "),S=E>=0?b.substring(0,E):b;S=S.toLowerCase();var x=E>=0?b.substring(E+1):"";if(x=x.trim(),S==="newmtl")y={name:x},p[x]=y;else if(S==="ka"||S==="kd"||S==="ks"||S==="ke"){var T=x.split(d,3);y[S]=[parseFloat(T[0]),parseFloat(T[1]),parseFloat(T[2])]}else y[S]=x}}var _=new THREE.MTLLoader.MaterialCreator(this.resourcePath||h,this.materialOptions);return _.setCrossOrigin(this.crossOrigin),_.setManager(this.manager),_.setMaterials(p),_}}),THREE.MTLLoader.MaterialCreator=function(l,h){this.baseUrl=l||"",this.options=h,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(l){return this.crossOrigin=l,this},setManager:function(l){this.manager=l},setMaterials:function(l){this.materialsInfo=this.convert(l),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(l){if(!this.options)return l;var h={};for(var m in l){var y=l[m],d={};h[m]=d;for(var p in y){var v=!0,b=y[p],E=p.toLowerCase();switch(E){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(b=[b[0]/255,b[1]/255,b[2]/255]),this.options&&this.options.ignoreZeroRGBs&&b[0]===0&&b[1]===0&&b[2]===0&&(v=!1);break}v&&(d[E]=b)}}return h},preload:function(){for(var l in this.materialsInfo)this.create(l)},getIndex:function(l){return this.nameLookup[l]},getAsArray:function(){var l=0;for(var h in this.materialsInfo)this.materialsArray[l]=this.create(h),this.nameLookup[h]=l,l++;return this.materialsArray},create:function(l){return this.materials[l]===void 0&&this.createMaterial_(l),this.materials[l]},createMaterial_:function(l){var h=this,m=this.materialsInfo[l],y={name:l,side:this.side};function d(S,x){return typeof x!="string"||x===""?"":/^https?:\/\//i.test(x)?x:S+x}function p(S,x){if(!y[S]){var T=h.getTextureParams(x,y),_=h.loadTexture(d(h.baseUrl,T.url));_.repeat.copy(T.scale),_.offset.copy(T.offset),_.wrapS=h.wrap,_.wrapT=h.wrap,y[S]=_}}for(var v in m){var b=m[v],E;if(b!=="")switch(v.toLowerCase()){case"kd":y.color=new THREE.Color().fromArray(b);break;case"ks":y.specular=new THREE.Color().fromArray(b);break;case"ke":y.emissive=new THREE.Color().fromArray(b);break;case"map_kd":p("map",b);break;case"map_ks":p("specularMap",b);break;case"map_ke":p("emissiveMap",b);break;case"norm":p("normalMap",b);break;case"map_bump":case"bump":p("bumpMap",b);break;case"map_d":p("alphaMap",b),y.transparent=!0;break;case"ns":y.shininess=parseFloat(b);break;case"d":E=parseFloat(b),E<1&&(y.opacity=E,y.transparent=!0);break;case"tr":E=parseFloat(b),this.options&&this.options.invertTrProperty&&(E=1-E),E>0&&(y.opacity=1-E,y.transparent=!0);break}}return this.materials[l]=new THREE.MeshPhongMaterial(y),this.materials[l]},getTextureParams:function(l,h){var m={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},y=l.split(/\s+/),d;return d=y.indexOf("-bm"),d>=0&&(h.bumpScale=parseFloat(y[d+1]),y.splice(d,2)),d=y.indexOf("-s"),d>=0&&(m.scale.set(parseFloat(y[d+1]),parseFloat(y[d+2])),y.splice(d,4)),d=y.indexOf("-o"),d>=0&&(m.offset.set(parseFloat(y[d+1]),parseFloat(y[d+2])),y.splice(d,4)),m.url=y.join(" ").trim(),m},loadTexture:function(l,h,m,y,d){var p,v=this.manager!==void 0?this.manager:THREE.DefaultLoadingManager,b=v.getHandler(l);return b===null&&(b=new THREE.TextureLoader(v)),b.setCrossOrigin&&b.setCrossOrigin(this.crossOrigin),p=b.load(l,m,y,d),h!==void 0&&(p.mapping=h),p}}},{}],61:[function(c,g,L){THREE.OBJLoader=function(){var l=/^[og]\s*(.+)?/,h=/^mtllib /,m=/^usemtl /,y=/^usemap /,d=new THREE.Vector3,p=new THREE.Vector3,v=new THREE.Vector3,b=new THREE.Vector3,E=new THREE.Vector3;function S(){var T={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(_,D){if(this.object&&this.object.fromDeclaration===!1){this.object.name=_,this.object.fromDeclaration=D!==!1;return}var C=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:_||"",fromDeclaration:D!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(B,U){var W=this._finalize(!1);W&&(W.inherited||W.groupCount<=0)&&this.materials.splice(W.index,1);var oe={index:this.materials.length,name:B||"",mtllib:Array.isArray(U)&&U.length>0?U[U.length-1]:"",smooth:W!==void 0?W.smooth:this.smooth,groupStart:W!==void 0?W.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(J){var le={index:typeof J=="number"?J:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return le.clone=this.clone.bind(le),le}};return this.materials.push(oe),oe},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(B){var U=this.currentMaterial();if(U&&U.groupEnd===-1&&(U.groupEnd=this.geometry.vertices.length/3,U.groupCount=U.groupEnd-U.groupStart,U.inherited=!1),B&&this.materials.length>1)for(var W=this.materials.length-1;W>=0;W--)this.materials[W].groupCount<=0&&this.materials.splice(W,1);return B&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),U}},C&&C.name&&typeof C.clone=="function"){var I=C.clone(0);I.inherited=!0,this.object.materials.push(I)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(_,D){var C=parseInt(_,10);return(C>=0?C-1:C+D/3)*3},parseNormalIndex:function(_,D){var C=parseInt(_,10);return(C>=0?C-1:C+D/3)*3},parseUVIndex:function(_,D){var C=parseInt(_,10);return(C>=0?C-1:C+D/2)*2},addVertex:function(_,D,C){var I=this.vertices,B=this.object.geometry.vertices;B.push(I[_+0],I[_+1],I[_+2]),B.push(I[D+0],I[D+1],I[D+2]),B.push(I[C+0],I[C+1],I[C+2])},addVertexPoint:function(_){var D=this.vertices,C=this.object.geometry.vertices;C.push(D[_+0],D[_+1],D[_+2])},addVertexLine:function(_){var D=this.vertices,C=this.object.geometry.vertices;C.push(D[_+0],D[_+1],D[_+2])},addNormal:function(_,D,C){var I=this.normals,B=this.object.geometry.normals;B.push(I[_+0],I[_+1],I[_+2]),B.push(I[D+0],I[D+1],I[D+2]),B.push(I[C+0],I[C+1],I[C+2])},addFaceNormal:function(_,D,C){var I=this.vertices,B=this.object.geometry.normals;d.fromArray(I,_),p.fromArray(I,D),v.fromArray(I,C),E.subVectors(v,p),b.subVectors(d,p),E.cross(b),E.normalize(),B.push(E.x,E.y,E.z),B.push(E.x,E.y,E.z),B.push(E.x,E.y,E.z)},addColor:function(_,D,C){var I=this.colors,B=this.object.geometry.colors;I[_]!==void 0&&B.push(I[_+0],I[_+1],I[_+2]),I[D]!==void 0&&B.push(I[D+0],I[D+1],I[D+2]),I[C]!==void 0&&B.push(I[C+0],I[C+1],I[C+2])},addUV:function(_,D,C){var I=this.uvs,B=this.object.geometry.uvs;B.push(I[_+0],I[_+1]),B.push(I[D+0],I[D+1]),B.push(I[C+0],I[C+1])},addDefaultUV:function(){var _=this.object.geometry.uvs;_.push(0,0),_.push(0,0),_.push(0,0)},addUVLine:function(_){var D=this.uvs,C=this.object.geometry.uvs;C.push(D[_+0],D[_+1])},addFace:function(_,D,C,I,B,U,W,oe,J){var le=this.vertices.length,te=this.parseVertexIndex(_,le),ue=this.parseVertexIndex(D,le),Y=this.parseVertexIndex(C,le);if(this.addVertex(te,ue,Y),this.addColor(te,ue,Y),W!==void 0&&W!==""){var de=this.normals.length;te=this.parseNormalIndex(W,de),ue=this.parseNormalIndex(oe,de),Y=this.parseNormalIndex(J,de),this.addNormal(te,ue,Y)}else this.addFaceNormal(te,ue,Y);if(I!==void 0&&I!==""){var ne=this.uvs.length;te=this.parseUVIndex(I,ne),ue=this.parseUVIndex(B,ne),Y=this.parseUVIndex(U,ne),this.addUV(te,ue,Y),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(_){this.object.geometry.type="Points";for(var D=this.vertices.length,C=0,I=_.length;C<I;C++){var B=this.parseVertexIndex(_[C],D);this.addVertexPoint(B),this.addColor(B)}},addLineGeometry:function(_,D){this.object.geometry.type="Line";for(var C=this.vertices.length,I=this.uvs.length,B=0,U=_.length;B<U;B++)this.addVertexLine(this.parseVertexIndex(_[B],C));for(var W=0,U=D.length;W<U;W++)this.addUVLine(this.parseUVIndex(D[W],I))}};return T.startObject("",!1),T}function x(T){THREE.Loader.call(this,T),this.materials=null}return x.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:x,load:function(T,_,D,C){var I=this,B=new THREE.FileLoader(this.manager);B.setPath(this.path),B.setRequestHeader(this.requestHeader),B.setWithCredentials(this.withCredentials),B.load(T,function(U){try{_(I.parse(U))}catch(W){C?C(W):console.error(W),I.manager.itemError(T)}},D,C)},setMaterials:function(T){return this.materials=T,this},parse:function(T){var _=new S;T.indexOf(`\r
`)!==-1&&(T=T.replace(/\r\n/g,`
`)),T.indexOf(`\\
`)!==-1&&(T=T.replace(/\\\n/g,""));for(var D=T.split(`
`),C="",I="",B=0,U=[],W=typeof"".trimLeft=="function",oe=0,J=D.length;oe<J;oe++)if(C=D[oe],C=W?C.trimLeft():C.trim(),B=C.length,B!==0&&(I=C.charAt(0),I!=="#"))if(I==="v"){var le=C.split(/\s+/);switch(le[0]){case"v":_.vertices.push(parseFloat(le[1]),parseFloat(le[2]),parseFloat(le[3])),le.length>=7?_.colors.push(parseFloat(le[4]),parseFloat(le[5]),parseFloat(le[6])):_.colors.push(void 0,void 0,void 0);break;case"vn":_.normals.push(parseFloat(le[1]),parseFloat(le[2]),parseFloat(le[3]));break;case"vt":_.uvs.push(parseFloat(le[1]),parseFloat(le[2]));break}}else if(I==="f"){for(var te=C.substr(1).trim(),ue=te.split(/\s+/),Y=[],de=0,ne=ue.length;de<ne;de++){var xe=ue[de];if(xe.length>0){var Be=xe.split("/");Y.push(Be)}}for(var je=Y[0],de=1,ne=Y.length-1;de<ne;de++){var Ge=Y[de],ct=Y[de+1];_.addFace(je[0],Ge[0],ct[0],je[1],Ge[1],ct[1],je[2],Ge[2],ct[2])}}else if(I==="l"){var lt=C.substring(1).trim().split(" "),Et=[],Ct=[];if(C.indexOf("/")===-1)Et=lt;else for(var jt=0,tt=lt.length;jt<tt;jt++){var pt=lt[jt].split("/");pt[0]!==""&&Et.push(pt[0]),pt[1]!==""&&Ct.push(pt[1])}_.addLineGeometry(Et,Ct)}else if(I==="p"){var te=C.substr(1).trim(),$e=te.split(" ");_.addPointGeometry($e)}else if((U=l.exec(C))!==null){var Tt=(" "+U[0].substr(1).trim()).substr(1);_.startObject(Tt)}else if(m.test(C))_.object.startMaterial(C.substring(7).trim(),_.materialLibraries);else if(h.test(C))_.materialLibraries.push(C.substring(7).trim());else if(y.test(C))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(I==="s"){if(U=C.split(" "),U.length>1){var Kt=U[1].trim().toLowerCase();_.object.smooth=Kt!=="0"&&Kt!=="off"}else _.object.smooth=!0;var _t=_.object.currentMaterial();_t&&(_t.smooth=_.object.smooth)}else{if(C==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+C+'"')}_.finalize();var se=new THREE.Group;se.materialLibraries=[].concat(_.materialLibraries);var ce=!(_.objects.length===1&&_.objects[0].geometry.vertices.length===0);if(ce===!0)for(var oe=0,J=_.objects.length;oe<J;oe++){var Q=_.objects[oe],K=Q.geometry,ae=Q.materials,ge=K.type==="Line",me=K.type==="Points",Ee=!1;if(K.vertices.length!==0){var Pe=new THREE.BufferGeometry;Pe.setAttribute("position",new THREE.Float32BufferAttribute(K.vertices,3)),K.normals.length>0&&Pe.setAttribute("normal",new THREE.Float32BufferAttribute(K.normals,3)),K.colors.length>0&&(Ee=!0,Pe.setAttribute("color",new THREE.Float32BufferAttribute(K.colors,3))),K.hasUVIndices===!0&&Pe.setAttribute("uv",new THREE.Float32BufferAttribute(K.uvs,2));for(var ke=[],Ve=0,ze=ae.length;Ve<ze;Ve++){var $=ae[Ve],V=$.name+"_"+$.smooth+"_"+Ee,_t=_.materials[V];if(this.materials!==null){if(_t=this.materials.create($.name),ge&&_t&&!(_t instanceof THREE.LineBasicMaterial)){var z=new THREE.LineBasicMaterial;THREE.Material.prototype.copy.call(z,_t),z.color.copy(_t.color),_t=z}else if(me&&_t&&!(_t instanceof THREE.PointsMaterial)){var fe=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});THREE.Material.prototype.copy.call(fe,_t),fe.color.copy(_t.color),fe.map=_t.map,_t=fe}}_t===void 0&&(ge?_t=new THREE.LineBasicMaterial:me?_t=new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):_t=new THREE.MeshPhongMaterial,_t.name=$.name,_t.flatShading=!$.smooth,_t.vertexColors=Ee,_.materials[V]=_t),ke.push(_t)}var Te;if(ke.length>1){for(var Ve=0,ze=ae.length;Ve<ze;Ve++){var $=ae[Ve];Pe.addGroup($.groupStart,$.groupCount,Ve)}ge?Te=new THREE.LineSegments(Pe,ke):me?Te=new THREE.Points(Pe,ke):Te=new THREE.Mesh(Pe,ke)}else ge?Te=new THREE.LineSegments(Pe,ke[0]):me?Te=new THREE.Points(Pe,ke[0]):Te=new THREE.Mesh(Pe,ke[0]);Te.name=Q.name,se.add(Te)}}else if(_.vertices.length>0){var _t=new THREE.PointsMaterial({size:1,sizeAttenuation:!1}),Pe=new THREE.BufferGeometry;Pe.setAttribute("position",new THREE.Float32BufferAttribute(_.vertices,3)),_.colors.length>0&&_.colors[0]!==void 0&&(Pe.setAttribute("color",new THREE.Float32BufferAttribute(_.colors,3)),_t.vertexColors=!0);var Qe=new THREE.Points(Pe,_t);se.add(Qe)}return se}}),x}()},{}],62:[function(c,g,L){THREE.BufferGeometryUtils={computeTangents:function(l){l.computeTangents(),console.warn("THREE.BufferGeometryUtils: .computeTangents() has been removed. Use BufferGeometry.computeTangents() instead.")},mergeBufferGeometries:function(l,h){for(var m=l[0].index!==null,y=new Set(Object.keys(l[0].attributes)),d=new Set(Object.keys(l[0].morphAttributes)),p={},v={},b=l[0].morphTargetsRelative,E=new THREE.BufferGeometry,S=0,x=0;x<l.length;++x){var T=l[x],_=0;if(m!==(T.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+x+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var D in T.attributes){if(!y.has(D))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+x+'. All geometries must have compatible attributes; make sure "'+D+'" attribute exists among all geometries, or in none of them.'),null;p[D]===void 0&&(p[D]=[]),p[D].push(T.attributes[D]),_++}if(_!==y.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+x+". Make sure all geometries have the same number of attributes."),null;if(b!==T.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+x+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var D in T.morphAttributes){if(!d.has(D))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+x+".  .morphAttributes must be consistent throughout all geometries."),null;v[D]===void 0&&(v[D]=[]),v[D].push(T.morphAttributes[D])}if(E.userData.mergedUserData=E.userData.mergedUserData||[],E.userData.mergedUserData.push(T.userData),h){var C;if(m)C=T.index.count;else if(T.attributes.position!==void 0)C=T.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+x+". The geometry must have either an index or a position attribute"),null;E.addGroup(S,C,x),S+=C}}if(m){for(var I=0,B=[],x=0;x<l.length;++x){for(var U=l[x].index,W=0;W<U.count;++W)B.push(U.getX(W)+I);I+=l[x].attributes.position.count}E.setIndex(B)}for(var D in p){var oe=this.mergeBufferAttributes(p[D]);if(!oe)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+D+" attribute."),null;E.setAttribute(D,oe)}for(var D in v){var J=v[D][0].length;if(J===0)break;E.morphAttributes=E.morphAttributes||{},E.morphAttributes[D]=[];for(var x=0;x<J;++x){for(var le=[],W=0;W<v[D].length;++W)le.push(v[D][W][x]);var te=this.mergeBufferAttributes(le);if(!te)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+D+" morphAttribute."),null;E.morphAttributes[D].push(te)}}return E},mergeBufferAttributes:function(l){for(var h,m,y,d=0,p=0;p<l.length;++p){var v=l[p];if(v.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(h===void 0&&(h=v.array.constructor),h!==v.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(m===void 0&&(m=v.itemSize),m!==v.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(y===void 0&&(y=v.normalized),y!==v.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;d+=v.array.length}for(var b=new h(d),E=0,p=0;p<l.length;++p)b.set(l[p].array,E),E+=l[p].array.length;return new THREE.BufferAttribute(b,m,y)},interleaveAttributes:function(l){for(var h,m=0,y=0,d=0,p=l.length;d<p;++d){var v=l[d];if(h===void 0&&(h=v.array.constructor),h!==v.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;m+=v.array.length,y+=v.itemSize}for(var b=new THREE.InterleavedBuffer(new h(m),y),E=0,S=[],x=["getX","getY","getZ","getW"],T=["setX","setY","setZ","setW"],_=0,p=l.length;_<p;_++){var v=l[_],D=v.itemSize,C=v.count,I=new THREE.InterleavedBufferAttribute(b,D,E,v.normalized);S.push(I),E+=D;for(var B=0;B<C;B++)for(var U=0;U<D;U++)I[T[U]](B,v[x[U]](B))}return S},estimateBytesUsed:function(l){var h=0;for(var m in l.attributes){var y=l.getAttribute(m);h+=y.count*y.itemSize*y.array.BYTES_PER_ELEMENT}var d=l.getIndex();return h+=d?d.count*d.itemSize*d.array.BYTES_PER_ELEMENT:0,h},mergeVertices:function(l,h=1e-4){h=Math.max(h,Number.EPSILON);for(var m={},y=l.getIndex(),d=l.getAttribute("position"),p=y?y.count:d.count,v=0,b=Object.keys(l.attributes),E={},S={},x=[],T=["getX","getY","getZ","getW"],_=0,D=b.length;_<D;_++){var C=b[_];E[C]=[];var I=l.morphAttributes[C];I&&(S[C]=new Array(I.length).fill().map(()=>[]))}for(var B=Math.log10(1/h),U=Math.pow(10,B),_=0;_<p;_++){for(var W=y?y.getX(_):_,oe="",J=0,D=b.length;J<D;J++)for(var C=b[J],le=l.getAttribute(C),te=le.itemSize,ue=0;ue<te;ue++)oe+=`${~~(le[T[ue]](W)*U)},`;if(oe in m)x.push(m[oe]);else{for(var J=0,D=b.length;J<D;J++)for(var C=b[J],le=l.getAttribute(C),I=l.morphAttributes[C],te=le.itemSize,Y=E[C],de=S[C],ue=0;ue<te;ue++){var ne=T[ue];if(Y.push(le[ne](W)),I)for(var xe=0,Be=I.length;xe<Be;xe++)de[xe].push(I[xe][ne](W))}m[oe]=v,x.push(v),v++}}const je=l.clone();for(var _=0,D=b.length;_<D;_++){var C=b[_],Ge=l.getAttribute(C),ct=new Ge.array.constructor(E[C]),le=new THREE.BufferAttribute(ct,Ge.itemSize,Ge.normalized);if(je.setAttribute(C,le),C in S)for(var J=0;J<S[C].length;J++){var lt=l.morphAttributes[C][J],ct=new lt.array.constructor(S[C][J]),Et=new THREE.BufferAttribute(ct,lt.itemSize,lt.normalized);je.morphAttributes[C][J]=Et}}return je.setIndex(x),je},toTrianglesDrawMode:function(l,h){if(h===THREE.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),l;if(h===THREE.TriangleFanDrawMode||h===THREE.TriangleStripDrawMode){var m=l.getIndex();if(m===null){var y=[],d=l.getAttribute("position");if(d!==void 0){for(var p=0;p<d.count;p++)y.push(p);l.setIndex(y),m=l.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),l}var v=m.count-2,b=[];if(h===THREE.TriangleFanDrawMode)for(var p=1;p<=v;p++)b.push(m.getX(0)),b.push(m.getX(p)),b.push(m.getX(p+1));else for(var p=0;p<v;p++)p%2==0?(b.push(m.getX(p)),b.push(m.getX(p+1)),b.push(m.getX(p+2))):(b.push(m.getX(p+2)),b.push(m.getX(p+1)),b.push(m.getX(p)));b.length/3!==v&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var E=l.clone();return E.setIndex(b),E.clearGroups(),E}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",h),l},computeMorphedAttributes:function(l){if(l.geometry.isBufferGeometry!==!0)return console.error("THREE.BufferGeometryUtils: Geometry is not of type THREE.BufferGeometry."),null;var h=new THREE.Vector3,m=new THREE.Vector3,y=new THREE.Vector3,d=new THREE.Vector3,p=new THREE.Vector3,v=new THREE.Vector3,b=new THREE.Vector3,E=new THREE.Vector3,S=new THREE.Vector3;function x(tt,pt,$e,Tt,Kt,_t,se,ce,Q){h.fromBufferAttribute($e,_t),m.fromBufferAttribute($e,se),y.fromBufferAttribute($e,ce);var K=tt.morphTargetInfluences;if(pt.morphTargets&&Tt&&K){b.set(0,0,0),E.set(0,0,0),S.set(0,0,0);for(var ae=0,ge=Tt.length;ae<ge;ae++){var me=K[ae],Tt=Tt[ae];me!==0&&(d.fromBufferAttribute(Tt,_t),p.fromBufferAttribute(Tt,se),v.fromBufferAttribute(Tt,ce),Kt?(b.addScaledVector(d,me),E.addScaledVector(p,me),S.addScaledVector(v,me)):(b.addScaledVector(d.sub(h),me),E.addScaledVector(p.sub(m),me),S.addScaledVector(v.sub(y),me)))}h.add(b),m.add(E),y.add(S)}tt.isSkinnedMesh&&(tt.boneTransform(_t,h),tt.boneTransform(se,m),tt.boneTransform(ce,y)),Q[_t*3+0]=h.x,Q[_t*3+1]=h.y,Q[_t*3+2]=h.z,Q[se*3+0]=m.x,Q[se*3+1]=m.y,Q[se*3+2]=m.z,Q[ce*3+0]=y.x,Q[ce*3+1]=y.y,Q[ce*3+2]=y.z}var T=l.geometry,_=l.material,D,C,I,B=T.index,U=T.attributes.position,W=T.morphAttributes.position,oe=T.morphTargetsRelative,J=T.attributes.normal,le=T.morphAttributes.position,te=T.groups,ue=T.drawRange,Y,de,ne,xe,Be,je,Ge,ct,lt=new Float32Array(U.count*U.itemSize),Et=new Float32Array(J.count*J.itemSize);if(B!==null)if(Array.isArray(_))for(Y=0,ne=te.length;Y<ne;Y++)for(Be=te[Y],je=_[Be.materialIndex],Ge=Math.max(Be.start,ue.start),ct=Math.min(Be.start+Be.count,ue.start+ue.count),de=Ge,xe=ct;de<xe;de+=3)D=B.getX(de),C=B.getX(de+1),I=B.getX(de+2),x(l,je,U,W,oe,D,C,I,lt),x(l,je,J,le,oe,D,C,I,Et);else for(Ge=Math.max(0,ue.start),ct=Math.min(B.count,ue.start+ue.count),Y=Ge,ne=ct;Y<ne;Y+=3)D=B.getX(Y),C=B.getX(Y+1),I=B.getX(Y+2),x(l,_,U,W,oe,D,C,I,lt),x(l,_,J,le,oe,D,C,I,Et);else if(U!==void 0)if(Array.isArray(_))for(Y=0,ne=te.length;Y<ne;Y++)for(Be=te[Y],je=_[Be.materialIndex],Ge=Math.max(Be.start,ue.start),ct=Math.min(Be.start+Be.count,ue.start+ue.count),de=Ge,xe=ct;de<xe;de+=3)D=de,C=de+1,I=de+2,x(l,je,U,W,oe,D,C,I,lt),x(l,je,J,le,oe,D,C,I,Et);else for(Ge=Math.max(0,ue.start),ct=Math.min(U.count,ue.start+ue.count),Y=Ge,ne=ct;Y<ne;Y+=3)D=Y,C=Y+1,I=Y+2,x(l,_,U,W,oe,D,C,I,lt),x(l,_,J,le,oe,D,C,I,Et);var Ct=new THREE.Float32BufferAttribute(lt,3),jt=new THREE.Float32BufferAttribute(Et,3);return{positionAttribute:U,normalAttribute:J,morphedPositionAttribute:Ct,morphedNormalAttribute:jt}}}},{}],63:[function(c,g,L){var l=c("layout-bmfont-text"),h=c("inherits"),m=c("quad-indices"),y=c("three-buffer-vertex-data"),d=c("object-assign"),p=c("./lib/vertices"),v=c("./lib/utils"),b=THREE.BufferGeometry;g.exports=function(x){return new E(x)};function E(S){b.call(this),typeof S=="string"&&(S={text:S}),this._opt=d({},S),S&&this.update(S)}h(E,b),E.prototype.update=function(S){if(typeof S=="string"&&(S={text:S}),S=d({},this._opt,S),!S.font)throw new TypeError("must specify a { font } in options");this.layout=l(S);var x=S.flipY!==!1,T=S.font,_=T.common.scaleW,D=T.common.scaleH,C=this.layout.glyphs.filter(function(oe){var J=oe.data;return J.width*J.height>0});this.visibleGlyphs=C;var I=p.positions(C),B=p.uvs(C,_,D,x),U=m({clockwise:!0,type:"uint16",count:C.length});if(y.index(this,U,1,"uint16"),y.attr(this,"position",I,2),y.attr(this,"uv",B,2),!S.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(S.multipage){var W=p.pages(C);y.attr(this,"page",W,1)}},E.prototype.computeBoundingSphere=function(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var S=this.attributes.position.array,x=this.attributes.position.itemSize;if(!S||!x||S.length<2){this.boundingSphere.radius=0,this.boundingSphere.center.set(0,0,0);return}v.computeSphere(S,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')},E.prototype.computeBoundingBox=function(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var S=this.boundingBox,x=this.attributes.position.array,T=this.attributes.position.itemSize;if(!x||!T||x.length<2){S.makeEmpty();return}v.computeBox(x,S)}},{"./lib/utils":64,"./lib/vertices":65,inherits:30,"layout-bmfont-text":36,"object-assign":39,"quad-indices":51,"three-buffer-vertex-data":66}],64:[function(c,g,L){var l=2,h={min:[0,0],max:[0,0]};function m(y){var d=y.length/l;h.min[0]=y[0],h.min[1]=y[1],h.max[0]=y[0],h.max[1]=y[1];for(var p=0;p<d;p++){var v=y[p*l+0],b=y[p*l+1];h.min[0]=Math.min(v,h.min[0]),h.min[1]=Math.min(b,h.min[1]),h.max[0]=Math.max(v,h.max[0]),h.max[1]=Math.max(b,h.max[1])}}g.exports.computeBox=function(y,d){m(y),d.min.set(h.min[0],h.min[1],0),d.max.set(h.max[0],h.max[1],0)},g.exports.computeSphere=function(y,d){m(y);var p=h.min[0],v=h.min[1],b=h.max[0],E=h.max[1],S=b-p,x=E-v,T=Math.sqrt(S*S+x*x);d.center.set(p+S/2,v+x/2,0),d.radius=T/2}},{}],65:[function(c,g,L){g.exports.pages=function(h){var m=new Float32Array(h.length*4*1),y=0;return h.forEach(function(d){var p=d.data.page||0;m[y++]=p,m[y++]=p,m[y++]=p,m[y++]=p}),m},g.exports.uvs=function(h,m,y,d){var p=new Float32Array(h.length*4*2),v=0;return h.forEach(function(b){var E=b.data,S=E.x+E.width,x=E.y+E.height,T=E.x/m,_=E.y/y,D=S/m,C=x/y;d&&(_=(y-E.y)/y,C=(y-x)/y),p[v++]=T,p[v++]=_,p[v++]=T,p[v++]=C,p[v++]=D,p[v++]=C,p[v++]=D,p[v++]=_}),p},g.exports.positions=function(h){var m=new Float32Array(h.length*4*2),y=0;return h.forEach(function(d){var p=d.data,v=d.position[0]+p.xoffset,b=d.position[1]+p.yoffset,E=p.width,S=p.height;m[y++]=v,m[y++]=b,m[y++]=v,m[y++]=b+S,m[y++]=v+E,m[y++]=b+S,m[y++]=v+E,m[y++]=b}),m}},{}],66:[function(c,g,L){var l=c("flatten-vertex-data");g.exports.attr=m,g.exports.index=h;function h(d,p,v,b){typeof v!="number"&&(v=1),typeof b!="string"&&(b="uint16");var E=!d.index&&typeof d.setIndex!="function",S=E?d.getAttribute("index"):d.index,x=y(S,p,v,b);x&&(E?d.addAttribute("index",x):d.index=x)}function m(d,p,v,b,E){if(typeof b!="number"&&(b=3),typeof E!="string"&&(E="float32"),Array.isArray(v)&&Array.isArray(v[0])&&v[0].length!==b)throw new Error("Nested vertex array has unexpected size; expected "+b+" but found "+v[0].length);var S=d.getAttribute(p),x=y(S,v,b,E);d.setAttribute(p,x)}function y(d,p,v,b){return p=p||[],p=l(p,b),d=new THREE.BufferAttribute(p,v),d.itemSize=v,d.needsUpdate=!0,d}},{"flatten-vertex-data":23}],67:[function(c,g,L){(function(l,h){var m=c("process/browser.js").nextTick,y=Function.prototype.apply,d=Array.prototype.slice,p={},v=0;L.setTimeout=function(){return new b(y.call(setTimeout,window,arguments),clearTimeout)},L.setInterval=function(){return new b(y.call(setInterval,window,arguments),clearInterval)},L.clearTimeout=L.clearInterval=function(E){E.close()};function b(E,S){this._id=E,this._clearFn=S}b.prototype.unref=b.prototype.ref=function(){},b.prototype.close=function(){this._clearFn.call(window,this._id)},L.enroll=function(E,S){clearTimeout(E._idleTimeoutId),E._idleTimeout=S},L.unenroll=function(E){clearTimeout(E._idleTimeoutId),E._idleTimeout=-1},L._unrefActive=L.active=function(E){clearTimeout(E._idleTimeoutId);var S=E._idleTimeout;S>=0&&(E._idleTimeoutId=setTimeout(function(){E._onTimeout&&E._onTimeout()},S))},L.setImmediate=typeof l=="function"?l:function(E){var S=v++,x=arguments.length<2?!1:d.call(arguments,1);return p[S]=!0,m(function(){p[S]&&(x?E.apply(null,x):E.call(null),L.clearImmediate(S))}),S},L.clearImmediate=typeof h=="function"?h:function(E){delete p[E]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":49,timers:67}],68:[function(c,g,L){(function(l){/**
 * @license
 * webvr-polyfill
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * webvr-polyfill-dpdb 
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(h,m){typeof L=="object"&&typeof g!="undefined"?g.exports=m():h.WebVRPolyfill=m()})(this,function(){var h=typeof window!="undefined"?window:typeof l!="undefined"?l:typeof self!="undefined"?self:{};function m(I){return I&&I.__esModule&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I}function y(I,B){return B={exports:{}},I(B,B.exports),B.exports}var d=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},p=function(B,U){for(var W=0,oe=B.length;W<oe;W++)U[W]=B[W]},v=function(B,U){for(var W in U)U.hasOwnProperty(W)&&(B[W]=U[W]);return B},b=y(function(I,B){/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * gl-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * webvr-polyfill-dpdb
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(U,W){I.exports=W()})(h,function(){var U=function(k,G){if(!(k instanceof G))throw new TypeError("Cannot call a class as a function")},W=function(){function k(G,Z){for(var re=0;re<Z.length;re++){var Ae=Z[re];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(G,Ae.key,Ae)}}return function(G,Z,re){return Z&&k(G.prototype,Z),re&&k(G,re),G}}(),oe=function(){function k(G,Z){var re=[],Ae=!0,He=!1,it=void 0;try{for(var At=G[Symbol.iterator](),yt;!(Ae=(yt=At.next()).done)&&(re.push(yt.value),!(Z&&re.length===Z));Ae=!0);}catch(Ze){He=!0,it=Ze}finally{try{!Ae&&At.return&&At.return()}finally{if(He)throw it}}return re}return function(G,Z){if(Array.isArray(G))return G;if(Symbol.iterator in Object(G))return k(G,Z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),J=.001,le=1,te=function(G,Z){return"data:"+G+","+encodeURIComponent(Z)},ue=function(G,Z,re){return G+(Z-G)*re},Y=function(){var k=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return k}}(),de=function(){var k=navigator.userAgent.indexOf("Version")!==-1&&navigator.userAgent.indexOf("Android")!==-1&&navigator.userAgent.indexOf("Chrome")!==-1;return function(){return k}}(),ne=function(){var k=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return k}}(),xe=function(){var k=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return k}}(),Be=function(){var k=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),G=k?parseInt(k[1],10):null;return function(){return G}}(),je=function(){var k=!1;return k=Y()&&ne()&&navigator.userAgent.indexOf("13_4")!==-1,function(){return k}}(),Ge=function(){var k=!1;if(Be()===65){var G=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(G){var Z=G[1].split("."),re=oe(Z,4);re[0],re[1];var Ae=re[2],He=re[3];k=parseInt(Ae,10)===3325&&parseInt(He,10)<148}}return function(){return k}}(),ct=function(){var k=navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return k}}(),lt=function(){var G=window.orientation==90||window.orientation==-90;return ct()?!G:G},Et=function(G){return!(isNaN(G)||G<=J||G>le)},Ct=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},jt=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},tt=function(G){if(de())return!1;if(G.requestFullscreen)G.requestFullscreen();else if(G.webkitRequestFullscreen)G.webkitRequestFullscreen();else if(G.mozRequestFullScreen)G.mozRequestFullScreen();else if(G.msRequestFullscreen)G.msRequestFullscreen();else return!1;return!0},pt=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else return!1;return!0},$e=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},Tt=function(G,Z,re,Ae){var He=G.createShader(G.VERTEX_SHADER);G.shaderSource(He,Z),G.compileShader(He);var it=G.createShader(G.FRAGMENT_SHADER);G.shaderSource(it,re),G.compileShader(it);var At=G.createProgram();G.attachShader(At,He),G.attachShader(At,it);for(var yt in Ae)G.bindAttribLocation(At,Ae[yt],yt);return G.linkProgram(At),G.deleteShader(He),G.deleteShader(it),At},Kt=function(G,Z){for(var re={},Ae=G.getProgramParameter(Z,G.ACTIVE_UNIFORMS),He="",it=0;it<Ae;it++){var At=G.getActiveUniform(Z,it);He=At.name.replace("[0]",""),re[He]=G.getUniformLocation(Z,He)}return re},_t=function(G,Z,re,Ae,He,it,At){var yt=1/(Z-re),Ze=1/(Ae-He),ut=1/(it-At);return G[0]=-2*yt,G[1]=0,G[2]=0,G[3]=0,G[4]=0,G[5]=-2*Ze,G[6]=0,G[7]=0,G[8]=0,G[9]=0,G[10]=2*ut,G[11]=0,G[12]=(Z+re)*yt,G[13]=(He+Ae)*Ze,G[14]=(At+it)*ut,G[15]=1,G},se=function(){var G=!1;return function(Z){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Z)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Z.substr(0,4)))&&(G=!0)}(navigator.userAgent||navigator.vendor||window.opera),G},ce=function(G,Z){for(var re in Z)Z.hasOwnProperty(re)&&(G[re]=Z[re]);return G},Q=function(G){if(Y()){var Z=G.style.width,re=G.style.height;G.style.width=parseInt(Z)+1+"px",G.style.height=parseInt(re)+"px",setTimeout(function(){G.style.width=Z,G.style.height=re},100)}window.canvas=G},K=function(){var k=Math.PI/180,G=Math.PI*.25;function Z(Ze,ut,wt,zt){var Zt=Math.tan(ut?ut.upDegrees*k:G),nr=Math.tan(ut?ut.downDegrees*k:G),Sr=Math.tan(ut?ut.leftDegrees*k:G),yr=Math.tan(ut?ut.rightDegrees*k:G),hr=2/(Sr+yr),un=2/(Zt+nr);return Ze[0]=hr,Ze[1]=0,Ze[2]=0,Ze[3]=0,Ze[4]=0,Ze[5]=un,Ze[6]=0,Ze[7]=0,Ze[8]=-((Sr-yr)*hr*.5),Ze[9]=(Zt-nr)*un*.5,Ze[10]=zt/(wt-zt),Ze[11]=-1,Ze[12]=0,Ze[13]=0,Ze[14]=zt*wt/(wt-zt),Ze[15]=0,Ze}function re(Ze,ut,wt){var zt=ut[0],Zt=ut[1],nr=ut[2],Sr=ut[3],yr=zt+zt,hr=Zt+Zt,un=nr+nr,On=zt*yr,Un=zt*hr,_n=zt*un,Qn=Zt*hr,li=Zt*un,ui=nr*un,ci=Sr*yr,hi=Sr*hr,ra=Sr*un;return Ze[0]=1-(Qn+ui),Ze[1]=Un+ra,Ze[2]=_n-hi,Ze[3]=0,Ze[4]=Un-ra,Ze[5]=1-(On+ui),Ze[6]=li+ci,Ze[7]=0,Ze[8]=_n+hi,Ze[9]=li-ci,Ze[10]=1-(On+Qn),Ze[11]=0,Ze[12]=wt[0],Ze[13]=wt[1],Ze[14]=wt[2],Ze[15]=1,Ze}function Ae(Ze,ut,wt){var zt=wt[0],Zt=wt[1],nr=wt[2],Sr,yr,hr,un,On,Un,_n,Qn,li,ui,ci,hi;return ut===Ze?(Ze[12]=ut[0]*zt+ut[4]*Zt+ut[8]*nr+ut[12],Ze[13]=ut[1]*zt+ut[5]*Zt+ut[9]*nr+ut[13],Ze[14]=ut[2]*zt+ut[6]*Zt+ut[10]*nr+ut[14],Ze[15]=ut[3]*zt+ut[7]*Zt+ut[11]*nr+ut[15]):(Sr=ut[0],yr=ut[1],hr=ut[2],un=ut[3],On=ut[4],Un=ut[5],_n=ut[6],Qn=ut[7],li=ut[8],ui=ut[9],ci=ut[10],hi=ut[11],Ze[0]=Sr,Ze[1]=yr,Ze[2]=hr,Ze[3]=un,Ze[4]=On,Ze[5]=Un,Ze[6]=_n,Ze[7]=Qn,Ze[8]=li,Ze[9]=ui,Ze[10]=ci,Ze[11]=hi,Ze[12]=Sr*zt+On*Zt+li*nr+ut[12],Ze[13]=yr*zt+Un*Zt+ui*nr+ut[13],Ze[14]=hr*zt+_n*Zt+ci*nr+ut[14],Ze[15]=un*zt+Qn*Zt+hi*nr+ut[15]),Ze}function He(Ze,ut){var wt=ut[0],zt=ut[1],Zt=ut[2],nr=ut[3],Sr=ut[4],yr=ut[5],hr=ut[6],un=ut[7],On=ut[8],Un=ut[9],_n=ut[10],Qn=ut[11],li=ut[12],ui=ut[13],ci=ut[14],hi=ut[15],ra=wt*yr-zt*Sr,so=wt*hr-Zt*Sr,na=wt*un-nr*Sr,ia=zt*hr-Zt*yr,Ea=zt*un-nr*yr,Pi=Zt*un-nr*hr,Di=On*ui-Un*li,aa=On*ci-_n*li,wa=On*hi-Qn*li,Va=Un*ci-_n*ui,lo=Un*hi-Qn*ui,Wo=_n*hi-Qn*ci,Hn=ra*Wo-so*lo+na*Va+ia*wa-Ea*aa+Pi*Di;return Hn?(Hn=1/Hn,Ze[0]=(yr*Wo-hr*lo+un*Va)*Hn,Ze[1]=(Zt*lo-zt*Wo-nr*Va)*Hn,Ze[2]=(ui*Pi-ci*Ea+hi*ia)*Hn,Ze[3]=(_n*Ea-Un*Pi-Qn*ia)*Hn,Ze[4]=(hr*wa-Sr*Wo-un*aa)*Hn,Ze[5]=(wt*Wo-Zt*wa+nr*aa)*Hn,Ze[6]=(ci*na-li*Pi-hi*so)*Hn,Ze[7]=(On*Pi-_n*na+Qn*so)*Hn,Ze[8]=(Sr*lo-yr*wa+un*Di)*Hn,Ze[9]=(zt*wa-wt*lo-nr*Di)*Hn,Ze[10]=(li*Ea-ui*na+hi*ra)*Hn,Ze[11]=(Un*na-On*Ea-Qn*ra)*Hn,Ze[12]=(yr*aa-Sr*Va-hr*Di)*Hn,Ze[13]=(wt*Va-zt*aa+Zt*Di)*Hn,Ze[14]=(ui*so-li*ia-ci*ra)*Hn,Ze[15]=(On*ia-Un*so+_n*ra)*Hn,Ze):null}var it=new Float32Array([0,0,0,1]),At=new Float32Array([0,0,0]);function yt(Ze,ut,wt,zt,Zt,nr){Z(Ze,zt||null,nr.depthNear,nr.depthFar);var Sr=wt.orientation||it,yr=wt.position||At;re(ut,Sr,yr),Zt&&Ae(ut,ut,Zt),He(ut,ut)}return function(Ze,ut,wt){return!Ze||!ut?!1:(Ze.pose=ut,Ze.timestamp=ut.timestamp,yt(Ze.leftProjectionMatrix,Ze.leftViewMatrix,ut,wt._getFieldOfView("left"),wt._getEyeOffset("left"),wt),yt(Ze.rightProjectionMatrix,Ze.rightViewMatrix,ut,wt._getFieldOfView("right"),wt._getEyeOffset("right"),wt),!0)}}(),ae=function(){var G=window.self!==window.top,Z=ge(document.referrer),re=ge(window.location.href);return G&&Z!==re},ge=function(G){var Z,re=G.indexOf("://");re!==-1?Z=re+3:Z=0;var Ae=G.indexOf("/",Z);return Ae===-1&&(Ae=G.length),G.substring(0,Ae)},me=function(G){if(G.w>1)return console.warn("getQuaternionAngle: w > 1"),0;var Z=2*Math.acos(G.w);return Z},Ee=function(){var k={};return function(G,Z){k[G]===void 0&&(console.warn("webvr-polyfill: "+Z),k[G]=!0)}}(),Pe=function(G,Z){var re=Z?"Please use "+Z+" instead.":"";Ee(G,G+" has been deprecated. This may not work on native WebVR displays. "+re)};function ke(k,G,Z){if(!G){Z(k);return}for(var re=[],Ae=null,He=0;He<G.length;++He){var it=G[He];switch(it){case k.TEXTURE_BINDING_2D:case k.TEXTURE_BINDING_CUBE_MAP:var At=G[++He];if(At<k.TEXTURE0||At>k.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),re.push(null,null);break}Ae||(Ae=k.getParameter(k.ACTIVE_TEXTURE)),k.activeTexture(At),re.push(k.getParameter(it),null);break;case k.ACTIVE_TEXTURE:Ae=k.getParameter(k.ACTIVE_TEXTURE),re.push(null);break;default:re.push(k.getParameter(it));break}}Z(k);for(var He=0;He<G.length;++He){var it=G[He],yt=re[He];switch(it){case k.ACTIVE_TEXTURE:break;case k.ARRAY_BUFFER_BINDING:k.bindBuffer(k.ARRAY_BUFFER,yt);break;case k.COLOR_CLEAR_VALUE:k.clearColor(yt[0],yt[1],yt[2],yt[3]);break;case k.COLOR_WRITEMASK:k.colorMask(yt[0],yt[1],yt[2],yt[3]);break;case k.CURRENT_PROGRAM:k.useProgram(yt);break;case k.ELEMENT_ARRAY_BUFFER_BINDING:k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,yt);break;case k.FRAMEBUFFER_BINDING:k.bindFramebuffer(k.FRAMEBUFFER,yt);break;case k.RENDERBUFFER_BINDING:k.bindRenderbuffer(k.RENDERBUFFER,yt);break;case k.TEXTURE_BINDING_2D:var At=G[++He];if(At<k.TEXTURE0||At>k.TEXTURE31)break;k.activeTexture(At),k.bindTexture(k.TEXTURE_2D,yt);break;case k.TEXTURE_BINDING_CUBE_MAP:var At=G[++He];if(At<k.TEXTURE0||At>k.TEXTURE31)break;k.activeTexture(At),k.bindTexture(k.TEXTURE_CUBE_MAP,yt);break;case k.VIEWPORT:k.viewport(yt[0],yt[1],yt[2],yt[3]);break;case k.BLEND:case k.CULL_FACE:case k.DEPTH_TEST:case k.SCISSOR_TEST:case k.STENCIL_TEST:yt?k.enable(it):k.disable(it);break;default:console.log("No GL restore behavior for 0x"+it.toString(16));break}Ae&&k.activeTexture(Ae)}}var Ve=ke,ze=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join(`
`),$=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join(`
`);function V(k,G,Z,re){this.gl=k,this.cardboardUI=G,this.bufferScale=Z,this.dirtySubmitFrameBindings=re,this.ctxAttribs=k.getContextAttributes(),this.instanceExt=k.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=k.drawingBufferWidth,this.bufferHeight=k.drawingBufferHeight,this.realBindFramebuffer=k.bindFramebuffer,this.realEnable=k.enable,this.realDisable=k.disable,this.realColorMask=k.colorMask,this.realClearColor=k.clearColor,this.realViewport=k.viewport,Y()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(k.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(k.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=Tt(k,ze,$,this.attribs),this.uniforms=Kt(k,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=k.createBuffer(),this.indexBuffer=k.createBuffer(),this.indexCount=0,this.renderTarget=k.createTexture(),this.framebuffer=k.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=k.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=k.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=k.createRenderbuffer()),this.patch(),this.onResize()}V.prototype.destroy=function(){var k=this.gl;this.unpatch(),k.deleteProgram(this.program),k.deleteBuffer(this.vertexBuffer),k.deleteBuffer(this.indexBuffer),k.deleteTexture(this.renderTarget),k.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&k.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&k.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&k.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},V.prototype.onResize=function(){var k=this.gl,G=this,Z=[k.RENDERBUFFER_BINDING,k.TEXTURE_BINDING_2D,k.TEXTURE0];Ve(k,Z,function(re){G.realBindFramebuffer.call(re,re.FRAMEBUFFER,null),G.scissorTest&&G.realDisable.call(re,re.SCISSOR_TEST),G.realColorMask.call(re,!0,!0,!0,!0),G.realViewport.call(re,0,0,re.drawingBufferWidth,re.drawingBufferHeight),G.realClearColor.call(re,0,0,0,1),re.clear(re.COLOR_BUFFER_BIT),G.realBindFramebuffer.call(re,re.FRAMEBUFFER,G.framebuffer),re.bindTexture(re.TEXTURE_2D,G.renderTarget),re.texImage2D(re.TEXTURE_2D,0,G.ctxAttribs.alpha?re.RGBA:re.RGB,G.bufferWidth,G.bufferHeight,0,G.ctxAttribs.alpha?re.RGBA:re.RGB,re.UNSIGNED_BYTE,null),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MAG_FILTER,re.LINEAR),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MIN_FILTER,re.LINEAR),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_S,re.CLAMP_TO_EDGE),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_T,re.CLAMP_TO_EDGE),re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,G.renderTarget,0),G.ctxAttribs.depth&&G.ctxAttribs.stencil?(re.bindRenderbuffer(re.RENDERBUFFER,G.depthStencilBuffer),re.renderbufferStorage(re.RENDERBUFFER,re.DEPTH_STENCIL,G.bufferWidth,G.bufferHeight),re.framebufferRenderbuffer(re.FRAMEBUFFER,re.DEPTH_STENCIL_ATTACHMENT,re.RENDERBUFFER,G.depthStencilBuffer)):G.ctxAttribs.depth?(re.bindRenderbuffer(re.RENDERBUFFER,G.depthBuffer),re.renderbufferStorage(re.RENDERBUFFER,re.DEPTH_COMPONENT16,G.bufferWidth,G.bufferHeight),re.framebufferRenderbuffer(re.FRAMEBUFFER,re.DEPTH_ATTACHMENT,re.RENDERBUFFER,G.depthBuffer)):G.ctxAttribs.stencil&&(re.bindRenderbuffer(re.RENDERBUFFER,G.stencilBuffer),re.renderbufferStorage(re.RENDERBUFFER,re.STENCIL_INDEX8,G.bufferWidth,G.bufferHeight),re.framebufferRenderbuffer(re.FRAMEBUFFER,re.STENCIL_ATTACHMENT,re.RENDERBUFFER,G.stencilBuffer)),!re.checkFramebufferStatus(re.FRAMEBUFFER)===re.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),G.realBindFramebuffer.call(re,re.FRAMEBUFFER,G.lastBoundFramebuffer),G.scissorTest&&G.realEnable.call(re,re.SCISSOR_TEST),G.realColorMask.apply(re,G.colorMask),G.realViewport.apply(re,G.viewport),G.realClearColor.apply(re,G.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},V.prototype.patch=function(){if(!this.isPatched){var k=this,G=this.gl.canvas,Z=this.gl;Y()||(G.width=Ct()*this.bufferScale,G.height=jt()*this.bufferScale,Object.defineProperty(G,"width",{configurable:!0,enumerable:!0,get:function(){return k.bufferWidth},set:function(Ae){k.bufferWidth=Ae,k.realCanvasWidth.set.call(G,Ae),k.onResize()}}),Object.defineProperty(G,"height",{configurable:!0,enumerable:!0,get:function(){return k.bufferHeight},set:function(Ae){k.bufferHeight=Ae,k.realCanvasHeight.set.call(G,Ae),k.onResize()}})),this.lastBoundFramebuffer=Z.getParameter(Z.FRAMEBUFFER_BINDING),this.lastBoundFramebuffer==null&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(Z.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(re,Ae){k.lastBoundFramebuffer=Ae||k.framebuffer,k.realBindFramebuffer.call(Z,re,k.lastBoundFramebuffer)},this.cullFace=Z.getParameter(Z.CULL_FACE),this.depthTest=Z.getParameter(Z.DEPTH_TEST),this.blend=Z.getParameter(Z.BLEND),this.scissorTest=Z.getParameter(Z.SCISSOR_TEST),this.stencilTest=Z.getParameter(Z.STENCIL_TEST),Z.enable=function(re){switch(re){case Z.CULL_FACE:k.cullFace=!0;break;case Z.DEPTH_TEST:k.depthTest=!0;break;case Z.BLEND:k.blend=!0;break;case Z.SCISSOR_TEST:k.scissorTest=!0;break;case Z.STENCIL_TEST:k.stencilTest=!0;break}k.realEnable.call(Z,re)},Z.disable=function(re){switch(re){case Z.CULL_FACE:k.cullFace=!1;break;case Z.DEPTH_TEST:k.depthTest=!1;break;case Z.BLEND:k.blend=!1;break;case Z.SCISSOR_TEST:k.scissorTest=!1;break;case Z.STENCIL_TEST:k.stencilTest=!1;break}k.realDisable.call(Z,re)},this.colorMask=Z.getParameter(Z.COLOR_WRITEMASK),Z.colorMask=function(re,Ae,He,it){k.colorMask[0]=re,k.colorMask[1]=Ae,k.colorMask[2]=He,k.colorMask[3]=it,k.realColorMask.call(Z,re,Ae,He,it)},this.clearColor=Z.getParameter(Z.COLOR_CLEAR_VALUE),Z.clearColor=function(re,Ae,He,it){k.clearColor[0]=re,k.clearColor[1]=Ae,k.clearColor[2]=He,k.clearColor[3]=it,k.realClearColor.call(Z,re,Ae,He,it)},this.viewport=Z.getParameter(Z.VIEWPORT),Z.viewport=function(re,Ae,He,it){k.viewport[0]=re,k.viewport[1]=Ae,k.viewport[2]=He,k.viewport[3]=it,k.realViewport.call(Z,re,Ae,He,it)},this.isPatched=!0,Q(G)}},V.prototype.unpatch=function(){if(!!this.isPatched){var k=this.gl,G=this.gl.canvas;Y()||(Object.defineProperty(G,"width",this.realCanvasWidth),Object.defineProperty(G,"height",this.realCanvasHeight)),G.width=this.bufferWidth,G.height=this.bufferHeight,k.bindFramebuffer=this.realBindFramebuffer,k.enable=this.realEnable,k.disable=this.realDisable,k.colorMask=this.realColorMask,k.clearColor=this.realClearColor,k.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&k.bindFramebuffer(k.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){Q(G)},1)}},V.prototype.setTextureBounds=function(k,G){k||(k=[0,0,.5,1]),G||(G=[.5,0,.5,1]),this.viewportOffsetScale[0]=k[0],this.viewportOffsetScale[1]=k[1],this.viewportOffsetScale[2]=k[2],this.viewportOffsetScale[3]=k[3],this.viewportOffsetScale[4]=G[0],this.viewportOffsetScale[5]=G[1],this.viewportOffsetScale[6]=G[2],this.viewportOffsetScale[7]=G[3]},V.prototype.submitFrame=function(){var k=this.gl,G=this,Z=[];if(this.dirtySubmitFrameBindings||Z.push(k.CURRENT_PROGRAM,k.ARRAY_BUFFER_BINDING,k.ELEMENT_ARRAY_BUFFER_BINDING,k.TEXTURE_BINDING_2D,k.TEXTURE0),Ve(k,Z,function(Ae){G.realBindFramebuffer.call(Ae,Ae.FRAMEBUFFER,null);var He=0,it=0;G.instanceExt&&(He=Ae.getVertexAttrib(G.attribs.position,G.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),it=Ae.getVertexAttrib(G.attribs.texCoord,G.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),G.cullFace&&G.realDisable.call(Ae,Ae.CULL_FACE),G.depthTest&&G.realDisable.call(Ae,Ae.DEPTH_TEST),G.blend&&G.realDisable.call(Ae,Ae.BLEND),G.scissorTest&&G.realDisable.call(Ae,Ae.SCISSOR_TEST),G.stencilTest&&G.realDisable.call(Ae,Ae.STENCIL_TEST),G.realColorMask.call(Ae,!0,!0,!0,!0),G.realViewport.call(Ae,0,0,Ae.drawingBufferWidth,Ae.drawingBufferHeight),(G.ctxAttribs.alpha||Y())&&(G.realClearColor.call(Ae,0,0,0,1),Ae.clear(Ae.COLOR_BUFFER_BIT)),Ae.useProgram(G.program),Ae.bindBuffer(Ae.ELEMENT_ARRAY_BUFFER,G.indexBuffer),Ae.bindBuffer(Ae.ARRAY_BUFFER,G.vertexBuffer),Ae.enableVertexAttribArray(G.attribs.position),Ae.enableVertexAttribArray(G.attribs.texCoord),Ae.vertexAttribPointer(G.attribs.position,2,Ae.FLOAT,!1,20,0),Ae.vertexAttribPointer(G.attribs.texCoord,3,Ae.FLOAT,!1,20,8),G.instanceExt&&(He!=0&&G.instanceExt.vertexAttribDivisorANGLE(G.attribs.position,0),it!=0&&G.instanceExt.vertexAttribDivisorANGLE(G.attribs.texCoord,0)),Ae.activeTexture(Ae.TEXTURE0),Ae.uniform1i(G.uniforms.diffuse,0),Ae.bindTexture(Ae.TEXTURE_2D,G.renderTarget),Ae.uniform4fv(G.uniforms.viewportOffsetScale,G.viewportOffsetScale),Ae.drawElements(Ae.TRIANGLES,G.indexCount,Ae.UNSIGNED_SHORT,0),G.cardboardUI&&G.cardboardUI.renderNoState(),G.realBindFramebuffer.call(G.gl,Ae.FRAMEBUFFER,G.framebuffer),G.ctxAttribs.preserveDrawingBuffer||(G.realClearColor.call(Ae,0,0,0,0),Ae.clear(Ae.COLOR_BUFFER_BIT)),G.dirtySubmitFrameBindings||G.realBindFramebuffer.call(Ae,Ae.FRAMEBUFFER,G.lastBoundFramebuffer),G.cullFace&&G.realEnable.call(Ae,Ae.CULL_FACE),G.depthTest&&G.realEnable.call(Ae,Ae.DEPTH_TEST),G.blend&&G.realEnable.call(Ae,Ae.BLEND),G.scissorTest&&G.realEnable.call(Ae,Ae.SCISSOR_TEST),G.stencilTest&&G.realEnable.call(Ae,Ae.STENCIL_TEST),G.realColorMask.apply(Ae,G.colorMask),G.realViewport.apply(Ae,G.viewport),(G.ctxAttribs.alpha||!G.ctxAttribs.preserveDrawingBuffer)&&G.realClearColor.apply(Ae,G.clearColor),G.instanceExt&&(He!=0&&G.instanceExt.vertexAttribDivisorANGLE(G.attribs.position,He),it!=0&&G.instanceExt.vertexAttribDivisorANGLE(G.attribs.texCoord,it))}),Y()){var re=k.canvas;(re.width!=G.bufferWidth||re.height!=G.bufferHeight)&&(G.bufferWidth=re.width,G.bufferHeight=re.height,G.onResize())}},V.prototype.updateDeviceInfo=function(k){var G=this.gl,Z=this,re=[G.ARRAY_BUFFER_BINDING,G.ELEMENT_ARRAY_BUFFER_BINDING];Ve(G,re,function(Ae){var He=Z.computeMeshVertices_(Z.meshWidth,Z.meshHeight,k);if(Ae.bindBuffer(Ae.ARRAY_BUFFER,Z.vertexBuffer),Ae.bufferData(Ae.ARRAY_BUFFER,He,Ae.STATIC_DRAW),!Z.indexCount){var it=Z.computeMeshIndices_(Z.meshWidth,Z.meshHeight);Ae.bindBuffer(Ae.ELEMENT_ARRAY_BUFFER,Z.indexBuffer),Ae.bufferData(Ae.ELEMENT_ARRAY_BUFFER,it,Ae.STATIC_DRAW),Z.indexCount=it.length}})},V.prototype.computeMeshVertices_=function(k,G,Z){for(var re=new Float32Array(2*k*G*5),Ae=Z.getLeftEyeVisibleTanAngles(),He=Z.getLeftEyeNoLensTanAngles(),it=Z.getLeftEyeVisibleScreenRect(He),At=0,yt=0;yt<2;yt++){for(var Ze=0;Ze<G;Ze++)for(var ut=0;ut<k;ut++,At++){var wt=ut/(k-1),zt=Ze/(G-1),Zt=wt,nr=zt,Sr=ue(Ae[0],Ae[2],wt),yr=ue(Ae[3],Ae[1],zt),hr=Math.sqrt(Sr*Sr+yr*yr),un=Z.distortion.distortInverse(hr),On=Sr*un/hr,Un=yr*un/hr;wt=(On-He[0])/(He[2]-He[0]),zt=(Un-He[3])/(He[1]-He[3]),wt=(it.x+wt*it.width-.5)*2,zt=(it.y+zt*it.height-.5)*2,re[At*5+0]=wt,re[At*5+1]=zt,re[At*5+2]=Zt,re[At*5+3]=nr,re[At*5+4]=yt}var _n=Ae[2]-Ae[0];Ae[0]=-(_n+Ae[0]),Ae[2]=_n-Ae[2],_n=He[2]-He[0],He[0]=-(_n+He[0]),He[2]=_n-He[2],it.x=1-(it.x+it.width)}return re},V.prototype.computeMeshIndices_=function(k,G){for(var Z=new Uint16Array(2*(k-1)*(G-1)*6),re=k/2,Ae=G/2,He=0,it=0,At=0;At<2;At++)for(var yt=0;yt<G;yt++)for(var Ze=0;Ze<k;Ze++,He++)Ze==0||yt==0||(Ze<=re==yt<=Ae?(Z[it++]=He,Z[it++]=He-k-1,Z[it++]=He-k,Z[it++]=He-k-1,Z[it++]=He,Z[it++]=He-1):(Z[it++]=He-1,Z[it++]=He-k,Z[it++]=He,Z[it++]=He-k,Z[it++]=He-1,Z[it++]=He-k-1));return Z},V.prototype.getOwnPropertyDescriptor_=function(k,G){var Z=Object.getOwnPropertyDescriptor(k,G);return(Z.get===void 0||Z.set===void 0)&&(Z.configurable=!0,Z.enumerable=!0,Z.get=function(){return this.getAttribute(G)},Z.set=function(re){this.setAttribute(G,re)}),Z};var z=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join(`
`),fe=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join(`
`),Te=Math.PI/180,Qe=60,Je=12,Mt=20,Vt=1,or=.75,Lr=.3125,Ht=4,Xr=28,Qt=1.5;function Vr(k){this.gl=k,this.attribs={position:0},this.program=Tt(k,z,fe,this.attribs),this.uniforms=Kt(k,this.program),this.vertexBuffer=k.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}Vr.prototype.destroy=function(){var k=this.gl;this.listener&&k.canvas.removeEventListener("click",this.listener,!1),k.deleteProgram(this.program),k.deleteBuffer(this.vertexBuffer)},Vr.prototype.listen=function(k,G){var Z=this.gl.canvas;this.listener=function(re){var Ae=Z.clientWidth/2,He=Xr*Qt;re.clientX>Ae-He&&re.clientX<Ae+He&&re.clientY>Z.clientHeight-He?k(re):re.clientX<He&&re.clientY<He&&G(re)},Z.addEventListener("click",this.listener,!1)},Vr.prototype.onResize=function(){var k=this.gl,G=this,Z=[k.ARRAY_BUFFER_BINDING];Ve(k,Z,function(re){var Ae=[],He=re.drawingBufferWidth/2,it=Math.max(screen.width,screen.height)*window.devicePixelRatio,At=re.drawingBufferWidth/it,yt=At*window.devicePixelRatio,Ze=Ht*yt/2,ut=Xr*Qt*yt,wt=Xr*yt/2,zt=(Xr*Qt-Xr)*yt;Ae.push(He-Ze,ut),Ae.push(He-Ze,re.drawingBufferHeight),Ae.push(He+Ze,ut),Ae.push(He+Ze,re.drawingBufferHeight),G.gearOffset=Ae.length/2;function Zt(un,On){var Un=(90-un)*Te,_n=Math.cos(Un),Qn=Math.sin(Un);Ae.push(Lr*_n*wt+He,Lr*Qn*wt+wt),Ae.push(On*_n*wt+He,On*Qn*wt+wt)}for(var nr=0;nr<=6;nr++){var Sr=nr*Qe;Zt(Sr,Vt),Zt(Sr+Je,Vt),Zt(Sr+Mt,or),Zt(Sr+(Qe-Mt),or),Zt(Sr+(Qe-Je),Vt)}G.gearVertexCount=Ae.length/2-G.gearOffset,G.arrowOffset=Ae.length/2;function yr(un,On){Ae.push(zt+un,re.drawingBufferHeight-zt-On)}var hr=Ze/Math.sin(45*Te);yr(0,wt),yr(wt,0),yr(wt+hr,hr),yr(hr,wt+hr),yr(hr,wt-hr),yr(0,wt),yr(wt,wt*2),yr(wt+hr,wt*2-hr),yr(hr,wt-hr),yr(0,wt),yr(hr,wt-Ze),yr(Xr*yt,wt-Ze),yr(hr,wt+Ze),yr(Xr*yt,wt+Ze),G.arrowVertexCount=Ae.length/2-G.arrowOffset,re.bindBuffer(re.ARRAY_BUFFER,G.vertexBuffer),re.bufferData(re.ARRAY_BUFFER,new Float32Array(Ae),re.STATIC_DRAW)})},Vr.prototype.render=function(){var k=this.gl,G=this,Z=[k.CULL_FACE,k.DEPTH_TEST,k.BLEND,k.SCISSOR_TEST,k.STENCIL_TEST,k.COLOR_WRITEMASK,k.VIEWPORT,k.CURRENT_PROGRAM,k.ARRAY_BUFFER_BINDING];Ve(k,Z,function(re){re.disable(re.CULL_FACE),re.disable(re.DEPTH_TEST),re.disable(re.BLEND),re.disable(re.SCISSOR_TEST),re.disable(re.STENCIL_TEST),re.colorMask(!0,!0,!0,!0),re.viewport(0,0,re.drawingBufferWidth,re.drawingBufferHeight),G.renderNoState()})},Vr.prototype.renderNoState=function(){var k=this.gl;k.useProgram(this.program),k.bindBuffer(k.ARRAY_BUFFER,this.vertexBuffer),k.enableVertexAttribArray(this.attribs.position),k.vertexAttribPointer(this.attribs.position,2,k.FLOAT,!1,8,0),k.uniform4f(this.uniforms.color,1,1,1,1),_t(this.projMat,0,k.drawingBufferWidth,0,k.drawingBufferHeight,.1,1024),k.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),k.drawArrays(k.TRIANGLE_STRIP,0,4),k.drawArrays(k.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),k.drawArrays(k.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)};function Rn(k){this.coefficients=k}Rn.prototype.distortInverse=function(k){for(var G=0,Z=1,re=k-this.distort(G);Math.abs(Z-G)>1e-4;){var Ae=k-this.distort(Z),He=Z-Ae*((Z-G)/(Ae-re));G=Z,Z=He,re=Ae}return Z},Rn.prototype.distort=function(k){for(var G=k*k,Z=0,re=0;re<this.coefficients.length;re++)Z=G*(Z+this.coefficients[re]);return(Z+1)*k};var yn=Math.PI/180,ft=180/Math.PI,ht=function(G,Z,re){this.x=G||0,this.y=Z||0,this.z=re||0};ht.prototype={constructor:ht,set:function(G,Z,re){return this.x=G,this.y=Z,this.z=re,this},copy:function(G){return this.x=G.x,this.y=G.y,this.z=G.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var G=this.length();if(G!==0){var Z=1/G;this.multiplyScalar(Z)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(G){this.x*=G,this.y*=G,this.z*=G},applyQuaternion:function(G){var Z=this.x,re=this.y,Ae=this.z,He=G.x,it=G.y,At=G.z,yt=G.w,Ze=yt*Z+it*Ae-At*re,ut=yt*re+At*Z-He*Ae,wt=yt*Ae+He*re-it*Z,zt=-He*Z-it*re-At*Ae;return this.x=Ze*yt+zt*-He+ut*-At-wt*-it,this.y=ut*yt+zt*-it+wt*-He-Ze*-At,this.z=wt*yt+zt*-At+Ze*-it-ut*-He,this},dot:function(G){return this.x*G.x+this.y*G.y+this.z*G.z},crossVectors:function(G,Z){var re=G.x,Ae=G.y,He=G.z,it=Z.x,At=Z.y,yt=Z.z;return this.x=Ae*yt-He*At,this.y=He*it-re*yt,this.z=re*At-Ae*it,this}};var St=function(G,Z,re,Ae){this.x=G||0,this.y=Z||0,this.z=re||0,this.w=Ae!==void 0?Ae:1};St.prototype={constructor:St,set:function(G,Z,re,Ae){return this.x=G,this.y=Z,this.z=re,this.w=Ae,this},copy:function(G){return this.x=G.x,this.y=G.y,this.z=G.z,this.w=G.w,this},setFromEulerXYZ:function(G,Z,re){var Ae=Math.cos(G/2),He=Math.cos(Z/2),it=Math.cos(re/2),At=Math.sin(G/2),yt=Math.sin(Z/2),Ze=Math.sin(re/2);return this.x=At*He*it+Ae*yt*Ze,this.y=Ae*yt*it-At*He*Ze,this.z=Ae*He*Ze+At*yt*it,this.w=Ae*He*it-At*yt*Ze,this},setFromEulerYXZ:function(G,Z,re){var Ae=Math.cos(G/2),He=Math.cos(Z/2),it=Math.cos(re/2),At=Math.sin(G/2),yt=Math.sin(Z/2),Ze=Math.sin(re/2);return this.x=At*He*it+Ae*yt*Ze,this.y=Ae*yt*it-At*He*Ze,this.z=Ae*He*Ze-At*yt*it,this.w=Ae*He*it+At*yt*Ze,this},setFromAxisAngle:function(G,Z){var re=Z/2,Ae=Math.sin(re);return this.x=G.x*Ae,this.y=G.y*Ae,this.z=G.z*Ae,this.w=Math.cos(re),this},multiply:function(G){return this.multiplyQuaternions(this,G)},multiplyQuaternions:function(G,Z){var re=G.x,Ae=G.y,He=G.z,it=G.w,At=Z.x,yt=Z.y,Ze=Z.z,ut=Z.w;return this.x=re*ut+it*At+Ae*Ze-He*yt,this.y=Ae*ut+it*yt+He*At-re*Ze,this.z=He*ut+it*Ze+re*yt-Ae*At,this.w=it*ut-re*At-Ae*yt-He*Ze,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var G=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return G===0?(this.x=0,this.y=0,this.z=0,this.w=1):(G=1/G,this.x=this.x*G,this.y=this.y*G,this.z=this.z*G,this.w=this.w*G),this},slerp:function(G,Z){if(Z===0)return this;if(Z===1)return this.copy(G);var re=this.x,Ae=this.y,He=this.z,it=this.w,At=it*G.w+re*G.x+Ae*G.y+He*G.z;if(At<0?(this.w=-G.w,this.x=-G.x,this.y=-G.y,this.z=-G.z,At=-At):this.copy(G),At>=1)return this.w=it,this.x=re,this.y=Ae,this.z=He,this;var yt=Math.acos(At),Ze=Math.sqrt(1-At*At);if(Math.abs(Ze)<.001)return this.w=.5*(it+this.w),this.x=.5*(re+this.x),this.y=.5*(Ae+this.y),this.z=.5*(He+this.z),this;var ut=Math.sin((1-Z)*yt)/Ze,wt=Math.sin(Z*yt)/Ze;return this.w=it*ut+this.w*wt,this.x=re*ut+this.x*wt,this.y=Ae*ut+this.y*wt,this.z=He*ut+this.z*wt,this},setFromUnitVectors:function(){var k,G,Z=1e-6;return function(re,Ae){return k===void 0&&(k=new ht),G=re.dot(Ae)+1,G<Z?(G=0,Math.abs(re.x)>Math.abs(re.z)?k.set(-re.y,re.x,0):k.set(0,-re.z,re.y)):k.crossVectors(re,Ae),this.x=k.x,this.y=k.y,this.z=k.z,this.w=G,this.normalize(),this}}()};function rr(k){this.width=k.width||Ct(),this.height=k.height||jt(),this.widthMeters=k.widthMeters,this.heightMeters=k.heightMeters,this.bevelMeters=k.bevelMeters}var sr=new rr({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),pr=new rr({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),cr={CardboardV1:new Zr({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new Zr({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function Cr(k,G){this.viewer=cr.CardboardV2,this.updateDeviceParams(k),this.distortion=new Rn(this.viewer.distortionCoefficients);for(var Z=0;Z<G.length;Z++){var re=G[Z];cr[re.id]=new Zr(re)}}Cr.prototype.updateDeviceParams=function(k){this.device=this.determineDevice_(k)||this.device},Cr.prototype.getDevice=function(){return this.device},Cr.prototype.setViewer=function(k){this.viewer=k,this.distortion=new Rn(this.viewer.distortionCoefficients)},Cr.prototype.determineDevice_=function(k){if(!k)return Y()?(console.warn("Using fallback iOS device measurements."),pr):(console.warn("Using fallback Android device measurements."),sr);var G=.0254,Z=G/k.xdpi,re=G/k.ydpi,Ae=Ct(),He=jt();return new rr({widthMeters:Z*Ae,heightMeters:re*He,bevelMeters:k.bevelMm*.001})},Cr.prototype.getDistortedFieldOfViewLeftEye=function(){var k=this.viewer,G=this.device,Z=this.distortion,re=k.screenLensDistance,Ae=(G.widthMeters-k.interLensDistance)/2,He=k.interLensDistance/2,it=k.baselineLensDistance-G.bevelMeters,At=G.heightMeters-it,yt=ft*Math.atan(Z.distort(Ae/re)),Ze=ft*Math.atan(Z.distort(He/re)),ut=ft*Math.atan(Z.distort(it/re)),wt=ft*Math.atan(Z.distort(At/re));return{leftDegrees:Math.min(yt,k.fov),rightDegrees:Math.min(Ze,k.fov),downDegrees:Math.min(ut,k.fov),upDegrees:Math.min(wt,k.fov)}},Cr.prototype.getLeftEyeVisibleTanAngles=function(){var k=this.viewer,G=this.device,Z=this.distortion,re=Math.tan(-yn*k.fov),Ae=Math.tan(yn*k.fov),He=Math.tan(yn*k.fov),it=Math.tan(-yn*k.fov),At=G.widthMeters/4,yt=G.heightMeters/2,Ze=k.baselineLensDistance-G.bevelMeters-yt,ut=k.interLensDistance/2-At,wt=-Ze,zt=k.screenLensDistance,Zt=Z.distort((ut-At)/zt),nr=Z.distort((wt+yt)/zt),Sr=Z.distort((ut+At)/zt),yr=Z.distort((wt-yt)/zt),hr=new Float32Array(4);return hr[0]=Math.max(re,Zt),hr[1]=Math.min(Ae,nr),hr[2]=Math.min(He,Sr),hr[3]=Math.max(it,yr),hr},Cr.prototype.getLeftEyeNoLensTanAngles=function(){var k=this.viewer,G=this.device,Z=this.distortion,re=new Float32Array(4),Ae=Z.distortInverse(Math.tan(-yn*k.fov)),He=Z.distortInverse(Math.tan(yn*k.fov)),it=Z.distortInverse(Math.tan(yn*k.fov)),At=Z.distortInverse(Math.tan(-yn*k.fov)),yt=G.widthMeters/4,Ze=G.heightMeters/2,ut=k.baselineLensDistance-G.bevelMeters-Ze,wt=k.interLensDistance/2-yt,zt=-ut,Zt=k.screenLensDistance,nr=(wt-yt)/Zt,Sr=(zt+Ze)/Zt,yr=(wt+yt)/Zt,hr=(zt-Ze)/Zt;return re[0]=Math.max(Ae,nr),re[1]=Math.min(He,Sr),re[2]=Math.min(it,yr),re[3]=Math.max(At,hr),re},Cr.prototype.getLeftEyeVisibleScreenRect=function(k){var G=this.viewer,Z=this.device,re=G.screenLensDistance,Ae=(Z.widthMeters-G.interLensDistance)/2,He=G.baselineLensDistance-Z.bevelMeters,it=(k[0]*re+Ae)/Z.widthMeters,At=(k[1]*re+He)/Z.heightMeters,yt=(k[2]*re+Ae)/Z.widthMeters,Ze=(k[3]*re+He)/Z.heightMeters;return{x:it,y:Ze,width:yt-it,height:At-Ze}},Cr.prototype.getFieldOfViewLeftEye=function(k){return k?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},Cr.prototype.getFieldOfViewRightEye=function(k){var G=this.getFieldOfViewLeftEye(k);return{leftDegrees:G.rightDegrees,rightDegrees:G.leftDegrees,upDegrees:G.upDegrees,downDegrees:G.downDegrees}},Cr.prototype.getUndistortedFieldOfViewLeftEye=function(){var k=this.getUndistortedParams_();return{leftDegrees:ft*Math.atan(k.outerDist),rightDegrees:ft*Math.atan(k.innerDist),downDegrees:ft*Math.atan(k.bottomDist),upDegrees:ft*Math.atan(k.topDist)}},Cr.prototype.getUndistortedViewportLeftEye=function(){var k=this.getUndistortedParams_(),G=this.viewer,Z=this.device,re=G.screenLensDistance,Ae=Z.widthMeters/re,He=Z.heightMeters/re,it=Z.width/Ae,At=Z.height/He,yt=Math.round((k.eyePosX-k.outerDist)*it),Ze=Math.round((k.eyePosY-k.bottomDist)*At);return{x:yt,y:Ze,width:Math.round((k.eyePosX+k.innerDist)*it)-yt,height:Math.round((k.eyePosY+k.topDist)*At)-Ze}},Cr.prototype.getUndistortedParams_=function(){var k=this.viewer,G=this.device,Z=this.distortion,re=k.screenLensDistance,Ae=k.interLensDistance/2/re,He=G.widthMeters/re,it=G.heightMeters/re,At=He/2-Ae,yt=(k.baselineLensDistance-G.bevelMeters)/re,Ze=k.fov,ut=Z.distortInverse(Math.tan(yn*Ze)),wt=Math.min(At,ut),zt=Math.min(Ae,ut),Zt=Math.min(yt,ut),nr=Math.min(it-yt,ut);return{outerDist:wt,innerDist:zt,topDist:nr,bottomDist:Zt,eyePosX:At,eyePosY:yt}};function Zr(k){this.id=k.id,this.label=k.label,this.fov=k.fov,this.interLensDistance=k.interLensDistance,this.baselineLensDistance=k.baselineLensDistance,this.screenLensDistance=k.screenLensDistance,this.distortionCoefficients=k.distortionCoefficients,this.inverseCoefficients=k.inverseCoefficients}Cr.Viewers=cr;var kr=1,jn="2019-11-09T17:36:14Z",$r=[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}],jr={format:kr,last_updated:jn,devices:$r};function dn(k,G){if(this.dpdb=jr,this.recalculateDeviceParams_(),k){this.onDeviceParamsUpdated=G;var Z=new XMLHttpRequest,re=this;Z.open("GET",k,!0),Z.addEventListener("load",function(){re.loading=!1,Z.status>=200&&Z.status<=299?(re.dpdb=JSON.parse(Z.response),re.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),Z.send()}}dn.prototype.getDeviceParams=function(){return this.deviceParams},dn.prototype.recalculateDeviceParams_=function(){var k=this.calcDeviceParams_();k?(this.deviceParams=k,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},dn.prototype.calcDeviceParams_=function(){var k=this.dpdb;if(!k)return console.error("DPDB not available."),null;if(k.format!=1)return console.error("DPDB has unexpected format version."),null;if(!k.devices||!k.devices.length)return console.error("DPDB does not have a devices section."),null;var G=navigator.userAgent||navigator.vendor||window.opera,Z=Ct(),re=jt();if(!k.devices)return console.error("DPDB has no devices section."),null;for(var Ae=0;Ae<k.devices.length;Ae++){var He=k.devices[Ae];if(!He.rules){console.warn("Device["+Ae+"] has no rules section.");continue}if(He.type!="ios"&&He.type!="android"){console.warn("Device["+Ae+"] has invalid type.");continue}if(Y()==(He.type=="ios")){for(var it=!1,At=0;At<He.rules.length;At++){var yt=He.rules[At];if(this.ruleMatches_(yt,G,Z,re)){it=!0;break}}if(!!it){var Ze=He.dpi[0]||He.dpi,ut=He.dpi[1]||He.dpi;return new Ri({xdpi:Ze,ydpi:ut,bevelMm:He.bw})}}}return console.warn("No DPDB device match."),null},dn.prototype.ruleMatches_=function(k,G,Z,re){if(!k.ua&&!k.res||(k.ua&&k.ua.substring(0,2)==="SM"&&(k.ua=k.ua.substring(0,7)),k.ua&&G.indexOf(k.ua)<0))return!1;if(k.res){if(!k.res[0]||!k.res[1])return!1;var Ae=k.res[0],He=k.res[1];if(Math.min(Z,re)!=Math.min(Ae,He)||Math.max(Z,re)!=Math.max(Ae,He))return!1}return!0};function Ri(k){this.xdpi=k.xdpi,this.ydpi=k.ydpi,this.bevelMm=k.bevelMm}function si(k,G){this.set(k,G)}si.prototype.set=function(k,G){this.sample=k,this.timestampS=G},si.prototype.copy=function(k){this.set(k.sample,k.timestampS)};function tn(k,G){this.kFilter=k,this.isDebug=G,this.currentAccelMeasurement=new si,this.currentGyroMeasurement=new si,this.previousGyroMeasurement=new si,Y()?this.filterQ=new St(-1,0,0,1):this.filterQ=new St(1,0,0,1),this.previousFilterQ=new St,this.previousFilterQ.copy(this.filterQ),this.accelQ=new St,this.isOrientationInitialized=!1,this.estimatedGravity=new ht,this.measuredGravity=new ht,this.gyroIntegralQ=new St}tn.prototype.addAccelMeasurement=function(k,G){this.currentAccelMeasurement.set(k,G)},tn.prototype.addGyroMeasurement=function(k,G){this.currentGyroMeasurement.set(k,G);var Z=G-this.previousGyroMeasurement.timestampS;Et(Z)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},tn.prototype.run_=function(){if(!this.isOrientationInitialized){this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),this.isOrientationInitialized=!0;return}var k=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,G=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,k);this.gyroIntegralQ.multiply(G),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(G);var Z=new St;Z.copy(this.filterQ),Z.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Z),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var re=new St;re.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),re.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",ft*me(re),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var Ae=new St;Ae.copy(this.filterQ),Ae.multiply(re),this.filterQ.slerp(Ae,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},tn.prototype.getOrientation=function(){return this.filterQ},tn.prototype.accelToQuaternion_=function(k){var G=new ht;G.copy(k),G.normalize();var Z=new St;return Z.setFromUnitVectors(new ht(0,0,-1),G),Z.inverse(),Z},tn.prototype.gyroToQuaternionDelta_=function(k,G){var Z=new St,re=new ht;return re.copy(k),re.normalize(),Z.setFromAxisAngle(re,k.length()*G),Z};function Yi(k,G){this.predictionTimeS=k,this.isDebug=G,this.previousQ=new St,this.previousTimestampS=null,this.deltaQ=new St,this.outQ=new St}Yi.prototype.getPrediction=function(k,G,Z){if(!this.previousTimestampS)return this.previousQ.copy(k),this.previousTimestampS=Z,k;var re=new ht;re.copy(G),re.normalize();var Ae=G.length();if(Ae<yn*20)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(ft*Ae).toFixed(1)),this.outQ.copy(k),this.previousQ.copy(k),this.outQ;var He=Ae*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(re,He),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(k),this.previousTimestampS=Z,this.outQ};function ti(k,G,Z,re){this.yawOnly=Z,this.accelerometer=new ht,this.gyroscope=new ht,this.filter=new tn(k,re),this.posePredictor=new Yi(G,re),this.isFirefoxAndroid=xe(),this.isIOS=Y();var Ae=Be();this.isDeviceMotionInRadians=!this.isIOS&&Ae&&Ae<66,this.isWithoutDeviceMotion=Ge()||je(),this.filterToWorldQ=new St,Y()?this.filterToWorldQ.setFromAxisAngle(new ht(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new ht(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new St,this.worldToScreenQ=new St,this.originalPoseAdjustQ=new St,this.originalPoseAdjustQ.setFromAxisAngle(new ht(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),lt()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new St,this.orientationOut_=new Float32Array(4),this.start()}ti.prototype.getPosition=function(){return null},ti.prototype.getOrientation=function(){var k=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var Ae=new St().setFromAxisAngle(new ht(0,0,-1),0),He=new St;return window.orientation===-90?He.setFromAxisAngle(new ht(0,1,0),Math.PI/-2):He.setFromAxisAngle(new ht(0,1,0),Math.PI/2),Ae.multiply(He)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var Ae=new St;return Ae.setFromAxisAngle(new ht(1,0,0),-Math.PI/2),Ae}(),k=this._deviceOrientationQ;var Z=new St;return Z.copy(k),Z.multiply(this.deviceOrientationFilterToWorldQ),Z.multiply(this.resetQ),Z.multiply(this.worldToScreenQ),Z.multiplyQuaternions(this.deviceOrientationFixQ,Z),this.yawOnly&&(Z.x=0,Z.z=0,Z.normalize()),this.orientationOut_[0]=Z.x,this.orientationOut_[1]=Z.y,this.orientationOut_[2]=Z.z,this.orientationOut_[3]=Z.w,this.orientationOut_}else{var G=this.filter.getOrientation();k=this.posePredictor.getPrediction(G,this.gyroscope,this.previousTimestampS)}var Z=new St;return Z.copy(this.filterToWorldQ),Z.multiply(this.resetQ),Z.multiply(k),Z.multiply(this.worldToScreenQ),this.yawOnly&&(Z.x=0,Z.z=0,Z.normalize()),this.orientationOut_[0]=Z.x,this.orientationOut_[1]=Z.y,this.orientationOut_[2]=Z.z,this.orientationOut_[3]=Z.w,this.orientationOut_},ti.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),lt()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},ti.prototype.onDeviceOrientation_=function(k){this._deviceOrientationQ=this._deviceOrientationQ||new St;var G=k.alpha,Z=k.beta,re=k.gamma;G=(G||0)*Math.PI/180,Z=(Z||0)*Math.PI/180,re=(re||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(Z,G,-re)},ti.prototype.onDeviceMotion_=function(k){this.updateDeviceMotion_(k)},ti.prototype.updateDeviceMotion_=function(k){var G=k.accelerationIncludingGravity,Z=k.rotationRate,re=k.timeStamp/1e3,Ae=re-this.previousTimestampS;if(Ae<0){Ee("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),this.previousTimestampS=re;return}else if(Ae<=J||Ae>le){Ee("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),this.previousTimestampS=re;return}this.accelerometer.set(-G.x,-G.y,-G.z),Z&&(ct()?this.gyroscope.set(-Z.beta,Z.alpha,Z.gamma):this.gyroscope.set(Z.alpha,Z.beta,Z.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,re)),this.filter.addAccelMeasurement(this.accelerometer,re),this.previousTimestampS=re},ti.prototype.onOrientationChange_=function(k){this.setScreenTransform_()},ti.prototype.onMessage_=function(k){var G=k.data;if(!(!G||!G.type)){var Z=G.type.toLowerCase();Z==="devicemotion"&&this.updateDeviceMotion_(G.deviceMotionEvent)}},ti.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new ht(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new ht(0,0,1),Math.PI/2);break}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},ti.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),Y()&&ae()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},ti.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var Qi=60,ri=new ht(1,0,0),pe=new ht(0,0,1),_e=new St;_e.setFromAxisAngle(ri,-Math.PI/2),_e.multiply(new St().setFromAxisAngle(pe,Math.PI/2));var qe=function(){function k(G){U(this,k),this.config=G,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new St,this._outQ=new St,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return W(k,[{key:"init",value:function(){var Z=null;try{Z=new RelativeOrientationSensor({frequency:Qi,referenceFrame:"screen"}),Z.addEventListener("error",this._onSensorError)}catch(re){this.errors.push(re),re.name==="SecurityError"?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):re.name==="ReferenceError"?this.useDeviceMotion():console.error(re)}Z&&(this.api="sensor",this.sensor=Z,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new ti(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var Z=this.sensor.quaternion;this._sensorQ.set(Z[0],Z[1],Z[2],Z[3]);var re=this._outQ;return re.copy(_e),re.multiply(this._sensorQ),this.config.YAW_ONLY&&(re.x=re.z=0,re.normalize()),this._out[0]=re.x,this._out[1]=re.y,this._out[2]=re.z,this._out[3]=re.w,this._out}},{key:"_onSensorError",value:function(Z){this.errors.push(Z.error),Z.error.name==="NotAllowedError"?console.error("Permission to access sensor was denied"):Z.error.name==="NotReadableError"?console.error("Sensor could not be read"):console.error(Z.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),k}(),st="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function et(){this.loadIcon_();var k=document.createElement("div"),G=k.style;G.position="fixed",G.top=0,G.right=0,G.bottom=0,G.left=0,G.backgroundColor="gray",G.fontFamily="sans-serif",G.zIndex=1e6;var Z=document.createElement("img");Z.src=this.icon;var G=Z.style;G.marginLeft="25%",G.marginTop="25%",G.width="50%",k.appendChild(Z);var re=document.createElement("div"),G=re.style;G.textAlign="center",G.fontSize="16px",G.lineHeight="24px",G.margin="24px 25%",G.width="50%",re.innerHTML="Place your phone into your Cardboard viewer.",k.appendChild(re);var Ae=document.createElement("div"),G=Ae.style;G.backgroundColor="#CFD8DC",G.position="fixed",G.bottom=0,G.width="100%",G.height="48px",G.padding="14px 24px",G.boxSizing="border-box",G.color="#656A6B",k.appendChild(Ae);var He=document.createElement("div");He.style.float="left",He.innerHTML="No Cardboard viewer?";var it=document.createElement("a");it.href="https://www.google.com/get/cardboard/get-cardboard/",it.innerHTML="get one",it.target="_blank";var G=it.style;G.float="right",G.fontWeight=600,G.textTransform="uppercase",G.borderLeft="1px solid gray",G.paddingLeft="24px",G.textDecoration="none",G.color="#656A6B",Ae.appendChild(He),Ae.appendChild(it),this.overlay=k,this.text=re,this.hide()}et.prototype.show=function(k){!k&&!this.overlay.parentElement?document.body.appendChild(this.overlay):k&&(this.overlay.parentElement&&this.overlay.parentElement!=k&&this.overlay.parentElement.removeChild(this.overlay),k.appendChild(this.overlay)),this.overlay.style.display="block";var G=this.overlay.querySelector("img"),Z=G.style;lt()?(Z.width="20%",Z.marginLeft="40%",Z.marginTop="3%"):(Z.width="50%",Z.marginLeft="25%",Z.marginTop="25%")},et.prototype.hide=function(){this.overlay.style.display="none"},et.prototype.showTemporarily=function(k,G){this.show(G),this.timer=setTimeout(this.hide.bind(this),k)},et.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},et.prototype.update=function(){this.disableShowTemporarily(),!lt()&&se()?this.show():this.hide()},et.prototype.loadIcon_=function(){this.icon=te("image/svg+xml",st)};var gt="CardboardV1",Lt="WEBVR_CARDBOARD_VIEWER",Xt="webvr-polyfill-viewer-selector";function Dt(k){try{this.selectedKey=localStorage.getItem(Lt)}catch(G){console.error("Failed to load viewer profile: %s",G)}this.selectedKey||(this.selectedKey=k||gt),this.dialog=this.createDialog_(Cr.Viewers),this.root=null,this.onChangeCallbacks_=[]}Dt.prototype.show=function(k){this.root=k,k.appendChild(this.dialog);var G=this.dialog.querySelector("#"+this.selectedKey);G.checked=!0,this.dialog.style.display="block"},Dt.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Dt.prototype.getCurrentViewer=function(){return Cr.Viewers[this.selectedKey]},Dt.prototype.getSelectedKey_=function(){var k=this.dialog.querySelector("input[name=field]:checked");return k?k.id:null},Dt.prototype.onChange=function(k){this.onChangeCallbacks_.push(k)},Dt.prototype.fireOnChange_=function(k){for(var G=0;G<this.onChangeCallbacks_.length;G++)this.onChangeCallbacks_[G](k)},Dt.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!Cr.Viewers[this.selectedKey]){console.error("ViewerSelector.onSave_: this should never happen!");return}this.fireOnChange_(Cr.Viewers[this.selectedKey]);try{localStorage.setItem(Lt,this.selectedKey)}catch(k){console.error("Failed to save viewer profile: %s",k)}this.hide()},Dt.prototype.createDialog_=function(k){var G=document.createElement("div");G.classList.add(Xt),G.style.display="none";var Z=document.createElement("div"),re=Z.style;re.position="fixed",re.left=0,re.top=0,re.width="100%",re.height="100%",re.background="rgba(0, 0, 0, 0.3)",Z.addEventListener("click",this.hide.bind(this));var Ae=280,He=document.createElement("div"),re=He.style;re.boxSizing="border-box",re.position="fixed",re.top="24px",re.left="50%",re.marginLeft=-Ae/2+"px",re.width=Ae+"px",re.padding="24px",re.overflow="hidden",re.background="#fafafa",re.fontFamily="'Roboto', sans-serif",re.boxShadow="0px 5px 20px #666",He.appendChild(this.createH1_("Select your viewer"));for(var it in k)He.appendChild(this.createChoice_(it,k[it].label));return He.appendChild(this.createButton_("Save",this.onSave_.bind(this))),G.appendChild(Z),G.appendChild(He),G},Dt.prototype.createH1_=function(k){var G=document.createElement("h1"),Z=G.style;return Z.color="black",Z.fontSize="20px",Z.fontWeight="bold",Z.marginTop=0,Z.marginBottom="24px",G.innerHTML=k,G},Dt.prototype.createChoice_=function(k,G){var Z=document.createElement("div");Z.style.marginTop="8px",Z.style.color="black";var re=document.createElement("input");re.style.fontSize="30px",re.setAttribute("id",k),re.setAttribute("type","radio"),re.setAttribute("value",k),re.setAttribute("name","field");var Ae=document.createElement("label");return Ae.style.marginLeft="4px",Ae.setAttribute("for",k),Ae.innerHTML=G,Z.appendChild(re),Z.appendChild(Ae),Z},Dt.prototype.createButton_=function(k,G){var Z=document.createElement("button");Z.innerHTML=k;var re=Z.style;return re.float="right",re.textTransform="uppercase",re.color="#1094f7",re.fontSize="14px",re.letterSpacing=0,re.border=0,re.background="none",re.marginTop="16px",Z.addEventListener("click",G),Z};var mt=typeof window!="undefined"?window:typeof h!="undefined"?h:typeof self!="undefined"?self:{};function Jt(k){return k&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k}function tr(k,G){return G={exports:{}},k(G,G.exports),G.exports}var vr=tr(function(k,G){(function(re,Ae){k.exports=Ae()})(mt,function(){return function(Z){var re={};function Ae(He){if(re[He])return re[He].exports;var it=re[He]={i:He,l:!1,exports:{}};return Z[He].call(it.exports,it,it.exports,Ae),it.l=!0,it.exports}return Ae.m=Z,Ae.c=re,Ae.d=function(He,it,At){Ae.o(He,it)||Object.defineProperty(He,it,{configurable:!1,enumerable:!0,get:At})},Ae.n=function(He){var it=He&&He.__esModule?function(){return He.default}:function(){return He};return Ae.d(it,"a",it),it},Ae.o=function(He,it){return Object.prototype.hasOwnProperty.call(He,it)},Ae.p="",Ae(Ae.s=0)}([function(Z,re,Ae){var He=function(){function ut(wt,zt){for(var Zt=0;Zt<zt.length;Zt++){var nr=zt[Zt];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(wt,nr.key,nr)}}return function(wt,zt,Zt){return zt&&ut(wt.prototype,zt),Zt&&ut(wt,Zt),wt}}();function it(ut,wt){if(!(ut instanceof wt))throw new TypeError("Cannot call a class as a function")}var At=Ae(1),yt=typeof navigator!="undefined"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,Ze=function(){function ut(){it(this,ut),yt?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",At),this.noSleepVideo.addEventListener("timeupdate",function(wt){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return He(ut,[{key:"enable",value:function(){yt?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){yt?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),ut}();Z.exports=Ze},function(Z,re,Ae){Z.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}),An=Jt(vr),Ur=1e3,Tr=[0,0,.5,1],Yr=[.5,0,.5,1],Sn=window.requestAnimationFrame,qn=window.cancelAnimationFrame;function mr(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function Pr(k){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:k.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:k.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:k.canPresent},maxLayers:{writable:!1,enumerable:!0,value:k.maxLayers},hasOrientation:{enumerable:!0,get:function(){return Pe("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),k.hasOrientation}}})}function Dr(k){k=k||{};var G="wakelock"in k?k.wakelock:!0;this.isPolyfilled=!0,this.displayId=Ur++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return Pe("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new Pr({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,G&&se()&&(this.wakelock_=new An)}Dr.prototype.getFrameData=function(k){return K(k,this._getPose(),this)},Dr.prototype.getPose=function(){return Pe("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},Dr.prototype.resetPose=function(){return Pe("VRDisplay.prototype.resetPose"),this._resetPose()},Dr.prototype.getImmediatePose=function(){return Pe("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},Dr.prototype.requestAnimationFrame=function(k){return Sn(k)},Dr.prototype.cancelAnimationFrame=function(k){return qn(k)},Dr.prototype.wrapForFullscreen=function(k){if(Y())return k;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var G=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",G.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==k)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=k,this.originalParent_=k.parentElement,this.originalParent_||document.body.appendChild(k),!this.fullscreenWrapper_.parentElement){var Z=this.fullscreenElement_.parentElement;Z.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),Z.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var re=this;function Ae(){if(!!re.fullscreenElement_){var He=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];re.fullscreenElement_.setAttribute("style",He.join("; ")+";")}}return Ae(),this.fullscreenWrapper_},Dr.prototype.removeFullscreenWrapper=function(){if(!!this.fullscreenElement_){var k=this.fullscreenElement_;this.fullscreenElementCachedStyle_?k.setAttribute("style",this.fullscreenElementCachedStyle_):k.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var G=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(k),this.originalParent_===G?G.insertBefore(k,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(k),G.removeChild(this.fullscreenWrapper_),k}},Dr.prototype.requestPresent=function(k){var G=this.isPresenting,Z=this;return k instanceof Array||(Pe("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),k=[k]),new Promise(function(re,Ae){if(!Z.capabilities.canPresent){Ae(new Error("VRDisplay is not capable of presenting."));return}if(k.length==0||k.length>Z.capabilities.maxLayers){Ae(new Error("Invalid number of layers."));return}var He=k[0];if(!He.source){re();return}var it=He.leftBounds||Tr,At=He.rightBounds||Yr;if(G){var yt=Z.layer_;yt.source!==He.source&&(yt.source=He.source);for(var Ze=0;Ze<4;Ze++)yt.leftBounds[Ze]=it[Ze],yt.rightBounds[Ze]=At[Ze];Z.wrapForFullscreen(Z.layer_.source),Z.updatePresent_(),re();return}if(Z.layer_={predistorted:He.predistorted,source:He.source,leftBounds:it.slice(0),rightBounds:At.slice(0)},Z.waitingForPresent_=!1,Z.layer_&&Z.layer_.source){var ut=Z.wrapForFullscreen(Z.layer_.source),wt=function(){var nr=$e();Z.isPresenting=ut===nr,Z.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(Sr){console.error("screen.orientation.lock() failed due to",Sr.message)}),Z.waitingForPresent_=!1,Z.beginPresent_(),re()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),Z.removeFullscreenWrapper(),Z.disableWakeLock(),Z.endPresent_(),Z.removeFullscreenListeners_()),Z.fireVRDisplayPresentChange_()},zt=function(){!Z.waitingForPresent_||(Z.removeFullscreenWrapper(),Z.removeFullscreenListeners_(),Z.disableWakeLock(),Z.waitingForPresent_=!1,Z.isPresenting=!1,Ae(new Error("Unable to present.")))};Z.addFullscreenListeners_(ut,wt,zt),tt(ut)?(Z.enableWakeLock(),Z.waitingForPresent_=!0):(Y()||de())&&(Z.enableWakeLock(),Z.isPresenting=!0,Z.beginPresent_(),Z.fireVRDisplayPresentChange_(),re())}!Z.waitingForPresent_&&!Y()&&(pt(),Ae(new Error("Unable to present.")))})},Dr.prototype.exitPresent=function(){var k=this.isPresenting,G=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(Z,re){k?(!pt()&&Y()&&(G.endPresent_(),G.fireVRDisplayPresentChange_()),de()&&(G.removeFullscreenWrapper(),G.removeFullscreenListeners_(),G.endPresent_(),G.fireVRDisplayPresentChange_()),Z()):re(new Error("Was not presenting to VRDisplay."))})},Dr.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},Dr.prototype.fireVRDisplayPresentChange_=function(){var k=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(k)},Dr.prototype.fireVRDisplayConnect_=function(){var k=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(k)},Dr.prototype.addFullscreenListeners_=function(k,G,Z){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=k,this.fullscreenChangeHandler_=G,this.fullscreenErrorHandler_=Z,G&&(document.fullscreenEnabled?k.addEventListener("fullscreenchange",G,!1):document.webkitFullscreenEnabled?k.addEventListener("webkitfullscreenchange",G,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",G,!1):document.msFullscreenEnabled&&k.addEventListener("msfullscreenchange",G,!1)),Z&&(document.fullscreenEnabled?k.addEventListener("fullscreenerror",Z,!1):document.webkitFullscreenEnabled?k.addEventListener("webkitfullscreenerror",Z,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",Z,!1):document.msFullscreenEnabled&&k.addEventListener("msfullscreenerror",Z,!1))},Dr.prototype.removeFullscreenListeners_=function(){if(!!this.fullscreenEventTarget_){var k=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var G=this.fullscreenChangeHandler_;k.removeEventListener("fullscreenchange",G,!1),k.removeEventListener("webkitfullscreenchange",G,!1),document.removeEventListener("mozfullscreenchange",G,!1),k.removeEventListener("msfullscreenchange",G,!1)}if(this.fullscreenErrorHandler_){var Z=this.fullscreenErrorHandler_;k.removeEventListener("fullscreenerror",Z,!1),k.removeEventListener("webkitfullscreenerror",Z,!1),document.removeEventListener("mozfullscreenerror",Z,!1),k.removeEventListener("msfullscreenerror",Z,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},Dr.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},Dr.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},Dr.prototype.beginPresent_=function(){},Dr.prototype.endPresent_=function(){},Dr.prototype.submitFrame=function(k){},Dr.prototype.getEyeParameters=function(k){return null};var Ai={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},pn={LEFT:"left",RIGHT:"right"};function bn(k){var G=ce({},Ai);k=ce(G,k||{}),Dr.call(this,{wakelock:k.MOBILE_WAKE_LOCK}),this.config=k,this.displayName="Cardboard VRDisplay",this.capabilities=new Pr({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new qe(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new dn(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new Cr(this.dpdb_.getDeviceParams(),k.ADDITIONAL_VIEWERS),this.viewerSelector_=new Dt(k.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new et),Y()&&window.addEventListener("resize",this.onResize_.bind(this))}return bn.prototype=Object.create(Dr.prototype),bn.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},bn.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},bn.prototype._getFieldOfView=function(k){var G;if(k==pn.LEFT)G=this.deviceInfo_.getFieldOfViewLeftEye();else if(k==pn.RIGHT)G=this.deviceInfo_.getFieldOfViewRightEye();else return console.error("Invalid eye provided: %s",k),null;return G},bn.prototype._getEyeOffset=function(k){var G;if(k==pn.LEFT)G=[-this.deviceInfo_.viewer.interLensDistance*.5,0,0];else if(k==pn.RIGHT)G=[this.deviceInfo_.viewer.interLensDistance*.5,0,0];else return console.error("Invalid eye provided: %s",k),null;return G},bn.prototype.getEyeParameters=function(k){var G=this._getEyeOffset(k),Z=this._getFieldOfView(k),re={offset:G,renderWidth:this.deviceInfo_.device.width*.5*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(re,"fieldOfView",{enumerable:!0,get:function(){return Pe("VRFieldOfView","VRFrameData's projection matrices"),Z}}),re},bn.prototype.onDeviceParamsUpdated_=function(k){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(k),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},bn.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},bn.prototype.beginPresent_=function(){var k=this.layer_.source.getContext("webgl");k||(k=this.layer_.source.getContext("experimental-webgl")),k||(k=this.layer_.source.getContext("webgl2")),!!k&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(k.canvas.width=Ct()*this.bufferScale_,k.canvas.height=jt()*this.bufferScale_,this.cardboardUI_=new Vr(k)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new Vr(k)),this.distorter_=new V(k,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(G){this.viewerSelector_.show(this.layer_.source.parentElement),G.stopPropagation(),G.preventDefault()}.bind(this),function(G){this.exitPresent(),G.stopPropagation(),G.preventDefault()}.bind(this)),this.rotateInstructions_&&(lt()&&se()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},bn.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},bn.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},bn.prototype.submitFrame=function(k){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var G=this.layer_.source.getContext("webgl");G||(G=this.layer_.source.getContext("experimental-webgl")),G||(G=this.layer_.source.getContext("webgl2"));var Z=G.canvas;(Z.width!=this.lastWidth||Z.height!=this.lastHeight)&&this.cardboardUI_.onResize(),this.lastWidth=Z.width,this.lastHeight=Z.height,this.cardboardUI_.render()}},bn.prototype.onOrientationChange_=function(k){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},bn.prototype.onResize_=function(k){if(this.layer_){var G=this.layer_.source.getContext("webgl");G||(G=this.layer_.source.getContext("experimental-webgl")),G||(G=this.layer_.source.getContext("webgl2"));var Z=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];G.canvas.setAttribute("style",Z.join("; ")+";"),Q(G.canvas)}},bn.prototype.onViewerChanged_=function(k){this.deviceInfo_.setViewer(k),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},bn.prototype.fireVRDisplayDeviceParamsChange_=function(){var k=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(k)},bn.VRFrameData=mr,bn.VRDisplay=Dr,bn})}),E=m(b),S="0.10.12",x={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function T(I){this.config=v(v({},x),I),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&d())&&(this.enable(),this.getVRDisplays().then(function(B){B&&B[0]&&B[0].fireVRDisplayConnect_&&B[0].fireVRDisplayConnect_()}))}T.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(d()){var I=new E({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(I)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},T.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var I=this.native.VRFrameData,B=new this.native.VRFrameData,U=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(W){if(W instanceof I){U.call(this,W);return}U.call(this,B),W.pose=B.pose,p(B.leftProjectionMatrix,W.leftProjectionMatrix),p(B.rightProjectionMatrix,W.rightProjectionMatrix),p(B.leftViewMatrix,W.leftViewMatrix),p(B.rightViewMatrix,W.rightViewMatrix)}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=E.VRDisplay,window.VRFrameData=E.VRFrameData},T.prototype.getVRDisplays=function(){var I=this;return this.config,this.hasNative?this.native.getVRDisplays.call(navigator).then(function(B){return B.length>0?B:I.getPolyfillDisplays()}):Promise.resolve(this.getPolyfillDisplays())},T.version=S,T.VRFrameData=E.VRFrameData,T.VRDisplay=E.VRDisplay;var _=Object.freeze({default:T}),D=_&&T||_;typeof h!="undefined"&&h.window&&(h.document||(h.document=h.window.document),h.navigator||(h.navigator=h.window.navigator));var C=D;return C})}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],69:[function(c,g,L){var l=/\n/,h=`
`,m=/\s/;g.exports=function(E,S){var x=g.exports.lines(E,S);return x.map(function(T){return E.substring(T.start,T.end)}).join(`
`)},g.exports.lines=function(S,x){if(x=x||{},x.width===0&&x.mode!=="nowrap")return[];S=S||"";var T=typeof x.width=="number"?x.width:Number.MAX_VALUE,_=Math.max(0,x.start||0),D=typeof x.end=="number"?x.end:S.length,C=x.mode,I=x.measure||b;return C==="pre"?p(I,S,_,D,T):v(I,S,_,D,T,C)};function y(E,S,x,T){var _=E.indexOf(S,x);return _===-1||_>T?T:_}function d(E){return m.test(E)}function p(E,S,x,T,_){for(var D=[],C=x,I=x;I<T&&I<S.length;I++){var B=S.charAt(I),U=l.test(B);if(U||I===T-1){var W=U?I:I+1,oe=E(S,C,W,_);D.push(oe),C=I+1}}return D}function v(E,S,x,T,_,D){var C=[],I=_;for(D==="nowrap"&&(I=Number.MAX_VALUE);x<T&&x<S.length;){for(var B=y(S,h,x,T);x<B&&d(S.charAt(x));)x++;var U=E(S,x,B,I),W=x+(U.end-U.start),oe=W+h.length;if(W<B){for(;W>x&&!d(S.charAt(W));)W--;if(W===x)oe>x+h.length&&oe--,W=oe;else for(oe=W;W>x&&d(S.charAt(W-h.length));)W--}if(W>=x){var J=E(S,x,W,I);C.push(J)}x=oe}return C}function b(E,S,x,T){var _=Math.min(T,x-S);return{start:S,end:S+_}}},{}],70:[function(c,g,L){var l=c("global/window"),h=c("is-function"),m=c("parse-headers"),y=c("xtend");g.exports=b,g.exports.default=b,b.XMLHttpRequest=l.XMLHttpRequest||x,b.XDomainRequest="withCredentials"in new b.XMLHttpRequest?b.XMLHttpRequest:l.XDomainRequest,d(["get","put","post","patch","head","delete"],function(T){b[T==="delete"?"del":T]=function(_,D,C){return D=v(_,D,C),D.method=T.toUpperCase(),E(D)}});function d(T,_){for(var D=0;D<T.length;D++)_(T[D])}function p(T){for(var _ in T)if(T.hasOwnProperty(_))return!1;return!0}function v(T,_,D){var C=T;return h(_)?(D=_,typeof T=="string"&&(C={uri:T})):C=y(_,{uri:T}),C.callback=D,C}function b(T,_,D){return _=v(T,_,D),E(_)}function E(T){if(typeof T.callback=="undefined")throw new Error("callback argument missing");var _=!1,D=function(Ge,ct,lt){_||(_=!0,T.callback(Ge,ct,lt))};function C(){W.readyState===4&&setTimeout(U,0)}function I(){var je=void 0;if(W.response?je=W.response:je=W.responseText||S(W),ne)try{je=JSON.parse(je)}catch{}return je}function B(je){return clearTimeout(xe),je instanceof Error||(je=new Error(""+(je||"Unknown XMLHttpRequest Error"))),je.statusCode=0,D(je,Be)}function U(){if(!J){var je;clearTimeout(xe),T.useXDR&&W.status===void 0?je=200:je=W.status===1223?204:W.status;var Ge=Be,ct=null;return je!==0?(Ge={body:I(),statusCode:je,method:te,headers:{},url:le,rawRequest:W},W.getAllResponseHeaders&&(Ge.headers=m(W.getAllResponseHeaders()))):ct=new Error("Internal XMLHttpRequest Error"),D(ct,Ge,Ge.body)}}var W=T.xhr||null;W||(T.cors||T.useXDR?W=new b.XDomainRequest:W=new b.XMLHttpRequest);var oe,J,le=W.url=T.uri||T.url,te=W.method=T.method||"GET",ue=T.body||T.data,Y=W.headers=T.headers||{},de=!!T.sync,ne=!1,xe,Be={body:void 0,headers:{},statusCode:0,method:te,url:le,rawRequest:W};if("json"in T&&T.json!==!1&&(ne=!0,Y.accept||Y.Accept||(Y.Accept="application/json"),te!=="GET"&&te!=="HEAD"&&(Y["content-type"]||Y["Content-Type"]||(Y["Content-Type"]="application/json"),ue=JSON.stringify(T.json===!0?ue:T.json))),W.onreadystatechange=C,W.onload=U,W.onerror=B,W.onprogress=function(){},W.onabort=function(){J=!0},W.ontimeout=B,W.open(te,le,!de,T.username,T.password),de||(W.withCredentials=!!T.withCredentials),!de&&T.timeout>0&&(xe=setTimeout(function(){if(!J){J=!0,W.abort("timeout");var je=new Error("XMLHttpRequest timeout");je.code="ETIMEDOUT",B(je)}},T.timeout)),W.setRequestHeader)for(oe in Y)Y.hasOwnProperty(oe)&&W.setRequestHeader(oe,Y[oe]);else if(T.headers&&!p(T.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in T&&(W.responseType=T.responseType),"beforeSend"in T&&typeof T.beforeSend=="function"&&T.beforeSend(W),W.send(ue||null),W}function S(T){try{if(T.responseType==="document")return T.responseXML;var _=T.responseXML&&T.responseXML.documentElement.nodeName==="parsererror";if(T.responseType===""&&!_)return T.responseXML}catch{}return null}function x(){}},{"global/window":27,"is-function":33,"parse-headers":47,xtend:72}],71:[function(c,g,L){g.exports=function(){return typeof self.DOMParser!="undefined"?function(h){var m=new self.DOMParser;return m.parseFromString(h,"application/xml")}:typeof self.ActiveXObject!="undefined"&&new self.ActiveXObject("Microsoft.XMLDOM")?function(h){var m=new self.ActiveXObject("Microsoft.XMLDOM");return m.async="false",m.loadXML(h),m}:function(h){var m=document.createElement("div");return m.innerHTML=h,m}}()},{}],72:[function(c,g,L){g.exports=h;var l=Object.prototype.hasOwnProperty;function h(){for(var m={},y=0;y<arguments.length;y++){var d=arguments[y];for(var p in d)l.call(d,p)&&(m[p]=d[p])}return m}},{}],73:[function(c,g,L){g.exports={name:"aframe",version:"1.2.0",description:"A web framework for building virtual reality experiences.",homepage:"https://aframe.io/",main:"dist/aframe-master.js",scripts:{browserify:"browserify src/index.js -s 'AFRAME' -p browserify-derequire",build:"shx mkdir -p build/ && npm run browserify -- --debug -t [ envify --INSPECTOR_VERSION dev ] -o build/aframe.js",codecov:"codecov",dev:"npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify",dist:"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"npm run browserify -s -- --debug | exorcist dist/aframe-master.js.map > dist/aframe-master.js","dist:min":"npm run browserify -s -- --debug -p [ minifyify --map aframe-master.min.js.map --output dist/aframe-master.min.js.map ] -o dist/aframe-master.min.js",docs:"markserv --dir docs --port 9001",preghpages:"node ./scripts/preghpages.js",ghpages:"ghpages -p gh-pages/",lint:"semistandard -v | snazzy","lint:fix":"semistandard --fix",precommit:"npm run lint",prepush:"node scripts/testOnlyCheck.js",prerelease:"node scripts/release.js 1.0.4 1.1.0",start:"npm run dev","start:https":"cross-env SSL=true npm run dev",test:"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:nobrowser":"NO_BROWSER=true npm test","test:node":"mocha --ui tdd tests/node"},repository:"aframevr/aframe",license:"MIT",files:["dist/*","docs/**/*","src/**/*","vendor/**/*"],dependencies:{"custom-event-polyfill":"^1.0.6",debug:"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","document-register-element":"dmarcos/document-register-element#8ccc532b7f3744be954574caf3072a5fd260ca90","load-bmfont":"^1.2.3","object-assign":"^4.0.1",present:"0.0.6","promise-polyfill":"^3.1.0","super-animejs":"^3.1.0","super-three":"^0.125.1","three-bmfont-text":"dmarcos/three-bmfont-text#1babdf8507c731a18f8af3b807292e2b9740955e","webvr-polyfill":"^0.10.12"},devDependencies:{browserify:"^13.1.0","browserify-css":"^0.8.4","browserify-derequire":"^0.9.4","browserify-istanbul":"^2.0.0",budo:"^9.2.0",chai:"^3.5.0","chai-shallow-deep-equal":"^1.4.0",chalk:"^1.1.3",codecov:"^1.0.1","cross-env":"^5.0.1",envify:"^3.4.1",exorcist:"^0.4.0",ghpages:"0.0.8","git-rev":"^0.2.1",glob:"^7.1.1",husky:"^0.11.7",istanbul:"^0.4.5",jsdom:"^9.11.0",karma:"1.4.1","karma-browserify":"^5.1.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^1.2.0","karma-mocha":"^1.1.1","karma-mocha-reporter":"^2.1.0","karma-sinon-chai":"1.2.4",lolex:"^1.5.1",markserv:"github:sukima/markserv#feature/fix-broken-websoketio-link",minifyify:"^7.3.3",mocha:"^3.0.2","mozilla-download":"^1.1.1","replace-in-file":"^2.5.3",semistandard:"^9.0.0",shelljs:"^0.7.7",shx:"^0.2.2",sinon:"^1.17.5","sinon-chai":"2.8.0",snazzy:"^5.0.0","too-wordy":"ngokevin/too-wordy",uglifyjs:"^2.4.10","write-good":"^0.9.1"},link:!0,browserify:{transform:["browserify-css","envify"]},semistandard:{ignore:["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},keywords:["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","web-components","webvr"],"browserify-css":{minify:!0},engines:{node:">= 4.6.0",npm:"^2.15.9"}}},{}],74:[function(c,g,L){var l=c("super-animejs"),h=c("../core/component").components,m=c("../core/component").registerComponent,y=c("../lib/three"),d=c("../utils"),p=new y.Color,v=new y.Color,b=d.entity.getComponentProperty,E=d.entity.setComponentProperty,S={},x="color",T="position",_="rotation",D="scale",C="components",I="object3D";g.exports.Component=m("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(Y){return Y===!0||Y==="true"?!0:Y===!1||Y==="false"?!1:parseInt(Y,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var Y=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){Y.animationIsPlaying=!1,Y.el.emit("animationcomplete",Y.eventDetail,!1),Y.id&&Y.el.emit("animationcomplete__"+Y.id,Y.eventDetail,!1)}}},update:function(Y){var de=this.config,ne=this.data;this.animationIsPlaying=!1,!!this.data.enabled&&(!ne.property||(de.autoplay=!1,de.direction=ne.dir,de.duration=ne.dur,de.easing=ne.easing,de.elasticity=ne.elasticity,de.loop=ne.loop,de.round=ne.round,this.createAndStartAnimation()))},tick:function(Y,de){!this.animationIsPlaying||(this.time+=de,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){!this.paused||(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var Y=this.data;if(this.updateConfig(),this.animationIsPlaying=!1,this.animation=l(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!(!Y.autoplay||Y.startEvents&&Y.startEvents.length)){if(Y.delay){setTimeout(this.beginAnimation,Y.delay);return}this.beginAnimation()}},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){if(!!this.data.enabled){if(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=l(this.config),this.data.delay){setTimeout(this.beginAnimation,this.data.delay);return}this.beginAnimation()}},updateConfigForRawColor:function(){var Y=this.config,de=this.data,ne=this.el,xe,Be,je;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){xe=de.from===""?J(ne,de.property):de.from,je=de.to,this.setColorConfig(xe,je),xe=this.fromColor,je=this.toColor,this.targetsArray.length=0,this.targetsArray.push(xe),Y.targets=this.targetsArray;for(Be in je)Y[Be]=je[Be];Y.update=function(){var Ge={};return function(ct){var lt;lt=ct.animatables[0].target,!(lt.r===Ge.r&&lt.g===Ge.g&&lt.b===Ge.b)&&le(ne,de.property,lt,de.type)}}()}},updateConfigForDefault:function(){var Y=this.config,de=this.data,ne=this.el,xe,Be,je,Ge;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(de.from===""?xe=ue(de)?J(ne,de.property):b(ne,de.property):xe=de.from,Ge=de.to,je=!isNaN(xe||Ge),je?(xe=parseFloat(xe),Ge=parseFloat(Ge)):(xe=xe&&xe.toString(),Ge=Ge&&Ge.toString()),Be=de.to==="true"||de.to==="false"||de.to===!0||de.to===!1,Be&&(xe=de.from==="true"||de.from===!0?1:0,Ge=de.to==="true"||de.to===!0?1:0),this.targets.aframeProperty=xe,Y.targets=this.targets,Y.aframeProperty=Ge,Y.update=function(){var ct;return function(lt){var Et;Et=lt.animatables[0].target.aframeProperty,Et!==ct&&(ct=Et,Be&&(Et=Et>=1),ue(de)?le(ne,de.property,Et,de.type):E(ne,de.property,Et))}}())},updateConfigForVector:function(){var Y=this.config,de=this.data,ne=this.el,xe,Be,je;Be=de.from!==""?d.coordinates.parse(de.from):b(ne,de.property),je=d.coordinates.parse(de.to),de.property===_&&(U(Be),U(je)),this.targetsArray.length=0,this.targetsArray.push(Be),Y.targets=this.targetsArray;for(xe in je)Y[xe]=je[xe];if(de.property===T||de.property===_||de.property===D){Y.update=function(){var Ge={};return function(ct){var lt=ct.animatables[0].target;de.property===D&&(lt.x=Math.max(1e-4,lt.x),lt.y=Math.max(1e-4,lt.y),lt.z=Math.max(1e-4,lt.z)),!(lt.x===Ge.x&&lt.y===Ge.y&&lt.z===Ge.z)&&(Ge.x=lt.x,Ge.y=lt.y,Ge.z=lt.z,ne.object3D[de.property].set(lt.x,lt.y,lt.z))}}();return}Y.update=function(){var Ge={};return function(ct){var lt=ct.animatables[0].target;lt.x===Ge.x&&lt.y===Ge.y&&lt.z===Ge.z||(Ge.x=lt.x,Ge.y=lt.y,Ge.z=lt.z,E(ne,de.property,lt))}}()},updateConfig:function(){var Y;Y=B(this.el,this.data.property),ue(this.data)&&this.data.type===x?this.updateConfigForRawColor():Y==="vec2"||Y==="vec3"||Y==="vec4"?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(Y){var de,ne=this.data,xe=this.el,Be=this;return ne.from!==""||!ne.property.startsWith(C)||(de=te(ne.property)[1],xe.components[de])?!1:(xe.addEventListener("componentinitialized",function je(Ge){Ge.detail.name===de&&(Y(),Be.animation=l(Be.config),xe.removeEventListener("componentinitialized",je))}),!0)},stopRelatedAnimations:function(){var Y,de;for(de in this.el.components)Y=this.el.components[de],de!==this.attrName&&Y.name==="animation"&&(!Y.animationIsPlaying||Y.data.property===this.data.property&&(Y.animationIsPlaying=!1))},addEventListeners:function(){var Y=this.data,de=this.el;W(de,Y.startEvents,this.onStartEvent),W(de,Y.pauseEvents,this.pauseAnimation),W(de,Y.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var Y=this.data,de=this.el;oe(de,Y.startEvents,this.onStartEvent),oe(de,Y.pauseEvents,this.pauseAnimation),oe(de,Y.resumeEvents,this.resumeAnimation)},setColorConfig:function(Y,de){p.set(Y),v.set(de),Y=this.fromColor,de=this.toColor,Y.r=p.r,Y.g=p.g,Y.b=p.b,de.r=v.r,de.g=v.g,de.b=v.b}});function B(Y,de){var ne,xe,Be,je;return Be=de.split("."),xe=Be[0],je=Be[1],ne=Y.components[xe]||h[xe],!ne||je&&!ne.schema[je]?null:je?ne.schema[je].type:ne.schema.type}function U(Y){Y.x=y.Math.degToRad(Y.x),Y.y=y.Math.degToRad(Y.y),Y.z=y.Math.degToRad(Y.z)}function W(Y,de,ne){var xe;for(xe=0;xe<de.length;xe++)Y.addEventListener(de[xe],ne)}function oe(Y,de,ne){var xe;for(xe=0;xe<de.length;xe++)Y.removeEventListener(de[xe],ne)}function J(Y,de){var ne,xe,Be;for(xe=te(de),Be=Y,ne=0;ne<xe.length;ne++)Be=Be[xe[ne]];if(Be===void 0)throw console.log(Y),new Error("[animation] property ("+de+") could not be found");return Be}function le(Y,de,ne,xe){var Be,je,Ge,ct;for(de.startsWith("object3D.rotation")&&(ne=y.Math.degToRad(ne)),je=te(de),ct=Y,Be=0;Be<je.length-1;Be++)ct=ct[je[Be]];if(Ge=je[je.length-1],xe===x){"r"in ct[Ge]?(ct[Ge].r=ne.r,ct[Ge].g=ne.g,ct[Ge].b=ne.b):(ct[Ge].x=ne.r,ct[Ge].y=ne.g,ct[Ge].z=ne.b);return}ct[Ge]=ne}function te(Y){return Y in S||(S[Y]=Y.split(".")),S[Y]}function ue(Y){return Y.isRawProperty||Y.property.startsWith(C)||Y.property.startsWith(I)}},{"../core/component":131,"../lib/three":179,"../utils":205,"super-animejs":56}],75:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../lib/three");g.exports.Component=l("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var m,y=this.el;m=this.camera=new h.PerspectiveCamera,y.setObject3D("camera",m)},update:function(m){var y=this.data,d=this.camera;d.aspect=y.aspect||window.innerWidth/window.innerHeight,d.far=y.far,d.fov=y.fov,d.near=y.near,d.zoom=y.zoom,d.updateProjectionMatrix(),this.updateActiveCamera(m),this.updateSpectatorCamera(m)},updateActiveCamera:function(m){var y=this.data,d=this.el,p=this.system;m&&m.active===y.active||y.spectator||(y.active&&p.activeCameraEl!==d?p.setActiveCamera(d):!y.active&&p.activeCameraEl===d&&p.disableActiveCamera())},updateSpectatorCamera:function(m){var y=this.data,d=this.el,p=this.system;m&&m.spectator===y.spectator||(y.spectator&&p.spectatorCameraEl!==d?p.setSpectatorCamera(d):!y.spectator&&p.spectatorCameraEl===d&&p.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},{"../core/component":131,"../lib/three":179}],76:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/"),m=h.bind,y={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},d={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"},p={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},v={DOWN:["selectstart"],UP:["selectend"]},b="a-mouse-cursor-hover";g.exports.Component=l("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:h.device.isMobile()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity"]}},init:function(){var E=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.updateCanvasBounds=h.debounce(function(){E.canvasBounds=E.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=m(this.onCursorDown,this),this.onCursorUp=m(this.onCursorUp,this),this.onIntersection=m(this.onIntersection,this),this.onIntersectionCleared=m(this.onIntersectionCleared,this),this.onMouseMove=m(this.onMouseMove,this),this.onEnterVR=m(this.onEnterVR,this)},update:function(E){this.data.rayOrigin!==E.rayOrigin&&this.updateMouseEventListeners()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var E=this.el;E.removeState(d.HOVERING),E.removeState(d.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(d.HOVERED),this.removeEventListeners()},addEventListeners:function(){var E,S=this.data,x=this.el,T=this;function _(){E=x.sceneEl.canvas,!(S.downEvents.length||S.upEvents.length)&&(p.DOWN.forEach(function(D){E.addEventListener(D,T.onCursorDown)}),p.UP.forEach(function(D){E.addEventListener(D,T.onCursorUp)}))}E=x.sceneEl.canvas,E?_():x.sceneEl.addEventListener("render-target-loaded",_),S.downEvents.forEach(function(D){x.addEventListener(D,T.onCursorDown)}),S.upEvents.forEach(function(D){x.addEventListener(D,T.onCursorUp)}),x.addEventListener("raycaster-intersection",this.onIntersection),x.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),x.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),x.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var E,S=this.data,x=this.el,T=this;E=x.sceneEl.canvas,E&&!S.downEvents.length&&!S.upEvents.length&&(p.DOWN.forEach(function(_){E.removeEventListener(_,T.onCursorDown)}),p.UP.forEach(function(_){E.removeEventListener(_,T.onCursorUp)})),S.downEvents.forEach(function(_){x.removeEventListener(_,T.onCursorDown)}),S.upEvents.forEach(function(_){x.removeEventListener(_,T.onCursorUp)}),x.removeEventListener("raycaster-intersection",this.onIntersection),x.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),E.removeEventListener("mousemove",this.onMouseMove),E.removeEventListener("touchstart",this.onMouseMove),E.removeEventListener("touchmove",this.onMouseMove),x.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),x.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds)},updateMouseEventListeners:function(){var E,S=this.el;E=S.sceneEl.canvas,E.removeEventListener("mousemove",this.onMouseMove),E.removeEventListener("touchmove",this.onMouseMove),S.setAttribute("raycaster","useWorldCoordinates",!1),this.data.rayOrigin==="mouse"&&(E.addEventListener("mousemove",this.onMouseMove,!1),E.addEventListener("touchmove",this.onMouseMove,!1),S.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:function(){var E=new THREE.Vector3,S=new THREE.Vector2,x=new THREE.Vector3,T={origin:x,direction:E};return function(_){var D=this.canvasBounds,C=this.el.sceneEl.camera,I,B,U;C.parent.updateMatrixWorld(),_.type==="touchmove"||_.type==="touchstart"?B=_.touches.item(0):B=_,I=B.clientX-D.left,U=B.clientY-D.top,S.x=I/D.width*2-1,S.y=-(U/D.height)*2+1,x.setFromMatrixPosition(C.matrixWorld),E.set(S.x,S.y,.5).unproject(C).sub(x).normalize(),this.el.setAttribute("raycaster",T),_.type==="touchmove"&&_.preventDefault()}}(),onCursorDown:function(E){this.isCursorDown=!0,this.data.rayOrigin==="mouse"&&E.type==="touchstart"&&(this.onMouseMove(E),this.el.components.raycaster.checkIntersections(),E.preventDefault()),this.twoWayEmit(y.MOUSEDOWN),this.cursorDownEl=this.intersectedEl},onCursorUp:function(E){if(!!this.isCursorDown){this.isCursorDown=!1;var S=this.data;this.twoWayEmit(y.MOUSEUP),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(y.MOUSEUP,this.intersectedEventDetail)),(!S.fuse||S.rayOrigin==="mouse")&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit(y.CLICK),this.cursorDownEl=null,E.type==="touchend"&&E.preventDefault()}},onIntersection:function(E){var S,x=this.el,T,_,D;T=E.detail.els[0]===x?1:0,D=E.detail.intersections[T],_=E.detail.els[T],!!_&&this.intersectedEl!==_&&(this.intersectedEl&&(S=this.el.components.raycaster.getIntersection(this.intersectedEl),S&&S.distance<=D.distance)||(this.clearCurrentIntersection(!0),this.setIntersection(_,D)))},onIntersectionCleared:function(E){var S=E.detail.clearedEls;S.indexOf(this.intersectedEl)!==-1&&this.clearCurrentIntersection()},onEnterVR:function(){this.clearCurrentIntersection(!0);var E=this.el.sceneEl.xrSession,S=this;!E||this.data.rayOrigin!=="mouse"&&(v.DOWN.forEach(function(x){E.addEventListener(x,S.onCursorDown)}),v.UP.forEach(function(x){E.addEventListener(x,S.onCursorUp)}))},setIntersection:function(E,S){var x=this.el,T=this.data,_=this;this.intersectedEl!==E&&(this.intersectedEl=E,x.addState(d.HOVERING),E.addState(d.HOVERED),this.twoWayEmit(y.MOUSEENTER),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.add(b),!(T.fuseTimeout===0||!T.fuse)&&(x.addState(d.FUSING),this.twoWayEmit(y.FUSING),this.fuseTimeout=setTimeout(function(){x.removeState(d.FUSING),_.twoWayEmit(y.CLICK)},T.fuseTimeout)))},clearCurrentIntersection:function(E){var S,x,T,_=this.el;!this.intersectedEl||(this.intersectedEl.removeState(d.HOVERED),_.removeState(d.HOVERING),_.removeState(d.FUSING),this.twoWayEmit(y.MOUSELEAVE),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.remove(b),this.intersectedEl=null,clearTimeout(this.fuseTimeout),E!==!0&&(T=this.el.components.raycaster.intersections,T.length!==0&&(S=T[0].object.el===_?1:0,x=T[S],!!x&&this.setIntersection(x.object.el,x))))},twoWayEmit:function(E){var S=this.el,x=this.intersectedEl,T;T=this.el.components.raycaster.getIntersection(x),this.eventDetail.intersectedEl=x,this.eventDetail.intersection=T,S.emit(E,this.eventDetail),!!x&&(this.intersectedEventDetail.intersection=T,x.emit(E,this.intersectedEventDetail))}})},{"../core/component":131,"../utils/":205}],77:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/bind"),m=c("../utils/tracked-controls"),y=m.checkControllerPresentAndSetup,d=m.emitIfAxesChanged,p=m.onButtonEvent,v="https://cdn.aframe.io/controllers/google/",b=v+"vr_controller_daydream.obj",E=v+"vr_controller_daydream.mtl",S=c("../utils/").device.isWebXRAvailable,x="google-daydream",T="Daydream Controller",_=S?x:T,D={axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},C={axes:{touchpad:[0,1]},buttons:["none","none","touchpad","menu","system"]},I=S?C:D;g.exports.Component=l("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:I,bindMethods:function(){this.onModelLoaded=h(this.onModelLoaded,this),this.onControllersUpdate=h(this.onControllersUpdate,this),this.checkIfControllerPresent=h(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=h(this.removeControllersUpdateListener,this),this.onAxisMoved=h(this.onAxisMoved,this)},init:function(){var B=this;this.onButtonChanged=h(this.onButtonChanged,this),this.onButtonDown=function(U){p(U.detail.id,"down",B)},this.onButtonUp=function(U){p(U.detail.id,"up",B)},this.onButtonTouchStart=function(U){p(U.detail.id,"touchstart",B)},this.onButtonTouchEnd=function(U){p(U.detail.id,"touchend",B)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var B=this.el;B.addEventListener("buttonchanged",this.onButtonChanged),B.addEventListener("buttondown",this.onButtonDown),B.addEventListener("buttonup",this.onButtonUp),B.addEventListener("touchstart",this.onButtonTouchStart),B.addEventListener("touchend",this.onButtonTouchEnd),B.addEventListener("model-loaded",this.onModelLoaded),B.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var B=this.el;B.removeEventListener("buttonchanged",this.onButtonChanged),B.removeEventListener("buttondown",this.onButtonDown),B.removeEventListener("buttonup",this.onButtonUp),B.removeEventListener("touchstart",this.onButtonTouchStart),B.removeEventListener("touchend",this.onButtonTouchEnd),B.removeEventListener("model-loaded",this.onModelLoaded),B.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,_,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var B=this.el,U=this.data;B.setAttribute("tracked-controls",{armModel:U.armModel,hand:U.hand,idPrefix:_,id:_,orientationOffset:U.orientationOffset}),!!this.data.model&&this.el.setAttribute("obj-model",{obj:b,mtl:E})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(B){var U=B.detail.model,W;!this.data.model||(W=this.buttonMeshes={},W.menu=U.getObjectByName("AppButton_AppButton_Cylinder.004"),W.system=U.getObjectByName("HomeButton_HomeButton_Cylinder.005"),W.trackpad=U.getObjectByName("TouchPad_TouchPad_Cylinder.003"),W.touchpad=U.getObjectByName("TouchPad_TouchPad_Cylinder.003"),U.position.set(0,0,-.04))},onAxisMoved:function(B){d(this,this.mapping.axes,B)},onButtonChanged:function(B){var U=this.mapping.buttons[B.detail.id];!U||this.el.emit(U+"changed",B.detail.state)},updateModel:function(B,U){!this.data.model||this.updateButtonModel(B,U)},updateButtonModel:function(B,U){var W=this.buttonMeshes;if(!(!W||!W[B])){var oe;switch(U){case"down":oe=this.data.buttonHighlightColor;break;case"touchstart":oe=this.data.buttonTouchedColor;break;default:oe=this.data.buttonColor}W[B].material.color.set(oe)}}})},{"../core/component":131,"../utils/":205,"../utils/bind":199,"../utils/tracked-controls":214}],78:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/bind"),m=c("../utils/tracked-controls"),y=m.checkControllerPresentAndSetup,d=m.emitIfAxesChanged,p=m.onButtonEvent,v=c("../utils/").device.isWebXRAvailable,b="https://cdn.aframe.io/controllers/samsung/",E=b+"gear_vr_controller.obj",S=b+"gear_vr_controller.mtl",x="samsung-gearvr",T="Gear VR",_=v?x:T,D={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},C={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},I=v?C:D;g.exports.Component=l("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:I,bindMethods:function(){this.onModelLoaded=h(this.onModelLoaded,this),this.onControllersUpdate=h(this.onControllersUpdate,this),this.checkIfControllerPresent=h(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=h(this.removeControllersUpdateListener,this),this.onAxisMoved=h(this.onAxisMoved,this)},init:function(){var B=this;this.onButtonChanged=h(this.onButtonChanged,this),this.onButtonDown=function(U){p(U.detail.id,"down",B)},this.onButtonUp=function(U){p(U.detail.id,"up",B)},this.onButtonTouchStart=function(U){p(U.detail.id,"touchstart",B)},this.onButtonTouchEnd=function(U){p(U.detail.id,"touchend",B)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var B=this.el;B.addEventListener("buttonchanged",this.onButtonChanged),B.addEventListener("buttondown",this.onButtonDown),B.addEventListener("buttonup",this.onButtonUp),B.addEventListener("touchstart",this.onButtonTouchStart),B.addEventListener("touchend",this.onButtonTouchEnd),B.addEventListener("model-loaded",this.onModelLoaded),B.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var B=this.el;B.removeEventListener("buttonchanged",this.onButtonChanged),B.removeEventListener("buttondown",this.onButtonDown),B.removeEventListener("buttonup",this.onButtonUp),B.removeEventListener("touchstart",this.onButtonTouchStart),B.removeEventListener("touchend",this.onButtonTouchEnd),B.removeEventListener("model-loaded",this.onModelLoaded),B.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,_,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var B=this.el,U=this.data;B.setAttribute("tracked-controls",{armModel:U.armModel,hand:U.hand,idPrefix:_,id:_,orientationOffset:U.orientationOffset}),!!this.data.model&&this.el.setAttribute("obj-model",{obj:E,mtl:S})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(B){var U=B.detail.model,W;!this.data.model||(W=this.buttonMeshes={},W.trigger=U.children[2],W.trackpad=U.children[1],W.touchpad=U.children[1])},onButtonChanged:function(B){var U=this.mapping.buttons[B.detail.id];!U||this.el.emit(U+"changed",B.detail.state)},onAxisMoved:function(B){d(this,this.mapping.axes,B)},updateModel:function(B,U){!this.data.model||this.updateButtonModel(B,U)},updateButtonModel:function(B,U){var W=this.buttonMeshes;if(!(!W||!W[B])){var oe;switch(U){case"down":oe=this.data.buttonHighlightColor;break;case"touchstart":oe=this.data.buttonTouchedColor;break;default:oe=this.data.buttonColor}W[B].material.color.set(oe)}}})},{"../core/component":131,"../utils/":205,"../utils/bind":199,"../utils/tracked-controls":214}],79:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/bind"),m=c("../utils/tracked-controls"),y=m.checkControllerPresentAndSetup,d=m.emitIfAxesChanged,p=m.onButtonEvent,v="generic",b={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]};g.exports.Component=l("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},orientationOffset:{type:"vec3"},disabled:{default:!1}},mapping:b,bindMethods:function(){this.onControllersUpdate=h(this.onControllersUpdate,this),this.checkIfControllerPresent=h(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=h(this.removeControllersUpdateListener,this),this.onAxisMoved=h(this.onAxisMoved,this)},init:function(){var E=this;this.onButtonChanged=h(this.onButtonChanged,this),this.onButtonDown=function(S){p(S.detail.id,"down",E)},this.onButtonUp=function(S){p(S.detail.id,"up",E)},this.onButtonTouchStart=function(S){p(S.detail.id,"touchstart",E)},this.onButtonTouchEnd=function(S){p(S.detail.id,"touchend",E)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods(),this.el.addEventListener("controllerconnected",function(S){S.detail.name!==E.name&&(E.wasControllerConnected=!0,E.removeEventListeners(),E.removeControllersUpdateListener())})},addEventListeners:function(){var E=this.el;E.addEventListener("buttonchanged",this.onButtonChanged),E.addEventListener("buttondown",this.onButtonDown),E.addEventListener("buttonup",this.onButtonUp),E.addEventListener("touchstart",this.onButtonTouchStart),E.addEventListener("touchend",this.onButtonTouchEnd),E.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var E=this.el;E.removeEventListener("buttonchanged",this.onButtonChanged),E.removeEventListener("buttondown",this.onButtonDown),E.removeEventListener("buttonup",this.onButtonUp),E.removeEventListener("touchstart",this.onButtonTouchStart),E.removeEventListener("touchend",this.onButtonTouchEnd),E.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var E=this.data,S=E.hand?E.hand:void 0;y(this,v,{hand:S,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var E=this.el,S=this.data;if(this.el.components["tracked-controls"]){this.removeEventListeners();return}E.setAttribute("tracked-controls",{hand:S.hand,idPrefix:v,orientationOffset:S.orientationOffset,iterateControllerProfiles:!0}),!!this.data.defaultModel&&this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(E){var S=this.mapping.buttons[E.detail.id];!S||this.el.emit(S+"changed",E.detail.state)},onAxisMoved:function(E){d(this,this.mapping.axes,E)},initDefaultModel:function(){var E=this.modelEl=document.createElement("a-entity");E.setAttribute("geometry",{primitive:"sphere",radius:.03}),E.setAttribute("material",{color:this.data.color}),this.el.appendChild(E)}})},{"../core/component":131,"../utils/bind":199,"../utils/tracked-controls":214}],80:[function(c,g,L){var l=c("../core/geometry").geometries,h=c("../core/geometry").geometryNames,m=c("../core/component").registerComponent,y=c("../lib/three"),d=new y.BufferGeometry;g.exports.Component=m("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:h,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(p){var v=this.data,b=this.el,E,S=this.system;this.geometry&&(S.unuseGeometry(p),this.geometry=null),this.geometry=S.getOrCreateGeometry(v),E=b.getObject3D("mesh"),E?E.geometry=this.geometry:(E=new y.Mesh,E.geometry=this.geometry,this.el.getAttribute("material")||(E.material=new y.MeshStandardMaterial({color:Math.random()*16777215,metalness:0,roughness:.5})),b.setObject3D("mesh",E))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=d,this.geometry=null},updateSchema:function(p){var v=this.oldData&&this.oldData.primitive,b=p.primitive,E=l[b]&&l[b].schema;if(!E)throw new Error("Unknown geometry schema `"+b+"`");v&&v===b||this.extendSchema(E)}})},{"../core/component":131,"../core/geometry":132,"../lib/three":179}],81:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../lib/three"),m=c("../utils/"),y=m.debug("components:gltf-model:warn");g.exports.Component=l("gltf-model",{schema:{type:"model"},init:function(){var d=this.system.getDRACOLoader();this.model=null,this.loader=new h.GLTFLoader,d&&this.loader.setDRACOLoader(d)},update:function(){var d=this,p=this.el,v=this.data;!v||(this.remove(),this.loader.load(v,function(E){d.model=E.scene||E.scenes[0],d.model.animations=E.animations,p.setObject3D("mesh",d.model),p.emit("model-loaded",{format:"gltf",model:d.model})},void 0,function(E){var S=E&&E.message?E.message:"Failed to load glTF model";y(S),p.emit("model-error",{format:"gltf",src:v})}))},remove:function(){!this.model||this.el.removeObject3D("mesh")}})},{"../core/component":131,"../lib/three":179,"../utils/":205}],82:[function(c,g,L){var l=c("../core/component").registerComponent,h={toonLeft:"https://cdn.aframe.io/controllers/hands/leftHand.glb",toonRight:"https://cdn.aframe.io/controllers/hands/rightHand.glb",lowPolyLeft:"https://cdn.aframe.io/controllers/hands/leftHandLow.glb",lowPolyRight:"https://cdn.aframe.io/controllers/hands/rightHandLow.glb",highPolyLeft:"https://cdn.aframe.io/controllers/hands/leftHandHigh.glb",highPolyRight:"https://cdn.aframe.io/controllers/hands/rightHandHigh.glb"},m={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},y={};y[m.fist]="grip",y[m.thumbUp]="pistol",y[m.point]="pointing",g.exports.Component=l("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},init:function(){var v=this,b=this.el;this.gesture=m.open,this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){v.handleButton("grip","down")},this.onGripUp=function(){v.handleButton("grip","up")},this.onTrackpadDown=function(){v.handleButton("trackpad","down")},this.onTrackpadUp=function(){v.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){v.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){v.handleButton("trackpad","touchend")},this.onTriggerDown=function(){v.handleButton("trigger","down")},this.onTriggerUp=function(){v.handleButton("trigger","up")},this.onTriggerTouchStart=function(){v.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){v.handleButton("trigger","touchend")},this.onGripTouchStart=function(){v.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){v.handleButton("grip","touchend")},this.onThumbstickDown=function(){v.handleButton("thumbstick","down")},this.onThumbstickUp=function(){v.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){v.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){v.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){v.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){v.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){v.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){v.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),b.addEventListener("controllerconnected",this.onControllerConnected),b.addEventListener("controllerdisconnected",this.onControllerDisconnected),b.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(v,b){var E=this.el.getObject3D("mesh");!E||!E.mixer||E.mixer.update(b/1e3)},onControllerConnected:function(){this.el.object3D.visible=!0},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var v=this.el;v.addEventListener("gripdown",this.onGripDown),v.addEventListener("gripup",this.onGripUp),v.addEventListener("trackpaddown",this.onTrackpadDown),v.addEventListener("trackpadup",this.onTrackpadUp),v.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),v.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),v.addEventListener("triggerdown",this.onTriggerDown),v.addEventListener("triggerup",this.onTriggerUp),v.addEventListener("triggertouchstart",this.onTriggerTouchStart),v.addEventListener("triggertouchend",this.onTriggerTouchEnd),v.addEventListener("griptouchstart",this.onGripTouchStart),v.addEventListener("griptouchend",this.onGripTouchEnd),v.addEventListener("thumbstickdown",this.onThumbstickDown),v.addEventListener("thumbstickup",this.onThumbstickUp),v.addEventListener("abuttontouchstart",this.onAorXTouchStart),v.addEventListener("abuttontouchend",this.onAorXTouchEnd),v.addEventListener("bbuttontouchstart",this.onBorYTouchStart),v.addEventListener("bbuttontouchend",this.onBorYTouchEnd),v.addEventListener("xbuttontouchstart",this.onAorXTouchStart),v.addEventListener("xbuttontouchend",this.onAorXTouchEnd),v.addEventListener("ybuttontouchstart",this.onBorYTouchStart),v.addEventListener("ybuttontouchend",this.onBorYTouchEnd),v.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),v.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var v=this.el;v.removeEventListener("gripdown",this.onGripDown),v.removeEventListener("gripup",this.onGripUp),v.removeEventListener("trackpaddown",this.onTrackpadDown),v.removeEventListener("trackpadup",this.onTrackpadUp),v.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),v.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),v.removeEventListener("triggerdown",this.onTriggerDown),v.removeEventListener("triggerup",this.onTriggerUp),v.removeEventListener("triggertouchstart",this.onTriggerTouchStart),v.removeEventListener("triggertouchend",this.onTriggerTouchEnd),v.removeEventListener("griptouchstart",this.onGripTouchStart),v.removeEventListener("griptouchend",this.onGripTouchEnd),v.removeEventListener("thumbstickdown",this.onThumbstickDown),v.removeEventListener("thumbstickup",this.onThumbstickUp),v.removeEventListener("abuttontouchstart",this.onAorXTouchStart),v.removeEventListener("abuttontouchend",this.onAorXTouchEnd),v.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),v.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),v.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),v.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),v.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),v.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),v.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),v.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(v){var b,E=this.el,S=this.data.hand,x=this.data.handModelStyle,T=this.data.color,_=this;if(b={hand:S,model:!1},S!==v){var D=h[x+S.charAt(0).toUpperCase()+S.slice(1)];this.loader.load(D,function(C){var I=C.scene.children[0],B=S==="left"?Math.PI/2:-Math.PI/2;I.mixer=new THREE.AnimationMixer(I),_.clips=C.animations,E.setObject3D("mesh",I);var U=I.children[1].material;U.color=new THREE.Color(T),I.position.set(0,0,0),I.rotation.set(0,0,B),E.setAttribute("magicleap-controls",b),E.setAttribute("vive-controls",b),E.setAttribute("oculus-touch-controls",b),E.setAttribute("windows-motion-controls",b)})}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(v,b){var E,S=b==="down",x=b==="touchstart";if(b.indexOf("touch")===0){if(x===this.touchedButtons[v])return;this.touchedButtons[v]=x}else{if(S===this.pressedButtons[v])return;this.pressedButtons[v]=S}E=this.gesture,this.gesture=this.determineGesture(),this.gesture!==E&&(this.animateGesture(this.gesture,E),this.emitGestureEvents(this.gesture,E))},determineGesture:function(){var v,b=this.pressedButtons.grip,E=this.pressedButtons.surface||this.touchedButtons.surface,S=this.pressedButtons.trackpad||this.touchedButtons.trackpad,x=this.pressedButtons.trigger||this.touchedButtons.trigger,T=this.touchedButtons.AorX||this.touchedButtons.BorY,_=p(this.el.components["tracked-controls"]);return _?b||x?v=m.fist:S&&(v=m.point):b?E||T||S?v=x?m.fist:m.point:v=x?m.thumbUp:m.pointThumb:x&&(v=m.hold),v},getClip:function(v){var b,E;for(E=0;E<this.clips.length;E++)if(b=this.clips[E],b.name===v)return b},animateGesture:function(v,b){if(v){this.playAnimation(v||m.open,b,!1);return}this.playAnimation(b,b,!0)},emitGestureEvents:function(v,b){var E=this.el,S;b!==v&&(S=d(b,!1),S&&E.emit(S),S=d(v,!0),S&&E.emit(S))},playAnimation:function(v,b,E){var S,x,T=this.el.getObject3D("mesh"),_;if(!!T){if(T.mixer.stopAllAction(),S=this.getClip(v),_=T.mixer.clipAction(S),_.clampWhenFinished=!0,_.loop=THREE.LoopRepeat,_.repetitions=0,_.timeScale=E?-1:1,_.time=E?S.duration:0,_.weight=1,!b||v===b){T.mixer.stopAllAction(),_.play();return}S=this.getClip(b),x=T.mixer.clipAction(S),x.weight=.15,x.play(),_.play(),x.crossFadeTo(_,.15,!0)}}});function d(v,b){var E;if(!!v){if(E=y[v],E==="grip")return E+(b?"close":"open");if(E==="point")return E+(b?"up":"down");if(E==="pointing"||E==="pistol")return E+(b?"start":"end")}}function p(v){var b=v&&v.controller,E=b&&(b.id&&b.id.indexOf("OpenVR ")===0||b.profiles&&b.profiles[0]&&b.profiles[0]==="htc-vive-controller-mv");return E}},{"../core/component":131}],83:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/bind"),m=c("../utils/tracked-controls"),y=m.checkControllerPresentAndSetup,d="https://cdn.aframe.io/controllers/oculus-hands/unity/left.glb",p="https://cdn.aframe.io/controllers/oculus-hands/unity/right.glb",v={left:"b_l_",right:"b_r_"},b=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],E={wrist:"wrist","thumb-metacarpal":"thumb1","thumb-phalanx-proximal":"thumb2","thumb-phalanx-distal":"thumb3","thumb-tip":"thumb_null","index-finger-phalanx-proximal":"index1","index-finger-phalanx-intermediate":"index2","index-finger-phalanx-distal":"index3","index-finger-tip":"index_null","middle-finger-phalanx-proximal":"middle1","middle-finger-phalanx-intermediate":"middle2","middle-finger-phalanx-distal":"middle3","middle-finger-tip":"middle_null","ring-finger-phalanx-proximal":"ring1","ring-finger-phalanx-intermediate":"ring2","ring-finger-phalanx-distal":"ring3","ring-finger-tip":"ring_null","pinky-finger-metacarpal":"pinky0","pinky-finger-phalanx-proximal":"pinky1","pinky-finger-phalanx-intermediate":"pinky2","pinky-finger-phalanx-distal":"pinky3","pinky-finger-tip":"pinky_null"},S=.015,x=.03,T=.5;g.exports.Component=l("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"}},bindMethods:function(){this.onControllersUpdate=h(this.onControllersUpdate,this),this.checkIfControllerPresent=h(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=h(this.removeControllersUpdateListener,this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var _=0;_<this.jointEls.length;++_)this.jointEls[_].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var _=0;_<this.jointEls.length;++_)this.jointEls[_].object3D.visible=!1},init:function(){var _=this.el.sceneEl,D=_.getAttribute("webxr").optionalFeatures;D.push("hand-tracking"),_.setAttribute("webxr",{optionalFeatures:D}),this.onModelLoaded=this.onModelLoaded.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new THREE.Vector3},this.indexTipPosition=new THREE.Vector3,this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace)},updateReferenceSpace:function(){var _=this,D=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,!!D){var C=_.el.sceneEl.systems.webxr.sessionReferenceSpaceType;D.requestReferenceSpace(C).then(function(I){_.referenceSpace=I.getOffsetReferenceSpace(new XRRigidTransform({x:0,y:1.5,z:0}))}).catch(function(I){throw _.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(C,"tracked-controls-webxr uses reference space "+C),I})}},checkIfControllerPresent:function(){var _=this.data,D=_.hand?_.hand:void 0;y(this,"",{hand:D,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var _=this.el.sceneEl,D=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,C=_.frame,I=this.el.components["tracked-controls-webxr"];!D||!C||!I||D.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),C.getJointPose&&this.updateHandModel(),this.detectGesture())},updateHandModel:function(){this.data.modelStyle==="dots"&&this.updateHandDotsModel(),this.data.modelStyle==="mesh"&&this.updateHandMeshModel()},getBone:function(_){for(var D=this.bones,C=0;C<D.length;C++)if(D[C].name===_)return D[C];return null},updateHandMeshModel:function(){var _=this.el.sceneEl.frame,D=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,C=this.referenceSpace;if(!(!D||!this.mesh||!C)){this.mesh.visible=!1;for(var I of D.hand.values()){var B,U,W;U=_.getJointPose(I,C),!!E[I.jointName]&&(B=this.getBone(v[this.data.hand]+E[I.jointName]),B!=null&&U&&(W=U.transform,this.mesh.visible=!0,B.position.copy(W.position).multiplyScalar(100),B.quaternion.set(W.orientation.x,W.orientation.y,W.orientation.z,W.orientation.w)))}}},updateHandDotsModel:function(){var _=this.el.sceneEl.frame,D=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,C=this.el.components["tracked-controls-webxr"],I=C.system.referenceSpace,B,U,W,oe=0;for(var J of D.hand.values())B=this.jointEls[oe++],U=B.object3D,W=_.getJointPose(J,I),B.object3D.visible=!!W,!!W&&(U.matrix.elements=W.transform.matrix,U.matrix.decompose(U.position,U.rotation,U.scale),B.setAttribute("scale",{x:W.radius,y:W.radius,z:W.radius}))},detectGesture:function(){this.detectPinch()},detectPinch:function(){var _=new THREE.Vector3;return function(){var D=this.el.sceneEl.frame,C=this.indexTipPosition,I=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,B=this.el.components["tracked-controls-webxr"],U=this.referenceSpace||B.system.referenceSpace,W=I.hand.get("index-finger-tip"),oe=I.hand.get("thumb-tip");if(!(!W||!oe)){var J=D.getJointPose(W,U),le=D.getJointPose(oe,U);if(!(!J||!le)){_.copy(le.transform.position),C.copy(J.transform.position);var te=C.distanceTo(_);te<S&&this.isPinched===!1&&(this.isPinched=!0,this.pinchEventDetail.position.copy(C).lerp(_,T),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchstarted",this.pinchEventDetail)),te>x&&this.isPinched===!0&&(this.isPinched=!1,this.pinchEventDetail.position.copy(C).lerp(_,T),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchended",this.pinchEventDetail)),this.isPinched&&(this.pinchEventDetail.position.copy(C).lerp(_,T),this.pinchEventDetail.position.y+=1.5,this.el.emit("pinchmoved",this.pinchEventDetail)),C.y+=1.5}}}}(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var _=this.el,D=this.data;_.setAttribute("tracked-controls",{hand:D.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var _;this.checkIfControllerPresent(),_=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,!!this.el.getObject3D("mesh")&&(!_||!_.hand||!_.hand[0])&&(this.el.getObject3D("mesh").visible=!1)},initDefaultModel:function(){this.el.getObject3D("mesh")||(this.data.modelStyle==="dots"&&this.initDotsModel(),this.data.modelStyle==="mesh"&&this.initMeshHandModel())},initDotsModel:function(){if(this.jointEls.length===0)for(var _=0;_<b.length;++_){var D=this.jointEl=document.createElement("a-entity");D.setAttribute("geometry",{primitive:"sphere",radius:1}),D.setAttribute("material",{color:this.data.modelColor}),D.object3D.visible=!1,this.el.appendChild(D),this.jointEls.push(D)}},initMeshHandModel:function(){var _=this.data.hand==="left"?d:p;this.el.setAttribute("gltf-model",_)},onModelLoaded:function(){var _=this.mesh=this.el.getObject3D("mesh").children[0],D=this.skinnedMesh=_.children[24];!this.skinnedMesh||(this.bones=D.skeleton.bones,this.el.removeObject3D("mesh"),_.position.set(0,1.5,0),_.rotation.set(0,0,0),D.frustumCulled=!1,D.material=new THREE.MeshStandardMaterial({skinning:!0,color:this.data.modelColor}),this.el.setObject3D("mesh",_))}})},{"../core/component":131,"../utils/bind":199,"../utils/tracked-controls":214}],84:[function(c,g,L){c("./animation"),c("./camera"),c("./cursor"),c("./daydream-controls"),c("./gearvr-controls"),c("./geometry"),c("./generic-tracked-controller-controls"),c("./gltf-model"),c("./hand-tracking-controls"),c("./hand-controls"),c("./layer"),c("./laser-controls"),c("./light"),c("./line"),c("./link"),c("./look-controls"),c("./magicleap-controls"),c("./material"),c("./obj-model"),c("./oculus-go-controls"),c("./oculus-touch-controls"),c("./position"),c("./raycaster"),c("./rotation"),c("./scale"),c("./shadow"),c("./sound"),c("./text"),c("./tracked-controls"),c("./tracked-controls-webvr"),c("./tracked-controls-webxr"),c("./visible"),c("./valve-index-controls"),c("./vive-controls"),c("./vive-focus-controls"),c("./wasd-controls"),c("./windows-motion-controls"),c("./scene/background"),c("./scene/debug"),c("./scene/device-orientation-permission-ui"),c("./scene/embedded"),c("./scene/inspector"),c("./scene/fog"),c("./scene/keyboard-shortcuts"),c("./scene/pool"),c("./scene/screenshot"),c("./scene/stats"),c("./scene/vr-mode-ui")},{"./animation":74,"./camera":75,"./cursor":76,"./daydream-controls":77,"./gearvr-controls":78,"./generic-tracked-controller-controls":79,"./geometry":80,"./gltf-model":81,"./hand-controls":82,"./hand-tracking-controls":83,"./laser-controls":85,"./layer":86,"./light":87,"./line":88,"./link":89,"./look-controls":90,"./magicleap-controls":91,"./material":92,"./obj-model":93,"./oculus-go-controls":94,"./oculus-touch-controls":95,"./position":96,"./raycaster":97,"./rotation":98,"./scale":99,"./scene/background":100,"./scene/debug":101,"./scene/device-orientation-permission-ui":102,"./scene/embedded":103,"./scene/fog":104,"./scene/inspector":105,"./scene/keyboard-shortcuts":106,"./scene/pool":107,"./scene/screenshot":108,"./scene/stats":109,"./scene/vr-mode-ui":110,"./shadow":111,"./sound":112,"./text":113,"./tracked-controls":116,"./tracked-controls-webvr":114,"./tracked-controls-webxr":115,"./valve-index-controls":117,"./visible":118,"./vive-controls":119,"./vive-focus-controls":120,"./wasd-controls":121,"./windows-motion-controls":122}],85:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/");l("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var m=this.config,y=this.data,d=this.el,p=this,v={hand:y.hand,model:y.model};d.setAttribute("daydream-controls",v),d.setAttribute("gearvr-controls",v),d.setAttribute("magicleap-controls",v),d.setAttribute("oculus-go-controls",v),d.setAttribute("oculus-touch-controls",v),d.setAttribute("valve-index-controls",v),d.setAttribute("vive-controls",v),d.setAttribute("vive-focus-controls",v),d.setAttribute("windows-motion-controls",v),d.setAttribute("generic-tracked-controller-controls",v),d.addEventListener("controllerconnected",b),d.addEventListener("controllerdisconnected",E),d.addEventListener("controllermodelready",function(S){b(S),p.modelReady=!0});function b(S){var x=m[S.detail.name];if(!!x){var T=h.extend({showLine:!0},x.raycaster||{});S.detail.rayOrigin&&(T.origin=S.detail.rayOrigin.origin,T.direction=S.detail.rayOrigin.direction,T.showLine=!0),S.detail.rayOrigin||!p.modelReady?d.setAttribute("raycaster",T):d.setAttribute("raycaster","showLine",!0),d.setAttribute("cursor",h.extend({fuse:!1},x.cursor))}}function E(){d.setAttribute("raycaster","showLine",!1)}},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"gearvr-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:.001,z:0}}},"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},{"../core/component":131,"../utils/":205}],86:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/"),m=h.debug("components:layer:warn");g.exports.Component=l("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var d=this.el.sceneEl.renderer.getContext();this.quaternion=new THREE.Quaternion,this.position=new THREE.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=d.createFramebuffer();var p=this.el.sceneEl.getAttribute("webxr").requiredFeatures;p.push("layers"),this.el.sceneEl.getAttribute("webxr","requiredFeatures",p),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(d){this.data.src!==d.src&&this.updateSrc()},updateSrc:function(){var d=this.data.type;if(this.texture=void 0,d==="quad"){this.loadQuadImage();return}if(d==="monocubemap"||d==="stereocubemap"){this.loadCubeMapImages();return}},loadCubeMapImages:function(){var d=this.data.type,p,v=this.xrGLFactory,b=this.el.sceneEl.frame,E=this.data.src;this.visibilityChanged=!1,!!this.layer&&(E.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,d==="monocubemap"?(p=v.getSubImage(this.layer,b),this.loadCubeMapImage(p.colorTexture,E,0)):(p=v.getSubImage(this.layer,b,"left"),this.loadCubeMapImage(p.colorTexture,E,0),p=v.getSubImage(this.layer,b,"right"),this.loadCubeMapImage(p.colorTexture,E,6)))},loadQuadImage:function(){var d=this.data.src,p=this;this.el.sceneEl.systems.material.loadTexture(d,{src:d},function(b){p.el.sceneEl.renderer.initTexture(b),p.texture=b,d.tagName==="VIDEO"&&setTimeout(function(){p.textureIsVideo=!0},1e3),p.layer&&(p.layer.height=p.data.height/2||p.texture.image.height/1e3,p.layer.width=p.data.width/2||p.texture.image.width/1e3,p.needsRedraw=!0),p.updateQuadPanel()})},preGenerateCubeMapTextures:function(d,p){this.data.type==="monocubemap"?this.generateCubeMapTextures(d,0,p):(this.generateCubeMapTextures(d,0,p),this.generateCubeMapTextures(d,6,p))},generateCubeMapTextures:function(d,p,v){for(var b=this.data,E=this.cubeFaceSize,S=Math.min(d.width,d.height),x=[],T,_,D=0;D<6;D++){var C=document.createElement("CANVAS");C.width=C.height=E;var I=C.getContext("2d");b.rotateCubemap&&(D===2||D===3)&&(I.save(),I.translate(E,E),I.rotate(Math.PI)),I.drawImage(d,(D+p)*S,0,S,S,0,0,E,E),I.restore(),v&&v(),x.push(C)}return b.rotateCubemap&&(T=x[0],_=x[1],x[0]=_,x[1]=T,T=x[4],_=x[5],x[4]=_,x[5]=T),v&&v(),x},loadCubeMapImage:function(d,p,v){var b=this.el.sceneEl.renderer.getContext(),E;b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),b.bindTexture(b.TEXTURE_CUBE_MAP,d),!p.complete||this.loadingScreen?E=this.loadingScreenImages:E=this.generateCubeMapTextures(p,v);var S=0;E.forEach(function(x,T){b.texSubImage2D(b.TEXTURE_CUBE_MAP_POSITIVE_X+T,0,0,0,b.RGBA,b.UNSIGNED_BYTE,x),S=b.getError()}),S!==0&&console.log("renderingError, WebGL Error Code: "+S),b.bindTexture(b.TEXTURE_CUBE_MAP,null)},tick:function(){!this.el.sceneEl.xrSession||(!this.layer&&this.el.sceneEl.is("vr-mode")&&this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),!(!this.needsRedraw&&!this.layer.needsRedraw&&!this.textureIsVideo)&&(this.data.type==="quad"&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var d=this,p=this.data.type;if(this.el.sceneEl.xrSession.onvisibilitychange=function(v){d.visibilityChanged=v.session.visibilityState!=="hidden"},p==="quad"){this.initQuadLayer();return}if(p==="monocubemap"||p==="stereocubemap"){this.initCubeMapLayer();return}},initQuadLayer:function(){var d=this.el.sceneEl,p=d.renderer.getContext(),v=this.xrGLFactory=new XRWebGLBinding(d.xrSession,p);!this.texture||(this.layer=v.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),d.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var d=this.data.src,p=this.el.sceneEl,v=p.renderer.getContext(),b=v.getParameter(v.MAX_CUBE_MAP_TEXTURE_SIZE),E=this.cubeFaceSize=Math.min(b,Math.min(d.width,d.height)),S=this.xrGLFactory=new XRWebGLBinding(p.xrSession,v);this.layer=S.createCubeLayer({space:this.referenceSpace,viewPixelWidth:E,viewPixelHeight:E,layout:this.data.type==="monocubemap"?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),p.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var d=this.cubeFaceSize,p=this.loadingScreenImages=[],v=0;v<6;v++){var b=document.createElement("CANVAS");b.width=b.height=d;var E=b.getContext("2d");b.width=b.height=d,E.fillStyle="black",E.fillRect(0,0,d,d),v!==2&&v!==3&&(E.translate(d,0),E.scale(-1,1),E.fillStyle="white",E.font="30px Arial",E.fillText("Loading",d/2,d/2)),p.push(b)}},destroyLayer:function(){!this.layer||(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(d){this.layerEnabled=d,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var d=this.quadPanelEl;this.quadPanelEl||(d=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(d)),d.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),d.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var d=this.el.sceneEl,p=this.el.sceneEl.renderer.getContext(),v=this.xrGLFactory.getSubImage(this.layer,d.frame),b=d.renderer.properties.get(this.texture).__webglTexture,E=p.getParameter(p.FRAMEBUFFER_BINDING);p.viewport(v.viewport.x,v.viewport.y,v.viewport.width,v.viewport.height),p.bindFramebuffer(p.FRAMEBUFFER,this.frameBuffer),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,v.colorTexture,0),y(p,b,v,this.data.src),p.bindFramebuffer(p.FRAMEBUFFER,E)},updateTransform:function(){var d=this.el,p=this.position,v=this.quaternion;d.object3D.updateMatrixWorld(),p.setFromMatrixPosition(d.object3D.matrixWorld),v.setFromRotationMatrix(d.object3D.matrixWorld),this.layerEnabled||p.set(0,0,1e8),this.layer.transform=new XRRigidTransform(p,v)},onEnterVR:function(){var d=this.el.sceneEl,p=d.xrSession;if(!d.hasWebXR||!XRWebGLBinding||!p){m("The layer component requires WebXR and the layers API enabled");return}p.requestReferenceSpace("local").then(this.onRequestedReferenceSpace),this.needsRedraw=!0,this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(d){this.referenceSpace=d}});function y(d,p,v,b){var E=d.createFramebuffer();let S=v.viewport.x,x=v.viewport.y,T=v.viewport.x+v.viewport.width,_=v.viewport.y+v.viewport.height;b.tagName==="VIDEO"&&(d.bindTexture(d.TEXTURE_2D,p),d.texSubImage2D(d.TEXTURE_2D,0,0,0,b.width,b.height,d.RGB,d.UNSIGNED_BYTE,b)),d.bindFramebuffer(d.READ_FRAMEBUFFER,E),d.framebufferTexture2D(d.READ_FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,p,0),d.readBuffer(d.COLOR_ATTACHMENT0),d.blitFramebuffer(0,0,b.width,b.height,S,x,T,_,d.COLOR_BUFFER_BIT,d.NEAREST),d.bindFramebuffer(d.READ_FRAMEBUFFER,null),d.deleteFramebuffer(E)}},{"../core/component":131,"../utils/":205}],87:[function(c,g,L){var l=c("../utils/bind"),h=c("../utils").diff,m=c("../utils/debug"),y=c("../core/component").registerComponent,d=c("../lib/three"),p=d.Math.degToRad,v=m("components:light:warn");g.exports.Component=y("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color"},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var b=this.el;this.light=null,this.defaultTarget=null,this.rendererSystem=this.el.sceneEl.systems.renderer,this.system.registerLight(b)},update:function(b){var E=this.data,S=h(E,b),x=this.light,T=this.rendererSystem,_=this;if(x&&!("type"in S)){var D=!1;Object.keys(S).forEach(function(C){var I=E[C];switch(C){case"color":{x.color.set(I),T.applyColorCorrection(x.color);break}case"groundColor":{x.groundColor.set(I),T.applyColorCorrection(x.groundColor);break}case"angle":{x.angle=p(I);break}case"target":{I===null?(E.type==="spot"||E.type==="directional")&&(x.target=_.defaultTarget):I.hasLoaded?_.onSetTarget(I,x):I.addEventListener("loaded",l(_.onSetTarget,_,I,x));break}case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":D||(_.updateShadow(),D=!0);break;default:x[C]=I}});return}this.setLight(this.data),this.updateShadow()},setLight:function(b){var E=this.el,S=this.getLight(b);S&&(this.light&&E.removeObject3D("light"),this.light=S,this.light.el=E,E.setObject3D("light",this.light),(b.type==="spot"||b.type==="directional"||b.type==="hemisphere")&&E.getObject3D("light").translateY(-1),b.type==="spot"&&(E.setObject3D("light-target",this.defaultTarget),E.getObject3D("light-target").position.set(0,0,-1)))},updateShadow:function(){var b=this.el,E=this.data,S=this.light;S.castShadow=E.castShadow;var x=b.getObject3D("cameraHelper");if(E.shadowCameraVisible&&!x?b.setObject3D("cameraHelper",new d.CameraHelper(S.shadow.camera)):!E.shadowCameraVisible&&x&&b.removeObject3D("cameraHelper"),!E.castShadow)return S;S.shadow.bias=E.shadowBias,S.shadow.radius=E.shadowRadius,S.shadow.mapSize.height=E.shadowMapHeight,S.shadow.mapSize.width=E.shadowMapWidth,S.shadow.camera.near=E.shadowCameraNear,S.shadow.camera.far=E.shadowCameraFar,S.shadow.camera instanceof d.OrthographicCamera?(S.shadow.camera.top=E.shadowCameraTop,S.shadow.camera.right=E.shadowCameraRight,S.shadow.camera.bottom=E.shadowCameraBottom,S.shadow.camera.left=E.shadowCameraLeft):S.shadow.camera.fov=E.shadowCameraFov,S.shadow.camera.updateProjectionMatrix(),x&&x.update()},getLight:function(b){var E=b.angle,S=new d.Color(b.color);this.rendererSystem.applyColorCorrection(S),S=S.getHex();var x=b.decay,T=b.distance,_=new d.Color(b.groundColor);this.rendererSystem.applyColorCorrection(_),_=_.getHex();var D=b.intensity,C=b.type,I=b.target,B=null;switch(C.toLowerCase()){case"ambient":return new d.AmbientLight(S,D);case"directional":return B=new d.DirectionalLight(S,D),this.defaultTarget=B.target,I&&(I.hasLoaded?this.onSetTarget(I,B):I.addEventListener("loaded",l(this.onSetTarget,this,I,B))),B;case"hemisphere":return new d.HemisphereLight(S,_,D);case"point":return new d.PointLight(S,D,T,x);case"spot":return B=new d.SpotLight(S,D,T,p(E),b.penumbra,x),this.defaultTarget=B.target,I&&(I.hasLoaded?this.onSetTarget(I,B):I.addEventListener("loaded",l(this.onSetTarget,this,I,B))),B;default:v("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",C)}},onSetTarget:function(b,E){E.target=b.object3D},remove:function(){var b=this.el;b.removeObject3D("light"),b.getObject3D("cameraHelper")&&b.removeObject3D("cameraHelper")}})},{"../core/component":131,"../lib/three":179,"../utils":205,"../utils/bind":199,"../utils/debug":201}],88:[function(c,g,L){var l=c("../core/component").registerComponent;g.exports.Component=l("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var m=this.data,y,d;this.rendererSystem=this.el.sceneEl.systems.renderer,d=this.material=new THREE.LineBasicMaterial({color:m.color,opacity:m.opacity,transparent:m.opacity<1,visible:m.visible}),y=this.geometry=new THREE.BufferGeometry,y.setAttribute("position",new THREE.BufferAttribute(new Float32Array(2*3),3)),this.rendererSystem.applyColorCorrection(d.color),this.line=new THREE.Line(y,d),this.el.setObject3D(this.attrName,this.line)},update:function(m){var y=this.data,d=this.geometry,p=!1,v=this.material,b=d.attributes.position.array;h(y.start,m.start)||(b[0]=y.start.x,b[1]=y.start.y,b[2]=y.start.z,p=!0),h(y.end,m.end)||(b[3]=y.end.x,b[4]=y.end.y,b[5]=y.end.z,p=!0),p&&(d.attributes.position.needsUpdate=!0,d.computeBoundingSphere()),v.color.setStyle(y.color),this.rendererSystem.applyColorCorrection(v.color),v.opacity=y.opacity,v.transparent=y.opacity<1,v.visible=y.visible},remove:function(){this.el.removeObject3D("line",this.line)}});function h(m,y){return!m||!y?!1:m.x===y.x&&m.y===y.y&&m.z===y.z}},{"../core/component":131}],89:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../core/shader").registerShader,m=c("../lib/three");g.exports.Component=l("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new m.Quaternion,this.hiddenEls=[]},update:function(y){var d=this.data,p=this.el,v,b;!d.visualAspectEnabled||(this.initVisualAspect(),v=d.highlighted?d.highlightedColor:d.backgroundColor,b=d.highlighted?d.highlightedColor:d.borderColor,p.setAttribute("material","backgroundColor",v),p.setAttribute("material","strokeColor",b),d.on!==y.on&&this.updateEventListener(),y.peekMode!==void 0&&d.peekMode!==y.peekMode&&this.updatePeekMode(),!(!d.image||y.image===d.image)&&p.setAttribute("material","pano",typeof d.image=="string"?d.image:d.image.src))},updatePeekMode:function(){var y=this.el,d=this.sphereEl;this.data.peekMode?(this.hideAll(),y.getObject3D("mesh").visible=!1,d.setAttribute("visible",!0)):(this.showAll(),y.getObject3D("mesh").visible=!0,d.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var y=this.el;!y.isPlaying||(this.removeEventListener(),y.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var y=this.data.on;!y||this.el.removeEventListener(y,this.navigate)},initVisualAspect:function(){var y=this.el,d,p,v;!this.data.visualAspectEnabled||this.visualAspectInitialized||(v=this.textEl=this.textEl||document.createElement("a-entity"),p=this.sphereEl=this.sphereEl||document.createElement("a-entity"),d=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),y.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),y.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),v.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),v.setAttribute("position","0 1.5 0"),y.appendChild(v),d.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),d.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),d.setAttribute("rotation","0 180 0"),d.setAttribute("position","0 0 0"),d.setAttribute("visible",!1),y.appendChild(d),p.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),p.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),p.setAttribute("visible",!1),y.appendChild(p),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:function(){var y=new m.Vector3,d=new m.Vector3,p=new m.Quaternion,v=new m.Vector3;return function(){var b=this.el,E=b.object3D,S=b.sceneEl.camera,x,T,_=this.textEl;if(!!this.data.visualAspectEnabled)if(E.updateMatrixWorld(),S.parent.updateMatrixWorld(),S.updateMatrixWorld(),E.matrix.decompose(d,p,v),d.setFromMatrixPosition(E.matrixWorld),y.setFromMatrixPosition(S.matrixWorld),T=d.distanceTo(y),T>20)this.previousQuaternion||(this.quaternionClone.copy(p),this.previousQuaternion=this.quaternionClone),E.lookAt(y);else{if(x=this.calculateCameraPortalOrientation(),T<.5){if(this.semiSphereEl.getAttribute("visible")===!0)return;_.setAttribute("text","width",1.5),x<=0?(_.setAttribute("position","0 0 0.75"),_.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(_.setAttribute("position","0 0 -0.75"),_.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),b.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=x}else x<=0?_.setAttribute("rotation","0 180 0"):_.setAttribute("rotation","0 0 0"),_.setAttribute("text","width",5),_.setAttribute("position","0 1.5 0"),b.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(E.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var y=this.el,d=this.hiddenEls,p=this;d.length>0||y.sceneEl.object3D.traverse(function(v){v&&v.el&&v.el.hasAttribute("link-controls")||!v.el||v===y.sceneEl.object3D||v.el===y||v.el===p.sphereEl||v.el===y.sceneEl.cameraEl||v.el.getAttribute("visible")===!1||v.el===p.textEl||v.el===p.semiSphereEl||(v.el.setAttribute("visible",!1),d.push(v.el))})},showAll:function(){this.hiddenEls.forEach(function(y){y.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var y=new m.Matrix4,d=new m.Vector3,p=new m.Vector3(0,0,1),v=new m.Vector3(0,0,0);return function(){var b=this.el,E=b.sceneEl.camera;return d.set(0,0,0),p.set(0,0,1),v.set(0,0,0),b.object3D.matrixWorld.extractRotation(y),p.applyMatrix4(y),b.object3D.updateMatrixWorld(),b.object3D.localToWorld(v),E.parent.parent.updateMatrixWorld(),E.parent.updateMatrixWorld(),E.updateMatrixWorld(),E.localToWorld(d),d.sub(v).normalize(),p.normalize(),Math.sign(p.dot(d))}}(),remove:function(){this.removeEventListener()}}),h("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join(`
`)})},{"../core/component":131,"../core/shader":141,"../lib/three":179}],90:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../lib/three"),m=c("../utils/"),y=m.bind,d=Math.PI/2;g.exports.Component=l("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new h.Vector3,this.hmdQuaternion=new h.Quaternion,this.magicWindowAbsoluteEuler=new h.Euler,this.magicWindowDeltaEuler=new h.Euler,this.position=new h.Vector3,this.magicWindowObject=new h.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new h.Vector3,rotation:new h.Euler},this.el.sceneEl.is("vr-mode")&&this.onEnterVR()},setupMagicWindowControls:function(){var p,v=this.data;m.device.isMobile()&&(p=this.magicWindowControls=new h.DeviceOrientationControls(this.magicWindowObject),typeof DeviceOrientationEvent!="undefined"&&DeviceOrientationEvent.requestPermission&&(p.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?p.enabled=v.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",function(){p.enabled=v.magicWindowTrackingEnabled})))},update:function(p){var v=this.data;v.enabled!==p.enabled&&this.updateGrabCursor(v.enabled),p&&!v.magicWindowTrackingEnabled&&p.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=v.magicWindowTrackingEnabled),p&&!v.pointerLockEnabled!==p.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(p){var v=this.data;!v.enabled||this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=y(this.onMouseDown,this),this.onMouseMove=y(this.onMouseMove,this),this.onMouseUp=y(this.onMouseUp,this),this.onTouchStart=y(this.onTouchStart,this),this.onTouchMove=y(this.onTouchMove,this),this.onTouchEnd=y(this.onTouchEnd,this),this.onEnterVR=y(this.onEnterVR,this),this.onExitVR=y(this.onExitVR,this),this.onPointerLockChange=y(this.onPointerLockChange,this),this.onPointerLockError=y(this.onPointerLockError,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new h.Object3D,this.yawObject=new h.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var p=this.el.sceneEl,v=p.canvas;if(!v){p.addEventListener("render-target-loaded",y(this.addEventListeners,this));return}v.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),v.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),p.addEventListener("enter-vr",this.onEnterVR),p.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))},removeEventListeners:function(){var p=this.el.sceneEl,v=p&&p.canvas;!v||(v.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),v.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),p.removeEventListener("enter-vr",this.onEnterVR),p.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var p=new h.Matrix4;return function(){var v=this.el.object3D,b=this.pitchObject,E=this.yawObject,S,x=this.el.sceneEl;if(x.is("vr-mode")&&x.checkHeadsetConnected()){x.hasWebXR&&(S=x.renderer.xr.getCameraPose(),S&&(p.elements=S.transform.matrix,p.decompose(v.position,v.rotation,v.scale)));return}this.updateMagicWindowOrientation(),v.rotation.x=this.magicWindowDeltaEuler.x+b.rotation.x,v.rotation.y=this.magicWindowDeltaEuler.y+E.rotation.y,v.rotation.z=this.magicWindowDeltaEuler.z}}(),updateMagicWindowOrientation:function(){var p=this.magicWindowAbsoluteEuler,v=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),p.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),!this.previousMagicWindowYaw&&p.y!==0&&(this.previousMagicWindowYaw=p.y),this.previousMagicWindowYaw&&(v.x=p.x,v.y+=p.y-this.previousMagicWindowYaw,v.z=p.z,this.previousMagicWindowYaw=p.y))},onMouseMove:function(p){var v,b,E,S=this.pitchObject,x=this.previousMouseEvent,T=this.yawObject;!this.data.enabled||!this.mouseDown&&!this.pointerLocked||(this.pointerLocked?(b=p.movementX||p.mozMovementX||0,E=p.movementY||p.mozMovementY||0):(b=p.screenX-x.screenX,E=p.screenY-x.screenY),this.previousMouseEvent.screenX=p.screenX,this.previousMouseEvent.screenY=p.screenY,v=this.data.reverseMouseDrag?1:-1,T.rotation.y+=b*.002*v,S.rotation.x+=E*.002*v,S.rotation.x=Math.max(-d,Math.min(d,S.rotation.x)))},onMouseDown:function(p){var v=this.el.sceneEl;if(!(!this.data.enabled||!this.data.mouseEnabled||v.is("vr-mode")&&v.checkHeadsetConnected())&&p.button===0){var b=v&&v.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=p.screenX,this.previousMouseEvent.screenY=p.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(b.requestPointerLock?b.requestPointerLock():b.mozRequestPointerLock&&b.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(p){p.touches.length!==1||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||(this.touchStart={x:p.touches[0].pageX,y:p.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(p){var v,b=this.el.sceneEl.canvas,E,S=this.yawObject;!this.touchStarted||!this.data.touchEnabled||(E=2*Math.PI*(p.touches[0].pageX-this.touchStart.x)/b.clientWidth,v=this.data.reverseTouchDrag?1:-1,S.rotation.y-=E*.5*v,this.touchStart={x:p.touches[0].pageX,y:p.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var p=this.el.sceneEl;!p.checkHeadsetConnected()||(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),p.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){!this.el.sceneEl.checkHeadsetConnected()||(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!!(document.pointerLockElement||document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(p){var v=this.el.sceneEl;function b(){v.canvas.classList.add("a-grab-cursor")}function E(){v.canvas.classList.remove("a-grab-cursor")}if(!v.canvas){p?v.addEventListener("render-target-loaded",b):v.addEventListener("render-target-loaded",E);return}if(p){b();return}E()},saveCameraPose:function(){var p=this.el;this.savedPose.position.copy(p.object3D.position),this.savedPose.rotation.copy(p.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var p=this.el,v=this.savedPose;!this.hasSavedPose||(p.object3D.position.copy(v.position),p.object3D.rotation.copy(v.rotation),this.hasSavedPose=!1)}})},{"../core/component":131,"../lib/three":179,"../utils/":205}],91:[function(c,g,L){var l=c("../utils/bind"),h=c("../core/component").registerComponent,m=c("../utils/tracked-controls"),y=m.checkControllerPresentAndSetup,d=m.emitIfAxesChanged,p=m.onButtonEvent,v="magicleap",b="-one",E=v+b,S="https://cdn.aframe.io/controllers/magicleap/magicleap-one-controller.glb",x={axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]};g.exports.Component=h("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:x,init:function(){var T=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=l(this.onButtonChanged,this),this.onButtonDown=function(_){p(_.detail.id,"down",T)},this.onButtonUp=function(_){p(_.detail.id,"up",T)},this.onButtonTouchEnd=function(_){p(_.detail.id,"touchend",T)},this.onButtonTouchStart=function(_){p(_.detail.id,"touchstart",T)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var T=this.data;this.controllerIndex=T.hand==="right"?0:T.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=l(this.onModelLoaded,this),this.onControllersUpdate=l(this.onControllersUpdate,this),this.checkIfControllerPresent=l(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=l(this.removeControllersUpdateListener,this),this.onAxisMoved=l(this.onAxisMoved,this)},addEventListeners:function(){var T=this.el;T.addEventListener("buttonchanged",this.onButtonChanged),T.addEventListener("buttondown",this.onButtonDown),T.addEventListener("buttonup",this.onButtonUp),T.addEventListener("touchstart",this.onButtonTouchStart),T.addEventListener("touchend",this.onButtonTouchEnd),T.addEventListener("axismove",this.onAxisMoved),T.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var T=this.el;T.removeEventListener("buttonchanged",this.onButtonChanged),T.removeEventListener("buttondown",this.onButtonDown),T.removeEventListener("buttonup",this.onButtonUp),T.removeEventListener("touchstart",this.onButtonTouchStart),T.removeEventListener("touchend",this.onButtonTouchEnd),T.removeEventListener("axismove",this.onAxisMoved),T.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var T=this.data;y(this,E,{index:this.controllerIndex,hand:T.hand})},injectTrackedControls:function(){var T=this.el,_=this.data;T.setAttribute("tracked-controls",{idPrefix:E,hand:_.hand,controller:this.controllerIndex,orientationOffset:_.orientationOffset}),!!this.data.model&&this.el.setAttribute("gltf-model",S)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(T){var _=this.mapping.buttons[T.detail.id],D;!_||(_==="trigger"&&(D=T.detail.state.value,console.log("analog value of trigger press: "+D)),this.el.emit(_+"changed",T.detail.state))},onModelLoaded:function(T){var _=T.detail.model;_.scale.set(.01,.01,.01)},onAxisMoved:function(T){d(this,this.mapping.axes,T)},updateModel:function(T,_){},setButtonColor:function(T,_){}})},{"../core/component":131,"../utils/bind":199,"../utils/tracked-controls":214}],92:[function(c,g,L){var l=c("../utils/"),h=c("../core/component"),m=c("../lib/three"),y=c("../core/shader"),d=l.debug("components:material:error"),p=h.registerComponent,v=y.shaders,b=y.shaderNames;g.exports.Component=p("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:b,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColors:{type:"string",default:"none",oneOf:["face","vertex"]},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0}},init:function(){this.material=null},update:function(_){var D=this.data;(!this.shader||D.shader!==_.shader)&&this.updateShader(D.shader),this.shader.update(this.data),this.updateMaterial(_)},updateSchema:function(_){var D,C,I,B;C=_&&_.shader,D=this.oldData&&this.oldData.shader,B=C||D,I=v[B]&&v[B].schema,I||d("Unknown shader schema "+B),!(D&&C===D)&&(this.extendSchema(I),this.updateBehavior())},updateBehavior:function(){var _,D=this.el.sceneEl,C=this.schema,I=this,B;function U(W,oe){var J;for(J in B)B[J]=W;I.shader.update(B)}this.tick=void 0,B={};for(_ in C)C[_].type==="time"&&(this.tick=U,B[_]=!0);!D||(this.tick?D.addBehavior(this):D.removeBehavior(this))},updateShader:function(_){var D=this.data,C=v[_]&&v[_].Shader,I;if(!C)throw new Error("Unknown shader "+_);I=this.shader=new C,I.el=this.el,I.init(D),this.setMaterial(I.material),this.updateSchema(D)},updateMaterial:function(_){var D=this.data,C=this.material,I;C.alphaTest=D.alphaTest,C.depthTest=D.depthTest!==!1,C.depthWrite=D.depthWrite!==!1,C.opacity=D.opacity,C.flatShading=D.flatShading,C.side=E(D.side),C.transparent=D.transparent!==!1||D.opacity<1,C.vertexColors=S(D.vertexColors),C.visible=D.visible,C.blending=x(D.blending),C.dithering=D.dithering;for(I in _)break;I&&(_.alphaTest!==D.alphaTest||_.side!==D.side||_.vertexColors!==D.vertexColors)&&(C.needsUpdate=!0)},remove:function(){var _=new m.MeshBasicMaterial,D=this.material,C=this.el.getObject3D("mesh");C&&(C.material=_),T(D,this.system)},setMaterial:function(_){var D=this.el,C,I=this.system;this.material&&T(this.material,I),this.material=_,I.registerMaterial(_),C=D.getObject3D("mesh"),C?C.material=_:D.addEventListener("object3dset",function B(U){U.detail.type!=="mesh"||U.target!==D||(D.getObject3D("mesh").material=_,D.removeEventListener("object3dset",B))})}});function E(_){switch(_){case"back":return m.BackSide;case"double":return m.DoubleSide;default:return m.FrontSide}}function S(_){switch(_){case"face":return m.FaceColors;case"vertex":return m.VertexColors;default:return m.NoColors}}function x(_){switch(_){case"none":return m.NoBlending;case"additive":return m.AdditiveBlending;case"subtractive":return m.SubtractiveBlending;case"multiply":return m.MultiplyBlending;default:return m.NormalBlending}}function T(_,D){_.dispose(),D.unregisterMaterial(_)}},{"../core/component":131,"../core/shader":141,"../lib/three":179,"../utils/":205}],93:[function(c,g,L){var l=c("../utils/debug"),h=c("../core/component").registerComponent,m=c("../lib/three"),y=l("components:obj-model:warn");g.exports.Component=h("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var d=this;this.model=null,this.objLoader=new m.OBJLoader,this.mtlLoader=new m.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(p){!d.model||p.detail.name==="material"&&d.applyMaterial()})},update:function(){var d=this.data;!d.obj||(this.resetMesh(),this.loadObj(d.obj,d.mtl))},remove:function(){!this.model||this.resetMesh()},resetMesh:function(){this.el.removeObject3D("mesh")},loadObj:function(d,p){var v=this,b=this.el,E=this.mtlLoader,S=this.objLoader,x=this.el.sceneEl.systems.renderer,T=p.substr(0,p.lastIndexOf("/")+1);if(p){b.hasAttribute("material")&&y("Material component properties are ignored when a .MTL is provided"),E.setResourcePath(T),E.load(p,function(_){_.preload(),S.setMaterials(_),S.load(d,function(D){v.model=D,v.model.traverse(function(C){if(C.isMesh){var I=C.material;I.color&&x.applyColorCorrection(I.color),I.map&&x.applyColorCorrection(I.map),I.emissive&&x.applyColorCorrection(I.emissive),I.emissiveMap&&x.applyColorCorrection(I.emissiveMap)}}),b.setObject3D("mesh",D),b.emit("model-loaded",{format:"obj",model:D})})});return}S.load(d,function(D){v.model=D,v.applyMaterial(),b.setObject3D("mesh",D),b.emit("model-loaded",{format:"obj",model:D})})},applyMaterial:function(){var d=this.el.components.material;!d||this.model.traverse(function(p){p instanceof m.Mesh&&(p.material=d.material)})}})},{"../core/component":131,"../lib/three":179,"../utils/debug":201}],94:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/bind"),m=c("../utils/tracked-controls"),y=m.checkControllerPresentAndSetup,d=m.emitIfAxesChanged,p=m.onButtonEvent,v=c("../utils/").device.isWebXRAvailable,b="oculus-go",E="Oculus Go",S="https://cdn.aframe.io/controllers/oculus/go/oculus-go-controller.gltf",x=v?b:E,T={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},_={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},D=v?_:T;g.exports.Component=l("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:D,bindMethods:function(){this.onModelLoaded=h(this.onModelLoaded,this),this.onControllersUpdate=h(this.onControllersUpdate,this),this.checkIfControllerPresent=h(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=h(this.removeControllersUpdateListener,this),this.onAxisMoved=h(this.onAxisMoved,this)},init:function(){var C=this;this.onButtonChanged=h(this.onButtonChanged,this),this.onButtonDown=function(I){p(I.detail.id,"down",C)},this.onButtonUp=function(I){p(I.detail.id,"up",C)},this.onButtonTouchStart=function(I){p(I.detail.id,"touchstart",C)},this.onButtonTouchEnd=function(I){p(I.detail.id,"touchend",C)},this.controllerPresent=!1,this.lastControllerCheck=0,this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},addEventListeners:function(){var C=this.el;C.addEventListener("buttonchanged",this.onButtonChanged),C.addEventListener("buttondown",this.onButtonDown),C.addEventListener("buttonup",this.onButtonUp),C.addEventListener("touchstart",this.onButtonTouchStart),C.addEventListener("touchend",this.onButtonTouchEnd),C.addEventListener("model-loaded",this.onModelLoaded),C.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var C=this.el;C.removeEventListener("buttonchanged",this.onButtonChanged),C.removeEventListener("buttondown",this.onButtonDown),C.removeEventListener("buttonup",this.onButtonUp),C.removeEventListener("touchstart",this.onButtonTouchStart),C.removeEventListener("touchend",this.onButtonTouchEnd),C.removeEventListener("model-loaded",this.onModelLoaded),C.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,x,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var C=this.el,I=this.data;C.setAttribute("tracked-controls",{armModel:I.armModel,hand:I.hand,idPrefix:x,orientationOffset:I.orientationOffset}),!!this.data.model&&this.el.setAttribute("gltf-model",S)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(C){var I=C.detail.model,B;!this.data.model||(B=this.buttonMeshes={},B.trigger=I.getObjectByName("oculus_go_button_trigger"),B.trackpad=I.getObjectByName("oculus_go_touchpad"),B.touchpad=I.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(C){var I=this.mapping.buttons[C.detail.id];!I||this.el.emit(I+"changed",C.detail.state)},onAxisMoved:function(C){d(this,this.mapping.axes,C)},updateModel:function(C,I){!this.data.model||this.updateButtonModel(C,I)},updateButtonModel:function(C,I){var B=this.buttonMeshes;if(!(!B||!B[C])){var U,W;switch(I){case"down":U=this.data.buttonHighlightColor;break;case"touchstart":U=this.data.buttonTouchedColor;break;default:U=this.data.buttonColor}W=B[C],W.material.color.set(U),this.rendererSystem.applyColorCorrection(W.material.color)}}})},{"../core/component":131,"../utils/":205,"../utils/bind":199,"../utils/tracked-controls":214}],95:[function(c,g,L){var l=c("../utils/bind"),h=c("../core/component").registerComponent,m=c("../lib/three"),y=c("../utils/tracked-controls"),d=y.checkControllerPresentAndSetup,p=y.emitIfAxesChanged,v=y.onButtonEvent,b=c("../utils/").device.isWebXRAvailable,E="oculus-touch",S="Oculus Touch",x=b?E:S,T="https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-",_={left:{modelUrl:T+"left.gltf",rayOrigin:{origin:{x:.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new m.Vector3(-.005,.003,-.055),modelPivotRotation:new m.Euler(0,0,0)},right:{modelUrl:T+"right.gltf",rayOrigin:{origin:{x:-.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new m.Vector3(.005,.003,-.055),modelPivotRotation:new m.Euler(0,0,0)}},D={left:{modelUrl:T+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new m.Vector3(-.005,.036,-.037),modelPivotRotation:new m.Euler(Math.PI/4.5,0,0)},right:{modelUrl:T+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new m.Vector3(.005,.036,-.037),modelPivotRotation:new m.Euler(Math.PI/4.5,0,0)}},C=b?D:_,I="oculus-touch",B={"oculus-touch":C,"oculus-touch-v2":{left:{modelUrl:T+"gen2-left.gltf",rayOrigin:{origin:{x:-.01,y:0,z:-.02},direction:{x:0,y:-.5,z:-1}},modelPivotOffset:new m.Vector3(0,0,0),modelPivotRotation:new m.Euler(0,0,0)},right:{modelUrl:T+"gen2-right.gltf",rayOrigin:{origin:{x:.01,y:0,z:-.02},direction:{x:0,y:-.5,z:-1}},modelPivotOffset:new m.Vector3(0,0,0),modelPivotRotation:new m.Euler(0,0,0)}},"oculus-touch-v3":{left:{modelUrl:T+"v3-left.glb",rayOrigin:{origin:{x:.015,y:.005,z:0},direction:{x:0,y:0,z:-1}},modelPivotOffset:new m.Vector3(.01,-.01,.05),modelPivotRotation:new m.Euler(Math.PI/4,0,0)},right:{modelUrl:T+"v3-right.glb",rayOrigin:{origin:{x:-.015,y:.005,z:0},direction:{x:0,y:0,z:-1}},modelPivotOffset:new m.Vector3(-.01,-.01,.05),modelPivotRotation:new m.Euler(Math.PI/4,0,0)}}},U={left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},W={left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},oe=b?W:U;g.exports.Component=h("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},mapping:oe,bindMethods:function(){this.onModelLoaded=l(this.onModelLoaded,this),this.onControllersUpdate=l(this.onControllersUpdate,this),this.checkIfControllerPresent=l(this.checkIfControllerPresent,this),this.onAxisMoved=l(this.onAxisMoved,this)},init:function(){var J=this;this.onButtonChanged=l(this.onButtonChanged,this),this.onButtonDown=function(le){v(le.detail.id,"down",J,J.data.hand)},this.onButtonUp=function(le){v(le.detail.id,"up",J,J.data.hand)},this.onButtonTouchStart=function(le){v(le.detail.id,"touchstart",J,J.data.hand)},this.onButtonTouchEnd=function(le){v(le.detail.id,"touchend",J,J.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},addEventListeners:function(){var J=this.el;J.addEventListener("buttonchanged",this.onButtonChanged),J.addEventListener("buttondown",this.onButtonDown),J.addEventListener("buttonup",this.onButtonUp),J.addEventListener("touchstart",this.onButtonTouchStart),J.addEventListener("touchend",this.onButtonTouchEnd),J.addEventListener("axismove",this.onAxisMoved),J.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var J=this.el;J.removeEventListener("buttonchanged",this.onButtonChanged),J.removeEventListener("buttondown",this.onButtonDown),J.removeEventListener("buttonup",this.onButtonUp),J.removeEventListener("touchstart",this.onButtonTouchStart),J.removeEventListener("touchend",this.onButtonTouchEnd),J.removeEventListener("axismove",this.onAxisMoved),J.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){d(this,x,{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(J){var le=this.data,te;if(!!le.model){if(this.displayModel=B[le.controllerType]||B[I],le.controllerType==="auto"){var ue=this.el.sceneEl.systems["tracked-controls-webvr"];if(ue&&ue.vrDisplay){var Y=ue.vrDisplay.displayName;/^Oculus Quest$/.test(Y)&&(this.displayModel=B["oculus-touch-v2"])}else te=I,te=J.profiles.indexOf("oculus-touch-v2")!==-1?"oculus-touch-v2":te,te=J.profiles.indexOf("oculus-touch-v3")!==-1?"oculus-touch-v3":te,this.displayModel=B[te]}var de=this.displayModel[le.hand].modelUrl;this.el.setAttribute("gltf-model",de)}},injectTrackedControls:function(J){var le=this.data,te=E,ue=le.hand==="right"?"Oculus Touch (Right)":"Oculus Touch (Left)",Y=b?te:ue;this.el.setAttribute("tracked-controls",{id:Y,hand:le.hand,orientationOffset:le.orientationOffset,handTrackingEnabled:!1}),this.loadModel(J)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(J){var le=this.mapping[this.data.hand].buttons[J.detail.id],te=this.buttonMeshes,ue;!le||((le==="trigger"||le==="grip")&&(ue=J.detail.state.value),te&&(le==="trigger"&&te.trigger&&(te.trigger.rotation.x=this.originalXRotationTrigger-ue*(Math.PI/26)),le==="grip"&&te.grip&&(te.grip.position.x=this.originalXPositionGrip+(this.data.hand==="left"?-1:1)*ue*.004)),this.el.emit(le+"changed",J.detail.state))},onModelLoaded:function(J){var le=this.controllerObject3D=J.detail.model,te;!this.data.model||(te=this.buttonMeshes={},te.grip=le.getObjectByName("buttonHand"),this.originalXPositionGrip=te.grip&&te.grip.position.x,te.thumbstick=le.getObjectByName("stick"),te.trigger=le.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=te.trigger&&te.trigger.rotation.x,te.xbutton=le.getObjectByName("buttonX"),te.abutton=le.getObjectByName("buttonA"),te.ybutton=le.getObjectByName("buttonY"),te.bbutton=le.getObjectByName("buttonB"),le.position.copy(this.displayModel[this.data.hand].modelPivotOffset),le.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin}))},onAxisMoved:function(J){p(this,this.mapping[this.data.hand].axes,J)},updateModel:function(J,le){!this.data.model||this.updateButtonModel(J,le)},updateButtonModel:function(J,le){var te,ue=le==="up"||le==="touchend"?this.data.buttonColor:le==="touchstart"?this.data.buttonTouchColor:this.data.buttonHighlightColor,Y=this.buttonMeshes;!this.data.model||Y&&Y[J]&&(te=Y[J],te.material.color.set(ue),this.rendererSystem.applyColorCorrection(te.material.color))}})},{"../core/component":131,"../lib/three":179,"../utils/":205,"../utils/bind":199,"../utils/tracked-controls":214}],96:[function(c,g,L){var l=c("../core/component").registerComponent;g.exports.Component=l("position",{schema:{type:"vec3"},update:function(){var h=this.el.object3D,m=this.data;h.position.set(m.x,m.y,m.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},{"../core/component":131}],97:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../lib/three"),m=c("../utils/"),y=m.debug("components:raycaster:warn"),d=/^[\w\s-.,[\]#]*$/,p={childList:!0,attributes:!0,subtree:!0},v={INTERSECT:"raycaster-intersected",INTERSECTION:"raycaster-intersection",INTERSECT_CLEAR:"raycaster-intersected-cleared",INTERSECTION_CLEAR:"raycaster-intersection-cleared"};g.exports.Component=l("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new h.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new h.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new h.Vector3,this.otherLineEndVec3=new h.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(E){var S=this.data,x=this.el,T=this.raycaster;T.far=S.far,T.near=S.near,S.showLine&&(S.far!==E.far||S.origin!==E.origin||S.direction!==E.direction||!E.showLine)&&(this.unitLineEndVec3.copy(S.origin).add(S.direction).normalize(),this.drawLine()),!S.showLine&&E.showLine&&x.removeAttribute("line"),S.objects!==E.objects&&!d.test(S.objects)&&y('[raycaster] Selector "'+S.objects+'" may not update automatically with DOM changes.'),S.objects||y('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),S.autoRefresh!==E.autoRefresh&&x.isPlaying&&(S.autoRefresh?this.addEventListeners():this.removeEventListeners()),E.enabled&&!S.enabled&&this.clearAllIntersections(),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){!this.data.autoRefresh||(this.observer.observe(this.el.sceneEl,p),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var E=this.data,S;S=E.objects?this.el.sceneEl.querySelectorAll(E.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(S),this.dirty=!1},tock:function(E){var S=this.data,x=this.prevCheckTime;!S.enabled||x&&E-x<S.interval||(this.prevCheckTime=E,this.checkIntersections())},checkIntersections:function(){var E=this.clearedIntersectedEls,S=this.el,x=this.data,T,_=this.intersectedEls,D,C=this.intersections,I=this.newIntersectedEls,B=this.newIntersections,U=this.prevIntersectedEls,W=this.rawIntersections;for(this.dirty&&this.refreshObjects(),b(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),W.length=0,this.raycaster.intersectObjects(this.objects,!0,W),C.length=0,_.length=0,T=0;T<W.length;T++)D=W[T],!(x.showLine&&D.object===S.getObject3D("line"))&&D.object.el&&(C.push(D),_.push(D.object.el));for(B.length=0,I.length=0,T=0;T<C.length;T++)U.indexOf(C[T].object.el)===-1&&(B.push(C[T]),I.push(C[T].object.el));for(E.length=0,T=0;T<U.length;T++)_.indexOf(U[T])===-1&&(U[T].emit(v.INTERSECT_CLEAR,this.intersectedClearedDetail),E.push(U[T]));for(E.length&&S.emit(v.INTERSECTION_CLEAR,this.intersectionClearedDetail),T=0;T<I.length;T++)I[T].emit(v.INTERSECT,this.intersectedDetail);B.length&&(this.intersectionDetail.els=I,this.intersectionDetail.intersections=B,S.emit(v.INTERSECTION,this.intersectionDetail)),x.showLine&&setTimeout(this.updateLine)},updateLine:function(){var E=this.el,S=this.intersections,x;S.length&&(S[0].object.el===E&&S[1]?x=S[1].distance:x=S[0].distance),this.drawLine(x)},getIntersection:function(E){var S,x;for(S=0;S<this.intersections.length;S++)if(x=this.intersections[S],x.object.el===E)return x;return null},updateOriginDirection:function(){var E=new h.Vector3,S=new h.Vector3;return function(){var T=this.el,_=this.data;if(_.useWorldCoordinates){this.raycaster.set(_.origin,_.direction);return}T.object3D.updateMatrixWorld(),S.setFromMatrixPosition(T.object3D.matrixWorld),(_.origin.x!==0||_.origin.y!==0||_.origin.z!==0)&&(S=T.object3D.localToWorld(S.copy(_.origin))),E.copy(_.direction).transformDirection(T.object3D.matrixWorld).normalize(),this.raycaster.set(S,E)}}(),drawLine:function(E){var S=this.data,x=this.el,T;T=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,E===void 0&&(E=S.far===1/0?1e3:S.far),this.lineData.start=S.origin,this.lineData.end=T.copy(this.unitLineEndVec3).multiplyScalar(E),this.lineData.color=S.lineColor,this.lineData.opacity=S.lineOpacity,x.setAttribute("line",this.lineData)},flattenObject3DMaps:function(E){var S,x,T=this.objects;for(T.length=0,x=0;x<E.length;x++)if(E[x].isEntity&&E[x].object3D)for(S in E[x].object3DMap)T.push(E[x].getObject3D(S));return T},clearAllIntersections:function(){var E;for(E=0;E<this.intersectedEls.length;E++)this.intersectedEls[E].emit(v.INTERSECT_CLEAR,this.intersectedClearedDetail);b(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(v.INTERSECTION_CLEAR,this.intersectionClearedDetail)}});function b(E,S){var x;for(E.length=S.length,x=0;x<S.length;x++)E[x]=S[x]}},{"../core/component":131,"../lib/three":179,"../utils/":205}],98:[function(c,g,L){var l=c("../lib/three").Math.degToRad,h=c("../core/component").registerComponent;g.exports.Component=h("rotation",{schema:{type:"vec3"},update:function(){var m=this.data,y=this.el.object3D;y.rotation.set(l(m.x),l(m.y),l(m.z)),y.rotation.order="YXZ"},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},{"../core/component":131,"../lib/three":179}],99:[function(c,g,L){var l=c("../core/component").registerComponent,h=1e-5;g.exports.Component=l("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var m=this.data,y=this.el.object3D,d=m.x===0?h:m.x,p=m.y===0?h:m.y,v=m.z===0?h:m.z;y.scale.set(d,p,v)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},{"../core/component":131}],100:[function(c,g,L){var l=c("../../core/component").registerComponent,h=c("../../core/component").components;g.exports.Component=l("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},update:function(){var m=this.data,y=this.el.object3D;if(m.transparent){y.background=null;return}y.background=new THREE.Color(m.color)},remove:function(){var m=this.data,y=this.el.object3D;if(m.transparent){y.background=null;return}y.background=h[this.name].schema.color.default}})},{"../../core/component":131}],101:[function(c,g,L){var l=c("../../core/component").registerComponent;g.exports.Component=l("debug",{schema:{default:!0}})},{"../../core/component":131}],102:[function(c,g,L){var l=c("../../core/component").registerComponent,h=c("../../utils/"),m=h.bind,y=c("../../constants/"),d="a-modal",p="a-dialog",v="a-dialog-text",b="a-dialog-text-container",E="a-dialog-buttons-container",S="a-dialog-button",x="a-dialog-allow-button",T="a-dialog-deny-button",_="a-dialog-ok-button";g.exports.Component=l("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},mobileDesktopMessage:{default:"Set your browser to request the mobile version of the site and reload the page to enjoy immersive mode."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},init:function(){var B=this;if(!!this.data.enabled){if(location.hostname!=="localhost"&&location.hostname!=="127.0.0.1"&&location.protocol==="http:"&&this.showHTTPAlert(),h.device.isMobileDeviceRequestingDesktopSite()){this.showMobileDesktopModeAlert();return}if(typeof DeviceOrientationEvent=="undefined"||!DeviceOrientationEvent.requestPermission){this.permissionGranted=!0;return}this.onDeviceMotionDialogAllowClicked=m(this.onDeviceMotionDialogAllowClicked,this),this.onDeviceMotionDialogDenyClicked=m(this.onDeviceMotionDialogDenyClicked,this),DeviceOrientationEvent.requestPermission().catch(function(){B.devicePermissionDialogEl=D(B.data.denyButtonText,B.data.allowButtonText,B.data.deviceMotionMessage,B.onDeviceMotionDialogAllowClicked,B.onDeviceMotionDialogDenyClicked),B.el.appendChild(B.devicePermissionDialogEl)}).then(function(){B.el.emit("deviceorientationpermissiongranted"),B.permissionGranted=!0})}},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showMobileDesktopModeAlert:function(){var B=this,U=C(B.data.cancelButtonText,B.data.mobileDesktopMessage,function(){B.el.removeChild(U)});this.el.appendChild(U)},showHTTPAlert:function(){var B=this,U=C(B.data.cancelButtonText,B.data.httpsMessage,function(){B.el.removeChild(U)});this.el.appendChild(U)},onDeviceMotionDialogAllowClicked:function(){var B=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then(function(U){U==="granted"?(B.el.emit("deviceorientationpermissiongranted"),B.permissionGranted=!0):B.el.emit("deviceorientationpermissionrejected"),B.remove()}).catch(console.error)}});function D(B,U,W,oe,J){var le,te,ue;return le=document.createElement("div"),le.classList.add(E),te=document.createElement("button"),te.classList.add(S,T),te.setAttribute(y.AFRAME_INJECTED,""),te.innerHTML=B,le.appendChild(te),ue=document.createElement("button"),ue.classList.add(S,x),ue.setAttribute(y.AFRAME_INJECTED,""),ue.innerHTML=U,le.appendChild(ue),ue.addEventListener("click",function(Y){Y.stopPropagation(),oe()}),te.addEventListener("click",function(Y){Y.stopPropagation(),J()}),I(W,le)}function C(B,U,W){var oe,J;return oe=document.createElement("div"),oe.classList.add(E),J=document.createElement("button"),J.classList.add(S,_),J.setAttribute(y.AFRAME_INJECTED,""),J.innerHTML=B,oe.appendChild(J),J.addEventListener("click",function(le){le.stopPropagation(),W()}),I(U,oe)}function I(B,U){var W,oe,J,le;return W=document.createElement("div"),W.classList.add(d),W.setAttribute(y.AFRAME_INJECTED,""),oe=document.createElement("div"),oe.className=p,oe.setAttribute(y.AFRAME_INJECTED,""),W.appendChild(oe),J=document.createElement("div"),J.classList.add(b),oe.appendChild(J),le=document.createElement("div"),le.classList.add(v),le.innerHTML=B,J.appendChild(le),oe.appendChild(U),W}},{"../../constants/":123,"../../core/component":131,"../../utils/":205}],103:[function(c,g,L){var l=c("../../core/component").registerComponent;g.exports.Component=l("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var h=this.el,m=h.querySelector(".a-enter-vr");this.data===!0?(m&&m.classList.add("embedded"),h.removeFullScreenStyles()):(m&&m.classList.remove("embedded"),h.addFullScreenStyles())}})},{"../../core/component":131}],104:[function(c,g,L){var l=c("../../core/component").registerComponent,h=c("../../lib/three"),m=c("../../utils/debug"),y=m("components:fog:warn");g.exports.Component=l("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var p=this.data,v=this.el,b=this.el.object3D.fog;if(!v.isScene){y("Fog component can only be applied to <a-scene>");return}if(!b||p.type!==b.name){v.object3D.fog=d(p),v.systems.material.updateMaterials();return}Object.keys(this.schema).forEach(function(E){var S=p[E];E==="color"&&(S=new h.Color(S)),b[E]=S})},remove:function(){var p=this.el.object3D.fog;!p||(p.far=0,p.near=.1)}});function d(p){var v;return p.type==="exponential"?v=new h.FogExp2(p.color,p.density):v=new h.Fog(p.color,p.near,p.far),v.name=p.type,v}},{"../../core/component":131,"../../lib/three":179,"../../utils/debug":201}],105:[function(c,g,L){(function(l){var h=c("../../constants").AFRAME_INJECTED,m=c("../../../package"),y=c("../../core/component").registerComponent,d=c("../../utils/");function p(x){var T=x.split(".");return T[2]="x",T.join(".")}var v="https://unpkg.com/aframe-inspector@"+p(m.version)+"/dist/aframe-inspector.min.js",b=v,E="Loading Inspector",S="Error loading Inspector";g.exports.Component=y("inspector",{schema:{url:{default:b}},init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var x;!this.firstPlay||(x=d.getUrlParameter("inspector"),x!=="false"&&!!x&&(this.openInspector(),this.firstPlay=!1))},initOverlay:function(){var x='<span class="dots"><span>.</span><span>.</span><span>.</span></span>';this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML=E+x},remove:function(){this.removeEventListeners()},onKeydown:function(x){var T=x.keyCode===73&&(x.ctrlKey&&x.altKey||x.getModifierState("AltGraph"));!T||this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(x){x.data==="INJECT_AFRAME_INSPECTOR"&&this.openInspector()},openInspector:function(x){var T=this,_;if(AFRAME.INSPECTOR||AFRAME.inspectorInjected){AFRAME.INSPECTOR.open(x);return}this.showLoader(),_=document.createElement("script"),_.src=this.data.url,_.setAttribute("data-name","aframe-inspector"),_.setAttribute(h,""),_.onload=function(){AFRAME.INSPECTOR.open(x),T.hideLoader(),T.removeEventListeners()},_.onerror=function(){T.loadingMessageEl.innerHTML=S},document.head.appendChild(_),AFRAME.inspectorInjected=!0},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})}).call(this,c("_process"))},{"../../../package":73,"../../constants":123,"../../core/component":131,"../../utils/":205,_process:49}],106:[function(c,g,L){var l=c("../../core/component").registerComponent,h=c("../../utils/").shouldCaptureKeyEvent;g.exports.Component=l("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(m){var y=this.data;this.enterVREnabled=y.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(m){var y=this.el;!h(m)||(this.enterVREnabled&&m.keyCode===70&&y.enterVR(),this.enterVREnabled&&m.keyCode===27&&y.exitVR())}})},{"../../core/component":131,"../../utils/":205}],107:[function(c,g,L){var l=c("../../utils/debug"),h=c("../../core/component").registerComponent,m=l("components:pool:warn");g.exports.Component=h("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var y;for(this.availableEls=[],this.usedEls=[],this.data.mixin||m("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||m("Container "+this.data.container+" not found.")),this.container=this.container||this.el,y=0;y<this.data.size;++y)this.createEntity()},update:function(y){var d=this.data;(y.mixin!==d.mixin||y.size!==d.size)&&this.initPool()},createEntity:function(){var y;y=document.createElement("a-entity"),y.play=this.wrapPlay(y.play),y.setAttribute("mixin",this.data.mixin),y.object3D.visible=!1,y.pause(),this.container.appendChild(y),this.availableEls.push(y)},wrapPlay:function(y){var d=this.usedEls;return function(){d.indexOf(this)!==-1&&y.call(this)}},requestEntity:function(){var y;if(this.availableEls.length===0){if(this.data.dynamic===!1){m("Requested entity from empty pool: "+this.attrName);return}else m("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName);this.createEntity()}return y=this.availableEls.shift(),this.usedEls.push(y),y.object3D.visible=!0,y},returnEntity:function(y){var d=this.usedEls.indexOf(y);if(d===-1){m("The returned entity was not previously pooled from "+this.attrName);return}return this.usedEls.splice(d,1),this.availableEls.push(y),y.object3D.visible=!1,y.pause(),y}})},{"../../core/component":131,"../../utils/debug":201}],108:[function(c,g,L){var l=c("../../core/component").registerComponent,h=c("../../lib/three"),m=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),y=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join(`
`);g.exports.Component=l("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},init:function(){var d=this.el,p=this;d.renderer?v():d.addEventListener("render-target-loaded",v);function v(){var b=d.renderer.getContext();!b||(p.cubeMapSize=b.getParameter(b.MAX_CUBE_MAP_TEXTURE_SIZE),p.material=new h.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:m,fragmentShader:y,side:h.DoubleSide}),p.quad=new h.Mesh(new h.PlaneBufferGeometry(1,1),p.material),p.quad.visible=!1,p.camera=new h.OrthographicCamera(-1/2,1/2,1/2,-1/2,-1e4,1e4),p.canvas=document.createElement("canvas"),p.ctx=p.canvas.getContext("2d"),d.object3D.add(p.quad),p.onKeyDown=p.onKeyDown.bind(p))}},getRenderTarget:function(d,p){return new h.WebGLRenderTarget(d,p,{minFilter:h.LinearFilter,magFilter:h.LinearFilter,wrapS:h.ClampToEdgeWrapping,wrapT:h.ClampToEdgeWrapping,format:h.RGBAFormat,type:h.UnsignedByteType})},resize:function(d,p){this.quad.scale.set(d,p,1),this.camera.left=-1*d/2,this.camera.right=d/2,this.camera.top=p/2,this.camera.bottom=-1*p/2,this.camera.updateProjectionMatrix(),this.canvas.width=d,this.canvas.height=p},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(d){var p=d.keyCode===83&&d.ctrlKey&&d.altKey;if(!(!this.data||!p)){var v=d.shiftKey?"equirectangular":"perspective";this.capture(v)}},setCapture:function(d){var p=this.el,v,b,E,S;return d==="perspective"?(this.quad.visible=!1,b=this.data.camera&&this.data.camera.components.camera.camera||p.camera,v={width:this.data.width,height:this.data.height}):(b=this.camera,S=new h.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:h.RGBFormat,generateMipmaps:!0,minFilter:h.LinearMipmapLinearFilter,encoding:h.sRGBEncoding}),E=new h.CubeCamera(p.camera.near,p.camera.far,S),p.camera.getWorldPosition(E.position),p.camera.getWorldQuaternion(E.quaternion),E.update(p.renderer,p.object3D),this.quad.material.uniforms.map.value=E.renderTarget.texture,v={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:b,size:v,projection:d}},capture:function(d){var p=this.el.renderer.xr.enabled,v=this.el.renderer,b;v.xr.enabled=!1,b=this.setCapture(d),this.renderCapture(b.camera,b.size,b.projection),this.saveCapture(),v.xr.enabled=p},getCanvas:function(d){var p=this.el.renderer.xr.enabled,v=this.el.renderer,b=this.setCapture(d);return v.xr.enabled=!1,this.renderCapture(b.camera,b.size,b.projection),v.xr.enabled=p,this.canvas},renderCapture:function(d,p,v){var b=this.el.renderer.autoClear,E=this.el,S,x,T,_=E.renderer;x=this.getRenderTarget(p.width,p.height),T=new Uint8Array(4*p.width*p.height),this.resize(p.width,p.height),_.autoClear=!0,_.clear(),_.setRenderTarget(x),_.render(E.object3D,d),_.autoClear=b,_.readRenderTargetPixels(x,0,0,p.width,p.height,T),_.setRenderTarget(null),v==="perspective"&&(T=this.flipPixelsVertically(T,p.width,p.height)),S=new ImageData(new Uint8ClampedArray(T),p.width,p.height),this.quad.visible=!1,this.ctx.putImageData(S,0,0)},flipPixelsVertically:function(d,p,v){for(var b=d.slice(0),E=0;E<p;++E)for(var S=0;S<v;++S)b[E*4+S*p*4]=d[E*4+(v-S)*p*4],b[E*4+1+S*p*4]=d[E*4+1+(v-S)*p*4],b[E*4+2+S*p*4]=d[E*4+2+(v-S)*p*4],b[E*4+3+S*p*4]=d[E*4+3+(v-S)*p*4];return b},saveCapture:function(){this.canvas.toBlob(function(d){var p="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",v=document.createElement("a"),b=URL.createObjectURL(d);v.href=b,v.setAttribute("download",p),v.innerHTML="downloading...",v.style.display="none",document.body.appendChild(v),setTimeout(function(){v.click(),document.body.removeChild(v)},1)},"image/png")}})},{"../../core/component":131,"../../lib/three":179}],109:[function(c,g,L){var l=c("../../core/component").registerComponent,h=c("../../../vendor/rStats"),m=c("../../utils");c("../../../vendor/rStats.extras"),c("../../lib/rStatsAframe");var y=window.aframeStats,d=m.bind,p="a-hidden",v=window.threeStats;g.exports.Component=l("stats",{schema:{default:!0},init:function(){var E=this.el;m.getUrlParameter("stats")!=="false"&&(this.stats=b(E),this.statsEl=document.querySelector(".rs-base"),this.hideBound=d(this.hide,this),this.showBound=d(this.show,this),E.addEventListener("enter-vr",this.hideBound),E.addEventListener("exit-vr",this.showBound))},update:function(){if(!!this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),!!this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var E=this.stats;!E||(E("rAF").tick(),E("FPS").frame(),E().update())},hide:function(){this.statsEl.classList.add(p)},show:function(){this.statsEl.classList.remove(p)}});function b(E){var S=new v(E.renderer),x=new y(E),T=E.isMobile?[]:[S,x];return new h({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:T})}},{"../../../vendor/rStats":217,"../../../vendor/rStats.extras":216,"../../core/component":131,"../../lib/rStatsAframe":178,"../../utils":205}],110:[function(c,g,L){var l=c("../../core/component").registerComponent,h=c("../../constants/"),m=c("../../utils/"),y=m.bind,d="a-enter-vr",p="a-enter-ar",v="a-enter-vr-button",b="a-enter-ar-button",E="a-hidden",S="a-orientation-modal";g.exports.Component=l("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},enterVRButton:{default:""},enterARButton:{default:""}},init:function(){var C=this,I=this.el;m.getUrlParameter("ui")!=="false"&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),I.addEventListener("enter-vr",this.updateEnterInterfaces),I.addEventListener("exit-vr",this.updateEnterInterfaces),I.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",function(B){B.data.type==="loaderReady"&&(C.insideLoader=!0,C.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=y(this.onEnterVRButtonClick,this),this.onEnterARButtonClick=y(this.onEnterARButtonClick,this),this.onModalClick=y(this.onModalClick,this),this.toggleOrientationModalIfNeeded=y(this.toggleOrientationModalIfNeeded,this),this.updateEnterInterfaces=y(this.updateEnterInterfaces,this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var C=this.data,I=this.el;if(!C.enabled||this.insideLoader||m.getUrlParameter("ui")==="false")return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(C.enterVRButton?(this.enterVREl=document.querySelector(C.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=x(this.onEnterVRButtonClick),I.appendChild(this.enterVREl)),C.enterARButton?(this.enterAREl=document.querySelector(C.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=T(this.onEnterARButtonClick),I.appendChild(this.enterAREl)),this.orientationModalEl=_(this.onModalClick),I.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach(function(C){C&&C.parentNode&&C.parentNode.removeChild(C)}),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var C=this.el;!this.enterVREl||(C.is("vr-mode")?this.enterVREl.classList.add(E):this.enterVREl.classList.remove(E))},toggleEnterARButtonIfNeeded:function(){var C=this.el;!this.enterAREl||(C.is("vr-mode")||!m.device.checkARSupport()?this.enterAREl.classList.add(E):this.enterAREl.classList.remove(E))},toggleOrientationModalIfNeeded:function(){var C=this.el,I=this.orientationModalEl;!I||!C.isMobile||(!m.device.isLandscape()&&C.is("vr-mode")?I.classList.remove(E):I.classList.add(E))}});function x(C){var I,B;return B=document.createElement("div"),B.classList.add(d),B.setAttribute(h.AFRAME_INJECTED,""),I=document.createElement("button"),I.className=v,I.setAttribute("title","Enter VR mode with a headset or fullscreen mode on a desktop. Visit https://webvr.rocks or https://webvr.info for more information."),I.setAttribute(h.AFRAME_INJECTED,""),m.device.isMobile()&&D(I),B.appendChild(I),I.addEventListener("click",function(U){C(),U.stopPropagation()}),B}function T(C){var I,B;return B=document.createElement("div"),B.classList.add(p),B.setAttribute(h.AFRAME_INJECTED,""),I=document.createElement("button"),I.className=b,I.setAttribute("title","Enter AR mode with a headset or handheld device. Visit https://webvr.rocks or https://webvr.info for more information."),I.setAttribute(h.AFRAME_INJECTED,""),m.device.isMobile()&&D(I),B.appendChild(I),I.addEventListener("click",function(U){C(),U.stopPropagation()}),B}function _(C){var I=document.createElement("div");I.className=S,I.classList.add(E),I.setAttribute(h.AFRAME_INJECTED,"");var B=document.createElement("button");return B.setAttribute(h.AFRAME_INJECTED,""),B.innerHTML="Exit VR",B.addEventListener("click",C),I.appendChild(B),I}function D(C){C.addEventListener("touchstart",function(){C.classList.remove("resethover")}),C.addEventListener("touchend",function(){C.classList.add("resethover")})}},{"../../constants/":123,"../../core/component":131,"../../utils/":205}],111:[function(c,g,L){var l=c("../core/component"),h=c("../lib/three"),m=c("../utils/bind"),y=l.registerComponent;g.exports.Component=y("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=m(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var d=this.data;this.updateDescendants(d.cast,d.receive)},remove:function(){var d=this.el;d.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(d,p){var v=this.el.sceneEl;this.el.object3D.traverse(function(b){if(b instanceof h.Mesh&&(b.castShadow=d,b.receiveShadow=p,v.hasLoaded&&b.material))for(var E=Array.isArray(b.material)?b.material:[b.material],S=0;S<E.length;S++)E[S].needsUpdate=!0})}})},{"../core/component":131,"../lib/three":179,"../utils/bind":199}],112:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/debug"),m=c("../lib/three"),y=h("components:sound:warn");g.exports.Component=l("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var d=this;this.listener=null,this.audioLoader=new m.AudioLoader,this.pool=new m.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){d.playSound()}},update:function(d){var p=this.data,v,b,E=p.src!==d.src;if(E){if(!p.src)return;this.setupSound()}for(v=0;v<this.pool.children.length;v++)b=this.pool.children[v],p.positional&&(b.setDistanceModel(p.distanceModel),b.setMaxDistance(p.maxDistance),b.setRefDistance(p.refDistance),b.setRolloffFactor(p.rolloffFactor)),b.setLoop(p.loop),b.setVolume(p.volume),b.isPaused=!1;if(p.on!==d.on&&this.updateEventListener(d.on),E){var S=this;this.loaded=!1,this.audioLoader.load(p.src,function(x){for(v=0;v<S.pool.children.length;v++)b=S.pool.children[v],b.setBuffer(x);S.loaded=!0,m.Cache.remove(p.src),(S.data.autoplay||S.mustPlay)&&S.playSound(),S.el.emit("sound-loaded",S.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var d,p;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(d=0;d<this.pool.children.length;d++)p=this.pool.children[d],p.disconnect()}catch{y("Audio source not properly disconnected")}},updateEventListener:function(d){var p=this.el;d&&p.removeEventListener(d,this.playSoundBound),p.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var d=this.el,p,v=d.sceneEl,b=this,E;this.pool.children.length>0&&(this.stopSound(),d.removeObject3D("sound"));var S=this.listener=v.audioListener||new m.AudioListener;for(v.audioListener=S,v.camera&&v.camera.add(S),v.addEventListener("camera-set-active",function(x){x.detail.cameraEl.getObject3D("camera").add(S)}),this.pool=new m.Group,p=0;p<this.data.poolSize;p++)E=this.data.positional?new m.PositionalAudio(S):new m.Audio(S),this.pool.add(E);for(d.setObject3D(this.attrName,this.pool),p=0;p<this.pool.children.length;p++)E=this.pool.children[p],E.onEnded=function(){this.isPlaying=!1,b.el.emit("sound-ended",b.evtDetail,!1)}},pauseSound:function(){var d,p;for(this.isPlaying=!1,d=0;d<this.pool.children.length;d++)p=this.pool.children[d],!(!p.source||!p.source.buffer||!p.isPlaying||p.isPaused)&&(p.isPaused=!0,p.pause())},playSound:function(d){var p,v,b;if(!this.loaded){y("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0;return}for(p=!1,this.isPlaying=!0,v=0;v<this.pool.children.length;v++)if(b=this.pool.children[v],!b.isPlaying&&b.buffer&&!p){d&&d(b),b.play(),b.isPaused=!1,p=!0;continue}if(!p){y("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el);return}this.mustPlay=!1},stopSound:function(){var d,p;for(this.isPlaying=!1,d=0;d<this.pool.children.length;d++){if(p=this.pool.children[d],!p.source||!p.source.buffer)return;p.stop()}}})},{"../core/component":131,"../lib/three":179,"../utils/debug":201}],113:[function(c,g,L){var l=c("three-bmfont-text"),h=c("load-bmfont"),m=c("../core/component").registerComponent,y=c("../core/shader"),d=c("../lib/three"),p=c("../utils/"),v=p.debug("components:text:error"),b=y.shaders,E=p.debug("components:text:warn"),S=1,x=16,T="https://cdn.aframe.io/fonts/",_={aileronsemibold:T+"Aileron-Semibold.fnt",dejavu:T+"DejaVu-sdf.fnt",exo2bold:T+"Exo2Bold.fnt",exo2semibold:T+"Exo2SemiBold.fnt",kelsonsans:T+"KelsonSans.fnt",monoid:T+"Monoid.fnt",mozillavr:T+"mozillavr.fnt",roboto:T+"Roboto-msdf.json",sourcecodepro:T+"SourceCodePro.fnt"},D=["roboto"],C="roboto";g.exports.FONTS=_;var I=new de,B={},U={},W=/^\w+:/;g.exports.Component=m("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:C},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:b},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=l(),this.createOrUpdateMaterial()},update:function(ne){var xe=this.data,Be=this.currentFont;if(U[xe.font]?this.texture=U[xe.font]:(this.texture=U[xe.font]=new d.Texture,this.texture.anisotropy=x),this.createOrUpdateMaterial(),ne.font!==xe.font){this.updateFont();return}Be&&(this.updateGeometry(this.geometry,Be),this.updateLayout())},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var ne=this.data,xe,Be=this.material,je,Ge=this.shaderData,ct;if(ct=ne.shader,D.indexOf(ne.font)!==-1||ne.font.indexOf("-msdf.")>=0?ct="msdf":ne.font in _&&D.indexOf(ne.font)===-1&&(ct="sdf"),xe=(this.shaderObject&&this.shaderObject.name)!==ct,Ge.alphaTest=ne.alphaTest,Ge.color=ne.color,Ge.map=this.texture,Ge.opacity=ne.opacity,Ge.side=oe(ne.side),Ge.transparent=ne.transparent,Ge.negate=ne.negate,!xe){this.shaderObject.update(Ge),Be.transparent=Ge.transparent,Be.side=Ge.side;return}je=te(this.el,ct,Ge),this.material=je.material,this.shaderObject=je.shader,this.material.side=Ge.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var ne=this.data,xe=this.el,Be,je=this.geometry,Ge=this;ne.font||E("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),Be=this.lookupFont(ne.font||C)||ne.font,I.get(Be,function(){return J(Be,ne.yOffset)}).then(function(lt){var Et;if(lt.pages.length!==1)throw new Error("Currently only single-page bitmap fonts are supported.");B[Be]||(lt.widthFactor=B[lt]=Y(lt)),Ge.currentFont=lt,Et=Ge.getFontImageSrc(),I.get(Et,function(){return le(Et)}).then(function(Ct){var jt=Ge.texture;jt.image=Ct,jt.needsUpdate=!0,U[ne.font]=jt,Ge.texture=jt,Ge.initMesh(),Ge.currentFont=lt,Ge.updateGeometry(je,lt),Ge.updateLayout(),Ge.mesh.visible=!0,xe.emit("textfontset",{font:ne.font,fontObj:lt})}).catch(function(Ct){v(Ct.message),v(Ct.stack)})}).catch(function(ct){v(ct.message),v(ct.stack)})},initMesh:function(){this.mesh||(this.mesh=new d.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var ne=this.lookupFont(this.data.font||C)||this.data.font,xe=this.currentFont.pages[0];return xe.match(W)&&xe.indexOf("http")!==0?ne.replace(/(\.fnt)|(\.json)/,".png"):d.LoaderUtils.extractUrlBase(ne)+xe},updateLayout:function(){var ne,xe,Be=this.el,je=this.data,Ge=this.geometry,ct,lt,Et,Ct=this.mesh,jt,tt,pt,$e,Tt;if(!(!Ct||!Ge.layout)){if(ct=Be.getAttribute("geometry"),pt=je.width||ct&&ct.width||S,jt=ue(je.wrapPixels,je.wrapCount,this.currentFont.widthFactor),tt=pt/jt,Et=Ge.layout,lt=tt*(Et.height+Et.descender),ct&&ct.primitive==="plane"&&(ct.width||Be.setAttribute("geometry","width",pt),ct.height||Be.setAttribute("geometry","height",lt)),ne=je.anchor==="align"?je.align:je.anchor,ne==="left")$e=0;else if(ne==="right")$e=-1*Et.width;else if(ne==="center")$e=-1*Et.width/2;else throw new TypeError("Invalid text.anchor property value",ne);if(xe=je.baseline,xe==="bottom")Tt=0;else if(xe==="top")Tt=-1*Et.height+Et.ascender;else if(xe==="center")Tt=-1*Et.height/2;else throw new TypeError("Invalid text.baseline property value",xe);Ct.position.x=$e*tt+je.xOffset,Ct.position.y=Tt*tt,Ct.position.z=je.zOffset,Ct.scale.set(tt,-1*tt,tt)}},lookupFont:function(ne){return _[ne]},updateGeometry:function(){var ne={},xe={},Be=/\\n/g,je=/\\t/g;return function(Ge,ct){var lt=this.data;xe.font=ct,xe.lineHeight=lt.lineHeight&&isFinite(lt.lineHeight)?lt.lineHeight:ct.common.lineHeight,xe.text=lt.value.toString().replace(Be,`
`).replace(je,"	"),xe.width=ue(lt.wrapPixels,lt.wrapCount,ct.widthFactor),Ge.update(p.extend(ne,lt,xe))}}()});function oe(ne){switch(ne){case"back":return d.FrontSide;case"double":return d.DoubleSide;default:return d.BackSide}}function J(ne,xe){return new Promise(function(Be,je){h(ne,function(Ge,ct){if(Ge){v("Error loading font",ne),je(Ge);return}ne.indexOf("/Roboto-msdf.json")>=0&&(xe=30),xe&&ct.chars.map(function(Et){Et.yoffset+=xe}),Be(ct)})})}function le(ne){return new Promise(function(xe,Be){new d.ImageLoader().load(ne,function(je){xe(je)},void 0,function(){v("Error loading font image",ne),Be(null)})})}function te(ne,xe,Be){var je,Ge;return Ge=new b[xe].Shader,Ge.el=ne,Ge.init(Be),Ge.update(Be),je=Ge.material,je.transparent=Be.transparent,{material:je,shader:Ge}}function ue(ne,xe,Be){return ne||(.5+xe)*Be}function Y(ne){var xe=0,Be=0,je=0;return ne.chars.map(function(Ge){xe+=Ge.xadvance,Ge.id>=48&&Ge.id<=57&&(je++,Be+=Ge.xadvance)}),je?Be/je:xe/ne.chars.length}function de(){var ne=this.cache={};this.get=function(xe,Be){return xe in ne||(ne[xe]=Be()),ne[xe]}}},{"../core/component":131,"../core/shader":141,"../lib/three":179,"../utils/":205,"load-bmfont":37,"three-bmfont-text":63}],114:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/tracked-controls"),m=c("../constants").DEFAULT_CAMERA_HEIGHT,y=c("../lib/three"),d=c("../constants").DEFAULT_HANDEDNESS,p={x:.175,y:-.3,z:-.03},v={x:0,y:0,z:-.175},b={touches:[]},E={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};g.exports.Component=l("tracked-controls-webvr",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"}},init:function(){this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new y.Vector3,this.controllerQuaternion=new y.Quaternion,this.controllerEuler=new y.Euler,this.updateGamepad(),this.buttonEventDetails={}},tick:function(S,x){var T=this.el.getObject3D("mesh");T&&T.update&&T.update(x/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return m},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var S=this.data,x=h.findMatchingControllerWebVR(this.system.controllers,S.id,S.idPrefix,S.hand,S.controller);this.controller=x,this.el.components["tracked-controls"].controller=x,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},applyArmModel:function(S){var x=this.controller,T=this.controllerEuler,_=this.controllerQuaternion,D=this.deltaControllerPosition,C,I,B,U,W;I=this.getHeadElement(),B=I.object3D,W=this.defaultUserHeight(),U=x.pose,C=(x?x.hand:void 0)||d,S.copy(B.position),D.set(p.x*(C==="left"?-1:C==="right"?1:0),p.y,p.z),D.multiplyScalar(W),D.applyAxisAngle(B.up,B.rotation.y),S.add(D),D.set(v.x,v.y,v.z),D.multiplyScalar(W),U.orientation?_.fromArray(U.orientation):_.copy(B.quaternion),T.setFromQuaternion(_),T.set(T.x,T.y,0),D.applyEuler(T),S.add(D)},updatePose:function(){var S=this.controller,x=this.data,T=this.el.object3D,_,D=this.system.vrDisplay,C;!S||(_=S.pose,_.position?T.position.fromArray(_.position):x.armModel&&this.applyArmModel(T.position),_.orientation&&T.quaternion.fromArray(_.orientation),D&&_.position&&(C=this.el.sceneEl.renderer.xr.getStandingMatrix(),T.matrix.compose(T.position,T.quaternion,T.scale),T.matrix.multiplyMatrices(C,T.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),T.rotateX(this.data.orientationOffset.x*y.Math.DEG2RAD),T.rotateY(this.data.orientationOffset.y*y.Math.DEG2RAD),T.rotateZ(this.data.orientationOffset.z*y.Math.DEG2RAD))},updateButtons:function(){var S,x=this.controller,T;if(!!x){for(T=0;T<x.buttons.length;++T)this.buttonStates[T]||(this.buttonStates[T]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[T]||(this.buttonEventDetails[T]={id:T,state:this.buttonStates[T]}),S=x.buttons[T],this.handleButton(T,S);this.handleAxes()}},handleButton:function(S,x){var T;return T=this.handlePress(S,x)|this.handleTouch(S,x)|this.handleValue(S,x),T?(this.el.emit(E.BUTTONCHANGED,this.buttonEventDetails[S],!1),!0):!1},handleAxes:function(){var S=!1,x=this.controller.axes,T,_=this.axis,D=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),T=0;T<x.length;++T)D.push(_[T]!==x[T]),D[T]&&(S=!0);if(!S)return!1;for(this.axis.splice(0,this.axis.length),T=0;T<x.length;T++)this.axis.push(x[T]);return this.el.emit(E.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(S,x){var T,_=this.buttonStates[S];return x.pressed===_.pressed?!1:(T=x.pressed?E.BUTTONDOWN:E.BUTTONUP,this.el.emit(T,this.buttonEventDetails[S],!1),_.pressed=x.pressed,!0)},handleTouch:function(S,x){var T,_=this.buttonStates[S];return x.touched===_.touched?!1:(T=x.touched?E.TOUCHSTART:E.TOUCHEND,this.el.emit(T,this.buttonEventDetails[S],!1,b),_.touched=x.touched,!0)},handleValue:function(S,x){var T=this.buttonStates[S];return x.value===T.value?!1:(T.value=x.value,!0)}})},{"../constants":123,"../core/component":131,"../lib/three":179,"../utils/tracked-controls":214}],115:[function(c,g,L){var l=c("../utils/tracked-controls"),h=c("../core/component").registerComponent,m={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};g.exports.Component=h("tracked-controls-webxr",{schema:{id:{type:"string",default:""},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},index:{type:"int",default:-1},iterateControllerProfiles:{default:!1}},init:function(){this.updateController=this.updateController.bind(this),this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes}},update:function(){this.updateController()},play:function(){var y=this.el.sceneEl;this.updateController(),y.addEventListener("controllersupdated",this.updateController)},pause:function(){var y=this.el.sceneEl;y.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(y){return!(!this.controller||this.controller.gamepad||y.inputSource.handedness!=="none"&&y.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=l.findMatchingControllerWebXR(this.system.controllers,this.data.id,this.data.hand,this.data.index,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},tick:function(){var y=this.el.sceneEl,d=this.controller,p=y.frame;!d||!y.frame||!this.system.referenceSpace||d.hand||(this.pose=p.getPose(d.targetRaySpace,this.system.referenceSpace),this.updatePose(),this.updateButtons())},updatePose:function(){var y=this.el.object3D,d=this.pose;!d||(y.matrix.elements=d.transform.matrix,y.matrix.decompose(y.position,y.rotation,y.scale))},updateButtons:function(){var y,d,p=this.controller,v;if(!(!p||!p.gamepad)){for(v=p.gamepad,d=0;d<v.buttons.length;++d)this.buttonStates[d]||(this.buttonStates[d]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[d]||(this.buttonEventDetails[d]={id:d,state:this.buttonStates[d]}),y=v.buttons[d],this.handleButton(d,y);this.handleAxes()}},handleButton:function(y,d){var p;return p=this.handlePress(y,d)|this.handleTouch(y,d)|this.handleValue(y,d),p?(this.el.emit(m.BUTTONCHANGED,this.buttonEventDetails[y],!1),!0):!1},handleAxes:function(){var y=!1,d=this.controller.gamepad.axes,p,v=this.axis,b=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),p=0;p<d.length;++p)b.push(v[p]!==d[p]),b[p]&&(y=!0);if(!y)return!1;for(this.axis.splice(0,this.axis.length),p=0;p<d.length;p++)this.axis.push(d[p]);return this.el.emit(m.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(y,d){var p,v=this.buttonStates[y];return d.pressed===v.pressed?!1:(p=d.pressed?m.BUTTONDOWN:m.BUTTONUP,this.el.emit(p,this.buttonEventDetails[y],!1),v.pressed=d.pressed,!0)},handleTouch:function(y,d){var p,v=this.buttonStates[y];return d.touched===v.touched?!1:(p=d.touched?m.TOUCHSTART:m.TOUCHEND,this.el.emit(p,this.buttonEventDetails[y],!1),v.touched=d.touched,!0)},handleValue:function(y,d){var p=this.buttonStates[y];return d.value===p.value?!1:(p.value=d.value,!0)}})},{"../core/component":131,"../utils/tracked-controls":214}],116:[function(c,g,L){var l=c("../core/component").registerComponent;g.exports.Component=l("tracked-controls",{schema:{autoHide:{default:!0},controller:{default:-1},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},handTrackingEnabled:{default:!1},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"},iterateControllerProfiles:{default:!1}},update:function(){var h=this.data,m=this.el;m.sceneEl.hasWebXR?m.setAttribute("tracked-controls-webxr",{id:h.id,hand:h.hand,index:h.controller,iterateControllerProfiles:h.iterateControllerProfiles,handTrackingEnabled:h.handTrackingEnabled}):m.setAttribute("tracked-controls-webvr",h)}})},{"../core/component":131}],117:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/bind"),m=c("../lib/three"),y=c("../utils/tracked-controls"),d=y.checkControllerPresentAndSetup,p=y.emitIfAxesChanged,v=y.onButtonEvent,b="https://cdn.aframe.io/controllers/valve/index/valve-index-",E={left:b+"left.glb",right:b+"right.glb"},S="valve",x=c("../utils/").device.isWebXRAvailable,T={left:{x:-.00023692678902063457,y:.04724540367838371,z:-.061959880395271096},right:{x:.002471558599671131,y:.055765208987076195,z:-.061068168708348844}},_={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},D={left:{_x:.692295102620542,_y:-.0627618864318427,_z:-.06265893149611756,_order:"XYZ"},right:{_x:.6484021229942998,_y:-.032563619881892894,_z:-.1327973171917482,_order:"XYZ"}},C={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},I=x?C:D,B=x?_:T;g.exports.Component=l("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var U=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=h(this.onButtonChanged,this),this.onButtonDown=function(W){v(W.detail.id,"down",U)},this.onButtonUp=function(W){v(W.detail.id,"up",U)},this.onButtonTouchEnd=function(W){v(W.detail.id,"touchend",U)},this.onButtonTouchStart=function(W){v(W.detail.id,"touchstart",U)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=h(this.onModelLoaded,this),this.onControllersUpdate=h(this.onControllersUpdate,this),this.checkIfControllerPresent=h(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=h(this.removeControllersUpdateListener,this),this.onAxisMoved=h(this.onAxisMoved,this)},addEventListeners:function(){var U=this.el;U.addEventListener("buttonchanged",this.onButtonChanged),U.addEventListener("buttondown",this.onButtonDown),U.addEventListener("buttonup",this.onButtonUp),U.addEventListener("touchend",this.onButtonTouchEnd),U.addEventListener("touchstart",this.onButtonTouchStart),U.addEventListener("model-loaded",this.onModelLoaded),U.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var U=this.el;U.removeEventListener("buttonchanged",this.onButtonChanged),U.removeEventListener("buttondown",this.onButtonDown),U.removeEventListener("buttonup",this.onButtonUp),U.removeEventListener("touchend",this.onButtonTouchEnd),U.removeEventListener("touchstart",this.onButtonTouchStart),U.removeEventListener("model-loaded",this.onModelLoaded),U.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var U=this.data,W=U.hand==="right"?0:U.hand==="left"?1:2;d(this,S,{index:W,iterateControllerProfiles:!0,hand:U.hand})},injectTrackedControls:function(){var U=this.el,W=this.data;U.setAttribute("tracked-controls",{idPrefix:S,controller:W.hand==="right"?1:W.hand==="left"?0:2,hand:W.hand,orientationOffset:W.orientationOffset}),this.loadModel()},loadModel:function(){var U=this.data;!U.model||this.el.setAttribute("gltf-model",""+E[U.hand]+"")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(U){var W=this.mapping.buttons[U.detail.id],oe=this.buttonMeshes,J;!W||(W==="trigger"&&(J=U.detail.state.value,oe&&oe.trigger&&(oe.trigger.rotation.x=this.triggerOriginalRotationX-J*(Math.PI/40))),this.el.emit(W+"changed",U.detail.state))},onModelLoaded:function(U){var W,oe=U.detail.model,J=this;!this.data.model||(W=this.buttonMeshes={},W.grip={left:oe.getObjectByName("leftgrip"),right:oe.getObjectByName("rightgrip")},W.menu=oe.getObjectByName("menubutton"),W.system=oe.getObjectByName("systembutton"),W.trackpad=oe.getObjectByName("touchpad"),W.trigger=oe.getObjectByName("trigger"),this.triggerOriginalRotationX=W.trigger.rotation.x,Object.keys(W).forEach(function(le){J.setButtonColor(le,J.data.buttonColor)}),oe.position.copy(B[this.data.hand]),oe.rotation.copy(I[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controlls",model:this.data.model,rayOrigin:new m.Vector3(0,0,0)}))},onAxisMoved:function(U){p(this,this.mapping.axes,U)},updateModel:function(U,W){var oe,J;!this.data.model||(J=W.indexOf("touch")!==-1,!J&&(oe=W==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(U,oe)))},setButtonColor:function(U,W){}})},{"../core/component":131,"../lib/three":179,"../utils/":205,"../utils/bind":199,"../utils/tracked-controls":214}],118:[function(c,g,L){var l=c("../core/component").registerComponent;g.exports.Component=l("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},{"../core/component":131}],119:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/bind"),m=c("../utils/tracked-controls"),y=m.checkControllerPresentAndSetup,d=m.emitIfAxesChanged,p=m.onButtonEvent,v="https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",b="https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl",E=c("../utils/").device.isWebXRAvailable,S="htc-vive-controller-mv",x="OpenVR ",T=E?S:x,_={axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},D={axes:{thumbstick:[0,1]},buttons:["trigger","grip","trackpad","none","menu"]},C=E?D:_;g.exports.Component=l("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:C,init:function(){var I=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=h(this.onButtonChanged,this),this.onButtonDown=function(B){p(B.detail.id,"down",I)},this.onButtonUp=function(B){p(B.detail.id,"up",I)},this.onButtonTouchEnd=function(B){p(B.detail.id,"touchend",I)},this.onButtonTouchStart=function(B){p(B.detail.id,"touchstart",I)},this.previousButtonValues={},this.rendererSystem=this.el.sceneEl.systems.renderer,this.bindMethods()},update:function(){var I=this.data;this.controllerIndex=I.hand==="right"?0:I.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=h(this.onModelLoaded,this),this.onControllersUpdate=h(this.onControllersUpdate,this),this.checkIfControllerPresent=h(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=h(this.removeControllersUpdateListener,this),this.onAxisMoved=h(this.onAxisMoved,this)},addEventListeners:function(){var I=this.el;I.addEventListener("buttonchanged",this.onButtonChanged),I.addEventListener("buttondown",this.onButtonDown),I.addEventListener("buttonup",this.onButtonUp),I.addEventListener("touchend",this.onButtonTouchEnd),I.addEventListener("touchstart",this.onButtonTouchStart),I.addEventListener("model-loaded",this.onModelLoaded),I.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var I=this.el;I.removeEventListener("buttonchanged",this.onButtonChanged),I.removeEventListener("buttondown",this.onButtonDown),I.removeEventListener("buttonup",this.onButtonUp),I.removeEventListener("touchend",this.onButtonTouchEnd),I.removeEventListener("touchstart",this.onButtonTouchStart),I.removeEventListener("model-loaded",this.onModelLoaded),I.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var I=this.data;y(this,T,{index:this.controllerIndex,hand:I.hand})},injectTrackedControls:function(){var I=this.el,B=this.data;I.setAttribute("tracked-controls",{idPrefix:T,hand:B.hand,controller:this.controllerIndex,orientationOffset:B.orientationOffset}),!!this.data.model&&this.el.setAttribute("obj-model",{obj:v,mtl:b})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(I){var B=this.mapping.buttons[I.detail.id],U=this.buttonMeshes,W;!B||(B==="trigger"&&(W=I.detail.state.value,U&&U.trigger&&(U.trigger.rotation.x=-W*(Math.PI/12))),this.el.emit(B+"changed",I.detail.state))},onModelLoaded:function(I){var B,U=I.detail.model,W=this;!this.data.model||(B=this.buttonMeshes={},B.grip={left:U.getObjectByName("leftgrip"),right:U.getObjectByName("rightgrip")},B.menu=U.getObjectByName("menubutton"),B.system=U.getObjectByName("systembutton"),B.trackpad=U.getObjectByName("touchpad"),B.trigger=U.getObjectByName("trigger"),Object.keys(B).forEach(function(oe){W.setButtonColor(oe,W.data.buttonColor)}),U.position.set(0,-.015,.04))},onAxisMoved:function(I){d(this,this.mapping.axes,I)},updateModel:function(I,B){var U,W;!this.data.model||(W=B.indexOf("touch")!==-1,!W&&(U=B==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(I,U)))},setButtonColor:function(I,B){var U=this.buttonMeshes,W=this.rendererSystem;if(!!U){if(I==="grip"){U.grip.left.material.color.set(B),U.grip.right.material.color.set(B),W.applyColorCorrection(U.grip.left.material.color),W.applyColorCorrection(U.grip.right.material.color);return}U[I].material.color.set(B),W.applyColorCorrection(U[I].material.color)}}})},{"../core/component":131,"../utils/":205,"../utils/bind":199,"../utils/tracked-controls":214}],120:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/bind"),m=c("../utils/tracked-controls"),y=m.checkControllerPresentAndSetup,d=m.emitIfAxesChanged,p=m.onButtonEvent,v="HTC Vive Focus",b="https://cdn.aframe.io/controllers/vive/focus-controller/focus-controller.gltf";g.exports.Component=l("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=h(this.onModelLoaded,this),this.onControllersUpdate=h(this.onControllersUpdate,this),this.checkIfControllerPresent=h(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=h(this.removeControllersUpdateListener,this),this.onAxisMoved=h(this.onAxisMoved,this)},init:function(){var E=this;this.onButtonChanged=h(this.onButtonChanged,this),this.onButtonDown=function(S){p(S.detail.id,"down",E)},this.onButtonUp=function(S){p(S.detail.id,"up",E)},this.onButtonTouchStart=function(S){p(S.detail.id,"touchstart",E)},this.onButtonTouchEnd=function(S){p(S.detail.id,"touchend",E)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var E=this.el;E.addEventListener("buttonchanged",this.onButtonChanged),E.addEventListener("buttondown",this.onButtonDown),E.addEventListener("buttonup",this.onButtonUp),E.addEventListener("touchstart",this.onButtonTouchStart),E.addEventListener("touchend",this.onButtonTouchEnd),E.addEventListener("model-loaded",this.onModelLoaded),E.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var E=this.el;E.removeEventListener("buttonchanged",this.onButtonChanged),E.removeEventListener("buttondown",this.onButtonDown),E.removeEventListener("buttonup",this.onButtonUp),E.removeEventListener("touchstart",this.onButtonTouchStart),E.removeEventListener("touchend",this.onButtonTouchEnd),E.removeEventListener("model-loaded",this.onModelLoaded),E.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){y(this,v,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var E=this.el,S=this.data;E.setAttribute("tracked-controls",{armModel:S.armModel,idPrefix:v,orientationOffset:S.orientationOffset}),!!this.data.model&&this.el.setAttribute("gltf-model",b)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(E){var S=E.detail.model,x;!this.data.model||(x=this.buttonMeshes={},x.trigger=S.getObjectByName("BumperKey"),x.triggerPressed=S.getObjectByName("BumperKey_Press"),x.triggerPressed&&(x.triggerPressed.visible=!1),x.trackpad=S.getObjectByName("TouchPad"),x.trackpadPressed=S.getObjectByName("TouchPad_Press"),x.trackpadPressed&&(x.trackpadPressed.visible=!1))},onButtonChanged:function(E){var S=this.mapping.buttons[E.detail.id];!S||this.el.emit(S+"changed",E.detail.state)},onAxisMoved:function(E){d(this,this.mapping.axes,E)},updateModel:function(E,S){!this.data.model||this.updateButtonModel(E,S)},updateButtonModel:function(E,S){var x=this.buttonMeshes,T=E+"Pressed";if(!(!x||!x[E]||!x[T])){var _;switch(S){case"down":_=this.data.buttonHighlightColor;break;case"touchstart":_=this.data.buttonTouchedColor;break}_&&x[T].material.color.set(_),x[T].visible=!!_,x[E].visible=!_}}})},{"../core/component":131,"../utils/bind":199,"../utils/tracked-controls":214}],121:[function(c,g,L){var l=c("../constants").keyboardevent.KEYCODE_TO_CODE,h=c("../core/component").registerComponent,m=c("../lib/three"),y=c("../utils/"),d=y.bind,p=y.shouldCaptureKeyEvent,v=1e-5,b=.2,E=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];g.exports.Component=h("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.easing=1.1,this.velocity=new m.Vector3,this.onBlur=d(this.onBlur,this),this.onContextMenu=d(this.onContextMenu,this),this.onFocus=d(this.onFocus,this),this.onKeyDown=d(this.onKeyDown,this),this.onKeyUp=d(this.onKeyUp,this),this.onVisibilityChange=d(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(x,T){var _=this.data,D=this.el,C=this.velocity;!C[_.adAxis]&&!C[_.wsAxis]&&S(this.keys)||(T=T/1e3,this.updateVelocity(T),!(!C[_.adAxis]&&!C[_.wsAxis])&&D.object3D.position.add(this.getMovementVector(T)))},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(x){var T,_,D,C=this.data,I=this.keys,B=this.velocity,U,W;if(_=C.adAxis,U=C.wsAxis,x>b){B[_]=0,B[U]=0;return}var oe=Math.pow(1/this.easing,x*60);B[_]!==0&&(B[_]=B[_]*oe),B[U]!==0&&(B[U]=B[U]*oe),Math.abs(B[_])<v&&(B[_]=0),Math.abs(B[U])<v&&(B[U]=0),!!C.enabled&&(T=C.acceleration,C.adEnabled&&(D=C.adInverted?-1:1,(I.KeyA||I.ArrowLeft)&&(B[_]-=D*T*x),(I.KeyD||I.ArrowRight)&&(B[_]+=D*T*x)),C.wsEnabled&&(W=C.wsInverted?-1:1,(I.KeyW||I.ArrowUp)&&(B[U]-=W*T*x),(I.KeyS||I.ArrowDown)&&(B[U]+=W*T*x)))},getMovementVector:function(){var x=new m.Vector3(0,0,0),T=new m.Euler(0,0,0,"YXZ");return function(_){var D=this.el.getAttribute("rotation"),C=this.velocity,I;return x.copy(C),x.multiplyScalar(_),D&&(I=this.data.fly?D.x:0,T.set(m.Math.degToRad(I),m.Math.degToRad(D.y),0),x.applyEuler(T)),x}}(),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var x=Object.keys(this.keys),T=0;T<x.length;T++)delete this.keys[x[T]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(x){var T;!p(x)||(T=x.code||l[x.keyCode],E.indexOf(T)!==-1&&(this.keys[T]=!0))},onKeyUp:function(x){var T;T=x.code||l[x.keyCode],delete this.keys[T]}});function S(x){var T;for(T in x)return!1;return!0}},{"../constants":123,"../core/component":131,"../lib/three":179,"../utils/":205}],122:[function(c,g,L){var l=c("../core/component").registerComponent,h=c("../utils/bind"),m=c("../utils/tracked-controls"),y=m.checkControllerPresentAndSetup,d=m.emitIfAxesChanged,p=m.onButtonEvent,v=c("../utils/"),b=v.debug("components:windows-motion-controls:debug"),E=v.debug("components:windows-motion-controls:warn"),S=c("../constants").DEFAULT_HANDEDNESS,x="https://cdn.aframe.io/controllers/microsoft/",T={left:"left.glb",right:"right.glb",default:"universal.glb"},_=c("../utils/").device.isWebXRAvailable,D="windows-mixed-reality",C="Spatial Controller (Spatial Interaction Source) ",I=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/,B=_?D:C,U={axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},W={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},oe=_?W:U;g.exports.Component=l("windows-motion-controls",{schema:{hand:{default:S},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},mapping:oe,bindMethods:function(){this.onModelError=h(this.onModelError,this),this.onModelLoaded=h(this.onModelLoaded,this),this.onControllersUpdate=h(this.onControllersUpdate,this),this.checkIfControllerPresent=h(this.checkIfControllerPresent,this),this.onAxisMoved=h(this.onAxisMoved,this)},init:function(){var J=this,le=this.el;this.onButtonChanged=h(this.onButtonChanged,this),this.onButtonDown=function(te){p(te.detail.id,"down",J)},this.onButtonUp=function(te){p(te.detail.id,"up",J)},this.onButtonTouchStart=function(te){p(te.detail.id,"touchstart",J)},this.onButtonTouchEnd=function(te){p(te.detail.id,"touchend",J)},this.onControllerConnected=function(){J.setModelVisibility(!0)},this.onControllerDisconnected=function(){J.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},le.addEventListener("controllerconnected",this.onControllerConnected),le.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var J=this.el;J.addEventListener("buttonchanged",this.onButtonChanged),J.addEventListener("buttondown",this.onButtonDown),J.addEventListener("buttonup",this.onButtonUp),J.addEventListener("touchstart",this.onButtonTouchStart),J.addEventListener("touchend",this.onButtonTouchEnd),J.addEventListener("axismove",this.onAxisMoved),J.addEventListener("model-error",this.onModelError),J.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var J=this.el;J.removeEventListener("buttonchanged",this.onButtonChanged),J.removeEventListener("buttondown",this.onButtonDown),J.removeEventListener("buttonup",this.onButtonUp),J.removeEventListener("touchstart",this.onButtonTouchStart),J.removeEventListener("touchend",this.onButtonTouchEnd),J.removeEventListener("axismove",this.onAxisMoved),J.removeEventListener("model-error",this.onModelError),J.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){y(this,B,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(!this.data.model||this.rayOrigin.createdFromMesh){this.modelReady();return}var J=this.createControllerModelUrl();this.loadModel(J)},createControllerModelUrl:function(J){var le=this.el.components["tracked-controls"],te=le?le.controller:null,ue="default",Y=this.data.hand,de;if(te&&!window.hasNativeWebXRImplementation&&(Y=te.hand,!J)){var ne=te.id.match(I);ue=ne&&ne[0]||ue}return de=T[Y]||T.default,x+ue+"/"+de},injectTrackedControls:function(){var J=this.data;this.el.setAttribute("tracked-controls",{idPrefix:B,controller:J.pair,hand:J.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(J){var le=this.createControllerModelUrl(!0);J.detail.src!==le?(E("Failed to load controller model for device, attempting to load default."),this.loadModel(le)):E("Failed to load default controller model.")},loadModel:function(J){this.el.setAttribute("gltf-model","url("+J+")")},onModelLoaded:function(J){var le=this.controllerModel=J.detail.model,te=this.loadedMeshInfo,ue,Y,de,ne;if(b("Processing model"),te.buttonMeshes={},te.axisMeshes={},le){for(ue=0;ue<this.mapping.buttons.length;ue++){if(Y=this.mapping.buttonMeshNames[this.mapping.buttons[ue]],!Y){b("Skipping unknown button at index: "+ue+" with mapped name: "+this.mapping.buttons[ue]);continue}if(de=le.getObjectByName(Y),!de){E("Missing button mesh with name: "+Y);continue}ne={index:ue,value:xe(de,"VALUE"),pressed:xe(de,"PRESSED"),unpressed:xe(de,"UNPRESSED")},ne.value&&ne.pressed&&ne.unpressed?te.buttonMeshes[this.mapping.buttons[ue]]=ne:E("Missing button submesh under mesh with name: "+Y+"(VALUE: "+!!ne.value+", PRESSED: "+!!ne.pressed+", UNPRESSED:"+!!ne.unpressed+")")}for(ue=0;ue<this.mapping.axisMeshNames.length;ue++){if(Y=this.mapping.axisMeshNames[ue],!Y){b("Skipping unknown axis at index: "+ue);continue}if(de=le.getObjectByName(Y),!de){E("Missing axis mesh with name: "+Y);continue}ne={index:ue,value:xe(de,"VALUE"),min:xe(de,"MIN"),max:xe(de,"MAX")},ne.value&&ne.min&&ne.max?te.axisMeshes[ue]=ne:E("Missing axis submesh under mesh with name: "+Y+"(VALUE: "+!!ne.value+", MIN: "+!!ne.min+", MAX:"+!!ne.max+")")}this.calculateRayOriginFromMesh(le),this.setModelVisibility()}b("Model load complete.");function xe(Be,je){for(var Ge=0,ct=Be.children.length;Ge<ct;Ge++){var lt=Be.children[Ge];if(lt&&lt.name===je)return lt}}},calculateRayOriginFromMesh:function(){var J=new THREE.Quaternion;return function(le){var te;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,te=le.getObjectByName(this.mapping.pointingPoseMeshName),te){var ue=le.parent;ue&&(le.parent=null,le.updateMatrixWorld(!0),le.parent=ue),te.getWorldPosition(this.rayOrigin.origin),te.getWorldQuaternion(J),this.rayOrigin.direction.applyQuaternion(J),ue&&le.updateMatrixWorld(!0)}else b("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var J=new THREE.Quaternion;return function(le,te){var ue=this.loadedMeshInfo.axisMeshes[le];if(!!ue){var Y=ue.min,de=ue.max,ne=ue.value,xe=te*.5+.5;ne.setRotationFromQuaternion(J.copy(Y.quaternion).slerp(de.quaternion,xe)),ne.position.lerpVectors(Y.position,de.position,xe)}}}(),lerpButtonTransform:function(){var J=new THREE.Quaternion;return function(le,te){var ue=this.loadedMeshInfo.buttonMeshes[le];if(!!ue){var Y=ue.unpressed,de=ue.pressed,ne=ue.value;ne.setRotationFromQuaternion(J.copy(Y.quaternion).slerp(de.quaternion,te)),ne.position.lerpVectors(Y.position,de.position,te)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(J){var le=this.mapping.buttons[J.detail.id];le&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(le,J.detail.state.value),this.el.emit(le+"changed",J.detail.state))},onAxisMoved:function(J){var le=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var te=0;te<le;te++)this.lerpAxisTransform(te,J.detail.axis[te]||0);d(this,this.mapping.axes,J)},setModelVisibility:function(J){var le=this.el.getObject3D("mesh");J=J!==void 0?J:this.modelVisible,this.modelVisible=J,!!le&&(le.visible=J)}})},{"../constants":123,"../core/component":131,"../utils/":205,"../utils/bind":199,"../utils/tracked-controls":214}],123:[function(c,g,L){g.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",keyboardevent:c("./keyboardevent")}},{"./keyboardevent":124}],124:[function(c,g,L){g.exports={KEYCODE_TO_CODE:{"38":"ArrowUp","37":"ArrowLeft","40":"ArrowDown","39":"ArrowRight","87":"KeyW","65":"KeyA","83":"KeyS","68":"KeyD"}}},{}],125:[function(c,g,L){var l=c("./a-node"),h=c("../utils/bind"),m=c("../utils/debug"),y=c("./a-register-element").registerElement,d=c("../lib/three"),p=new d.FileLoader,v=m("core:a-assets:warn");g.exports=y("a-assets",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){this.isAssets=!0,this.fileLoader=p,this.timeout=null}},attachedCallback:{value:function(){var D=this,C,I=[],B,U,W,oe,J;if(!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(oe=this.querySelectorAll("img"),C=0;C<oe.length;C++)W=E(oe[C]),I.push(new Promise(function(le,te){d.Cache.files[oe[C].getAttribute("src")]=W,W.onload=le,W.onerror=te}));for(U=this.querySelectorAll("audio, video"),C=0;C<U.length;C++)B=E(U[C]),!B.src&&!B.srcObject&&v("Audio/video asset has neither `src` nor `srcObject` attributes."),I.push(b(B));Promise.all(I).then(h(this.load,this)),J=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){D.hasLoaded||(v("Asset loading timed out in ",J,"ms"),D.emit("timeout"),D.load())},J)}},detachedCallback:{value:function(){this.timeout&&clearTimeout(this.timeout)}},load:{value:function(){l.prototype.load.call(this,null,function(C){return C.isAssetItem&&C.hasAttribute("src")})}}})}),y("a-asset-item",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){this.data=null,this.isAssetItem=!0}},attachedCallback:{value:function(){var D=this,C=this.getAttribute("src");p.setResponseType(this.getAttribute("response-type")||T(C)),p.load(C,function(B){D.data=B,setTimeout(function(){l.prototype.load.call(D)})},function(B){D.emit("progress",{loadedBytes:B.loaded,totalBytes:B.total,xhr:B})},function(B){D.emit("error",{xhr:B})})}}})});function b(D){if(!(!D.hasAttribute("autoplay")&&D.getAttribute("preload")!=="auto"))return new Promise(function(C,I){if(D.readyState===4)return C();if(D.error)return I();D.addEventListener("loadeddata",B,!1),D.addEventListener("progress",B,!1),D.addEventListener("error",I,!1);function B(){for(var U=0,W=0;W<D.buffered.length;W++)U+=D.buffered.end(W)-D.buffered.start(W);U>=D.duration&&(D.tagName==="VIDEO"&&(d.Cache.files[D.getAttribute("src")]=D),C())}})}function E(D){var C=S(D);return C.tagName&&C.tagName.toLowerCase()==="video"&&(C.setAttribute("playsinline",""),C.setAttribute("webkit-playsinline","")),C!==D&&(D.parentNode.appendChild(C),D.parentNode.removeChild(D)),C}function S(D){var C,I;return D.hasAttribute("crossorigin")||(I=D.getAttribute("src"),I!==null&&(I.indexOf("://")===-1||x(I)===window.location.host))?D:(v('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',I),D.crossOrigin="anonymous",C=D.cloneNode(!0),C)}function x(D){var C=D.indexOf("://")>-1?D.split("/")[2]:D.split("/")[0];return C.substring(0,C.indexOf(":"))}function T(D){var C=_(D),I=C.lastIndexOf(".");if(I>=0){var B=C.slice(I,D.search(/\?|#|$/));if(B===".glb")return"arraybuffer"}return"text"}g.exports.inferResponseType=T;function _(D){var C=document.createElement("a");C.href=D;var I=C.search.replace(/^\?/,""),B=D.replace(I,"").replace("?","");return B.substring(B.lastIndexOf("/")+1)}g.exports.getFileNameFromURL=_},{"../lib/three":179,"../utils/bind":199,"../utils/debug":201,"./a-node":129,"./a-register-element":130}],126:[function(c,g,L){var l=c("../utils/debug"),h=c("./a-register-element").registerElement,m=l("core:cubemap:warn");g.exports=h("a-cubemap",{prototype:Object.create(window.HTMLElement.prototype,{attachedCallback:{value:function(){this.srcs=this.validate()},writable:window.debug},validate:{value:function(){var y=this.querySelectorAll("[src]"),d,p=[];if(y.length===6){for(d=0;d<y.length;d++)p.push(y[d].getAttribute("src"));return p}m("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")},writable:window.debug}})})},{"../utils/debug":201,"./a-register-element":130}],127:[function(c,g,L){var l=c("./a-node"),h=c("./component").components,m=c("./a-register-element").registerElement,y=c("../lib/three"),d=c("../utils/"),p,v=d.debug("core:a-entity:debug"),b=d.debug("core:a-entity:warn"),E="__",S=["position","rotation","scale","visible"],x={once:!0},T=Object.create(l.prototype,{createdCallback:{value:function(){this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new y.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}},attributeChangedCallback:{value:function(U,W,oe){var J=this.components[U];if(J&&J.justInitialized&&oe===""){delete J.justInitialized;return}!J&&oe===null||this.setEntityAttribute(U,W,oe)}},attachedCallback:{value:function(){var U,W=this.sceneEl,oe=this;if(this.addToParent(),!this.isScene){if(!W){this.load();return}if(U=W.querySelector("a-assets"),U&&!U.hasLoaded){U.addEventListener("loaded",function(){oe.load()});return}this.load()}}},detachedCallback:{value:function(){var U;if(!!this.parentEl){for(U in this.components)this.removeComponent(U,!1);this.isScene||(this.removeFromParent(),l.prototype.detachedCallback.call(this),this.object3D.el=null)}}},getObject3D:{value:function(U){return this.object3DMap[U]}},setObject3D:{value:function(U,W){var oe,J=this;if(!(W instanceof y.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");oe=this.getObject3D(U),oe&&this.object3D.remove(oe),W.el=this,W.children.length&&W.traverse(function(te){te.el=J}),this.object3D.add(W),this.object3DMap[U]=W,this.emit("object3dset",{object:W,type:U})}},removeObject3D:{value:function(U){var W=this.getObject3D(U);if(!W){b("Tried to remove `Object3D` of type:",U,"which was not defined.");return}this.object3D.remove(W),delete this.object3DMap[U],this.emit("object3dremove",{type:U})}},getOrCreateObject3D:{value:function(U,W){var oe=this.getObject3D(U);return!oe&&W&&(oe=new W,this.setObject3D(U,oe)),b("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),oe}},add:{value:function(U){if(!U.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(U.object3D),this.emit("child-attached",{el:U})}},addToParent:{value:function(){var U=this.parentEl=this.parentNode;!U||!U.add||this.attachedToParent||(U.add(this),this.attachedToParent=!0)}},removeFromParent:{value:function(){var U=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,U.emit("child-detached",{el:this})}},load:{value:function(){var U=this;this.hasLoaded||!this.parentEl||l.prototype.load.call(this,function(){!U.parentEl||(U.updateComponents(),(U.isScene||U.parentEl.isPlaying)&&U.play())})},writable:window.debug},remove:{value:function(U){U?this.object3D.remove(U.object3D):this.parentNode.removeChild(this)}},getChildEntities:{value:function(){for(var U=this.children,W=[],oe=0;oe<U.length;oe++){var J=U[oe];J instanceof p&&W.push(J)}return W}},initComponent:{value:function(U,W,oe){var J,le,te,ue,Y;if(te=d.split(U,E),ue=te[0],le=te.length>2?te.slice(1).join("__"):te[1],!!h[ue]&&(Y=_(this,U)||W!==void 0,!(!Y&&!oe)&&!(U in this.components))){if(this.initComponentDependencies(ue),le&&!h[ue].multiple)throw new Error("Trying to initialize multiple components of type `"+ue+"`. There can only be one component of this type per entity.");J=new h[ue].Component(this,W,le),this.isPlaying&&J.play(),this.hasAttribute(U)||(J.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,U,"")),v("Component initialized: %s",U)}},writable:window.debug},initComponentDependencies:{value:function(U){var W=this,oe=h[U],J,le;if(!!oe&&(J=h[U].dependencies,!!J))for(le=0;le<J.length;le++)W.initComponent(J[le],window.HTMLElement.prototype.getAttribute.call(W,J[le])||void 0,!0)}},removeComponent:{value:function(U,W){var oe;if(oe=this.components[U],!!oe){if(!oe.initialized){this.addEventListener("componentinitialized",function J(le){le.detail.name===U&&(this.removeComponent(U,W),this.removeEventListener("componentinitialized",J))});return}oe.pause(),oe.remove(),W&&(oe.destroy(),delete this.components[U]),this.emit("componentremoved",oe.evtDetail,!1)}},writable:window.debug},updateComponents:{value:function(){var U,W,oe,J,le=this.componentsToUpdate;if(!!this.hasLoaded){for(oe=0;oe<this.mixinEls.length;oe++)for(J in this.mixinEls[oe].componentCache)I(J)&&(le[J]=!0);if(this.getExtraComponents){W=this.getExtraComponents();for(J in W)I(J)&&(le[J]=!0)}for(oe=0;oe<this.attributes.length;++oe)J=this.attributes[oe].name,S.indexOf(J)===-1&&I(J)&&(le[J]=!0);for(oe=0;oe<S.length;oe++)J=S[oe],!!this.hasAttribute(J)&&this.updateComponent(J,this.getDOMAttribute(J));for(J in le)U=C(this.getDOMAttribute(J),W&&W[J]),this.updateComponent(J,U),delete le[J]}},writable:window.debug},updateComponent:{value:function(U,W,oe){var J=this.components[U];if(J){if(W===null&&!_(this,U)){this.removeComponent(U,!0);return}J.updateProperties(W,oe);return}this.initComponent(U,W,!1)}},removeAttribute:{value:function(U,W){var oe=this.components[U];if(oe&&W===void 0&&this.removeComponent(U,!0),oe&&W!==void 0){oe.resetProperty(W);return}U==="mixin"&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,U)}},play:{value:function(){var U,W,oe;if(!(this.isPlaying||!this.hasLoaded)){this.isPlaying=!0;for(oe in this.components)this.components[oe].play();for(U=this.getChildEntities(),W=0;W<U.length;W++)U[W].play();this.emit("play")}},writable:!0},pause:{value:function(){var U,W,oe;if(!!this.isPlaying){this.isPlaying=!1;for(oe in this.components)this.components[oe].pause();for(U=this.getChildEntities(),W=0;W<U.length;W++)U[W].pause();this.emit("pause")}},writable:!0},setEntityAttribute:{value:function(U,W,oe){if(h[U]||this.components[U]){this.updateComponent(U,oe);return}if(U==="mixin"){if(oe===this.computedMixinStr)return;this.mixinUpdate(oe,W)}}},mixinUpdate:{value:function(){var U=[];return function(W,oe){var J,le,te,ue,Y=this;if(!this.hasLoaded){this.addEventListener("loaded",function(){Y.mixinUpdate(W,oe)},x);return}for(oe=oe||this.getAttribute("mixin"),te=this.updateMixins(W,oe),U.length=0,ue=0;ue<this.mixinEls.length;ue++)for(J in this.mixinEls[ue].componentCache)U.indexOf(J)===-1&&(this.components[J]?this.components[J].handleMixinUpdate():this.initComponent(J,null),U.push(J));for(ue=0;ue<te.oldMixinIds.length;ue++)if(le=document.getElementById(te.oldMixinIds[ue]),!!le)for(J in le.componentCache)U.indexOf(J)===-1&&this.components[J]&&(this.getDOMAttribute(J)?this.components[J].handleMixinUpdate():this.removeComponent(J,!0))}}()},setAttribute:{value:function(){var U={};return function(W,oe,J){var le,te,ue,Y,de,ne;if(Y=W.indexOf(E),ue=Y>0?W.substring(0,Y):W,!h[ue]){W==="mixin"&&this.mixinUpdate(oe),l.prototype.setAttribute.call(this,W,oe);return}if(!this.components[W]&&this.hasAttribute(W)&&this.updateComponent(W,window.HTMLElement.prototype.getAttribute.call(this,W)),typeof J!="undefined"&&typeof oe=="string"&&oe.length>0&&typeof d.styleParser.parse(oe)=="string"){for(ne in U)delete U[ne];le=U,le[oe]=J,te=!1}else le=oe,te=J===!0;this.updateComponent(W,le,te),de=this.sceneEl&&this.sceneEl.getAttribute("debug"),de&&this.components[W].flushToDOM()}}(),writable:window.debug},flushToDOM:{value:function(U){var W=this.components,oe,J=this.children,le,te;for(te in W)W[te].flushToDOM();if(!!U)for(le=0;le<J.length;++le)oe=J[le],!!oe.flushToDOM&&oe.flushToDOM(U)}},getAttribute:{value:function(U){var W;return U==="position"?this.object3D.position:U==="rotation"?B(this):U==="scale"?this.object3D.scale:U==="visible"?this.object3D.visible:(W=this.components[U],W?W.data:window.HTMLElement.prototype.getAttribute.call(this,U))},writable:window.debug},getDOMAttribute:{value:function(U){var W=this.components[U];return W?W.attrValue:window.HTMLElement.prototype.getAttribute.call(this,U)},writable:window.debug},addState:{value:function(U){this.is(U)||(this.states.push(U),this.emit("stateadded",U))}},removeState:{value:function(U){var W=this.states.indexOf(U);W!==-1&&(this.states.splice(W,1),this.emit("stateremoved",U))}},is:{value:function(U){return this.states.indexOf(U)!==-1}},inspect:{value:function(){this.sceneEl.components.inspector.openInspector(this)}},destroy:{value:function(){var U;if(this.parentNode){b("Entity can only be destroyed if detached from scenegraph.");return}for(U in this.components)this.components[U].destroy()}}});function _(U,W){return U.components[W]&&U.components[W].attrValue?!0:D(W,U.mixinEls)}function D(U,W){var oe,J=!1;for(oe=0;oe<W.length&&(J=W[oe].hasAttribute(U),!J);++oe);return J}function C(U,W){return W?W.constructor===Object?d.extend(W,d.styleParser.parse(U||{})):U||W:U}function I(U){return U.indexOf(E)!==-1&&(U=d.split(U,E)[0]),!!h[U]}function B(U){var W=y.Math.radToDeg,oe=U.object3D.rotation,J=U.rotationObj;return J.x=W(oe.x),J.y=W(oe.y),J.z=W(oe.z),J}p=m("a-entity",{prototype:T}),g.exports=p},{"../lib/three":179,"../utils/":205,"./a-node":129,"./a-register-element":130,"./component":131}],128:[function(c,g,L){var l=c("./a-node"),h=c("./a-register-element").registerElement,m=c("./component").components,y=c("../utils"),d="__";g.exports=h("a-mixin",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){this.componentCache={},this.id=this.getAttribute("id"),this.isMixin=!0}},attributeChangedCallback:{value:function(p,v,b){this.cacheAttribute(p,b),this.updateEntities()}},attachedCallback:{value:function(){this.sceneEl=this.closestScene(),this.cacheAttributes(),this.updateEntities(),this.load()}},setAttribute:{value:function(p,v){window.HTMLElement.prototype.setAttribute.call(this,p,v),this.cacheAttribute(p,v)}},cacheAttribute:{value:function(p,v){var b,E;E=y.split(p,d)[0],b=m[E],!!b&&(v===void 0&&(v=window.HTMLElement.prototype.getAttribute.call(this,p)),this.componentCache[p]=b.parseAttrValueForCache(v))}},getAttribute:{value:function(p){return this.componentCache[p]||window.HTMLElement.prototype.getAttribute.call(this,p)}},cacheAttributes:{value:function(){var p=this.attributes,v,b;for(b=0;b<p.length;b++)v=p[b].name,this.cacheAttribute(v)}},updateEntities:{value:function(){var p,v,b;if(!!this.sceneEl)for(v=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),b=0;b<v.length;b++)p=v[b],!(!p.hasLoaded||p.isMixin)&&p.mixinUpdate(this.id)}}})})},{"../utils":205,"./a-node":129,"./a-register-element":130,"./component":131}],129:[function(c,g,L){var l=c("./a-register-element").registerElement,h=c("./a-register-element").isNode,m=c("../utils/"),y=m.debug("core:a-node:warn"),d=m.debug("core:a-node:error");g.exports=l("a-node",{prototype:Object.create(window.HTMLElement.prototype,{createdCallback:{value:function(){this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[]},writable:window.debug},attachedCallback:{value:function(){var p;this.sceneEl=this.closestScene(),this.sceneEl||y("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(p=this.getAttribute("mixin"),p&&this.updateMixins(p))},writable:window.debug},attributeChangedCallback:{value:function(p,v,b){b!==this.computedMixinStr&&p==="mixin"&&!this.isMixin&&this.updateMixins(b,v)}},closestScene:{value:function(){for(var v=this;v&&!v.isScene;)v=v.parentElement;return v}},closest:{value:function(v){for(var b=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,E=this;E&&!b.call(E,v);)E=E.parentElement;return E}},detachedCallback:{value:function(){this.hasLoaded=!1}},load:{value:function(p,v){var b,E,S=this;this.hasLoaded||(v=v||h,b=this.getChildren(),E=b.filter(v).map(function(x){return new Promise(function(_){if(x.hasLoaded)return _();x.addEventListener("loaded",_)})}),Promise.all(E).then(function(){S.hasLoaded=!0,p&&p(),S.emit("loaded",void 0,!1)}).catch(function(x){d("Failure loading node: ",x)}))},writable:!0},getChildren:{value:function(){return Array.prototype.slice.call(this.children,0)}},updateMixins:{value:function(){var p=[],v=[],b={};return function(E,S){var x,T,_;for(p.length=0,v.length=0,T=E?m.split(E.trim(),/\s+/):p,_=S?m.split(S.trim(),/\s+/):v,b.newMixinIds=T,b.oldMixinIds=_,x=0;x<_.length;x++)T.indexOf(_[x])===-1&&this.unregisterMixin(_[x]);for(this.computedMixinStr="",this.mixinEls.length=0,x=0;x<T.length;x++)this.registerMixin(document.getElementById(T[x]));return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),b}}()},registerMixin:{value:function(p){var v,b,E;if(!!p){if(E=p.getAttribute("mixin"),E)for(v=m.split(E.trim(),/\s+/),b=0;b<v.length;b++)this.registerMixin(document.getElementById(v[b]));this.computedMixinStr=this.computedMixinStr+" "+p.id,this.mixinEls.push(p)}}},setAttribute:{value:function(p,v){p==="mixin"&&this.updateMixins(v),window.HTMLElement.prototype.setAttribute.call(this,p,v)}},unregisterMixin:{value:function(p){var v,b=this.mixinEls,E;for(v=0;v<b.length;++v)if(E=b[v],p===E.id){b.splice(v,1);break}}},emit:{value:function(){var p={};return function(v,b,E,S){E===void 0&&(E=!0),p.bubbles=!!E,p.detail=b,S&&(p=m.extend({},S,p)),this.dispatchEvent(new CustomEvent(v,p))}}(),writable:window.debug}})})},{"../utils/":205,"./a-register-element":130}],130:[function(c,g,L){c("document-register-element");var l,h,m=g.exports.knownTags={};function y(S){m[S.toLowerCase()]=!0}g.exports.isNode=function(S){return S.tagName.toLowerCase()in m||S.isNode},g.exports.registerElement=function(S,x){var T=Object.getPrototypeOf(x.prototype),_=x,D=l&&T===l.prototype,C=h&&T===h.prototype;return(D||C)&&y(S),D&&(_=d(x.prototype),_={prototype:Object.create(T,_)}),C&&(_=p(x.prototype),_={prototype:Object.create(T,_)}),Object.getOwnPropertyNames(_.prototype).forEach(function(I){var B=_.prototype[I];typeof B=="function"&&(B.displayName=I)}),document.registerElement(S,_)};function d(S){var x={},T=["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"];return v(x,T,S,l.prototype),E(S,x),x}function p(S){var x={},T=["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"],_=["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"];return v(x,T,S,l.prototype),v(x,_,S,h.prototype),E(S,x),x}function v(S,x,T,_){x.forEach(function(D){b(S,D,T,_)})}g.exports.wrapMethods=v;function b(S,x,T,_){var D=T[x],C=_[x];!D||!C||D!==C&&(S[x]={value:function(){return C.apply(this,arguments),D.apply(this,arguments)},writable:window.debug})}function E(S,x){var T=Object.getOwnPropertyNames(S);T.forEach(function(_){var D;x[_]||(D=Object.getOwnPropertyDescriptor(S,_),x[_]={value:S[_],writable:D.writable})})}l=c("./a-node"),h=c("./a-entity")},{"./a-entity":127,"./a-node":129,"document-register-element":12}],131:[function(c,g,L){var l=c("./schema"),h=c("./scene/scenes"),m=c("./system"),y=c("../utils/"),d=g.exports.components={},p=l.parseProperties,v=l.parseProperty,b=l.process,E=l.isSingleProperty,S=l.stringifyProperties,x=l.stringifyProperty,T=y.styleParser,_=y.debug("core:component:warn"),D=document.currentScript,C=new RegExp("[A-Z]+"),I={},B=g.exports.Component=function(ne,xe,Be){var je=this;this.el=ne,this.id=Be,this.attrName=this.name+(Be?"__"+Be:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.isSingleProperty=E(this.schema),this.isSinglePropertyObject=this.isSingleProperty&&Y(v(void 0,this.schema))&&!(this.schema.default instanceof window.HTMLElement),this.isObjectBased=!this.isSingleProperty||this.isSinglePropertyObject,this.el.components[this.attrName]=this,this.objectPool=I[this.name];const Ge=this.events;this.events={},U(this,Ge),this.attrValue=void 0,this.isObjectBased?(this.nextData=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.nextData,this.schema),this.oldData=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.oldData,this.schema),this.previousOldData=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.previousOldData,this.schema),this.parsingAttrValue=this.objectPool.use(),y.objectPool.removeUnusedKeys(this.parsingAttrValue,this.schema)):(this.nextData=void 0,this.oldData=void 0,this.previousOldData=void 0,this.parsingAttrValue=void 0),this.throttledEmitComponentChanged=y.throttle(function(){ne.emit("componentchanged",je.evtDetail,!1)},200),this.updateProperties(xe)};B.prototype={schema:{},init:function(){},events:{},update:function(ne){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(ne,xe){var Be=this.schema;return this.isSingleProperty?v(ne,Be):p(T.parse(ne),Be,!0,this.name,xe)},stringify:function(ne){var xe=this.schema;return typeof ne=="string"?ne:this.isSingleProperty?x(ne,xe):(ne=S(ne,xe),T.stringify(ne))},updateCachedAttrValue:function(ne,xe){var Be,je,Ge;if(ne!==void 0){if(ne===null){this.isObjectBased&&this.attrValue&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0;return}if(ne instanceof Object&&!(ne instanceof window.HTMLElement)?(je=this.objectPool.use(),Be=y.extend(je,ne)):Be=this.parseAttrValueForCache(ne),this.isObjectBased&&!xe&&this.attrValue)for(Ge in this.attrValue)Be[Ge]===void 0&&(Be[Ge]=this.attrValue[Ge]);this.isObjectBased&&!this.attrValue&&(this.attrValue=this.objectPool.use()),y.objectPool.clearObject(this.attrValue),this.attrValue=J(this.attrValue,Be,this.isObjectBased),y.objectPool.clearObject(je)}},parseAttrValueForCache:function(ne){var xe;return typeof ne!="string"?ne:(this.isSingleProperty?(xe=this.schema.parse(ne),typeof xe=="string"&&(xe=ne)):(y.objectPool.clearObject(this.parsingAttrValue),xe=T.parse(ne,this.parsingAttrValue)),xe)},flushToDOM:function(ne){var xe=ne?this.data:this.attrValue;xe!=null&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(xe))},updateProperties:function(ne,xe){var Be=this.el;if(!Be.hasLoaded){this.updateCachedAttrValue(ne);return}ne!==null&&(ne=this.parseAttrValueForCache(ne)),this.updateCachedAttrValue(ne,xe),this.initialized?(this.updateComponent(ne,xe),this.callUpdateHandler()):this.initComponent()},initComponent:function(){var ne=this.el,xe;this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!1,!0)),this.data=this.buildData(this.attrValue),!ne.initializingComponents[this.name]&&(ne.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete ne.initializingComponents[this.name],this.oldData=J(this.oldData,this.data,this.isObjectBased),xe=this.isObjectBased?this.objectPool.use():void 0,this.update(xe),this.isObjectBased&&this.objectPool.recycle(xe),ne.isPlaying&&this.play(),ne.emit("componentinitialized",this.evtDetail,!1))},updateComponent:function(ne,xe){var Be,je;if(xe){this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),this.data=this.buildData(this.attrValue,!0,!1);return}if(this.isSingleProperty){this.isObjectBased&&v(ne,this.schema),this.data=ne;return}if(p(ne,this.schema,!0,this.name),this.schemaChangeKeys.length){for(Be in ne)if(this.schema[Be].schemaChange){je=!0;break}}if(je){this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!0,!0)),this.data=this.buildData(this.attrValue,!0,!1);return}for(Be in ne)ne[Be]!==void 0&&(this.data[Be]=ne[Be])},callUpdateHandler:function(){var ne;this.previousOldData instanceof Object&&y.objectPool.clearObject(this.previousOldData),this.isObjectBased?oe(this.previousOldData,this.oldData):this.previousOldData=this.oldData,ne=!y.deepEqual(this.oldData,this.data),!(!this.isPositionRotationScale&&!ne)&&(this.oldData instanceof Object&&y.objectPool.clearObject(this.oldData),this.oldData=J(this.oldData,this.data,this.isObjectBased),this.update(this.previousOldData),this.throttledEmitComponentChanged())},handleMixinUpdate:function(){this.data=this.buildData(this.attrValue),this.callUpdateHandler()},resetProperty:function(ne){if(this.isObjectBased){if(!(ne in this.attrValue))return;delete this.attrValue[ne],this.data[ne]=this.schema[ne].default}else this.attrValue=this.schema.default,this.data=this.schema.default;this.updateProperties(this.attrValue)},extendSchema:function(ne){var xe;xe=y.extend({},d[this.name].schema),y.extend(xe,ne),this.schema=b(xe),this.el.emit("schemachanged",this.evtDetail)},buildData:function(ne,xe,Be){var je,Ge,ct,lt,Et,Ct=this.nextData,jt=this.schema,tt,pt=this.el.mixinEls,$e;if(je=ne&&ne.constructor===Array?ne.length:ne!=null,this.isObjectBased&&y.objectPool.clearObject(Ct),this.isSingleProperty)this.isObjectBased?Ge=oe(Ct,jt.default):Ge=de(jt.default)?y.clone(jt.default):jt.default;else{$e=!xe&&this.attrValue,Ge=$e instanceof Object?oe(Ct,$e):Ct;for(lt in jt)ct=jt[lt].default,Ge[lt]===void 0&&(Ge[lt]=de(ct)?y.clone(ct):ct)}for(tt=0;tt<pt.length;tt++)Et=pt[tt].getAttribute(this.attrName),!!Et&&(Ge=J(Ge,Et,this.isObjectBased));if(je){if(this.isSingleProperty)return Y(ne)?(oe(this.parsingAttrValue,ne),v(this.parsingAttrValue,jt)):v(ne,jt);Ge=J(Ge,ne,this.isObjectBased)}else if(this.isSingleProperty)return v(Ge,jt);return p(Ge,jt,void 0,this.name,Be)},eventsAttach:function(){var ne;this.eventsDetach();for(ne in this.events)this.el.addEventListener(ne,this.events[ne])},eventsDetach:function(){var ne;for(ne in this.events)this.el.removeEventListener(ne,this.events[ne])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.oldData),this.objectPool.recycle(this.parsingAttrValue),this.attrValue=this.oldData=this.parsingAttrValue=void 0}};function U(ne,xe){var Be;for(Be in xe)ne.events[Be]=xe[Be].bind(ne)}if(window.debug)var W=g.exports.registrationOrderWarnings={};g.exports.registerComponent=function(ne,xe){var Be,je,Ge={},ct,lt;if(document.currentScript&&document.currentScript!==D&&h.forEach(function(Ct){Ct.hasLoaded||document.currentScript.compareDocumentPosition(Ct)!==Node.DOCUMENT_POSITION_FOLLOWING&&(_("The component `"+ne+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(W[ne]=!0))}),C.test(ne)===!0&&_("The component name `"+ne+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+ne.toLowerCase()+"`"),ne.indexOf("__")!==-1)throw new Error("The component name `"+ne+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(xe).forEach(function(Et){Ge[Et]={value:xe[Et],writable:!0}}),d[ne])throw new Error("The component `"+ne+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");if(Be=function(Et,Ct,jt){B.call(this,Et,Ct,jt)},Be.prototype=Object.create(B.prototype,Ge),Be.prototype.name=ne,Be.prototype.isPositionRotationScale=ne==="position"||ne==="rotation"||ne==="scale",Be.prototype.constructor=Be,Be.prototype.system=m&&m.systems[ne],Be.prototype.play=ue(Be.prototype.play),Be.prototype.pause=te(Be.prototype.pause),ct=y.extend(b(Be.prototype.schema,Be.prototype.name)),lt=E(Be.prototype.schema),!lt){Be.prototype.schemaChangeKeys=[];for(je in ct)ct[je].schemaChange&&Be.prototype.schemaChangeKeys.push(je)}return I[ne]=y.objectPool.createPool(),d[ne]={Component:Be,dependencies:Be.prototype.dependencies,isSingleProp:lt,multiple:Be.prototype.multiple,name:ne,parse:Be.prototype.parse,parseAttrValueForCache:Be.prototype.parseAttrValueForCache,schema:ct,stringify:Be.prototype.stringify,type:Be.prototype.type},Be};function oe(ne,xe){var Be,je;for(je in xe)xe[je]!==void 0&&(Be=xe[je],ne[je]=de(Be)?y.clone(Be):Be);return ne}function J(ne,xe,Be){var je;if(Be&&xe.constructor===Object){for(je in xe)xe[je]!==void 0&&(xe[je]&&xe[je].constructor===Object?ne[je]=y.clone(xe[je]):ne[je]=xe[je]);return ne}return xe}function le(ne){return ne.tick||ne.tock}function te(ne){return function(){var Be=this.el.sceneEl;!this.isPlaying||(ne.call(this),this.isPlaying=!1,this.eventsDetach(),!!le(this)&&Be.removeBehavior(this))}}function ue(ne){return function(){var Be=this.el.sceneEl,je=this.el.isPlaying&&!this.isPlaying;!this.initialized||!je||(ne.call(this),this.isPlaying=!0,this.eventsAttach(),!!le(this)&&Be.addBehavior(this))}}function Y(ne){return ne&&ne.constructor===Object&&!(ne instanceof window.HTMLElement)}function de(ne){return ne&&(ne.constructor===Object||ne.constructor===Array)&&!(ne instanceof window.HTMLElement)}},{"../utils/":205,"./scene/scenes":138,"./schema":140,"./system":142}],132:[function(c,g,L){var l=c("./schema"),h=l.process,m=g.exports.geometries={},y=g.exports.geometryNames=[],d=c("../lib/three"),p=g.exports.Geometry=function(){};p.prototype={schema:{},init:function(v){return this.geometry=new d.BufferGeometry,this.geometry},update:function(v){}},g.exports.registerGeometry=function(v,b){var E,S={};if(Object.keys(b).forEach(function(T){S[T]={value:b[T],writable:!0}}),m[v])throw new Error("The geometry `"+v+"` has been already registered");return E=function(){p.call(this)},E.prototype=Object.create(p.prototype,S),E.prototype.name=v,E.prototype.constructor=E,m[v]={Geometry:E,schema:h(E.prototype.schema)},y.push(v),E}},{"../lib/three":179,"./schema":140}],133:[function(c,g,L){var l=c("../utils/coordinates"),h=c("debug"),m=h("core:propertyTypes:warn"),y=h("core:propertyTypes:warn"),d=g.exports.propertyTypes={},p=/[,> .[\]:]/,v=/\url\((.+)\)/;b("audio","",x),b("array",[],E,S),b("asset","",x),b("boolean",!1,D),b("color","#FFF",T,_),b("int",0,C),b("number",0,I),b("map","",x),b("model","",x),b("selector",null,B,W),b("selectorAll",null,U,oe),b("src","",J),b("string","",T,_),b("time",0,C),b("vec2",{x:0,y:0},le,l.stringify),b("vec3",{x:0,y:0,z:0},le,l.stringify),b("vec4",{x:0,y:0,z:0,w:1},le,l.stringify);function b(Y,de,ne,xe){if("type"in d){m("Property type "+Y+" is already registered.");return}d[Y]={default:de,parse:ne||T,stringify:xe||_}}g.exports.registerPropertyType=b;function E(Y){if(Array.isArray(Y))return Y;if(!Y||typeof Y!="string")return[];return Y.split(",").map(de);function de(ne){return ne.trim()}}function S(Y){return Y.join(", ")}function x(Y){var de,ne;if(typeof Y!="string")return Y;if(ne=Y.match(v),ne)return ne[1];if(Y.charAt(0)==="#"){if(de=document.getElementById(Y.substring(1)),de)return de.tagName==="CANVAS"||de.tagName==="VIDEO"||de.tagName==="IMG"?de:de.getAttribute("src");y('"'+Y+'" asset not found.');return}return Y}function T(Y){return Y}function _(Y){return Y===null?"null":Y.toString()}function D(Y){return Y!=="false"&&Y!==!1}function C(Y){return parseInt(Y,10)}function I(Y){return parseFloat(Y,10)}function B(Y){return Y?typeof Y!="string"?Y:Y[0]==="#"&&!p.test(Y)?document.getElementById(Y.substring(1)):document.querySelector(Y):null}function U(Y){return Y?typeof Y!="string"?Y:Array.prototype.slice.call(document.querySelectorAll(Y),0):null}function W(Y){return Y.getAttribute?"#"+Y.getAttribute("id"):_(Y)}function oe(Y){return Y instanceof Array?Y.map(function(de){return"#"+de.getAttribute("id")}).join(", "):_(Y)}function J(Y){return y("`src` property type is deprecated. Use `asset` instead."),x(Y)}function le(Y){return l.parse(Y,this.default)}function te(Y,de){return Y==="audio"&&typeof de!="string"||Y==="array"&&!Array.isArray(de)||Y==="asset"&&typeof de!="string"||Y==="boolean"&&typeof de!="boolean"||Y==="color"&&typeof de!="string"||Y==="int"&&typeof de!="number"||Y==="number"&&typeof de!="number"||Y==="map"&&typeof de!="string"||Y==="model"&&typeof de!="string"||Y==="selector"&&typeof de!="string"&&de!==null||Y==="selectorAll"&&typeof de!="string"&&de!==null||Y==="src"&&typeof de!="string"||Y==="string"&&typeof de!="string"||Y==="time"&&typeof de!="number"?!1:Y==="vec2"?ue(de,2):Y==="vec3"?ue(de,3):Y==="vec4"?ue(de,4):!0}g.exports.isValidDefaultValue=te;function ue(Y,de){if(Y===null)return!0;if(typeof Y!="object"||Object.keys(Y).length!==de)return!1;var ne=Y.x,xe=Y.y,Be=Y.z,je=Y.w;return!(typeof ne!="number"||typeof xe!="number"||de>2&&typeof Be!="number"||de>3&&typeof je!="number")}g.exports.isValidDefaultCoordinate=ue},{"../utils/coordinates":200,debug:8}],134:[function(c,g,L){var l=c("./metaTags").inject,h=c("./wakelock"),m=c("./loadingScreen"),y=c("../a-register-element"),d=c("./scenes"),p=c("../system").systems,v=c("../../lib/three"),b=c("../../utils/"),E=c("../a-entity"),S=c("../a-node"),x=c("./postMessage"),T=b.bind,_=b.device.isIOS(),D=b.device.isMobile(),C=b.device.isWebXRAvailable,I=y.registerElement,B=b.debug("core:a-scene:warn");_&&c("../../utils/ios-orientationchange-blank-bug"),g.exports.AScene=I("a-scene",{prototype:Object.create(E.prototype,{createdCallback:{value:function(){this.clock=new v.Clock,this.isIOS=_,this.isMobile=D,this.hasWebXR=C,this.isAR=!1,this.isScene=!0,this.object3D=new v.Scene;var te=this;this.object3D.onAfterRender=function(ue,Y,de){te.isPlaying&&te.tock(te.time,te.delta,de)},this.resize=T(this.resize,this),this.render=T(this.render,this),this.systems={},this.systemNames=[],this.time=this.delta=0,this.behaviors={tick:[],tock:[]},this.hasLoaded=!1,this.isPlaying=!1,this.originalHTML=this.innerHTML,this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("vr-mode-ui",""),this.setAttribute("device-orientation-permission-ui","")}},addFullScreenStyles:{value:function(){document.documentElement.classList.add("a-fullscreen")}},removeFullScreenStyles:{value:function(){document.documentElement.classList.remove("a-fullscreen")}},attachedCallback:{value:function(){var te=this,ue=this.hasAttribute("embedded");le(this),this.setupRenderer(),m.setup(this,U),this.resize(),ue||this.addFullScreenStyles(),x(this),l(this),h(this),this.onVRPresentChangeBound=T(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){te.enterVR()},this.exitVRBound=function(){te.exitVR()},this.exitVRTrueBound=function(){te.exitVR(!0)},this.pointerRestrictedBound=function(){te.pointerRestricted()},this.pointerUnrestrictedBound=function(){te.pointerUnrestricted()},C||(window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)),window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",function(){te.attachedCallbackPostCamera()}),this.initSystems(),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",function(){te.enterVR()})}},attachedCallbackPostCamera:{value:function(){var te,ue=this;window.addEventListener("load",te),window.addEventListener("resize",function(){ue.isIOS?setTimeout(ue.resize,100):ue.resize()}),this.play(),d.push(this)},writable:window.debug},initSystems:{value:function(){var te;this.initSystem("camera");for(te in p)te!=="camera"&&this.initSystem(te)}},initSystem:{value:function(te){this.systems[te]||(this.systems[te]=new p[te](this),this.systemNames.push(te))}},detachedCallback:{value:function(){var te=d.indexOf(this);d.splice(te,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound),window.removeEventListener("sessionend",this.resize),this.renderer.xr.dispose()}},addBehavior:{value:function(te){var ue,Y=this.behaviors,de;for(de in Y)!te[de]||(ue=this.behaviors[de],ue.indexOf(te)===-1&&ue.push(te))}},getPointerLockElement:{value:function(){return document.pointerLockElement},writable:window.debug},checkHeadsetConnected:{value:b.device.checkHeadsetConnected,writable:window.debug},enterAR:{value:function(){var te;if(!this.hasWebXR)throw te="Failed to enter AR mode, WebXR not supported.",new Error(te);if(!b.device.checkARSupport())throw te="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(te);return this.enterVR(!0)}},enterVR:{value:function(te){var ue=this,Y,de=ue.renderer.xr,ne;if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile)if(de.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var xe=this.sceneEl.systems.webxr.sessionReferenceSpaceType;de.setReferenceSpaceType(xe);var Be=te?"immersive-ar":"immersive-vr";return ne=this.sceneEl.systems.webxr.sessionConfiguration,new Promise(function(Et,Ct){navigator.xr.requestSession(Be,ne).then(function(tt){ue.xrSession=tt,de.layersEnabled=ne.requiredFeatures.indexOf("layers")!==-1,de.setSession(tt),tt.addEventListener("end",ue.exitVRBound),ct(Et)},function(tt){var pt=Be==="immersive-ar",$e=pt?"AR":"VR";throw new Error("Failed to enter "+$e+" mode (`requestSession`) "+tt)})})}else{if(Y=b.device.getVRDisplay(),de.setDevice(Y),Y.isPresenting&&!window.hasNativeWebVRImplementation)return ct(),Promise.resolve();var je=this.getAttribute("renderer"),Ge={highRefreshRate:je.highRefreshRate,foveationLevel:je.foveationLevel};return Y.requestPresent([{source:this.canvas,attributes:Ge}]).then(ct,lt)}return ct(),Promise.resolve();function ct(Et){var Ct;window.hasNativeWebVRImplementation&&!window.hasNativeWebXRImplementation&&(Ct=new CustomEvent("vrdisplaypresentchange",{detail:{display:b.device.getVRDisplay()}}),window.dispatchEvent(Ct)),te?ue.addState("ar-mode"):ue.addState("vr-mode"),ue.emit("enter-vr",{target:ue}),!C&&ue.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),ue.addFullScreenStyles(),!ue.isMobile&&!ue.checkHeadsetConnected()&&oe(ue.canvas),ue.renderer.setAnimationLoop(ue.render),ue.resize(),Et&&Et()}function lt(Et){throw ue.removeState("vr-mode"),Et&&Et.message?new Error("Failed to enter VR mode (`requestPresent`): "+Et.message):new Error("Failed to enter VR mode (`requestPresent`).")}},writable:!0},exitVR:{value:function(){var te=this,ue,Y=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(Y.enabled=!1,ue=b.device.getVRDisplay(),this.hasWebXR)this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then(function(){},function(){}),this.xrSession=void 0,Y.setSession(null);else if(ue.isPresenting)return ue.exitPresent().then(de,ne)}else J();return de(),Promise.resolve();function de(){te.removeState("vr-mode"),te.removeState("ar-mode"),te.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),te.hasAttribute("embedded")&&te.removeFullScreenStyles(),te.resize(),te.isIOS&&b.forceCanvasResizeSafariMobile(te.canvas),te.renderer.setPixelRatio(window.devicePixelRatio),te.emit("exit-vr",{target:te})}function ne(xe){throw xe&&xe.message?new Error("Failed to exit VR mode (`exitPresent`): "+xe.message):new Error("Failed to exit VR mode (`exitPresent`).")}},writable:!0},pointerRestricted:{value:function(){if(this.canvas){var te=this.getPointerLockElement();te&&te!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}},pointerUnrestricted:{value:function(){var te=this.getPointerLockElement();te&&te===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}},onVRPresentChange:{value:function(te){var ue=te.display||te.detail.display;if(ue&&ue.isPresenting){this.enterVR();return}this.exitVR()}},getAttribute:{value:function(te){var ue=this.systems[te];return ue?ue.data:E.prototype.getAttribute.call(this,te)}},getComputedAttribute:{value:function(te){B("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(te)}},getDOMAttribute:{value:function(te){var ue=this.systems[te];return ue?ue.data:E.prototype.getDOMAttribute.call(this,te)}},setAttribute:{value:function(te,ue,Y){var de=this.systems[te];if(de){S.prototype.setAttribute.call(this,te,ue),de.updateProperties(ue);return}E.prototype.setAttribute.call(this,te,ue,Y)}},removeBehavior:{value:function(te){var ue,Y,de=this.behaviors,ne;for(Y in de)!te[Y]||(ue=this.behaviors[Y],ne=ue.indexOf(te),ne!==-1&&ue.splice(ne,1))}},resize:{value:function(){var te=this.camera,ue=this.canvas,Y,de,ne,xe=this.renderer.xr.isPresenting;de=this.renderer.xr.enabled&&xe,!(!te||!ue||this.is("vr-mode")&&(this.isMobile||de))&&(Y=this.getAttribute("embedded")&&!this.is("vr-mode"),ne=U(ue,Y,this.maxCanvasSize,this.is("vr-mode")),te.aspect=ne.width/ne.height,te.updateProjectionMatrix(),this.renderer.setSize(ne.width,ne.height,!1),this.emit("rendererresize",null,!1))},writable:!0},setupRenderer:{value:function(){var te=this,ue,Y,de,ne;ne={alpha:!0,antialias:!D,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:1920,width:1920},this.hasAttribute("renderer")&&(de=this.getAttribute("renderer"),Y=b.styleParser.parse(de),Y.precision&&(ne.precision=Y.precision+"p"),Y.antialias&&Y.antialias!=="auto"&&(ne.antialias=Y.antialias==="true"),Y.logarithmicDepthBuffer&&Y.logarithmicDepthBuffer!=="auto"&&(ne.logarithmicDepthBuffer=Y.logarithmicDepthBuffer==="true"),Y.alpha&&(ne.alpha=Y.alpha==="true"),this.maxCanvasSize={width:Y.maxCanvasWidth?parseInt(Y.maxCanvasWidth):this.maxCanvasSize.width,height:Y.maxCanvasHeight?parseInt(Y.maxCanvasHeight):this.maxCanvasSize.height}),ue=this.renderer=new v.WebGLRenderer(ne),ue.setPixelRatio(window.devicePixelRatio),ue.sortObjects=!1,this.camera&&ue.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){ue.xr.setPoseTarget(te.camera.el.object3D)})},writable:window.debug},play:{value:function(){var te=this,ue=this;if(this.renderStarted){E.prototype.play.call(this);return}this.addEventListener("loaded",function(){var Y=this.renderer,de,ne=this.renderer.xr;E.prototype.play.call(this),!ue.renderStarted&&(ue.resize(),ue.renderer&&(window.performance&&window.performance.mark("render-started"),m.remove(),de=b.device.getVRDisplay(),de&&de.isPresenting&&(ne.setDevice(de),ne.enabled=!0,ue.enterVR()),Y.setAnimationLoop(this.render),ue.renderStarted=!0,ue.emit("renderstart")))}),setTimeout(function(){E.prototype.load.call(te)})}},updateComponent:{value:function(te){te in p||E.prototype.updateComponent.apply(this,arguments)}},tick:{value:function(te,ue){var Y,de=this.systems;for(Y=0;Y<this.behaviors.tick.length;Y++)!this.behaviors.tick[Y].el.isPlaying||this.behaviors.tick[Y].tick(te,ue);for(Y=0;Y<this.systemNames.length;Y++)!de[this.systemNames[Y]].tick||de[this.systemNames[Y]].tick(te,ue)}},tock:{value:function(te,ue,Y){var de,ne=this.systems;for(de=0;de<this.behaviors.tock.length;de++)!this.behaviors.tock[de].el.isPlaying||this.behaviors.tock[de].tock(te,ue,Y);for(de=0;de<this.systemNames.length;de++)!ne[this.systemNames[de]].tock||ne[this.systemNames[de]].tock(te,ue,Y)}},render:{value:function(te,ue){var Y=this.renderer;this.frame=ue,this.delta=this.clock.getDelta()*1e3,this.time=this.clock.elapsedTime*1e3,this.isPlaying&&this.tick(this.time,this.delta);var de=null;this.is("ar-mode")&&(de=this.object3D.background,this.object3D.background=null),Y.render(this.object3D,this.camera),de&&(this.object3D.background=de)},writable:!0}})});function U(te,ue,Y,de){return te.parentElement?ue?{height:te.parentElement.offsetHeight,width:te.parentElement.offsetWidth}:W(Y,de):{height:0,width:0}}function W(te,ue){var Y,de,ne=window.devicePixelRatio;return de={height:document.body.offsetHeight,width:document.body.offsetWidth},!te||ue||te.width===-1&&te.height===-1||de.width*ne<te.width&&de.height*ne<te.height||(Y=de.width/de.height,de.width*ne>te.width&&te.width!==-1&&(de.width=Math.round(te.width/ne),de.height=Math.round(te.width/Y/ne)),de.height*ne>te.height&&te.height!==-1&&(de.height=Math.round(te.height/ne),de.width=Math.round(te.height*Y/ne))),de}function oe(te){var ue=te.requestFullscreen||te.webkitRequestFullscreen||te.mozRequestFullScreen||te.msRequestFullscreen;ue.apply(te,[{navigationUI:"hide"}])}function J(){var te=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement;!te||(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}function le(te){var ue;ue=document.createElement("canvas"),ue.classList.add("a-canvas"),ue.dataset.aframeCanvas=!0,te.appendChild(ue),document.addEventListener("fullscreenchange",Y),document.addEventListener("mozfullscreenchange",Y),document.addEventListener("webkitfullscreenchange",Y),document.addEventListener("MSFullscreenChange",Y),ue.addEventListener("touchmove",function(de){de.preventDefault()}),te.canvas=ue,te.emit("render-target-loaded",{target:ue}),setTimeout(T(te.resize,te),0);function Y(){var de=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;de||te.exitVR(),document.activeElement.blur(),document.body.focus()}}g.exports.setupCanvas=le},{"../../lib/three":179,"../../utils/":205,"../../utils/ios-orientationchange-blank-bug":206,"../a-entity":127,"../a-node":129,"../a-register-element":130,"../system":142,"./loadingScreen":135,"./metaTags":136,"./postMessage":137,"./scenes":138,"./wakelock":139}],135:[function(c,g,L){var l=c("../../utils/"),h=l.styleParser,m,y,d,p="loading-screen",v="a-loader-title";g.exports.setup=function(x,T){m=x,d=T;var _=m.hasAttribute(p)?h.parse(m.getAttribute(p)):void 0,D=_&&_.dotsColor||"white",C=_&&_.backgroundColor||"#24CAFF",I=_===void 0||_.enabled==="true"||_.enabled===void 0,B,U,W,oe,J,le,te,ue,Y,de;!I||(B=new THREE.Scene,U=new THREE.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),W=new THREE.MeshBasicMaterial({color:D}),oe=new THREE.Mesh(U,W),J=oe.clone(),le=oe.clone(),te=new THREE.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),ue=new THREE.Clock,Y=0,de=function(){m.renderer.render(B,te),Y=ue.getElapsedTime()%4,oe.visible=Y>=1,J.visible=Y>=2,le.visible=Y>=3},B.background=new THREE.Color(C),B.add(te),oe.position.set(-1,0,-15),J.position.set(0,0,-15),le.position.set(1,0,-15),te.add(oe),te.add(J),te.add(le),E(),setTimeout(function(){m.hasLoaded||(b(te),y.style.display="block",window.addEventListener("resize",function(){b(te)}),m.renderer.setAnimationLoop(de))},200))},g.exports.remove=function(){window.removeEventListener("resize",b),!!y&&(y.style.display="none")};function b(S){var x=m.hasAttribute("embedded"),T=d(m.canvas,x,m.maxCanvasSize,m.is("vr-mode"));S.aspect=T.width/T.height,S.updateProjectionMatrix(),m.renderer.setSize(T.width,T.height,!1)}function E(){y=document.createElement("div"),y.className=v,y.innerHTML=document.title,y.style.display="none",m.appendChild(y)}},{"../../utils/":205}],136:[function(c,g,L){var l=c("../../constants/"),h=c("../../utils").extend,m=g.exports.MOBILE_HEAD_TAGS=[d({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),d({name:"mobile-web-app-capable",content:"yes"}),d({name:"theme-color",content:"black"})],y=[d({name:"apple-mobile-web-app-capable",content:"yes"}),d({name:"apple-mobile-web-app-status-bar-style",content:"black"}),p({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];function d(b){return{tagName:"meta",attributes:b,exists:function(){return document.querySelector('meta[name="'+b.name+'"]')}}}function p(b){return{tagName:"link",attributes:b,exists:function(){return document.querySelector('link[rel="'+b.rel+'"]')}}}g.exports.inject=function(E){var S=document.head,x=S.querySelector("script"),T,_=[];return m.forEach(D),E.isIOS&&y.forEach(D),_;function D(C){!C||C.exists()||(T=v(C),!!T&&(x?x.parentNode.insertBefore(T,x):S.appendChild(T),_.push(T)))}};function v(b){if(!(!b||!b.tagName)){var E=document.createElement(b.tagName);return E.setAttribute(l.AFRAME_INJECTED,""),h(E,b.attributes)}}},{"../../constants/":123,"../../utils":205}],137:[function(c,g,L){var l=c("../../utils/bind"),h=c("../../utils/").isIframed;g.exports=function(d){!h()||window.addEventListener("message",l(m,d))};function m(y){var d=this;if(!!y.data)switch(y.data.type){case"vr":switch(y.data.data){case"enter":d.enterVR();break;case"exit":d.exitVR();break}}}},{"../../utils/":205,"../../utils/bind":199}],138:[function(c,g,L){g.exports=[]},{}],139:[function(c,g,L){var l=c("../../../vendor/wakelock/wakelock");g.exports=function(m){if(!!m.isMobile){var y=m.wakelock=new l;m.addEventListener("enter-vr",function(){y.request()}),m.addEventListener("exit-vr",function(){y.release()})}}},{"../../../vendor/wakelock/wakelock":220}],140:[function(c,g,L){var l=c("../utils/"),h=c("./propertyTypes"),m=l.debug,y=h.isValidDefaultValue,d=h.propertyTypes,p=m("core:schema:warn");function v(x){return"type"in x?typeof x.type=="string":"default"in x}g.exports.isSingleProperty=v,g.exports.process=function(x,T){var _;if(v(x))return b(x,T);for(_ in x)x[_]=b(x[_],T);return x};function b(x,T){var _=x.default,D,C,I=x.type;return x.type?x.type==="bool"?I="boolean":x.type==="float"&&(I="number"):_!==void 0&&(typeof _=="boolean"||typeof _=="number")?I=typeof _:Array.isArray(_)?I="array":I="string",C=d[I],C||p("Unknown property type for component `"+T+"`: "+I),D=!!x.parse,x.parse=x.parse||C.parse,x.stringify=x.stringify||C.stringify,x.type=I,"default"in x?!D&&!y(I,_)&&p("Default value `"+_+"` does not match type `"+I+"` in component `"+T+"`"):x.default=C.default,x}g.exports.processPropertyDefinition=b,g.exports.parseProperties=function(){var x=[];return function(T,_,D,C,I){var B,U,W,oe;x.length=0;for(U in D?T:_)D&&T[U]===void 0||x.push(U);if(T===null||typeof T!="object")return T;for(U in T)T[U]!==void 0&&!_[U]&&!I&&p("Unknown property `"+U+"` for component/system `"+C+"`.");for(B=0;B<x.length;B++){if(U=x[B],W=_[U],oe=T[U],!_[U])return;T[U]=E(oe,W)}return T}}();function E(x,T){return(x==null||x==="")&&(x=T.default,Array.isArray(x)&&(x=x.slice())),T.parse(x,T.default)}g.exports.parseProperty=E,g.exports.stringifyProperties=function(x,T){var _,D,C,I={},B;for(_ in x)D=T[_],C=x[_],B=C,typeof B=="object"&&(B=S(C,D),D||p("Unknown component property: "+_)),I[_]=B;return I};function S(x,T){return typeof x!="object"?x:!T||x===null?JSON.stringify(x):T.stringify(x)}g.exports.stringifyProperty=S},{"../utils/":205,"./propertyTypes":133}],141:[function(c,g,L){var l=c("./schema"),h=l.process,m=g.exports.shaders={},y=g.exports.shaderNames=[],d=c("../lib/three"),p=c("../utils"),v={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},b=g.exports.Shader=function(){};b.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(E){return this.attributes=this.initVariables(E,"attribute"),this.uniforms=this.initVariables(E,"uniform"),this.material=new(this.raw?d.RawShaderMaterial:d.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(E,S){var x,T=this.schema,_={},D;for(x in T)T[x].is===S&&(D=v[T[x].type],_[x]={type:D,value:void 0});return _},update:function(E){this.updateVariables(E,"attribute"),this.updateVariables(E,"uniform")},updateVariables:function(E,S){var x,T,_=this.schema,D;D=S==="uniform"?this.uniforms:this.attributes;for(x in E)if(!(!_[x]||_[x].is!==S)){if(_[x].type==="map"){if(!D[x]||D[x].value===E[x])continue;T="_texture_"+x,this.setMapOnTextureLoad(D,x,T),p.material.updateMapMaterialFromData(T,x,this,E);continue}D[x].value=this.parseValue(_[x].type,E[x]),D[x].needsUpdate=!0}},parseValue:function(E,S){var x;switch(E){case"vec2":return new d.Vector2(S.x,S.y);case"vec3":return new d.Vector3(S.x,S.y,S.z);case"vec4":return new d.Vector4(S.x,S.y,S.z,S.w);case"color":return x=new d.Color(S),new d.Vector3(x.r,x.g,x.b);case"map":return d.ImageUtils.loadTexture(S);default:return S}},setMapOnTextureLoad:function(E,S,x){var T=this;this.el.addEventListener("materialtextureloaded",function(){E[S].value=T.material[x],E[S].needsUpdate=!0})}},g.exports.registerShader=function(E,S){var x,T={};if(Object.keys(S).forEach(function(_){T[_]={value:S[_],writable:!0}}),m[E])throw new Error("The shader "+E+" has been already registered");return x=function(){b.call(this)},x.prototype=Object.create(b.prototype,T),x.prototype.name=E,x.prototype.constructor=x,m[E]={Shader:x,schema:h(x.prototype.schema)},y.push(E),x}},{"../lib/three":179,"../utils":205,"./schema":140}],142:[function(c,g,L){var l=c("./component"),h=c("./schema"),m=c("../utils/"),y=h.parseProperties,d=h.parseProperty,p=h.process,v=h.isSingleProperty,b=m.styleParser,E=g.exports.systems={},S=g.exports.System=function(x){var T=l&&l.components[this.name];this.el=x,this.sceneEl=x,T&&(T.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};S.prototype={schema:{},init:function(){},update:function(x){},updateProperties:function(x){var T=this.data;!Object.keys(h).length||(this.buildData(x),this.update(T))},buildData:function(x){var T=this.schema;!Object.keys(T).length||(x=x||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),v(T)?this.data=d(x,T):this.data=y(b.parse(x)||{},T))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},g.exports.registerSystem=function(x,T){var _,D,C={},I=m.findAllScenes(document);if(Object.keys(T).forEach(function(B){C[B]={value:T[B],writable:!0}}),E[x])throw new Error("The system `"+x+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(D=function(B){S.call(this,B)},D.prototype=Object.create(S.prototype,C),D.prototype.name=x,D.prototype.constructor=D,D.prototype.schema=m.extend(p(D.prototype.schema)),E[x]=D,_=0;_<I.length;_++)I[_].initSystem(x)}},{"../utils/":205,"./component":131,"./schema":140}],143:[function(c,g,L){c("./pivot")},{"./pivot":144}],144:[function(c,g,L){var l=c("../../core/component").registerComponent,h=c("../../lib/three"),m=new h.Vector3,y=new h.Vector3;l("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var d=this.data,p=this.el,v=p.object3D.parent,b=p.object3D,E=new h.Group;m.copy(b.position),y.copy(b.rotation),v.remove(b),E.add(b),v.add(E),p.object3D=E,b.position.set(-1*d.x,-1*d.y,-1*d.z),E.position.set(d.x+m.x,d.y+m.y,d.z+m.z),E.rotation.copy(b.rotation),b.rotation.set(0,0,0)}})},{"../../core/component":131,"../../lib/three":179}],145:[function(c,g,L){var l=c("../../core/component").components,h=c("../../core/shader").shaders,m=c("../../utils/"),y={};Object.keys(l.material.schema).forEach(d),Object.keys(h.standard.schema).forEach(d);function d(p){var v=p.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();p==="fog"&&(v="material-fog"),p==="visible"&&(v="material-visible"),y[v]="material."+p}g.exports=function(){return{defaultComponents:{material:{}},mappings:m.extend({},y)}}},{"../../core/component":131,"../../core/shader":141,"../../utils/":205}],146:[function(c,g,L){c("./primitives/a-camera"),c("./primitives/a-cursor"),c("./primitives/a-curvedimage"),c("./primitives/a-gltf-model"),c("./primitives/a-image"),c("./primitives/a-light"),c("./primitives/a-link"),c("./primitives/a-obj-model"),c("./primitives/a-sky"),c("./primitives/a-sound"),c("./primitives/a-text"),c("./primitives/a-video"),c("./primitives/a-videosphere"),c("./primitives/meshPrimitives")},{"./primitives/a-camera":148,"./primitives/a-cursor":149,"./primitives/a-curvedimage":150,"./primitives/a-gltf-model":151,"./primitives/a-image":152,"./primitives/a-light":153,"./primitives/a-link":154,"./primitives/a-obj-model":155,"./primitives/a-sky":156,"./primitives/a-sound":157,"./primitives/a-text":158,"./primitives/a-video":159,"./primitives/a-videosphere":160,"./primitives/meshPrimitives":161}],147:[function(c,g,L){var l=c("../../core/a-entity"),h=c("../../core/component").components,m=c("../../core/a-register-element").registerElement,y=c("../../utils/"),d=y.debug,p=y.entity.setComponentProperty,v=d("extras:primitives:debug"),b=d("extras:primitives:warn"),E=g.exports.primitives={};g.exports.registerPrimitive=function(_,D){_=_.toLowerCase(),v("Registering <%s>",_),D.defaultAttributes&&b("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var C=m(_,{prototype:Object.create(l.prototype,{defaultComponentsFromPrimitive:{value:D.defaultComponents||D.defaultAttributes||{}},deprecated:{value:D.deprecated||null},deprecatedMappings:{value:D.deprecatedMappings||{}},mappings:{value:D.mappings||{}},createdCallback:{value:function(){D.deprecated&&console.warn(D.deprecated),this.resolveMappingCollisions()}},resolveMappingCollisions:{value:function(){var I=this.mappings,B=this;Object.keys(I).forEach(function(W){var oe;W!==W.toLowerCase()&&b("Mapping keys should be specified in lower case. The mapping key "+W+" may not be recognized"),h[W]&&(oe=I[W].replace(".","-"),I[oe]=I[W],delete I[W],console.warn("The primitive "+B.tagName.toLowerCase()+" has a mapping collision. The attribute "+W+" has the same name as a registered component and has been renamed to "+oe))})}},getExtraComponents:{value:function(){var I,B,U,W,oe,J,le=this;for(B=y.clone(this.defaultComponentsFromPrimitive),oe=this.getAttribute("mixin"),oe&&(oe=oe.trim().split(" "),oe.forEach(function(xe){var Be=le.sceneEl.querySelector("#"+xe).componentCache;Object.keys(Be).forEach(function(Ge){B[Ge]=te(B[Ge],Be[Ge])})})),U=0;U<this.attributes.length;U++)if(I=this.attributes[U],W=this.mappings[I.name],W){J=y.entity.getComponentPropertyPath(W),J.constructor===Array?(B[J[0]]=B[J[0]]||{},B[J[0]][J[1]]=I.value.trim()):B[J]=I.value.trim();continue}return B;function te(ne,xe){return ue(ne)?Y(xe):ue(xe)?Y(ne):de(ne)&&de(xe)?y.extendDeep(ne,xe):Y(xe)}function ue(ne){return typeof ne=="undefined"}function Y(ne){return de(ne)?y.extendDeep({},ne):ne}function de(ne){return ne!==null&&ne.constructor===Object}}},attributeChangedCallback:{value:function(I,B,U){var W=this.mappings[I];I in this.deprecatedMappings&&console.warn(this.deprecatedMappings[I]),!(!I||!W)&&p(this,W,U)}}})});return E[_]=C,C};function S(T,_){var D=h[T].schema;Object.keys(D).map(function(C){var I=C.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();_[I]!==void 0&&(I=T+"-"+C),_[I]=T+"."+C})}function x(T,_,D){D=D||{},Object.keys(_).map(function(I){S(I,D)}),g.exports.registerPrimitive(T,y.extendDeep({},null,{defaultComponents:_,mappings:D}))}g.exports.definePrimitive=x},{"../../core/a-entity":127,"../../core/a-register-element":130,"../../core/component":131,"../../utils/":205}],148:[function(c,g,L){var l=c("../primitives").registerPrimitive;l("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},{"../primitives":147}],149:[function(c,g,L){var l=c("../getMeshMixin"),h=c("../primitives").registerPrimitive,m=c("../../../utils/");h("a-cursor",m.extendDeep({},l(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},{"../../../utils/":205,"../getMeshMixin":145,"../primitives":147}],150:[function(c,g,L){var l=c("../getMeshMixin"),h=c("../primitives").registerPrimitive,m=c("../../../utils/");h("a-curvedimage",m.extendDeep({},l(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},{"../../../utils/":205,"../getMeshMixin":145,"../primitives":147}],151:[function(c,g,L){var l=c("../primitives").registerPrimitive;l("a-gltf-model",{mappings:{src:"gltf-model"}})},{"../primitives":147}],152:[function(c,g,L){var l=c("../getMeshMixin"),h=c("../primitives").registerPrimitive,m=c("../../../utils/");h("a-image",m.extendDeep({},l(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":205,"../getMeshMixin":145,"../primitives":147}],153:[function(c,g,L){var l=c("../primitives").registerPrimitive;l("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target"}})},{"../primitives":147}],154:[function(c,g,L){var l=c("../primitives").registerPrimitive;l("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},{"../primitives":147}],155:[function(c,g,L){var l=c("../getMeshMixin")(),h=c("../primitives").registerPrimitive,m=c("../../../utils/");h("a-obj-model",m.extendDeep({},l,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},{"../../../utils/":205,"../getMeshMixin":145,"../primitives":147}],156:[function(c,g,L){var l=c("../getMeshMixin"),h=c("../primitives").registerPrimitive,m=c("../../../utils/"),y=c("./meshPrimitives");h("a-sky",m.extendDeep({},l(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:m.extendDeep({},y["a-sphere"].prototype.mappings)}))},{"../../../utils/":205,"../getMeshMixin":145,"../primitives":147,"./meshPrimitives":161}],157:[function(c,g,L){var l=c("../primitives").registerPrimitive;l("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},{"../primitives":147}],158:[function(c,g,L){var l=c("../primitives").definePrimitive;l("a-text",{text:{anchor:"align",width:5}})},{"../primitives":147}],159:[function(c,g,L){var l=c("../getMeshMixin"),h=c("../primitives").registerPrimitive,m=c("../../../utils/");h("a-video",m.extendDeep({},l(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":205,"../getMeshMixin":145,"../primitives":147}],160:[function(c,g,L){var l=c("../getMeshMixin"),h=c("../primitives").registerPrimitive,m=c("../../../utils/");h("a-videosphere",m.extendDeep({},l(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},{"../../../utils/":205,"../getMeshMixin":145,"../primitives":147}],161:[function(c,g,L){var l=c("../getMeshMixin"),h=c("../../../core/geometry").geometries,m=c("../../../core/geometry").geometryNames,y=c("../primitives").registerPrimitive,d=c("../../../utils/"),p=g.exports={};m.forEach(function(E){var S=h[E],x=v(E),T={};Object.keys(S.schema).forEach(function(I){T[v(I)]="geometry."+I});var _="a-"+x,D=y(_,d.extendDeep({},l(),{defaultComponents:{geometry:{primitive:E}},mappings:T}));p[_]=D});function v(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},{"../../../core/geometry":132,"../../../utils/":205,"../getMeshMixin":145,"../primitives":147}],162:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three");l("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(m){this.geometry=new h.BoxGeometry(m.width,m.height,m.depth,m.segmentsWidth,m.segmentsHeight,m.segmentsDepth)}})},{"../core/geometry":132,"../lib/three":179}],163:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three"),m=h.Math.degToRad;l("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new h.CircleGeometry(y.radius,y.segments,m(y.thetaStart),m(y.thetaLength))}})},{"../core/geometry":132,"../lib/three":179}],164:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three"),m=h.Math.degToRad;l("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new h.CylinderGeometry(y.radiusTop,y.radiusBottom,y.height,y.segmentsRadial,y.segmentsHeight,y.openEnded,m(y.thetaStart),m(y.thetaLength))}})},{"../core/geometry":132,"../lib/three":179}],165:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three"),m=h.Math.degToRad;l("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new h.CylinderGeometry(y.radius,y.radius,y.height,y.segmentsRadial,y.segmentsHeight,y.openEnded,m(y.thetaStart),m(y.thetaLength))}})},{"../core/geometry":132,"../lib/three":179}],166:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three");l("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(m){this.geometry=new h.DodecahedronGeometry(m.radius,m.detail)}})},{"../core/geometry":132,"../lib/three":179}],167:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three");l("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(m){this.geometry=new h.IcosahedronGeometry(m.radius,m.detail)}})},{"../core/geometry":132,"../lib/three":179}],168:[function(c,g,L){c("./box.js"),c("./circle.js"),c("./cone.js"),c("./cylinder.js"),c("./dodecahedron.js"),c("./icosahedron.js"),c("./octahedron.js"),c("./plane.js"),c("./ring.js"),c("./sphere.js"),c("./tetrahedron.js"),c("./torus.js"),c("./torusKnot.js"),c("./triangle.js")},{"./box.js":162,"./circle.js":163,"./cone.js":164,"./cylinder.js":165,"./dodecahedron.js":166,"./icosahedron.js":167,"./octahedron.js":169,"./plane.js":170,"./ring.js":171,"./sphere.js":172,"./tetrahedron.js":173,"./torus.js":174,"./torusKnot.js":175,"./triangle.js":176}],169:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three");l("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(m){this.geometry=new h.OctahedronGeometry(m.radius,m.detail)}})},{"../core/geometry":132,"../lib/three":179}],170:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three");l("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(m){this.geometry=new h.PlaneGeometry(m.width,m.height,m.segmentsWidth,m.segmentsHeight)}})},{"../core/geometry":132,"../lib/three":179}],171:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three"),m=h.Math.degToRad;l("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(y){this.geometry=new h.RingGeometry(y.radiusInner,y.radiusOuter,y.segmentsTheta,y.segmentsPhi,m(y.thetaStart),m(y.thetaLength))}})},{"../core/geometry":132,"../lib/three":179}],172:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three"),m=h.Math.degToRad;l("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(y){this.geometry=new h.SphereGeometry(y.radius,y.segmentsWidth,y.segmentsHeight,m(y.phiStart),m(y.phiLength),m(y.thetaStart),m(y.thetaLength))}})},{"../core/geometry":132,"../lib/three":179}],173:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three");l("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(m){this.geometry=new h.TetrahedronGeometry(m.radius,m.detail)}})},{"../core/geometry":132,"../lib/three":179}],174:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three"),m=h.Math.degToRad;l("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(y){this.geometry=new h.TorusGeometry(y.radius,y.radiusTubular*2,y.segmentsRadial,y.segmentsTubular,m(y.arc))}})},{"../core/geometry":132,"../lib/three":179}],175:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three");l("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(m){this.geometry=new h.TorusKnotGeometry(m.radius,m.radiusTubular*2,m.segmentsTubular,m.segmentsRadial,m.p,m.q)}})},{"../core/geometry":132,"../lib/three":179}],176:[function(c,g,L){var l=c("../core/geometry").registerGeometry,h=c("../lib/three"),m=new h.Quaternion,y=new h.Vector3(0,0,1),d=new h.Vector2,p=new h.Vector2,v=new h.Vector2;l("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(b){var E,S,x,T,_,D,C,I,B;x=new h.Triangle,x.a.set(b.vertexA.x,b.vertexA.y,b.vertexA.z),x.b.set(b.vertexB.x,b.vertexB.y,b.vertexB.z),x.c.set(b.vertexC.x,b.vertexC.y,b.vertexC.z),S=x.getNormal(new h.Vector3),m.setFromUnitVectors(S,y),T=x.a.clone().applyQuaternion(m),_=x.b.clone().applyQuaternion(m),D=x.c.clone().applyQuaternion(m),d.set(Math.min(T.x,_.x,D.x),Math.min(T.y,_.y,D.y)),p.set(Math.max(T.x,_.x,D.x),Math.max(T.y,_.y,D.y)),v.set(0,0).subVectors(p,d),T=new h.Vector2().subVectors(T,d).divide(v),_=new h.Vector2().subVectors(_,d).divide(v),D=new h.Vector2().subVectors(D,d).divide(v),E=this.geometry=new h.BufferGeometry,C=[x.a.x,x.a.y,x.a.z,x.b.x,x.b.y,x.b.z,x.c.x,x.c.y,x.c.z],I=[S.x,S.y,S.z,S.x,S.y,S.z,S.x,S.y,S.z],B=[T.x,T.y,_.x,_.y,D.x,D.y],E.setAttribute("position",new h.Float32BufferAttribute(C,3)),E.setAttribute("normal",new h.Float32BufferAttribute(I,3)),E.setAttribute("uv",new h.Float32BufferAttribute(B,2))}})},{"../core/geometry":132,"../lib/three":179}],177:[function(c,g,L){if(window.Promise=window.Promise||c("promise-polyfill"),window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.hasNativeWebXRImplementation=navigator.xr!==void 0,!window.hasNativeWebXRImplementation&&!window.hasNativeWebVRImplementation){var l=c("./utils/isIOSOlderThan10"),h=l(window.navigator.userAgent)?1/window.devicePixelRatio:1,m=c("webvr-polyfill"),y={BUFFER_SCALE:h,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0,MOBILE_WAKE_LOCK:!!window.cordova};window.webvrpolyfill=new m(y)}var d=c("./utils/"),p=d.debug;d.isIE11&&(c("custom-event-polyfill"),c("../vendor/starts-with-polyfill"));var v=p("A-Frame:error"),b=p("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&b("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),!window.cordova&&window.location.protocol==="file:"&&v("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),c("present"),d.device.isBrowserEnvironment&&(c("./style/aframe.css"),c("./style/rStats.css"));var E=c("./core/scene/a-scene").AScene,S=c("./core/component").components,x=c("./core/component").registerComponent,T=c("./core/geometry").registerGeometry,_=c("./extras/primitives/primitives").registerPrimitive,D=c("./core/shader").registerShader,C=c("./core/system").registerSystem,I=c("./core/shader").shaders,B=c("./core/system").systems,U=window.THREE=c("./lib/three"),W=c("../package");c("./components/index"),c("./geometries/index"),c("./shaders/index"),c("./systems/index");var oe=c("./core/a-node"),J=c("./core/a-entity");c("./core/a-assets"),c("./core/a-cubemap"),c("./core/a-mixin"),c("./extras/components/"),c("./extras/primitives/"),console.log("A-Frame Version: 1.2.0 (Date 2021-02-05, Commit #b220fa00)"),console.log("THREE Version (https://github.com/supermedium/three.js):",W.dependencies["super-three"]),console.log("WebVR Polyfill Version:",W.dependencies["webvr-polyfill"]),g.exports=window.AFRAME={AComponent:c("./core/component").Component,AEntity:J,ANode:oe,ANIME:c("super-animejs"),AScene:E,components:S,coreComponents:Object.keys(S),geometries:c("./core/geometry").geometries,registerComponent:x,registerElement:c("./core/a-register-element").registerElement,registerGeometry:T,registerPrimitive:_,registerShader:D,registerSystem:C,primitives:{getMeshMixin:c("./extras/primitives/getMeshMixin"),primitives:c("./extras/primitives/primitives").primitives},scenes:c("./core/scene/scenes"),schema:c("./core/schema"),shaders:I,systems:B,THREE:U,utils:d,version:W.version}},{"../package":73,"../vendor/starts-with-polyfill":218,"./components/index":84,"./core/a-assets":125,"./core/a-cubemap":126,"./core/a-entity":127,"./core/a-mixin":128,"./core/a-node":129,"./core/a-register-element":130,"./core/component":131,"./core/geometry":132,"./core/scene/a-scene":134,"./core/scene/scenes":138,"./core/schema":140,"./core/shader":141,"./core/system":142,"./extras/components/":143,"./extras/primitives/":146,"./extras/primitives/getMeshMixin":145,"./extras/primitives/primitives":147,"./geometries/index":168,"./lib/three":179,"./shaders/index":181,"./style/aframe.css":186,"./style/rStats.css":187,"./systems/index":191,"./utils/":205,"./utils/isIOSOlderThan10":208,"custom-event-polyfill":7,present:48,"promise-polyfill":50,"super-animejs":56,"webvr-polyfill":68}],178:[function(c,g,L){window.aframeStats=function(l){var h=null,m=l,y={te:{caption:"Entities"},lt:{caption:"Load Time"}},d=[{caption:"A-Frame",values:["te","lt"]}];function p(){h("te").set(v()),window.performance.getEntriesByName&&h("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))}function v(){var x=m.querySelectorAll("*");return Array.prototype.slice.call(x).filter(function(T){return T.isEntity}),x.length}function b(){}function E(){}function S(x){h=x}return{update:p,start:b,end:E,attach:S,values:y,groups:d,fractions:[]}},typeof g=="object"&&(g.exports={aframeStats:window.aframeStats})},{}],179:[function(c,g,L){(function(l){var h=l.THREE=c("super-three");h.TextureLoader&&(h.TextureLoader.prototype.crossOrigin="anonymous"),h.ImageLoader&&(h.ImageLoader.prototype.crossOrigin="anonymous"),h.Cache&&(h.Cache.enabled=!0),c("../../vendor/DeviceOrientationControls"),c("super-three/examples/js/loaders/DRACOLoader"),c("super-three/examples/js/loaders/GLTFLoader"),c("super-three/examples/js/loaders/OBJLoader"),c("super-three/examples/js/loaders/MTLLoader"),c("super-three/examples/js/utils/BufferGeometryUtils"),h.DRACOLoader.prototype.crossOrigin="anonymous",h.GLTFLoader.prototype.crossOrigin="anonymous",h.MTLLoader.prototype.crossOrigin="anonymous",h.OBJLoader.prototype.crossOrigin="anonymous",g.exports=h}).call(this,typeof Ga!="undefined"?Ga:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../vendor/DeviceOrientationControls":215,"super-three":57,"super-three/examples/js/loaders/DRACOLoader":58,"super-three/examples/js/loaders/GLTFLoader":59,"super-three/examples/js/loaders/MTLLoader":60,"super-three/examples/js/loaders/OBJLoader":61,"super-three/examples/js/utils/BufferGeometryUtils":62}],180:[function(c,g,L){var l=c("../core/shader").registerShader,h=c("../lib/three"),m=c("../utils/");g.exports.Shader=l("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(d){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new h.Color},this.textureSrc=null,y(d,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.material=new h.MeshBasicMaterial(this.materialData),m.material.updateMap(this,d)},update:function(d){this.updateMaterial(d),m.material.updateMap(this,d)},updateMaterial:function(d){var p;y(d,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color);for(p in this.materialData)this.material[p]=this.materialData[p]}});function y(d,p){return p.color.set(d.color),p.fog=d.fog,p.wireframe=d.wireframe,p.wireframeLinewidth=d.wireframeLinewidth,p}},{"../core/shader":141,"../lib/three":179,"../utils/":205}],181:[function(c,g,L){c("./flat"),c("./standard"),c("./sdf"),c("./msdf"),c("./ios10hls")},{"./flat":180,"./ios10hls":182,"./msdf":183,"./sdf":184,"./standard":185}],182:[function(c,g,L){var l=c("../core/shader").registerShader;g.exports.Shader=l("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:["varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),fragmentShader:["uniform sampler2D src;","uniform float opacity;","varying vec2 vUV;","void main() {","  vec2 offset = vec2(0, 0);","  vec2 repeat = vec2(1, 1);","  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;","  gl_FragColor = vec4(color.rgb, opacity);","}"].join(`
`)})},{"../core/shader":141}],183:[function(c,g,L){var l=c("../core/shader").registerShader,h=!!document.createElement("canvas").getContext("webgl2"),m=["attribute vec2 uv;","attribute vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),y=["#version 300 es","in vec2 uv;","in vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","out vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),d=h?y:m,p=["#ifdef GL_OES_standard_derivatives","#extension GL_OES_standard_derivatives: enable","#endif","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture2D(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","}"].join(`
`),v=["#version 300 es","precision highp float;","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","out vec4 fragColor;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  fragColor = vec4(color.xyz, alpha * opacity);","}"].join(`
`),b=h?v:p;g.exports.Shader=l("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:d,fragmentShader:b})},{"../core/shader":141}],184:[function(c,g,L){var l=c("../core/shader").registerShader;g.exports.Shader=l("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:["#version 300 es","in vec2 uv;","in vec3 position;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","out vec2 vUV;","void main(void) {","  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","  vUV = uv;","}"].join(`
`),fragmentShader:["#version 300 es","precision highp float;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","out vec4 fragColor;","#ifdef GL_OES_standard_derivatives","  float contour(float width, float value) {","    return smoothstep(0.5 - value, 0.5 + value, width);","  }","#else","  float aastep(float value, float afwidth) {","    return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);","  }","#endif","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","#define ALL_SMOOTH 0.4","#define ALL_ROUGH 0.02","#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))","void main() {","  #ifdef GL_OES_standard_derivatives","    vec2 uv = vUV;","    vec4 texColor = texture(map, uv);","    float dist = texColor.a;","    float width = fwidth(dist);","    float alpha = contour(dist, width);","    float dscale = 0.353505;","    vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","    float isBigEnough = max(abs(duv.x), abs(duv.y));","    if (isBigEnough > BIG_ENOUGH) {","      float ratio = BIG_ENOUGH / isBigEnough;","      alpha = ratio * alpha + (1.0 - ratio) * dist;","    }","    if (isBigEnough <= BIG_ENOUGH) {","      vec4 box = vec4 (uv - duv, uv + duv);","      alpha = (alpha + 0.5 * (","        contour(texture(map, box.xy).a, width)","        + contour(texture(map, box.zw).a, width)","        + contour(texture(map, box.xw).a, width)","        + contour(texture(map, box.zy).a, width)","      )) / 3.0;","    }","    if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  #else","    vec4 texColor = texture(map, vUV);","    float value = texColor.a;","    float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));","    float alpha = aastep(value, afwidth);","    float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);","    if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }","    alpha = alpha * ratio + (1.0 - ratio) * value;","    if (ratio < 1.0 && alpha <= DISCARD_ALPHA) { discard; return; }","  #endif","  fragColor = vec4(color, opacity * alpha);","}"].join(`
`)})},{"../core/shader":141}],185:[function(c,g,L){var l=c("../core/shader").registerShader,h=c("../lib/three"),m=c("../utils/"),y=new h.CubeTextureLoader,d={};g.exports.Shader=l("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(v){this.rendererSystem=this.el.sceneEl.systems.renderer,this.materialData={color:new h.Color,emissive:new h.Color},p(v,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive),this.material=new h.MeshStandardMaterial(this.materialData),m.material.updateMap(this,v),v.normalMap&&m.material.updateDistortionMap("normal",this,v),v.displacementMap&&m.material.updateDistortionMap("displacement",this,v),v.ambientOcclusionMap&&m.material.updateDistortionMap("ambientOcclusion",this,v),v.metalnessMap&&m.material.updateDistortionMap("metalness",this,v),v.roughnessMap&&m.material.updateDistortionMap("roughness",this,v),this.updateEnvMap(v)},update:function(v){this.updateMaterial(v),m.material.updateMap(this,v),v.normalMap&&m.material.updateDistortionMap("normal",this,v),v.displacementMap&&m.material.updateDistortionMap("displacement",this,v),v.ambientOcclusionMap&&m.material.updateDistortionMap("ambientOcclusion",this,v),v.metalnessMap&&m.material.updateDistortionMap("metalness",this,v),v.roughnessMap&&m.material.updateDistortionMap("roughness",this,v),this.updateEnvMap(v)},updateMaterial:function(v){var b,E=this.material;p(v,this.materialData),this.rendererSystem.applyColorCorrection(this.materialData.color),this.rendererSystem.applyColorCorrection(this.materialData.emissive);for(b in this.materialData)E[b]=this.materialData[b]},updateEnvMap:function(v){var b=this,E=this.material,S=v.envMap,x=v.sphericalEnvMap;if(!S&&!x||this.isLoadingEnvMap){E.envMap=null,E.needsUpdate=!0;return}if(this.isLoadingEnvMap=!0,x){this.el.sceneEl.systems.material.loadTexture(x,{src:x},function(_){b.isLoadingEnvMap=!1,_.mapping=h.SphericalReflectionMapping,E.envMap=_,m.material.handleTextureEvents(b.el,_),E.needsUpdate=!0});return}if(d[S]){d[S].then(function(T){b.isLoadingEnvMap=!1,E.envMap=T,m.material.handleTextureEvents(b.el,T),E.needsUpdate=!0});return}d[S]=new Promise(function(T){m.srcLoader.validateCubemapSrc(S,function(D){y.load(D,function(C){b.isLoadingEnvMap=!1,E.envMap=C,m.material.handleTextureEvents(b.el,C),T(C)})})})}});function p(v,b){return b.color.set(v.color),b.emissive.set(v.emissive),b.emissiveIntensity=v.emissiveIntensity,b.fog=v.fog,b.metalness=v.metalness,b.roughness=v.roughness,b.wireframe=v.wireframe,b.wireframeLinewidth=v.wireframeLinewidth,v.normalMap&&(b.normalScale=v.normalScale),v.ambientOcclusionMap&&(b.aoMapIntensity=v.ambientOcclusionMapIntensity),v.displacementMap&&(b.displacementScale=v.displacementScale,b.displacementBias=v.displacementBias),b}},{"../core/shader":141,"../lib/three":179,"../utils/":205}],186:[function(c,g,L){var l=`html.a-fullscreen{bottom:0;left:0;position:fixed;right:0;top:0}html.a-fullscreen body{height:100%;margin:0;overflow:hidden;padding:0;width:100%}html.a-fullscreen .a-canvas{width:100%!important;height:100%!important;top:0!important;left:0!important;right:0!important;bottom:0!important;position:fixed!important}html:not(.a-fullscreen) .a-enter-ar,html:not(.a-fullscreen) .a-enter-vr{right:5px;bottom:5px}:-webkit-full-screen{background-color:transparent}.a-hidden{display:none!important}.a-canvas{height:100%;left:0;position:absolute;top:0;width:100%}.a-canvas.a-grab-cursor:hover{cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}canvas.a-canvas.a-mouse-cursor-hover:hover{cursor:pointer}.a-inspector-loader{background-color:#ed3160;position:fixed;left:3px;top:3px;padding:6px 10px;color:#fff;text-decoration:none;font-size:12px;font-family:Roboto,sans-serif;text-align:center;z-index:99999;width:204px}@keyframes dots-1{from{opacity:0}25%{opacity:1}}@keyframes dots-2{from{opacity:0}50%{opacity:1}}@keyframes dots-3{from{opacity:0}75%{opacity:1}}@-webkit-keyframes dots-1{from{opacity:0}25%{opacity:1}}@-webkit-keyframes dots-2{from{opacity:0}50%{opacity:1}}@-webkit-keyframes dots-3{from{opacity:0}75%{opacity:1}}.a-inspector-loader .dots span{animation:dots-1 2s infinite steps(1);-webkit-animation:dots-1 2s infinite steps(1)}.a-inspector-loader .dots span:first-child+span{animation-name:dots-2;-webkit-animation-name:dots-2}.a-inspector-loader .dots span:first-child+span+span{animation-name:dots-3;-webkit-animation-name:dots-3}a-scene{display:block;position:relative;height:100%;width:100%}a-assets,a-scene audio,a-scene img,a-scene video{display:none}.a-enter-vr-modal,.a-orientation-modal{font-family:Consolas,Andale Mono,Courier New,monospace}.a-enter-vr-modal a{border-bottom:1px solid #fff;padding:2px 0;text-decoration:none;transition:.1s color ease-in}.a-enter-vr-modal a:hover{background-color:#fff;color:#111;padding:2px 4px;position:relative;left:-4px}.a-enter-ar,.a-enter-vr{font-family:sans-serif,monospace;font-size:13px;width:100%;font-weight:200;line-height:16px;position:absolute;right:20px;bottom:20px}.a-enter-ar{right:80px}.a-enter-vr-button,.a-enter-vr-modal,.a-enter-vr-modal a{color:#fff;user-select:none;outline:0}.a-enter-vr-button{background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat rgba(0,0,0,.35)}.a-enter-ar-button{background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat rgba(0,0,0,.2)}.a-enter-ar-button,.a-enter-vr-button{background-size:90% 90%;border:0;bottom:0;cursor:pointer;min-width:58px;min-height:34px;padding-right:0;padding-top:0;position:absolute;right:0;transition:background-color .05s ease;-webkit-transition:background-color .05s ease;z-index:9999;border-radius:8px;touch-action:manipulation}.a-enter-ar-button{background-size:100% 90%;margin-right:10px;border-radius:7px}.a-enter-ar-button:active,.a-enter-ar-button:hover,.a-enter-vr-button:active,.a-enter-vr-button:hover{background-color:#ef2d5e}.a-enter-vr-button.resethover{background-color:rgba(0,0,0,.35)}[data-a-enter-vr-no-webvr] .a-enter-vr-button{border-color:#666;opacity:.65}[data-a-enter-vr-no-webvr] .a-enter-vr-button:active,[data-a-enter-vr-no-webvr] .a-enter-vr-button:hover{background-color:rgba(0,0,0,.35);cursor:not-allowed}.a-enter-vr-modal{background-color:#666;border-radius:0;display:none;min-height:32px;margin-right:70px;padding:9px;width:280px;right:2%;position:absolute}.a-enter-vr-modal:after{border-bottom:10px solid transparent;border-left:10px solid #666;border-top:10px solid transparent;display:inline-block;content:'';position:absolute;right:-5px;top:5px;width:0;height:0}.a-enter-vr-modal a,.a-enter-vr-modal p{display:inline}.a-enter-vr-modal p{margin:0}.a-enter-vr-modal p:after{content:' '}[data-a-enter-vr-no-headset].a-enter-vr:hover .a-enter-vr-modal,[data-a-enter-vr-no-webvr].a-enter-vr:hover .a-enter-vr-modal{display:block}.a-orientation-modal{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center/50% 50% no-repeat rgba(244,244,244,1);bottom:0;font-size:14px;font-weight:600;left:0;line-height:20px;right:0;position:fixed;top:0;z-index:9999999}.a-orientation-modal:after{color:#666;content:"Insert phone into Cardboard holder.";display:block;position:absolute;text-align:center;top:70%;transform:translateY(-70%);width:100%}.a-orientation-modal button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;border:none;height:50px;text-indent:-9999px;width:50px}.a-loader-title{background-color:rgba(0,0,0,.6);font-family:sans-serif,monospace;text-align:center;font-size:20px;height:50px;font-weight:300;line-height:50px;position:absolute;right:0;left:0;top:0;color:#fff}.a-modal{background:0 0/50% 50% rgba(0,0,0,.6);bottom:0;font-size:14px;font-weight:600;left:0;line-height:20px;right:0;position:fixed;top:0;z-index:9999999}.a-dialog{position:relative;left:50%;top:50%;transform:translate(-50%,-50%);z-index:199995;width:300px;height:200px;background-size:contain;background-color:#fff;font-family:sans-serif,monospace;font-size:20px;border-radius:3px;padding:6px}.a-dialog-text-container{width:100%;height:70%;align-self:flex-start;display:flex;justify-content:center;align-content:center;flex-direction:column}.a-dialog-text{display:inline-block;font-weight:400;font-size:14pt;margin:8px}.a-dialog-buttons-container{display:inline-flex;align-self:flex-end;width:100%;height:30%}.a-dialog-button{cursor:pointer;align-self:center;opacity:.9;height:80%;width:50%;font-size:12pt;margin:4px;border-radius:2px;text-align:center;border:none;display:inline-block;-webkit-transition:all .25s ease-in-out;transition:all .25s ease-in-out;box-shadow:0 1px 3px rgba(0,0,0,.1),0 1px 2px rgba(0,0,0,.2);user-select:none}.a-dialog-permission-button:hover{box-shadow:0 7px 14px rgba(0,0,0,.2),0 2px 2px rgba(0,0,0,.2)}.a-dialog-allow-button{background-color:#00ceff}.a-dialog-deny-button{background-color:#ff005b}.a-dialog-ok-button{background-color:#00ceff;width:100%}`;c("browserify-css").createStyle(l,{href:"src/style/aframe.css"}),g.exports=l},{"browserify-css":4}],187:[function(c,g,L){var l=".rs-base{background-color:#333;color:#fafafa;border-radius:0;font:10px monospace;left:5px;line-height:1em;opacity:.85;overflow:hidden;padding:10px;position:fixed;top:5px;width:300px;z-index:10000}.rs-base div.hidden{display:none}.rs-base h1{color:#fff;cursor:pointer;font-size:1.4em;font-weight:300;margin:0 0 5px;padding:0}.rs-group{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;margin-bottom:5px}.rs-group:last-child{margin-bottom:0}.rs-counter-base{align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:10px;-webkit-justify-content:space-between;justify-content:space-between;margin:2px 0}.rs-counter-base.alarm{color:#b70000;text-shadow:0 0 0 #b70000,0 0 1px #fff,0 0 1px #fff,0 0 2px #fff,0 0 2px #fff,0 0 3px #fff,0 0 3px #fff,0 0 4px #fff,0 0 4px #fff}.rs-counter-id{font-weight:300;-webkit-box-ordinal-group:0;-webkit-order:0;order:0;width:54px}.rs-counter-value{font-weight:300;-webkit-box-ordinal-group:1;-webkit-order:1;order:1;text-align:right;width:35px}.rs-canvas{-webkit-box-ordinal-group:2;-webkit-order:2;order:2}@media (min-width:480px){.rs-base{left:20px;top:20px}}";c("browserify-css").createStyle(l,{href:"src/style/rStats.css"}),g.exports=l},{"browserify-css":4}],188:[function(c,g,L){var l=c("../constants/"),h=c("../core/system").registerSystem,m="data-aframe-default-camera";g.exports.System=h("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var d,p,v=this.sceneEl,b=this;if(v.camera&&!v.camera.el.getAttribute("camera").spectator){v.emit("cameraready",{cameraEl:v.camera.el});return}if(d=v.querySelectorAll("a-camera, [camera]"),!d.length){this.createDefaultCamera();return}for(this.numUserCameras=d.length,p=0;p<d.length;p++)d[p].addEventListener("object3dset",function(E){E.detail.type==="camera"&&b.checkUserCamera(this)}),d[p].isNode?d[p].load():d[p].addEventListener("nodeready",function(){this.load()})},checkUserCamera:function(d){var p,v=this.el.sceneEl;if(this.numUserCamerasChecked++,!this.initialCameraFound){if(p=d.getAttribute("camera"),!p.active||p.spectator){this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera();return}this.initialCameraFound=!0,v.camera=d.getObject3D("camera"),v.emit("cameraready",{cameraEl:d})}},createDefaultCamera:function(){var d,p=this.sceneEl;d=document.createElement("a-entity"),d.setAttribute("camera",{active:!0}),d.setAttribute("position",{x:0,y:l.DEFAULT_CAMERA_HEIGHT,z:0}),d.setAttribute("wasd-controls",""),d.setAttribute("look-controls",""),d.setAttribute(l.AFRAME_INJECTED,""),d.addEventListener("object3dset",function(v){v.detail.type==="camera"&&(p.camera=v.detail.object,p.emit("cameraready",{cameraEl:d}))}),p.appendChild(d)},disableActiveCamera:function(){var d,p;d=this.sceneEl.querySelectorAll("[camera]"),p=d[d.length-1],p.setAttribute("camera","active",!0)},setActiveCamera:function(d){var p,v,b,E,S=this.activeCameraEl,x=this.sceneEl;if(E=d.getObject3D("camera"),!(!E||d===this.activeCameraEl)){var T=x.querySelector("["+m+"]"),_=T&&T.querySelector("[camera]");for(d!==_&&y(x),this.activeCameraEl=d,this.activeCameraEl.play(),x.camera=E,S&&S.setAttribute("camera","active",!1),v=x.querySelectorAll("[camera]"),b=0;b<v.length;b++)p=v[b],!(!p.isEntity||d===p)&&(p.setAttribute("camera","active",!1),p.pause());x.emit("camera-set-active",{cameraEl:d})}},setSpectatorCamera:function(d){var p,v=this.spectatorCameraEl,b=this.sceneEl,E;p=d.getObject3D("camera"),!(!p||d===this.spectatorCameraEl)&&(v&&v.setAttribute("camera","spectator",!1),E=this.spectatorCameraEl=d,b.addEventListener("enter-vr",this.wrapRender),b.addEventListener("exit-vr",this.unwrapRender),E.setAttribute("camera","active",!1),E.play(),b.emit("camera-set-spectator",{cameraEl:d}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){!this.spectatorCameraEl||this.originalRender||(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){!this.originalRender||(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(d,p){var v,b=this.sceneEl,E;v=b.renderer.xr.enabled,this.originalRender.call(b.renderer,d,p),!(!this.spectatorCameraEl||b.isMobile||!v)&&(E=this.spectatorCameraEl.components.camera.camera,b.renderer.xr.enabled=!1,this.originalRender.call(b.renderer,d,E),b.renderer.xr.enabled=v)}});function y(d){var p,v=d.camera;!v||(p=d.querySelector("["+m+"]"),!!p&&d.removeChild(p))}},{"../constants/":123,"../core/system":142}],189:[function(c,g,L){var l=c("../core/geometry").geometries,h=c("../core/system").registerSystem;g.exports.System=h("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(p){var v=this.cache,b,E;return p.skipCache?m(p):(E=this.hash(p),b=v[E],d(this.cacheCount,E),b||(b=m(p),v[E]=b,b))},unuseGeometry:function(p){var v=this.cache,b=this.cacheCount,E,S;p.skipCache||(S=this.hash(p),!!v[S]&&(y(b,S),!(b[S]>0)&&(E=v[S],E.dispose(),delete v[S],delete b[S])))},hash:function(p){return JSON.stringify(p)}});function m(p){var v=p.primitive,b=l[v]&&l[v].Geometry,E=new b;if(!b)throw new Error("Unknown geometry `"+v+"`");return E.init(p),E.geometry}function y(p,v){p[v]--}function d(p,v){p[v]=p[v]===void 0?1:p[v]+1}},{"../core/geometry":132,"../core/system":142}],190:[function(c,g,L){var l=c("../core/system").registerSystem,h=c("../lib/three");g.exports.System=l("gltf-model",{schema:{dracoDecoderPath:{default:""}},init:function(){var m=this.data.dracoDecoderPath;this.dracoLoader=new h.DRACOLoader,this.dracoLoader.setDecoderPath(m)},update:function(){var m;this.dracoLoader||(m=this.data.dracoDecoderPath,this.dracoLoader=new h.DRACOLoader,this.dracoLoader.setDecoderPath(m))},getDRACOLoader:function(){return this.dracoLoader}})},{"../core/system":142,"../lib/three":179}],191:[function(c,g,L){c("./camera"),c("./geometry"),c("./gltf-model"),c("./light"),c("./material"),c("./renderer"),c("./shadow"),c("./tracked-controls-webvr"),c("./tracked-controls-webxr"),c("./webxr")},{"./camera":188,"./geometry":189,"./gltf-model":190,"./light":192,"./material":193,"./renderer":194,"./shadow":195,"./tracked-controls-webvr":196,"./tracked-controls-webxr":197,"./webxr":198}],192:[function(c,g,L){var l=c("../core/system").registerSystem,h=c("../utils/bind"),m=c("../constants/"),y="data-aframe-default-light";g.exports.System=l("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",h(this.setupDefaultLights,this))},registerLight:function(d){d.hasAttribute(y)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var d,p=this.sceneEl;if(!!this.defaultLights){d=document.querySelectorAll("["+y+"]");for(var v=0;v<d.length;v++)p.removeChild(d[v]);this.defaultLights=!1}},setupDefaultLights:function(){var d=this.sceneEl,p,v;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(p=document.createElement("a-entity"),p.setAttribute("light",{color:"#BBB",type:"ambient"}),p.setAttribute(y,""),p.setAttribute(m.AFRAME_INJECTED,""),d.appendChild(p),v=document.createElement("a-entity"),v.setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),v.setAttribute("position",{x:-.5,y:1,z:1}),v.setAttribute(y,""),v.setAttribute(m.AFRAME_INJECTED,""),d.appendChild(v),this.defaultLights=!0)}})},{"../constants/":123,"../core/system":142,"../utils/bind":199}],193:[function(c,g,L){var l=c("../core/system").registerSystem,h=c("../lib/three"),m=c("../utils/"),y=c("../utils/material").isHLS,d=m.bind,p=m.debug,v=p("components:texture:error"),b=new h.TextureLoader,E=p("components:texture:warn");b.setCrossOrigin("anonymous"),g.exports.System=l("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",d(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(C,I,B){var U=this;if(C.tagName==="CANVAS"){this.loadCanvas(C,I,B);return}if(C.tagName==="VIDEO"){!C.src&&!C.srcObject&&!C.childElementCount&&E("Video element was defined with neither `source` elements nor `src` / `srcObject` attributes."),this.loadVideo(C,I,B);return}m.srcLoader.validateSrc(C,W,oe);function W(J){U.loadImage(J,I,B)}function oe(J){U.loadVideo(J,I,B)}},loadImage:function(C,I,B){var U=this.hash(I),W=this.textureCache;if(W[U]){W[U].then(B);return}W[U]=x(C,I),W[U].then(B)},loadCanvas:function(C,I,B){var U;U=new h.CanvasTexture(C),T(U,I),B(U)},loadVideo:function(C,I,B){var U,W,oe=this.textureCache,J,le;function te(ue){ue.texture.needsUpdate=!0,B(ue.texture,ue.videoEl)}if(typeof C!="string"){if(J=C,U=this.hashVideo(I,J),oe[U]){oe[U].then(te);return}D(J)}if(J=J||_(C,I.width,I.height),U=this.hashVideo(I,J),oe[U]){oe[U].then(te);return}W=new h.VideoTexture(J),W.minFilter=h.LinearFilter,T(W,I),this.sceneEl.isIOS&&y(J.src||J.getAttribute("src"),J.type||J.getAttribute("type"))&&(W.format=h.RGBAFormat,W.needsCorrectionBGRA=!0,W.flipY=!1,W.needsCorrectionFlipY=!0),le={texture:W,videoEl:J},oe[U]=Promise.resolve(le),te(le)},hash:function(C){return C.src.tagName&&(C=m.extendDeep({},C),C.src=C.src.src),JSON.stringify(C)},hashVideo:function(C,I){return S(C,I)},registerMaterial:function(C){this.materials[C.uuid]=C},unregisterMaterial:function(C){delete this.materials[C.uuid];var I=this.textureCounts;Object.keys(C).filter(function(B){return C[B]&&C[B].isTexture}).forEach(function(B){I[C[B].uuid]--,I[C[B].uuid]<=0&&C[B].dispose()})},updateMaterials:function(C){var I=this.materials;Object.keys(I).forEach(function(B){I[B].needsUpdate=!0})},onMaterialTextureLoaded:function(C){this.textureCounts[C.detail.texture.uuid]||(this.textureCounts[C.detail.texture.uuid]=0),this.textureCounts[C.detail.texture.uuid]++}});function S(C,I){var B,U=I.getAttribute("id"),W,oe;if(U)return U;for(W="",oe=C||{},B=0;B<I.attributes.length;B++)oe[I.attributes[B].name]=I.attributes[B].value;return Object.keys(oe).sort().forEach(function(J){W+=J+":"+oe[J]+";"}),W}function x(C,I){return new Promise(B);function B(U,W){var oe=typeof C!="string";function J(le){T(le,I),le.needsUpdate=!0,U(le)}if(oe){J(new h.Texture(C));return}b.load(C,J,function(){},function(le){v("`$s` could not be fetched (Error code: %s; Response: %s)",le.status,le.statusText)})}}function T(C,I){var B=I.offset||{x:0,y:0},U=I.repeat||{x:1,y:1},W=I.npot||!1;W&&(C.wrapS=h.ClampToEdgeWrapping,C.wrapT=h.ClampToEdgeWrapping,C.magFilter=h.LinearFilter,C.minFilter=h.LinearFilter),(U.x!==1||U.y!==1)&&(C.wrapS=h.RepeatWrapping,C.wrapT=h.RepeatWrapping,C.repeat.set(U.x,U.y)),(B.x!==0||B.y!==0)&&C.offset.set(B.x,B.y)}function _(C,I,B){var U=document.createElement("video");return U.width=I,U.height=B,U.setAttribute("playsinline",""),U.setAttribute("webkit-playsinline",""),U.autoplay=!0,U.loop=!0,U.crossOrigin="anonymous",U.addEventListener("error",function(){E("`$s` is not a valid video",C)},!0),U.src=C,U}function D(C){return C.autoplay=C.hasAttribute("autoplay")&&C.getAttribute("autoplay")!=="false",C.controls=C.hasAttribute("controls")&&C.getAttribute("controls")!=="false",C.getAttribute("loop")==="false"&&C.removeAttribute("loop"),C.getAttribute("preload")==="false"&&(C.preload="none"),C.crossOrigin=C.crossOrigin||"anonymous",C.setAttribute("playsinline",""),C.setAttribute("webkit-playsinline",""),C}},{"../core/system":142,"../lib/three":179,"../utils/":205,"../utils/material":209}],194:[function(c,g,L){var l=c("../core/system").registerSystem,h=c("../utils/"),m=c("../lib/three"),y=h.debug,d=y("components:renderer:warn");g.exports.System=l("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:h.device.isOculusBrowser()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:1920},maxCanvasHeight:{default:1920},physicallyCorrectLights:{default:!1},precision:{default:"high",oneOf:["high","medium","low"]},sortObjects:{default:!1},colorManagement:{default:!1},gammaOutput:{default:!1},alpha:{default:!0},foveationLevel:{default:0}},init:function(){var p=this.data,v=this.el,b=v.renderer;b.sortObjects=p.sortObjects,b.physicallyCorrectLights=p.physicallyCorrectLights,(p.colorManagement||p.gammaOutput)&&(b.outputEncoding=m.sRGBEncoding,p.gammaOutput&&d('Property `gammaOutput` is deprecated. Use `renderer="colorManagement: true;"` instead.')),v.hasAttribute("antialias")&&d('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),v.hasAttribute("logarithmicDepthBuffer")&&d('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.')},applyColorCorrection:function(p){!this.data.colorManagement||!p||(p.isColor?p.convertSRGBToLinear():p.isTexture&&(p.encoding=m.sRGBEncoding))}})},{"../core/system":142,"../lib/three":179,"../utils/":205}],195:[function(c,g,L){var l=c("../core/system").registerSystem,h=c("../lib/three"),m={basic:h.BasicShadowMap,pcf:h.PCFShadowMap,pcfsoft:h.PCFSoftShadowMap};g.exports.System=l("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var y=this.sceneEl,d=this.data;this.shadowMapEnabled=!1,!!y.renderer&&(y.renderer.shadowMap.type=m[d.type],y.renderer.shadowMap.autoUpdate=d.autoUpdate,this.setShadowMapEnabled(this.shadowMapEnabled))},update:function(y){y.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.data.enabled)},setShadowMapEnabled:function(y){var d=this.sceneEl.renderer;this.shadowMapEnabled=this.data.enabled&&y,d&&(d.shadowMap.enabled=this.shadowMapEnabled)}})},{"../core/system":142,"../lib/three":179}],196:[function(c,g,L){var l=c("../core/system").registerSystem,h=c("../utils"),m=h.device.isWebXRAvailable;g.exports.System=l("tracked-controls-webvr",{init:function(){var y=this;this.controllers=[],this.isChrome=navigator.userAgent.indexOf("Chrome")!==-1,this.updateControllerList(),this.throttledUpdateControllerList=h.throttle(this.updateControllerList,500,this),!m&&(!navigator.getVRDisplays||this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(d){d.length&&(y.vrDisplay=d[0])})}))},tick:function(){this.isChrome?this.updateControllerList():this.throttledUpdateControllerList()},updateControllerList:function(){var y=this.controllers,d,p,v,b;if(p=navigator.getGamepads&&navigator.getGamepads(),!!p){for(b=y.length,y.length=0,v=0;v<p.length;++v)d=p[v],d&&d.pose&&y.push(d);y.length!==b&&this.el.emit("controllersupdated",void 0,!1)}}})},{"../core/system":142,"../utils":205}],197:[function(c,g,L){var l=c("../core/system").registerSystem,h=c("../utils");g.exports.System=l("tracked-controls-webxr",{init:function(){this.controllers=[],this.oldControllers=[],this.oldControllersLength=0,this.throttledUpdateControllerList=h.throttle(this.updateControllerList,500,this),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.addEventListener("enter-vr",this.updateReferenceSpace),this.el.addEventListener("exit-vr",this.updateReferenceSpace)},tick:function(){this.throttledUpdateControllerList()},updateReferenceSpace:function(){var m=this,y=this.el.xrSession;if(!y){this.referenceSpace=void 0,this.controllers=[],this.oldControllersLength>0&&(this.oldControllersLength=0,this.el.emit("controllersupdated",void 0,!1));return}var d=m.el.sceneEl.systems.webxr.sessionReferenceSpaceType;y.requestReferenceSpace(d).then(function(p){m.referenceSpace=p}).catch(function(p){throw m.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(d,'tracked-controls-webxr uses reference space "'+d+'".'),p})},updateControllerList:function(){var m=this.el.xrSession,y=this.oldControllers,d;if(!m){if(this.oldControllersLength===0)return;this.oldControllersLength=0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1);return}if(!!m.inputSources){if(this.controllers=m.inputSources,this.oldControllersLength===this.controllers.length){var p=!0;for(d=0;d<this.controllers.length;++d)if(!(this.controllers[d]===y[d]&&this.controllers[d].gamepad===y[d].gamepad)){p=!1;break}if(p)return}for(y.length=0,d=0;d<this.controllers.length;d++)y.push(this.controllers[d]);this.oldControllersLength=this.controllers.length,this.el.emit("controllersupdated",void 0,!1)}}})},{"../core/system":142,"../utils":205}],198:[function(c,g,L){var l=c("../core/system").registerSystem,h=c("../utils/"),m=h.debug("systems:webxr:warn");g.exports.System=l("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var y=this.data;this.sessionConfiguration={requiredFeatures:y.requiredFeatures,optionalFeatures:y.optionalFeatures},this.sessionReferenceSpaceType=y.referenceSpaceType,y.overlayElement&&(this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:y.overlayElement})},wasFeatureRequested:function(y){return!!(y==="viewer"||y==="local"||this.sessionConfiguration.requiredFeatures.includes(y)||this.sessionConfiguration.optionalFeatures.includes(y))},warnIfFeatureNotRequested:function(y,d){if(!this.wasFeatureRequested(y)){var p='Please add the feature "'+y+`" to a-scene's webxr system options in requiredFeatures/optionalFeatures.`;m((d?d+" ":"")+p)}}})},{"../core/system":142,"../utils/":205}],199:[function(c,g,L){g.exports=function(h,m){return function(y){return function(){var p=y.concat(Array.prototype.slice.call(arguments,0));return h.apply(m,p)}}(Array.prototype.slice.call(arguments,2))}},{}],200:[function(c,g,L){var l=c("./debug"),h=c("object-assign"),m=l("utils:coordinates:warn"),y=["x","y","z","w"],d=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;g.exports.regex=d;var p="object",v=/\s+/g;function b(T,_){var D,C,I,B,U,W,oe,J,le;if(T&&T instanceof Object)return W=T.x===void 0?_&&_.x:T.x,oe=T.y===void 0?_&&_.y:T.y,J=T.z===void 0?_&&_.z:T.z,le=T.w===void 0?_&&_.w:T.w,W!=null&&(T.x=x(W)),oe!=null&&(T.y=x(oe)),J!=null&&(T.z=x(J)),le!=null&&(T.w=x(le)),T;if(T==null)return typeof _===p?h({},_):_;for(D=T.trim().split(v),U={},B=0;B<y.length;B++)if(I=y[B],D[B])U[I]=parseFloat(D[B],10);else{if(C=_&&_[I],C===void 0)continue;U[I]=x(C)}return U}g.exports.parse=b;function E(T){var _;return typeof T!==p?T:(_=T.x+" "+T.y,T.z!=null&&(_+=" "+T.z),T.w!=null&&(_+=" "+T.w),_)}g.exports.stringify=E;function S(T){return d.test(T)}g.exports.isCoordinates=S,g.exports.isCoordinate=function(T){return m("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),S(T)};function x(T){return T!=null&&T.constructor===String?parseFloat(T,10):T}g.exports.toVector3=function(T){return new THREE.Vector3(T.x,T.y,T.z)}},{"./debug":201,"object-assign":39}],201:[function(c,g,L){(function(l){var h=c("debug"),m=c("object-assign"),y={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},d=function(S){var x=h(S);return x.color=v(S),x};m(d,h);function p(S){var x=S.split(":");return x[x.length-1]}function v(S){var x=p(S),T=y.colors&&y.colors[x];return T||null}function b(){try{return window.localStorage}catch{}}var E=b();E&&(parseInt(E.logs,10)||E.logs==="true")?d.enable("*"):d.enable("*:error,*:info,*:warn"),l.browser&&(window.logs=d),g.exports=d}).call(this,c("_process"))},{_process:49,debug:8,"object-assign":39}],202:[function(c,g,L){(function(l){var h=c("debug")("device:error"),m,y=!1,d=!1,p=g.exports.isWebXRAvailable=!window.debug&&navigator.xr!==void 0;if(window.addEventListener("vrdisplayactivate",function(oe){var J;p||(J=document.createElement("canvas"),m=oe.display,J.getContext("webgl",{}),m.requestPresent([{source:J}]).then(function(){},function(){}))}),p){var v=function(){var oe=document.querySelector("a-scene");if(!oe){window.addEventListener("DOMContentLoaded",v);return}oe.hasLoaded?oe.components["vr-mode-ui"].updateEnterInterfaces():oe.addEventListener("loaded",v)},b=function(oe){h("WebXR session support error: "+oe.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then(function(oe){y=oe,v()}).catch(b),navigator.xr.isSessionSupported("immersive-ar").then(function(oe){d=oe,v()}).catch(function(){})):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then(function(){y=!0,v()}).catch(b),navigator.xr.supportsSession("immersive-ar").then(function(){d=!0,v()}).catch(function(){})):h("WebXR has neither isSessionSupported or supportsSession?!")}else navigator.getVRDisplays&&navigator.getVRDisplays().then(function(oe){var J=document.querySelector("a-scene");m=oe.length&&oe[0],J&&J.emit("displayconnected",{vrDisplay:m})});function E(){return m}g.exports.getVRDisplay=E;function S(){return y||d||!!E()}g.exports.checkHeadsetConnected=S;function x(){return d}g.exports.checkARSupport=x;var T=function(){var oe=!1;return function(J){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(J)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(J.substr(0,4)))&&(oe=!0),(D()||_()||W())&&(oe=!0),U()&&(oe=!1)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return oe}}();g.exports.isMobile=T;function _(oe){var J=oe||window.navigator.userAgent;return/ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(J)}g.exports.isTablet=_;function D(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}g.exports.isIOS=D;function C(){return!T()&&!U()&&window.orientation!==void 0}g.exports.isMobileDeviceRequestingDesktopSite=C;function I(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}g.exports.isOculusBrowser=I;function B(){return/(Mobile VR)/i.test(window.navigator.userAgent)}g.exports.isFirefoxReality=B;function U(){return I()||B()}g.exports.isMobileVR=U;function W(){return/R7 Build/.test(window.navigator.userAgent)}g.exports.isR7=W,g.exports.isLandscape=function(){var oe=window.orientation;return W()&&(oe+=90),oe===90||oe===-90},g.exports.isBrowserEnvironment=!!(!l||l.browser),g.exports.isNodeEnvironment=!g.exports.isBrowserEnvironment}).call(this,c("_process"))},{_process:49,debug:8}],203:[function(c,g,L){var l={};function h(m,y){return y=y||".",l[y]||(l[y]={}),m.indexOf(y)!==-1?l[y][m]=m.split(y):l[y][m]=m,l[y][m]}g.exports.getComponentPropertyPath=h,g.exports.propertyPathCache=l,g.exports.getComponentProperty=function(m,y,d){var p;return d=d||".",y.indexOf(d)!==-1?(p=h(y,d),p.constructor===String?m.getAttribute(p):m.getAttribute(p[0])[p[1]]):m.getAttribute(y)},g.exports.setComponentProperty=function(m,y,d,p){var v;if(p=p||".",y.indexOf(p)!==-1){v=h(y,p),v.constructor===String?m.setAttribute(v,d):m.setAttribute(v[0],v[1],d);return}m.setAttribute(y,d)}},{}],204:[function(c,g,L){g.exports=function(h){var m=h.style.width,y=h.style.height;h.style.width=parseInt(m,10)+1+"px",h.style.height=parseInt(y,10)+1+"px",setTimeout(function(){h.style.width=m,h.style.height=y},200)}},{}],205:[function(c,g,L){var l=c("./debug"),h=c("deep-assign"),m=c("./device"),y=c("object-assign"),d=c("./object-pool"),p=l("utils:warn");g.exports.bind=c("./bind"),g.exports.coordinates=c("./coordinates"),g.exports.debug=l,g.exports.device=m,g.exports.entity=c("./entity"),g.exports.forceCanvasResizeSafariMobile=c("./forceCanvasResizeSafariMobile"),g.exports.isIE11=c("./is-ie11"),g.exports.material=c("./material"),g.exports.objectPool=d,g.exports.split=c("./split").split,g.exports.styleParser=c("./styleParser"),g.exports.trackedControls=c("./tracked-controls"),g.exports.checkHeadsetConnected=function(){return p("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),m.checkHeadsetConnected(arguments)},g.exports.isGearVR=g.exports.device.isGearVR=function(){p("`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`")},g.exports.isIOS=function(){return p("`utils.isIOS` has moved to `utils.device.isIOS`"),m.isIOS(arguments)},g.exports.isOculusGo=g.exports.device.isOculusGo=function(){p("`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`")},g.exports.isMobile=function(){return p("`utils.isMobile has moved to `utils.device.isMobile`"),m.isMobile(arguments)},g.exports.throttle=function(b,E,S){var x;return S&&(b=g.exports.bind(b,S)),function(){var T=Date.now(),_=typeof x=="undefined"?E:T-x;(typeof x=="undefined"||_>=E)&&(x=T,b.apply(null,arguments))}},g.exports.throttleTick=function(b,E,S){var x;return S&&(b=g.exports.bind(b,S)),function(T,_){var D=typeof x=="undefined"?_:T-x;(typeof x=="undefined"||D>=E)&&(x=T,b(T,D))}},g.exports.debounce=function(b,E,S){var x;return function(){var T=this,_=arguments,D=function(){x=null,S||b.apply(T,_)},C=S&&!x;clearTimeout(x),x=setTimeout(D,E),C&&b.apply(T,_)}},g.exports.extend=y,g.exports.extendDeep=h,g.exports.clone=function(b){return JSON.parse(JSON.stringify(b))};var v=function(){var b=d.createPool(function(){return[]});return function(E,S){var x,T,_,D,C,I;if(E===void 0||S===void 0||E===null||S===null||!(E&&S&&E.constructor===Object&&S.constructor===Object||E.constructor===Array&&S.constructor===Array))return E===S;T=b.use(),_=b.use(),T.length=0,_.length=0;for(x in E)T.push(x);for(x in S)_.push(x);if(T.length!==_.length)return b.recycle(T),b.recycle(_),!1;for(D=0;D<T.length;++D)if(C=E[T[D]],I=S[T[D]],typeof C=="object"||typeof I=="object"||Array.isArray(C)&&Array.isArray(I)){if(C===I)continue;if(!v(C,I))return b.recycle(T),b.recycle(_),!1}else if(C!==I)return b.recycle(T),b.recycle(_),!1;return b.recycle(T),b.recycle(_),!0}}();g.exports.deepEqual=v,g.exports.diff=function(){var b=[];return function(E,S,x){var T,_,D,C,I,B,U;C=x||{},b.length=0;for(I in E)b.push(I);if(!S)return C;for(D in S)b.indexOf(D)===-1&&b.push(D);for(B=0;B<b.length;B++)I=b[B],T=E[I],_=S[I],U=T&&_&&T.constructor===Object&&_.constructor===Object,(U&&!v(T,_)||!U&&T!==_)&&(C[I]=_);return C}}(),g.exports.shouldCaptureKeyEvent=function(b){return b.metaKey?!1:document.activeElement===document.body},g.exports.splitString=function(b,E){typeof E=="undefined"&&(E=" ");var S=new RegExp(E,"g");return b=(b||"").replace(S,E),b.split(E)},g.exports.getElData=function(b,E){E=E||{};var S={};Object.keys(E).forEach(x);function x(T){b.hasAttribute(T)&&(S[T]=b.getAttribute(T))}return S},g.exports.getUrlParameter=function(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var E=new RegExp("[\\?&]"+b+"=([^&#]*)"),S=E.exec(location.search);return S===null?"":decodeURIComponent(S[1].replace(/\+/g," "))},g.exports.isIframed=function(){return window.top!==window.self},g.exports.findAllScenes=function(b){for(var E=[],S=b.getElementsByTagName("*"),x=0,T=S.length;x<T;x++)S[x].isScene&&E.push(S[x]);return E},g.exports.srcLoader=c("./src-loader")},{"./bind":199,"./coordinates":200,"./debug":201,"./device":202,"./entity":203,"./forceCanvasResizeSafariMobile":204,"./is-ie11":207,"./material":209,"./object-pool":210,"./split":211,"./src-loader":212,"./styleParser":213,"./tracked-controls":214,"deep-assign":10,"object-assign":39}],206:[function(c,g,L){window.addEventListener("orientationchange",function(){document.documentElement.style.height="initial",setTimeout(function(){document.documentElement.style.height="100%",setTimeout(function(){window.scrollTo(0,1)},500)},500)})},{}],207:[function(c,g,L){function l(){var h=-1,m=navigator.userAgent,y;return navigator.appName==="Microsoft Internet Explorer"?(y=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),y.exec(m)!=null&&(h=parseFloat(RegExp.$1))):navigator.appName==="Netscape"&&(y=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),y.exec(m)!=null&&(h=parseFloat(RegExp.$1))),h}g.exports=l()===11},{}],208:[function(c,g,L){g.exports=function(h){return/(iphone|ipod|ipad).*os.(7_|8_|9_)/i.test(h)}},{}],209:[function(c,g,L){var l=c("../lib/three"),h=["application/x-mpegurl","application/vnd.apple.mpegurl"],m=new Set(["emissiveMap","envMap","map","specularMap"]);g.exports.updateMapMaterialFromData=function(d,p,v,b){var E=v.el,S=v.material,x=E.sceneEl.systems.renderer,T=b[p];if(v.materialSrcs||(v.materialSrcs={}),!T){delete v.materialSrcs[d],D(null);return}if(T===v.materialSrcs[d])return;v.materialSrcs[d]=T,T instanceof l.Texture?D(T):E.sceneEl.systems.material.loadTexture(T,{src:T,repeat:b.repeat,offset:b.offset,npot:b.npot},_);function _(C){v.materialSrcs[d]===T&&D(C)}function D(C){S[d]=C,C&&m.has(d)&&x.applyColorCorrection(C),S.needsUpdate=!0,y(E,C)}},g.exports.updateMap=function(d,p){return g.exports.updateMapMaterialFromData("map","src",d,p)},g.exports.updateDistortionMap=function(d,p,v){var b=d;d==="ambientOcclusion"&&(b="ao");var E=p.el,S=p.material,x=E.sceneEl.systems.renderer,T=v[d+"Map"],_={};if(_.src=T,_.offset=v[d+"TextureOffset"],_.repeat=v[d+"TextureRepeat"],_.wrap=v[d+"TextureWrap"],T){if(T===p[d+"TextureSrc"])return;p[d+"TextureSrc"]=T,E.sceneEl.systems.material.loadTexture(T,_,D);return}if(!S.map)return;D(null);function D(C){var I=b+"Map";S[I]=C,C&&m.has(I)&&x.applyColorCorrection(C),S.needsUpdate=!0,y(E,C)}};function y(d,p){!p||(d.emit("materialtextureloaded",{src:p.image,texture:p}),!(!p.image||p.image.tagName!=="VIDEO")&&(p.image.addEventListener("loadeddata",function(){!d.components||!d.components.material||(p.needsCorrectionBGRA&&p.needsCorrectionFlipY&&["standard","flat"].indexOf(d.components.material.data.shader)!==-1&&d.setAttribute("material","shader","ios10hls"),d.emit("materialvideoloadeddata",{src:p.image,texture:p}))}),p.image.addEventListener("ended",function(){d.emit("materialvideoended",{src:p.image,texture:p})})))}g.exports.handleTextureEvents=y,g.exports.isHLS=function(d,p){return!!(p&&h.includes(p.toLowerCase())||d&&d.toLowerCase().indexOf(".m3u8")>0)}},{"../lib/three":179}],210:[function(c,g,L){var l=Object.freeze(Object.create(null));function h(){return{}}g.exports.createPool=function(p){var v=[],b=null;p=p||h;function E(){var _;return(b===null||b===v.length)&&x(v.length||5),_=v[b],v[b++]=l,m(_),_}function S(_){if(_ instanceof Object){if(b===null||b===-1){v[v.length]=_;return}v[--b]=_}}function x(_){var D,C;if(_=_===void 0?v.length:_,_>0&&b==null&&(b=0),_>0)for(D=v.length,v.length+=Number(_),C=D;C<v.length;C++)v[C]=p();return v.length}function T(){return v.length}return{grow:x,pool:v,recycle:S,size:T,use:E}};function m(d){var p;if(!(!d||d.constructor!==Object))for(p in d)d[p]=void 0}g.exports.clearObject=m;function y(d,p){var v;if(!(!d||d.constructor!==Object))for(v in d)v in p||delete d[v]}g.exports.removeUnusedKeys=y},{}],211:[function(c,g,L){g.exports.split=function(){var l={};return function(h,m){return m in l||(l[m]={}),h in l[m]||(l[m][h]=h.split(m)),l[m][h]}}()},{}],212:[function(c,g,L){var l=c("./debug"),h=l("utils:src-loader:warn");function m(E,S,x){p(E,function(_){if(_){S(E);return}x(E)})}function y(E,S){var x,T="",_,D,C=[];for(_=0;_<5;_++)T+="(url\\((?:[^\\)]+)\\),\\s*)";T+="(url\\((?:[^\\)]+)\\)\\s*)",D=E.match(new RegExp(T));function I(B){C.push(B),C.length===6&&S(C)}if(D){for(_=1;_<7;_++)m(d(D[_]),I);return}if(x=b(E),!!x){if(x.tagName==="A-CUBEMAP"&&x.srcs)return S(x.srcs);h('Selector "%s" does not point to <a-cubemap>',E)}}function d(E){var S=E.match(/\url\((.+)\)/);if(!!S)return S[1]}function p(E,S){var x;if(E.tagName){S(E.tagName==="IMG");return}x=new XMLHttpRequest,x.open("HEAD",E),x.addEventListener("load",function(T){var _;x.status>=200&&x.status<300?(_=x.getResponseHeader("Content-Type"),_==null?v(E,S):_.startsWith("image")?S(!0):S(!1)):v(E,S),x.abort()}),x.send()}function v(E,S){var x=new Image;x.addEventListener("load",T);function T(){S(!0)}x.addEventListener("error",_);function _(){S(!1)}x.src=E}function b(E){try{var S=document.querySelector(E);return S||h('No element was found matching the selector: "%s"',E),S}catch{h('"%s" is not a valid selector',E);return}}g.exports={parseUrl:d,validateSrc:m,validateCubemapSrc:y}},{"./debug":201}],213:[function(c,g,L){var l=/-([a-z])/g;g.exports.parse=function(b,E){var S;return typeof b!="string"||(S=d(b,E),S[""])?b:m(S)},g.exports.stringify=function(b){return typeof b=="string"?b:p(b)};function h(b){return b.replace(l,v)}g.exports.toCamelCase=h;function m(b){var E,S;for(S in b)E=h(S),S!==E&&(b[E]=b[S],delete b[S]);return b}g.exports.transformKeysToCamelCase=m;var y=function(){var b=[],E=/url\([^)]+$/;return function(x){var T="",_,D=0,C=";";for(b.length=0;D<x.length;){if(_=x.indexOf(C,D),_===-1&&(_=x.length),T+=x.substring(D,_),E.test(T)){T+=";",D=_+1;continue}b.push(T.trim()),T="",D=_+1}return b}}();function d(b,E){var S,x,T,_,D,C;for(E=E||{},S=y(b),x=0;x<S.length;x++)T=S[x],!!T&&(_=T.indexOf(":"),D=T.substr(0,_).trim(),C=T.substr(_+1).trim(),E[D]=C);return E}function p(b){var E,S=0,x=0,T="";for(E in b)S++;for(E in b)T+=E+": "+b[E],x<S-1&&(T+="; "),x++;return T}function v(b){return b[1].toUpperCase()}},{}],214:[function(c,g,L){var l=c("../constants").DEFAULT_HANDEDNESS,h=["x","y","z","w"],m=2;g.exports.checkControllerPresentAndSetup=function(b,E,S){var x=b.el,T,_=x.sceneEl.hasWebXR,D=_?d:y,C;if(T=D(b,E,S),C=!!T,b.controllerPresent&&!b.controllerEventsActive&&!_&&b.addEventListeners(),C===b.controllerPresent)return C;b.controllerPresent=C,C?(b.addEventListeners(),b.injectTrackedControls(T),x.emit("controllerconnected",{name:b.name,component:b})):(b.removeEventListeners(),x.emit("controllerdisconnected",{name:b.name,component:b}))};function y(b,E,S){var x,T=b.el.sceneEl,_,D=S.index||0;return!E||(_=T&&T.systems["tracked-controls-webvr"],!_)||(x=_.controllers,!x.length)?!1:!!p(x,null,E,S.hand,D)}function d(b,E,S){var x,T=b.el.sceneEl,_=T&&T.systems["tracked-controls-webxr"];return!_||(x=_.controllers,!x||!x.length)?!1:v(x,E,S.hand,S.index,S.iterateControllerProfiles,S.handTracking)}g.exports.isControllerPresentWebVR=y,g.exports.isControllerPresentWebXR=d;function p(b,E,S,x,T){var _,D,C=0,I=T>=0?T:0;for(D=0;D<b.length;D++)if(_=b[D],!(S&&!_.id.startsWith(S))&&!(!S&&_.id!==E)&&!(x&&_.hand&&x!==_.hand)){if(x&&!_.hand)I=m*T+(x===l?0:1);else return _;if(C===I)return _;++C}}function v(b,E,S,x,T,_){var D,C,I,B=!1,U,W;for(D=0;D<b.length;D++){if(I=b[D],W=I.profiles,_)B=I.hand;else if(T)for(C=0;C<W.length&&(B=W[C].startsWith(E),!B);C++);else B=W.length>0&&W[0].startsWith(E);if(!!B){if(U=I.handedness==="right"||I.handedness==="left",U){if(I.handedness===S)return b[D]}else if(D===x)return b[D]}}}g.exports.findMatchingControllerWebVR=p,g.exports.findMatchingControllerWebXR=v,g.exports.emitIfAxesChanged=function(b,E,S){var x,T,_,D,C;for(T in E){for(x=E[T],_=!1,C=0;C<x.length;C++)S.detail.changed[x[C]]&&(_=!0);if(!!_){for(D={},C=0;C<x.length;C++)D[h[C]]=S.detail.axis[x[C]];b.el.emit(T+"moved",D)}}},g.exports.onButtonEvent=function(b,E,S,x){var T=x?S.mapping[x]:S.mapping,_=T.buttons[b];S.el.emit(_+E),S.updateModel&&S.updateModel(_,E)}},{"../constants":123}],215:[function(c,g,L){THREE.DeviceOrientationControls=function(l){var h=this;this.object=l,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var m=function(p){h.deviceOrientation=p},y=function(){h.screenOrientation=window.orientation||0},d=function(){var p=new THREE.Vector3(0,0,1),v=new THREE.Euler,b=new THREE.Quaternion,E=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(S,x,T,_,D){v.set(T,x,-_,"YXZ"),S.setFromEuler(v),S.multiply(E),S.multiply(b.setFromAxisAngle(p,-D))}}();this.connect=function(){y(),window.addEventListener("orientationchange",y,!1),window.addEventListener("deviceorientation",m,!1),h.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",y,!1),window.removeEventListener("deviceorientation",m,!1),h.enabled=!1},this.update=function(){if(h.enabled!==!1){var p=h.deviceOrientation;if(p){var v=p.alpha?THREE.Math.degToRad(p.alpha)+h.alphaOffset:0,b=p.beta?THREE.Math.degToRad(p.beta):0,E=p.gamma?THREE.Math.degToRad(p.gamma):0,S=h.screenOrientation?THREE.Math.degToRad(h.screenOrientation):0;d(h.object.quaternion,v,b,E,S)}}},this.dispose=function(){h.disconnect()},this.connect()}},{}],216:[function(c,g,L){window.glStats=function(){var l=null,h=0,m=0,y=0,d=0,p=0,v=0,b=0;function E(B,U){return function(){U.apply(this,arguments),B.apply(this,arguments)}}WebGLRenderingContext.prototype.drawArrays=E(WebGLRenderingContext.prototype.drawArrays,function(){h++,arguments[0]==this.POINTS?v+=arguments[2]:p+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=E(WebGLRenderingContext.prototype.drawElements,function(){m++,d+=arguments[1]/3,p+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=E(WebGLRenderingContext.prototype.useProgram,function(){y++}),WebGLRenderingContext.prototype.bindTexture=E(WebGLRenderingContext.prototype.bindTexture,function(){b++});var S={allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},x=[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],T=[{base:"allcalls",steps:["drawelements","drawarrays"]}];function _(){l("allcalls").set(h+m),l("drawElements").set(m),l("drawArrays").set(h),l("bindTexture").set(b),l("useProgram").set(y),l("glfaces").set(d),l("glvertices").set(p),l("glpoints").set(v)}function D(){h=0,m=0,y=0,d=0,p=0,v=0,b=0}function C(){}function I(B){l=B}return{update:_,start:D,end:C,attach:I,values:S,groups:x,fractions:T}},window.threeStats=function(l){var h=null,m={"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},y=[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],d=[];function p(){h("renderer.info.memory.geometries").set(l.info.memory.geometries),h("renderer.info.programs").set(l.info.programs.length),h("renderer.info.memory.textures").set(l.info.memory.textures),h("renderer.info.render.calls").set(l.info.render.calls),h("renderer.info.render.triangles").set(l.info.render.triangles),h("renderer.info.render.points").set(l.info.render.points)}function v(){}function b(){}function E(S){h=S}return{update:p,start:v,end:b,attach:E,values:m,groups:y,fractions:d}},window.BrowserStats=function(){var l=null,h=0,m=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize===0&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var y={memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},d=[{caption:"Browser",values:["memory","total"]}],p=[{base:"total",steps:["memory"]}],v=Math.log(1024);function b(_){var D=100,C=Math.floor(Math.log(_)/v);return Math.round(_*D/Math.pow(1024,C))/D}function E(){h=b(performance.memory.usedJSHeapSize),m=b(performance.memory.totalJSHeapSize),l("memory").set(h),l("total").set(m)}function S(){h=0}function x(){}function T(_){l=_}return{update:E,start:S,end:x,attach:T,values:y,groups:d,fractions:p}},typeof g=="object"&&(g.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats})},{}],217:[function(c,g,L){(function(){"performance"in window||(window.performance={});var l=window.performance;if(!("now"in l)){var h=Date.now();l.timing&&l.timing.navigationStart&&(h=l.timing.navigationStart),l.now=function(){return Date.now()-h}}l.mark||(l.mark=function(){}),l.measure||(l.measure=function(){})})(),window.rStats=function(h){function m(J,le){for(var te=Object.keys(J),ue=0,Y=te.length;ue<Y;ue++)le(te[ue])}function y(J){var le=document.createElement("link");le.href=J,le.rel="stylesheet",le.type="text/css",document.getElementsByTagName("head")[0].appendChild(le)}var d=h||{},p=d.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],v="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",b=(d.CSSPath?d.CSSPath:"")+"rStats.css",E=d.css||[v,b];E.forEach(function(J){y(J)}),d.values||(d.values={});var S,x,T=10,_=200,D={};function C(J,le,te){var ue=te||{},Y=document.createElement("canvas"),de=Y.getContext("2d"),ne=0,xe=0,Be=ue.color?ue.color:"#666666",je=document.createElement("canvas"),Ge=je.getContext("2d");je.width=1,je.height=2*T,Ge.fillStyle="#444444",Ge.fillRect(0,0,1,2*T),Ge.fillStyle=Be,Ge.fillRect(0,T,1,T),Ge.fillStyle="#ffffff",Ge.globalAlpha=.5,Ge.fillRect(0,T,1,1),Ge.globalAlpha=1;var ct=document.createElement("canvas"),lt=ct.getContext("2d");ct.width=1,ct.height=2*T,lt.fillStyle="#444444",lt.fillRect(0,0,1,2*T),lt.fillStyle="#b70000",lt.fillRect(0,T,1,T),lt.globalAlpha=.5,lt.fillStyle="#ffffff",lt.fillRect(0,T,1,1),lt.globalAlpha=1;function Et(){Y.width=_,Y.height=T,Y.style.width=Y.width+"px",Y.style.height=Y.height+"px",Y.className="rs-canvas",J.appendChild(Y),de.fillStyle="#444444",de.fillRect(0,0,Y.width,Y.height)}function Ct(jt,tt){xe+=(jt-xe)*.1,ne*=.99,xe>ne&&(ne=xe),de.drawImage(Y,1,0,Y.width-1,Y.height,0,0,Y.width-1,Y.height),tt?de.drawImage(ct,Y.width-1,Y.height-xe*Y.height/ne-T):de.drawImage(je,Y.width-1,Y.height-xe*Y.height/ne-T)}return Et(),{draw:Ct}}function I(J,le){var te=document.createElement("canvas"),ue=te.getContext("2d");function Y(){te.width=_,te.height=T*le,te.style.width=te.width+"px",te.style.height=te.height+"px",te.className="rs-canvas",J.appendChild(te),ue.fillStyle="#444444",ue.fillRect(0,0,te.width,te.height)}function de(ne){ue.drawImage(te,1,0,te.width-1,te.height,0,0,te.width-1,te.height);var xe=0;m(ne,function(Be){var je=ne[Be]*te.height;ue.fillStyle=p[Be],ue.fillRect(te.width-1,xe,1,je),xe+=je})}return Y(),{draw:de}}function B(J,le){var te=J,ue,Y=0,de=0,ne=0,xe=0,Be=performance.now(),je=0,Ge=document.createElement("div"),ct=document.createElement("span"),lt=document.createElement("div"),Et=document.createTextNode(""),Ct=d?d.values[te.toLowerCase()]:null,jt=new C(Ge,te,Ct),tt=!1;ct.className="rs-counter-id",ct.textContent=Ct&&Ct.caption?Ct.caption:te,lt.className="rs-counter-value",lt.appendChild(Et),Ge.appendChild(ct),Ge.appendChild(lt),le?le.div.appendChild(Ge):x.appendChild(Ge),ue=performance.now();function pt(Q){if(Ct&&Ct.average){xe+=Q,je++;var K=performance.now();K-Be>=(Ct.avgMs||1e3)&&(ne=xe/je,xe=0,Be=K,je=0)}}function $e(){ue=performance.now(),d.userTimingAPI&&performance.mark(te+"-start"),tt=!0}function Tt(){Y=performance.now()-ue,d.userTimingAPI&&(performance.mark(te+"-end"),tt&&performance.measure(te,te+"-start",te+"-end")),pt(Y)}function Kt(){Tt(),$e()}function _t(){var Q=Ct&&Ct.average?ne:Y;Et.nodeValue=Math.round(Q*100)/100;var K=Ct&&(Ct.below&&Y<Ct.below||Ct.over&&Y>Ct.over);jt.draw(Y,K),Ge.className=K?"rs-counter-base alarm":"rs-counter-base"}function se(){var Q=performance.now(),K=Q-ue;de++,K>1e3&&(Ct&&Ct.interpolate===!1?Y=de:Y=de*1e3/K,de=0,ue=Q,pt(Y))}function ce(Q){Y=Q,pt(Y)}return{set:ce,start:$e,tick:Kt,end:Tt,frame:se,value:function(){return Y},draw:_t}}function U(J){var le=J.toLowerCase();if(le===void 0&&(le="default"),D[le])return D[le];var te=null;d&&d.groups&&m(d.groups,function(Y){var de=d.groups[parseInt(Y,10)];!te&&de.values.indexOf(le.toLowerCase())!==-1&&(te=de)});var ue=new B(le,te);return D[le]=ue,ue}function W(){if(d.plugins){d.values||(d.values={}),d.groups||(d.groups=[]),d.fractions||(d.fractions=[]);for(var J=0;J<d.plugins.length;J++)d.plugins[J].attach(U),m(d.plugins[J].values,function(le){d.values[le]=d.plugins[J].values[le]}),d.groups=d.groups.concat(d.plugins[J].groups),d.fractions=d.fractions.concat(d.plugins[J].fractions)}else d.plugins={};S=document.createElement("div"),S.className="rs-base",x=document.createElement("div"),x.className="rs-container",x.style.height="auto",S.appendChild(x),document.body.appendChild(S),!!d&&(d.groups&&m(d.groups,function(le){var te=d.groups[parseInt(le,10)],ue=document.createElement("div");ue.className="rs-group",te.div=ue;var Y=document.createElement("h1");Y.textContent=te.caption,Y.addEventListener("click",function(de){this.classList.toggle("hidden"),de.preventDefault()}.bind(ue)),x.appendChild(Y),x.appendChild(ue)}),d.fractions&&m(d.fractions,function(le){var te=d.fractions[parseInt(le,10)],ue=document.createElement("div");ue.className="rs-fraction";var Y=document.createElement("div");Y.className="rs-legend";var de=0;m(d.fractions[le].steps,function(xe){var Be=document.createElement("p");Be.textContent=d.fractions[le].steps[xe],Be.style.color=p[de],Y.appendChild(Be),de++}),ue.appendChild(Y),ue.style.height=de*T+"px",te.div=ue;var ne=new I(ue,de);te.graph=ne,x.appendChild(ue)}))}function oe(){m(d.plugins,function(J){d.plugins[J].update()}),m(D,function(J){D[J].draw()}),d&&d.fractions&&m(d.fractions,function(J){var le=d.fractions[parseInt(J,10)],te=[],ue=D[le.base.toLowerCase()];ue&&(ue=ue.value(),m(d.fractions[J].steps,function(Y){var de=d.fractions[J].steps[parseInt(Y,10)].toLowerCase(),ne=D[de];ne&&te.push(ne.value()/ue)})),le.graph.draw(te)})}return W(),function(J){return J?U(J):{element:S,update:oe}}},typeof g=="object"&&(g.exports=window.rStats)},{}],218:[function(c,g,L){String.prototype.startsWith||(String.prototype.startsWith=function(l,h){return h=h||0,this.substr(h,l.length)===l})},{}],219:[function(c,g,L){var l={};l.base64=function(h,m){return"data:"+h+";base64,"+m},l.isMobile=function(){var h=!1;return function(m){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(m)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(m.substr(0,4)))&&(h=!0)}(navigator.userAgent||navigator.vendor||window.opera),h},l.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},l.isIFrame=function(){try{return window.self!==window.top}catch{return!0}},l.appendQueryParameter=function(h,m,y){var d=h.indexOf("?")<0?"?":"&";return h+=d+m+"="+y,h},l.getQueryParameter=function(h){h=h.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var m=new RegExp("[\\?&]"+h+"=([^&#]*)"),y=m.exec(location.search);return y===null?"":decodeURIComponent(y[1].replace(/\+/g," "))},l.isLandscapeMode=function(){return window.orientation==90||window.orientation==-90},g.exports=l},{}],220:[function(c,g,L){var l=c("./util.js");function h(){var d=document.createElement("video");d.addEventListener("ended",function(){d.play()}),this.request=function(){d.paused&&(d.src=l.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),d.play())},this.release=function(){d.pause(),d.src=""}}function m(){var d=null;this.request=function(){d||(d=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){d&&(clearInterval(d),d=null)}}function y(){var d=navigator.userAgent||navigator.vendor||window.opera;return d.match(/iPhone/i)||d.match(/iPod/i)?m:h}g.exports=y()},{"./util.js":219}]},{},[177])(177)})})(JS);export{Na as F,E0 as T,$g as a,ji as b,i_ as c,D2 as d,e_ as e,L2 as f,n_ as g,t_ as h,o_ as i,a_ as j,c_ as k,u_ as l,h_ as m,Md as n,_2 as o,$S as p,l_ as q,r_ as r,ZS as t,s_ as v,XM as w};
